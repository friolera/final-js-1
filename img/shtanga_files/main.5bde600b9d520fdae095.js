(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},A0Lk:function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function o(e,n){function i(){var e=o;r(e)&&e.a.parentNode&&n(e.g)}var o=e;t(e.b,i),t(e.c,i),r(e)}function s(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var a=null,l=null,c=null,u=null;function h(){return null===u&&(u=!!document.fonts),u}function d(){if(null===c){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}c=""!==e.style.font}return c}function p(e,t){return[e.style,e.weight,d()?e.stretch:"","100px",t].join(" ")}s.prototype.load=function(e,t){var r=this,s=e||"BESbswy",c=0,u=t||3e3,d=(new Date).getTime();return new Promise((function(e,t){if(h()&&!function(){if(null===l)if(h()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var f=new Promise((function(e,t){!function n(){(new Date).getTime()-d>=u?t(Error(u+"ms timeout exceeded")):document.fonts.load(p(r,'"'+r.family+'"'),s).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),m=new Promise((function(e,t){c=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([m,f]).then((function(){clearTimeout(c),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=g&&-1!=v||-1!=g&&-1!=y||-1!=v&&-1!=y)&&((t=g!=v&&g!=y&&v!=y)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(g==_&&v==_&&y==_||g==b&&v==b&&y==b||g==w&&v==w&&y==w)),t=!t),t&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(c),e(r))}var h=new n(s),f=new n(s),m=new n(s),g=-1,v=-1,y=-1,_=-1,b=-1,w=-1,x=document.createElement("div");x.dir="ltr",i(h,p(r,"sans-serif")),i(f,p(r,"serif")),i(m,p(r,"monospace")),x.appendChild(h.a),x.appendChild(f.a),x.appendChild(m.a),document.body.appendChild(x),_=h.a.offsetWidth,b=f.a.offsetWidth,w=m.a.offsetWidth,function e(){if((new Date).getTime()-d>=u)x.parentNode&&x.parentNode.removeChild(x),t(Error(u+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(g=h.a.offsetWidth,v=f.a.offsetWidth,y=m.a.offsetWidth,l()),c=setTimeout(e,50)}}(),o(h,(function(e){g=e,l()})),i(h,p(r,'"'+r.family+'",sans-serif')),o(f,(function(e){v=e,l()})),i(f,p(r,'"'+r.family+'",serif')),o(m,(function(e){y=e,l()})),i(m,p(r,'"'+r.family+'",monospace'))}))}))},e.exports=s}()},BWoW:function(e,t){e.exports="varying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\r\n}"},C9BG:function(e,t){e.exports="#define pi 3.141592653589793\r\n#define saturate(x) clamp(x, 0., 1.)\r\n\r\nvarying vec2 vUv;\r\n\r\nuniform vec2 fsCorr;\r\nuniform sampler2D t;\r\nuniform float fadeIn;\r\n\r\nvoid main() {\r\n  vec2 uv = .5 - (.5 - vUv) * fsCorr;\r\n\r\n  float viewport = step(0., uv.x) * step(uv.x, 1.) * step(0., uv.y) * step(uv.y, 1.);\r\n\r\n  vec3 color = texture2D(t, uv).rgb;\r\n  color = mix(vec3(.95), color, fadeIn * viewport);\r\n\r\n  gl_FragColor = vec4(color, 1.);\r\n}"},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function s(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},l=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function c(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(i(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof u?d(a.errors):[a]}}if(l(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(c(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof u?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new u(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const i=new f(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,r){let o;super(),this._parentSubscriber=e;let s=this;i(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==a&&(s=Object.create(t),i(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(s(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(e){return e}let y=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,r=function(e,t,n){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=_(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?v:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=_(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function _(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const b=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class x extends f{constructor(e){super(e),this.destination=e}}let S=(()=>{class e extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new x(this)}lift(e){const t=new M(this,this);return t.operator=e,t}next(e){if(this.closed)throw new b;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new b;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new b;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new b;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new y;return e.source=this,e}}return e.create=(e,t)=>new M(e,t),e})();class M extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function E(e){return e&&"function"==typeof e.schedule}function T(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new C(e,t))}}class C{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new A(e,this.project,this.thisArg))}}class A extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const P=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=O(),k=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function R(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const N=e=>{if(e&&"function"==typeof e[g])return i=e,e=>{const t=i[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(k(e))return P(e);if(R(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e);if(e&&"function"==typeof e[I])return t=e,e=>{const n=t[I]();for(;;){let t;try{t=n.next()}catch(i){return e.error(i),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,i};function L(e,t){return new y(n=>{const i=new h;let r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function D(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new y(n=>{const i=new h;return i.add(t.schedule(()=>{const r=e[g]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if(R(e))return function(e,t){return new y(n=>{const i=new h;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if(k(e))return L(e,t);if(function(e){return e&&"function"==typeof e[I]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new y(n=>{const i=new h;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[I](),i.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=r.next();e=n.value,t=n.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())})))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof y?e:new y(N(e))}class F extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function z(e,t){if(!t.closed)return e instanceof y?e.subscribe(t):N(e)(t)}function H(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(H((n,i)=>D(e(n,i)).pipe(T((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new B(e,n)))}class B{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new j(e,this.project,this.concurrent))}}class j extends U{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new F(this),n=this.destination;n.add(t);const i=z(e,t);i!==t&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function V(e=Number.POSITIVE_INFINITY){return H(v,e)}function W(e,t){return t?L(e,t):new y(P(e))}function G(){return function(e){return e.lift(new q(e))}}class q{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new X(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class X extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Y extends y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new J(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return G()(this)}}const Z=(()=>{const e=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class J extends x{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function $(){return new S}function Q(e){return{toString:e}.toString()}const K="__parameters__";function ee(e,t,n){return Q(()=>{const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty(K)?e[K]:Object.defineProperty(e,K,{value:[]})[K];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}const te=ee("Inject",e=>({token:e})),ne=ee("Optional"),ie=ee("Self"),re=ee("SkipSelf");var oe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function se(e){for(let t in e)if(e[t]===se)return t;throw Error("Could not find renamed property on target object.")}function ae(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function le(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function ce(e){return ue(e,e[de])||ue(e,e[me])}function ue(e,t){return t&&t.token===e?t:null}function he(e){return e&&(e.hasOwnProperty(pe)||e.hasOwnProperty(ge))?e[pe]:null}const de=se({"\u0275prov":se}),pe=se({"\u0275inj":se}),fe=se({"\u0275provFallback":se}),me=se({ngInjectableDef:se}),ge=se({ngInjectorDef:se});function ve(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ye(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const _e=se({__forward_ref__:se});function be(e){return e.__forward_ref__=be,e.toString=function(){return ve(this())},e}function we(e){return"function"==typeof(t=e)&&t.hasOwnProperty(_e)&&t.__forward_ref__===be?e():e;var t}const xe="undefined"!=typeof globalThis&&globalThis,Se="undefined"!=typeof window&&window,Me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ee="undefined"!=typeof global&&global,Te=xe||Ee||Se||Me,Ce=se({"\u0275cmp":se}),Ae=se({"\u0275dir":se}),Pe=se({"\u0275pipe":se}),Oe=se({"\u0275mod":se}),Ie=se({"\u0275loc":se}),ke=se({"\u0275fac":se}),Re=se({__NG_ELEMENT_ID__:se});class Ne{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const Le=new Ne("INJECTOR",-1),De={},Fe=/\n/gm,Ue="__source",ze=se({provide:String,useValue:se});let He,Be=void 0;function je(e){const t=Be;return Be=e,t}function Ve(e){const t=He;return He=e,t}function We(e,t=oe.Default){if(void 0===Be)throw new Error("inject() must be called from an injection context");return null===Be?qe(e,void 0,t):Be.get(e,t&oe.Optional?null:void 0,t)}function Ge(e,t=oe.Default){return(He||We)(we(e),t)}function qe(e,t,n){const i=ce(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&oe.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${ve(e)}]`)}function Xe(e){const t=[];for(let n=0;n<e.length;n++){const i=we(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=oe.Default;for(let t=0;t<i.length;t++){const r=i[t];r instanceof ne||"Optional"===r.ngMetadataName||r===ne?n|=oe.Optional:r instanceof re||"SkipSelf"===r.ngMetadataName||r===re?n|=oe.SkipSelf:r instanceof ie||"Self"===r.ngMetadataName||r===ie?n|=oe.Self:e=r instanceof te||r===te?r.token:r}t.push(Ge(e,n))}else t.push(Ge(i))}return t}class Ye{get(e,t=De){if(t===De){const t=new Error(`NullInjectorError: No provider for ${ve(e)}!`);throw t.name="NullInjectorError",t}return t}}class Ze{}class Je{}function $e(e,t){e.forEach(e=>Array.isArray(e)?$e(e,t):t(e))}function Qe(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ke(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function et(e,t,n){let i=nt(e,t);return i>=0?e[1|i]=n:(i=~i,function(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function tt(e,t){const n=nt(e,t);if(n>=0)return e[1|n]}function nt(e,t){return function(e,t,n){let i=0,r=e.length>>1;for(;r!==i;){const n=i+(r-i>>1),o=e[n<<1];if(t===o)return n<<1;o>t?r=n:i=n+1}return~(r<<1)}(e,t)}var it=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),rt=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const ot={},st=[];let at=0;function lt(e){return Q(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===it.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||st,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||rt.Emulated,id:"c",styles:e.styles||st,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,r=e.features,o=e.pipes;return n.id+=at++,n.inputs=pt(e.inputs,t),n.outputs=pt(e.outputs),r&&r.forEach(e=>e(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(ct):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(ut):null,n})}function ct(e){return mt(e)||function(e){return e[Ae]||null}(e)}function ut(e){return function(e){return e[Pe]||null}(e)}const ht={};function dt(e){const t={type:e.type,bootstrap:e.bootstrap||st,declarations:e.declarations||st,imports:e.imports||st,exports:e.exports||st,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Q(()=>{ht[e.id]=e.type}),t}function pt(e,t){if(null==e)return ot;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}const ft=lt;function mt(e){return e[Ce]||null}function gt(e,t){return e.hasOwnProperty(ke)?e[ke]:null}function vt(e,t){const n=e[Oe]||null;if(!n&&!0===t)throw new Error(`Type ${ve(e)} does not have '\u0275mod' property.`);return n}const yt=20,_t=10;function bt(e){return Array.isArray(e)&&"object"==typeof e[1]}function wt(e){return Array.isArray(e)&&!0===e[1]}function xt(e){return 0!=(8&e.flags)}function St(e){return 2==(2&e.flags)}function Mt(e){return 1==(1&e.flags)}function Et(e){return null!==e.template}function Tt(e){return 0!=(512&e[2])}class Ct{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function At(){return Pt}function Pt(e){return e.type.prototype.ngOnChanges&&(e.setInput=It),Ot}function Ot(){const e=kt(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===ot)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function It(e,t,n,i){const r=kt(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ot,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new Ct(l&&l.currentValue,t,s===ot),e[i]=t}function kt(e){return e.__ngSimpleChanges__||null}At.ngInherit=!0;const Rt="http://www.w3.org/2000/svg";let Nt=void 0;function Lt(){return void 0!==Nt?Nt:"undefined"!=typeof document?document:void 0}function Dt(e){return!!e.listen}const Ft={createRenderer:(e,t)=>Lt()};function Ut(e){for(;Array.isArray(e);)e=e[0];return e}function zt(e,t){return Ut(t[e+yt])}function Ht(e,t){return Ut(t[e.index])}function Bt(e,t){return e.data[t+yt]}function jt(e,t){const n=t[e];return bt(n)?n:n[0]}function Vt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Wt(e){return 4==(4&e[2])}function Gt(e){return 128==(128&e[2])}function qt(e,t){return null===e||null==t?null:e[t]}function Xt(e){e[18]=0}function Yt(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Zt={lFrame:mn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Jt(){return Zt.bindingsEnabled}function $t(){return Zt.lFrame.lView}function Qt(){return Zt.lFrame.tView}function Kt(e){Zt.lFrame.contextLView=e}function en(){return Zt.lFrame.currentTNode}function tn(e,t){Zt.lFrame.currentTNode=e,Zt.lFrame.isParent=t}function nn(){return Zt.lFrame.isParent}function rn(){Zt.lFrame.isParent=!1}function on(){return Zt.checkNoChangesMode}function sn(e){Zt.checkNoChangesMode=e}function an(){return Zt.lFrame.bindingIndex++}function ln(e,t){const n=Zt.lFrame;n.bindingIndex=n.bindingRootIndex=e,cn(t)}function cn(e){Zt.lFrame.currentDirectiveIndex=e}function un(){return Zt.lFrame.currentQueryIndex}function hn(e){Zt.lFrame.currentQueryIndex=e}function dn(e,t){const n=fn();Zt.lFrame=n,n.currentTNode=t,n.lView=e}function pn(e){const t=fn(),n=e[1];Zt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex}function fn(){const e=Zt.lFrame,t=null===e?null:e.child;return null===t?mn(e):t}function mn(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function gn(){const e=Zt.lFrame;return Zt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const vn=gn;function yn(){const e=gn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function _n(){return Zt.lFrame.selectedIndex}function bn(e){Zt.lFrame.selectedIndex=e}function wn(){const e=Zt.lFrame;return Bt(e.tView,e.selectedIndex)}function xn(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=t;i&&(e.contentHooks||(e.contentHooks=[])).push(-n,i),r&&((e.contentHooks||(e.contentHooks=[])).push(n,r),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,r)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Sn(e,t,n){Tn(e,t,3,n)}function Mn(e,t,n,i){(3&e[2])===n&&Tn(e,t,n,i)}function En(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Tn(e,t,n,i){const r=null!=i?i:-1;let o=0;for(let s=void 0!==i?65535&e[18]:0;s<t.length;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=i&&o>=i)break}else t[s]<0&&(e[18]+=65536),(o<r||-1==r)&&(Cn(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Cn(e,t,n,i){const r=n[i]<0,o=n[i+1],s=e[r?-n[i]:n[i]];r?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,o.call(s)):o.call(s)}const An=-1;class Pn{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function On(e,t,n){const i=Dt(e);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const s=n[r++],a=n[r++],l=n[r++];i?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=n[++r];kn(s)?i&&e.setProperty(t,s,a):i?e.setAttribute(t,s,a):t.setAttribute(s,a),r++}}return r}function In(e){return 3===e||4===e||6===e}function kn(e){return 64===e.charCodeAt(0)}function Rn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||Nn(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function Nn(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function Ln(e){return e!==An}function Dn(e){return 32767&e}function Fn(e,t){let n=e>>16,i=t;for(;n>0;)i=i[15],n--;return i}function Un(e){return"string"==typeof e?e:null==e?"":""+e}function zn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Un(e)}const Hn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Te))();function Bn(e){return e instanceof Function?e():e}let jn=!0;function Vn(e){const t=jn;return jn=e,t}let Wn=0;function Gn(e,t){const n=Xn(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,qn(i.data,e),qn(t,null),qn(i.blueprint,null));const r=Yn(e,t),o=e.injectorIndex;if(Ln(r)){const e=Dn(r),n=Fn(r,t),i=n[1].data;for(let r=0;r<8;r++)t[o+r]=n[e+r]|i[e+r]}return t[o+8]=r,o}function qn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Xn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Yn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){const e=r[1],t=e.type;if(i=2===t?e.declTNode:1===t?r[6]:null,null===i)return An;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return An}function Zn(e,t,n){!function(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Re)&&(i=n[Re]),null==i&&(i=n[Re]=Wn++);const r=255&i,o=1<<r,s=64&r,a=32&r,l=t.data;128&r?s?a?l[e+7]|=o:l[e+6]|=o:a?l[e+5]|=o:l[e+4]|=o:s?a?l[e+3]|=o:l[e+2]|=o:a?l[e+1]|=o:l[e]|=o}(e,t,n)}function Jn(e,t,n,i=oe.Default,r){if(null!==e){const r=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Re)?e[Re]:void 0;return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof r){dn(t,e);try{const e=r();if(null!=e||i&oe.Optional)return e;throw new Error(`No provider for ${zn(n)}!`)}finally{vn()}}else if("number"==typeof r){if(-1===r)return new ii(e,t);let o=null,s=Xn(e,t),a=An,l=i&oe.Host?t[16][6]:null;for((-1===s||i&oe.SkipSelf)&&(a=-1===s?Yn(e,t):t[s+8],a!==An&&ni(i,!1)?(o=t[1],s=Dn(a),t=Fn(a,t)):s=-1);-1!==s;){const e=t[1];if(ti(r,s,e.data)){const e=Qn(s,t,n,o,i,l);if(e!==$n)return e}a=t[s+8],a!==An&&ni(i,t[1].data[s+8]===l)&&ti(r,s,t)?(o=e,s=Dn(a),t=Fn(a,t)):s=-1}}}if(i&oe.Optional&&void 0===r&&(r=null),0==(i&(oe.Self|oe.Host))){const e=t[9],o=Ve(void 0);try{return e?e.get(n,r,i&oe.Optional):qe(n,r,i&oe.Optional)}finally{Ve(o)}}if(i&oe.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${zn(n)}]`)}const $n={};function Qn(e,t,n,i,r,o){const s=t[1],a=s.data[e+8],l=Kn(a,s,n,null==i?St(a)&&jn:i!=s&&2===a.type,r&oe.Host&&o===a);return null!==l?ei(t,s,l,a):$n}function Kn(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,u=r?a+c:e.directiveEnd;for(let h=i?a:a+c;h<u;h++){const e=s[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(r){const e=s[l];if(e&&Et(e)&&e.type===n)return l}return null}function ei(e,t,n,i){let r=e[n];const o=t.data;if(r instanceof Pn){const s=r;if(s.resolving)throw new Error("Circular dep for "+zn(o[n]));const a=Vn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ve(s.injectImpl):null;dn(e,i);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const i=Pt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&Ve(l),Vn(a),s.resolving=!1,vn()}}return r}function ti(e,t,n){const i=64&e,r=32&e;let o;return o=128&e?i?r?n[t+7]:n[t+6]:r?n[t+5]:n[t+4]:i?r?n[t+3]:n[t+2]:r?n[t+1]:n[t],!!(o&1<<e)}function ni(e,t){return!(e&oe.Self||e&oe.Host&&t)}class ii{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Jn(this._tNode,this._lView,e,void 0,t)}}function ri(e){return e.ngDebugContext}function oi(e){return e.ngOriginalError}function si(e,...t){e.error(...t)}class ai{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||si}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?ri(e)?ri(e):this._findContext(oi(e)):null}_findOriginalError(e){let t=oi(e);for(;t&&oi(t);)t=oi(t);return t}}class li{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function ci(e){return e instanceof li?e.changingThisBreaksApplicationSecurity:e}function ui(e,t){const n=function(e){return e instanceof li&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===t}let hi=!0,di=!1;function pi(){return di=!0,hi}class fi{getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(t){return null}}}class mi{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;const n=this.inertDocument.createElement("body");return n.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const gi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,vi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yi(e){return(e=String(e)).match(gi)||e.match(vi)?e:(pi()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function _i(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function bi(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const wi=_i("area,br,col,hr,img,wbr"),xi=_i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Si=_i("rp,rt"),Mi=bi(Si,xi),Ei=bi(wi,bi(xi,_i("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bi(Si,_i("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mi),Ti=_i("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ci=_i("srcset"),Ai=bi(Ti,Ci,_i("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_i("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pi=_i("script,style,template");class Oi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ei.hasOwnProperty(t))return this.sanitizedSomething=!0,!Pi.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,o=t.toLowerCase();if(!Ai.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=e.value;Ti[o]&&(s=yi(s)),Ci[o]&&(i=s,s=(i=String(i)).split(",").map(e=>yi(e.trim())).join(", ")),this.buf.push(" ",t,'="',Ri(s),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ei.hasOwnProperty(t)&&!wi.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Ri(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}const Ii=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ki=/([^\#-~ |!])/g;function Ri(e){return e.replace(/&/g,"&amp;").replace(Ii,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(ki,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ni;function Li(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Di=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function Fi(e){const t=zi();return t?t.sanitize(Di.HTML,e)||"":ui(e,"HTML")?ci(e):function(e,t){let n=null;try{Ni=Ni||function(e){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(e){return!1}}()?new fi:new mi(e)}(e);let i=t?String(t):"";n=Ni.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Ni.getInertBodyElement(i)}while(i!==o);const s=new Oi,a=s.sanitizeChildren(Li(n)||n);return pi()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=Li(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(Lt(),Un(e))}function Ui(e){const t=zi();return t?t.sanitize(Di.URL,e)||"":ui(e,"URL")?ci(e):yi(Un(e))}function zi(){const e=$t();return e&&e[12]}function Hi(e,t){e.__ngContext__=t}function Bi(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const n=t.length;if(r+n===i||e.charCodeAt(r+n)<=32)return r}n=r+1}}const ji="ng-template";function Vi(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==Bi(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Wi(e){return 0===e.type&&e.tagName!==ji}function Gi(e,t,n){return t===(0!==e.type||n?e.tagName:ji)}function qi(e,t,n){let i=4;const r=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(In(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!Gi(e,l,n)||""===l&&1===t.length){if(Xi(i))return!1;s=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!Vi(e.attrs,c,n)){if(Xi(i))return!1;s=!0}continue}const u=Yi(8&i?"class":l,r,Wi(e),n);if(-1===u){if(Xi(i))return!1;s=!0;continue}if(""!==c){let e;e=u>o?"":r[u+1].toLowerCase();const t=8&i?e:null;if(t&&-1!==Bi(t,c,0)||2&i&&c!==e){if(Xi(i))return!1;s=!0}}}}else{if(!s&&!Xi(i)&&!Xi(l))return!1;if(s&&Xi(l))continue;s=!1,i=l|1&i}}return Xi(i)||s}function Xi(e){return 0==(1&e)}function Yi(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let n=!1;for(;r<t.length;){const i=t[r];if(i===e)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let e=t[++r];for(;"string"==typeof e;)e=t[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function Zi(e,t,n=!1){for(let i=0;i<t.length;i++)if(qi(e,t[i],n))return!0;return!1}function Ji(e,t){return e?":not("+t.trim()+")":t}function $i(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const t=e[++n];r+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||Xi(s)||(t+=Ji(o,r),r=""),i=s,o=o||!Xi(i);n++}return""!==r&&(t+=Ji(o,r)),t}const Qi={};function Ki(e){const t=e[3];return wt(t)?t[3]:t}function er(e){return nr(e[13])}function tr(e){return nr(e[4])}function nr(e){for(;null!==e&&!wt(e);)e=e[4];return e}function ir(e){rr(Qt(),$t(),_n()+e,on())}function rr(e,t,n,i){if(!i)if(3==(3&t[2])){const i=e.preOrderCheckHooks;null!==i&&Sn(t,i,n)}else{const i=e.preOrderHooks;null!==i&&Mn(t,i,0,n)}bn(n)}function or(e,t){return e<<17|t<<2}function sr(e){return e>>17&32767}function ar(e){return 2|e}function lr(e){return(131068&e)>>2}function cr(e,t){return-131069&e|t<<2}function ur(e){return 1|e}function hr(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const n=e.data[o];hn(r),n.contentQueries(2,t[o],o)}}}function dr(e,t,n){return Dt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function pr(e,t,n,i,r,o,s,a,l,c){const u=t.blueprint.slice();return u[0]=r,u[2]=140|i,Xt(u),u[3]=u[15]=e,u[8]=n,u[10]=s||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=o,u[16]=2==t.type?e[16]:u,u}function fr(e,t,n,i,r){const o=t+yt,s=e.data[o]||function(e,t,n,i,r){const o=en(),s=nn(),a=e.data[t]=function(e,t,n,i,r,o){return{type:n,index:i,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(e,o,n,i,r);return tn(s,!0),s}function mr(e,t,n){pn(t);try{const i=e.viewQuery;null!==i&&qr(1,i,n);const r=e.template;null!==r&&yr(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&hr(e,t),e.staticViewQueries&&qr(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)Br(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),i}finally{t[2]&=-5,yn()}}function gr(e,t,n,i){const r=t[2];if(256==(256&r))return;pn(t);const o=on();try{Xt(t),Zt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&yr(e,t,n,2,i);const s=3==(3&r);if(!o)if(s){const n=e.preOrderCheckHooks;null!==n&&Sn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Mn(t,n,0,null),En(t,0)}if(function(e){for(let t=er(e);null!==t;t=tr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],i=n[3];0==(1024&n[2])&&Yt(i,1),n[2]|=1024}}}(t),function(e){for(let t=er(e);null!==t;t=tr(t))for(let e=_t;e<t.length;e++){const n=t[e],i=n[1];Gt(n)&&gr(i,n,i.template,n[8])}}(t),null!==e.contentQueries&&hr(e,t),!o)if(s){const n=e.contentCheckHooks;null!==n&&Sn(t,n)}else{const n=e.contentHooks;null!==n&&Mn(t,n,1),En(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let i=e.expandoStartIndex,r=-1,o=-1;for(let e=0;e<n.length;e++){const s=n[e];"number"==typeof s?s<=0?(o=0-s,bn(o),i+=9+n[++e],r=i):i+=s:(null!==s&&(ln(i,r),s(2,t[r])),r++)}}}finally{bn(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Hr(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&qr(2,l,i),!o)if(s){const n=e.viewCheckHooks;null!==n&&Sn(t,n)}else{const n=e.viewHooks;null!==n&&Mn(t,n,2),En(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Yt(t[3],-1))}finally{yn()}}function vr(e,t,n,i){const r=t[10],o=!on(),s=Wt(t);try{o&&!s&&r.begin&&r.begin(),s&&mr(e,t,i),gr(e,t,n,i)}finally{o&&!s&&r.end&&r.end()}}function yr(e,t,n,i,r){const o=_n();try{bn(-1),2&i&&t.length>yt&&rr(e,t,0,on()),n(i,r)}finally{bn(o)}}function _r(e,t,n){if(xt(t)){const i=t.directiveEnd;for(let r=t.directiveStart;r<i;r++){const t=e.data[r];t.contentQueries&&t.contentQueries(1,n[r],r)}}}function br(e,t,n){Jt()&&(function(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Gn(n,t),Hi(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const i=e.data[a],o=Et(i);o&&Dr(t,n,i);const l=ei(t,e,a,n);Hi(l,t),null!==s&&Fr(0,a-r,l,i,0,s),o&&(jt(n.index,t)[8]=l)}}(e,t,n,Ht(n,t)),128==(128&n.flags)&&function(e,t,n){const i=n.directiveStart,r=n.directiveEnd,o=e.expandoInstructions,s=e.firstCreatePass,a=n.index-yt,l=Zt.lFrame.currentDirectiveIndex;try{bn(a);for(let n=i;n<r;n++){const i=e.data[n],r=t[n];cn(n),null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?Or(i,r):s&&o.push(null)}}finally{bn(-1),cn(l)}}(e,t,n))}function wr(e,t,n=Ht){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function xr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Sr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Sr(e,t,n,i,r,o,s,a,l,c){const u=yt+i,h=u+r,d=function(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Qi);return n}(u,h),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function Mr(e,t,n,i){const r=Yr(t);r.push(n),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(i,r.length-1)}function Er(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Tr(e,t,n,i,r,o,s,a){const l=Ht(t,n);let c,u=t.inputs;var h;!a&&null!=u&&(c=u[i])?(Jr(e,n,c,i,r),St(t)&&function(e,t){const n=jt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):2===t.type&&(i="class"===(h=i)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,r=null!=s?s(r,t.tagName||"",i):r,Dt(o)?o.setProperty(l,i,r):kn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Cr(e,t,n,i){let r=!1;if(Jt()){const o=function(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];Zi(n,s.selectors,!1)&&(r||(r=[]),Zn(Gn(n,t),e,s.type),Et(s)?(kr(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){let i=0;r=!0,Nr(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}Ir(e,n,o.length);let a=!1,l=!1;for(let r=0;r<o.length;r++){const c=o[r];n.mergedAttrs=Rn(n.mergedAttrs,c.hostAttrs),Lr(e,t,c),Rr(e.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!a&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-yt),a=!0),l||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-yt),l=!0),Ar(e,c),i+=c.hostVars}!function(e,t){const n=t.directiveEnd,i=e.data,r=t.attrs,o=[];let s=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=i[l],n=e.inputs,c=null===r||Wi(t)?null:Ur(n,r);o.push(c),s=Er(n,l,s),a=Er(e.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n),Pr(e,t,i)}s&&function(e,t,n){if(t){const i=e.localNames=[];for(let e=0;e<t.length;e+=2){const r=n[t[e+1]];if(null==r)throw new Error(`Export of name '${t[e+1]}' not found!`);i.push(t[e],r)}}}(n,i,s)}return n.mergedAttrs=Rn(n.mergedAttrs,n.attrs),r}function Ar(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Pr(e,t,n){for(let i=0;i<n;i++)t.push(Qi),e.blueprint.push(Qi),e.data.push(null)}function Or(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ir(e,t,n){const i=yt-t.index,r=e.data.length-(1048575&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(i,r,n)}function kr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Rr(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Et(t)&&(n[""]=e)}}function Nr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Lr(e,t,n){e.data.push(n);const i=n.factory||(n.factory=gt(n.type)),r=new Pn(i,Et(n),null);e.blueprint.push(r),t.push(r)}function Dr(e,t,n){const i=Ht(t,e),r=xr(n),o=e[10],s=jr(e,pr(e,r,null,n.onPush?64:16,i,t,o,o.createRenderer(i,n),null,null));e[t.index]=s}function Fr(e,t,n,i,r,o){const s=o[t];if(null!==s){const e=i.setInput;for(let t=0;t<s.length;){const r=s[t++],o=s[t++],a=s[t++];null!==e?i.setInput(n,a,r,o):n[o]=a}}}function Ur(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function zr(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Hr(e,t){const n=jt(t,e);if(Gt(n)){const e=n[1];80&n[2]?gr(e,n,e.template,n[8]):n[5]>0&&function e(t){for(let i=er(t);null!==i;i=tr(i))for(let t=_t;t<i.length;t++){const n=i[t];if(1024&n[2]){const e=n[1];gr(e,n,e.template,n[8])}else n[5]>0&&e(n)}const n=t[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=jt(n[i],t);Gt(r)&&r[5]>0&&e(r)}}(n)}}function Br(e,t){const n=jt(t,e),i=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),mr(i,n,n[8])}function jr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Vr(e){for(;e;){e[2]|=64;const t=Ki(e);if(Tt(e)&&!t)return e;e=t}return null}function Wr(e,t,n){const i=t[10];i.begin&&i.begin();try{gr(e,t,e.template,n)}catch(r){throw Zr(t,r),r}finally{i.end&&i.end()}}function Gr(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=Vt(n),r=i[1];vr(r,i,r.template,n)}}(e[8])}function qr(e,t,n){hn(0),t(e,n)}const Xr=(()=>Promise.resolve(null))();function Yr(e){return e[7]||(e[7]=[])}function Zr(e,t){const n=e[9],i=n?n.get(ai,null):null;i&&i.handleError(t)}function Jr(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],c=e.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function $r(e,t,n,i,r){if(null!=i){let o,s=!1;wt(i)?o=i:bt(i)&&(s=!0,i=i[0]);const a=Ut(i);0===e&&null!==n?null==r?io(t,n,a):no(t,n,a,r||null):1===e&&null!==n?no(t,n,a,r||null):2===e?function(e,t,n){const i=oo(e,t);i&&function(e,t,n,i){Dt(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,i,r){const o=n[7];o!==Ut(n)&&$r(t,e,i,o,r);for(let s=_t;s<n.length;s++){const r=n[s];lo(r[1],r,e,t,i,o)}}(t,e,o,n,r)}}function Qr(e,t){const n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,Yt(r,-1)),n.splice(i,1)}function Kr(e,t){if(e.length<=_t)return;const n=_t+t,i=e[n];if(i){const o=i[17];null!==o&&o!==e&&Qr(o,i),t>0&&(e[n-1][4]=i[4]);const s=Ke(e,_t+t);lo(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function eo(e,t){if(!(256&t[2])){const n=t[11];Dt(n)&&n.destroyNode&&lo(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return to(e[1],e);for(;t;){let n=null;if(bt(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)bt(t)&&to(t[1],t),t=t[3];null===t&&(t=e),bt(t)&&to(t[1],t),n=t&&t[4]}t=n}}(t)}}function to(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const e=t[n[i]];if(!(e instanceof Pn)){const t=n[i+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],o="function"==typeof r?r(t):Ut(t[r]),s=e[n[i+2]],a=n[i+3];"boolean"==typeof a?o.removeEventListener(n[i],s,a):a>=0?e[a]():e[-a].unsubscribe(),i+=2}else n[i].call(e[n[i+1]]);t[7]=null}}(e,t),1===t[1].type&&Dt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&wt(t[3])){n!==t[3]&&Qr(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function no(e,t,n,i){Dt(e)?e.insertBefore(t,n,i):t.insertBefore(n,i,!0)}function io(e,t,n){Dt(e)?e.appendChild(t,n):t.appendChild(n)}function ro(e,t,n,i){null!==i?no(e,t,n,i):io(e,t,n)}function oo(e,t){return Dt(e)?e.parentNode(t):t.parentNode}function so(e,t,n,i){const r=function(e,t,n){let i=t.parent;for(;null!=i&&(3===i.type||4===i.type);)i=(t=i).parent;if(null===i)return n[0];if(t&&4===t.type&&4&t.flags)return Ht(t,n).parentNode;if(2&i.flags){const t=e.data,n=t[t[i.index].directiveStart].encapsulation;if(n!==rt.ShadowDom&&n!==rt.Native)return null}return Ht(i,n)}(e,i,t);if(null!=r){const e=t[11],o=function(e,t){return 3===e.type||4===e.type?Ht(e,t):null}(i.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)ro(e,r,n[t],o);else ro(e,r,n,o)}}function ao(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;s&&0===t&&(a&&Hi(Ut(a),i),n.flags|=4),64!=(64&n.flags)&&(3===l||4===l?(ao(e,t,n.child,i,r,o,!1),$r(t,e,r,a,o)):1===l?co(e,t,i,n,r,o):$r(t,e,r,a,o)),n=s?n.projectionNext:n.next}}function lo(e,t,n,i,r,o){ao(n,i,e.firstChild,t,r,o,!1)}function co(e,t,n,i,r,o){const s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)$r(t,e,r,a[l],o);else ao(e,t,a,s[3],r,o,!0)}function uo(e,t,n){Dt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ho(e,t,n){Dt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class po{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView,t=e[1];return function e(t,n,i,r,o=!1){for(;null!==i;){const s=n[i.index];if(null!==s&&r.push(Ut(s)),wt(s))for(let t=_t;t<s.length;t++){const n=s[t],i=n[1].firstChild;null!==i&&e(n[1],n,i,r)}const a=i.type;if(3===a||4===a)e(t,n,i.child,r);else if(1===a){const t=n[16],o=t[6].projection[i.projection];if(Array.isArray(o))r.push(...o);else{const n=Ki(t);e(n[1],n,o,r,!0)}}i=o?i.projectionNext:i.next}return r}(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}eo(this._lView[1],this._lView)}onDestroy(e){Mr(this._lView[1],this._lView,null,e)}markForCheck(){Vr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){sn(!0);try{Wr(e,t,n)}finally{sn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,lo(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class fo extends po{constructor(e){super(e),this._view=e}detectChanges(){Gr(this._view)}checkNoChanges(){!function(e){sn(!0);try{Gr(e)}finally{sn(!1)}}(this._view)}get context(){return null}}let mo,go,vo;function yo(e,t,n){return mo||(mo=class extends e{}),new mo(Ht(t,n))}function _o(e,t,n,i){return go||(go=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=pr(this._declarationView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),mr(t,n,e),new po(n)}}),0===n.type?new go(i,n,yo(t,n,i)):null}function bo(e,t,n,i){let r;vo||(vo=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return yo(t,this._hostTNode,this._hostView)}get injector(){return new ii(this._hostTNode,this._hostView)}get parentInjector(){const e=Yn(this._hostTNode,this._hostView);if(Ln(e)){const t=Fn(e,this._hostView),n=Dn(e);return new ii(t[1].data[n+8],t)}return new ii(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-_t}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const o=n||this.parentInjector;if(!r&&null==e.ngModule&&o){const e=o.get(Ze,null);e&&(r=e)}const s=e.create(o,i,void 0,r);return this.insert(s.hostView,t),s}insert(e,t){const n=e._lView,i=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),wt(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],i=new vo(t,t[6],t[3]);i.detach(i.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;!function(e,t,n,i){const r=_t+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-_t?(t[4]=n[r],Qe(n,_t+i,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,n,o,r);const s=function e(t,n){const i=_t+t+1;if(i<n.length){const t=n[i],r=t[1].firstChild;if(null!==r)return function t(n,i){if(null!==i){const r=i.type;if(2===r)return Ht(i,n);if(0===r)return e(-1,n[i.index]);if(3===r||4===r){const r=i.child;if(null!==r)return t(n,r);{const t=n[i.index];return wt(t)?e(-1,t):Ut(t)}}{const e=n[16],r=e[6],o=Ki(e),s=r.projection[i.projection];return null!=s?t(o,s):t(n,i.next)}}return null}(t,r)}return n[7]}(r,o),a=n[11],l=oo(a,o[7]);return null!==l&&function(e,t,n,i,r,o){i[0]=r,i[6]=t,lo(e,i,n,1,r,o)}(i,o[6],a,n,l,s),e.attachToViewContainerRef(this),Qe(o[8],r,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Kr(this._lContainer,t);n&&(Ke(this._lContainer[8],t),eo(n[1],n))}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Kr(this._lContainer,t);return n&&null!=Ke(this._lContainer[8],t)?new po(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=i[n.index];if(wt(o))r=o;else{let e;if(3===n.type)e=Ut(o);else if(e=i[11].createComment(""),Tt(i)){const t=i[11],r=Ht(n,i);no(t,oo(t,r),e,function(e,t){return Dt(e)?e.nextSibling(t):t.nextSibling}(t,r))}else so(i[1],i,e,n);i[n.index]=r=zr(o,i,e,n),jr(i,r)}return new vo(r,n,i)}let wo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>xo(),e})();const xo=function(e=!1){return function(e,t,n){if(!n&&St(e)){const n=jt(e.index,t);return new po(n,n)}return 2===e.type||0===e.type||3===e.type||4===e.type?new po(t[16],t):null}(en(),$t(),e)},So=Function,Mo=new Ne("Set Injector scope."),Eo={},To={},Co=[];let Ao=void 0;function Po(){return void 0===Ao&&(Ao=new Ye),Ao}function Oo(e,t=null,n=null,i){return new Io(e,n,t||Po(),i)}class Io{constructor(e,t,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];t&&$e(t,n=>this.processProvider(n,e,t)),$e([e],e=>this.processInjectorType(e,[],r)),this.records.set(Le,Ro(void 0,this));const o=this.records.get(Mo);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:ve(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=De,n=oe.Default){this.assertNotDestroyed();const i=je(this);try{if(!(n&oe.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Ne)&&ce(e);t=n&&this.injectableDefInScope(n)?Ro(ko(e),Eo):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&oe.Self?Po():this.parent).get(e,t=n&oe.Optional&&t===De?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(ve(e)),i)throw o;return function(e,t,n,i){const r=e.ngTempTokenPath;throw t[Ue]&&r.unshift(t[Ue]),e.message=function(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let r=ve(t);if(Array.isArray(t))r=t.map(ve).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):ve(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Fe,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{je(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ve(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=we(e)))return!1;let i=he(e);const r=null==i&&e.ngModule||void 0,o=void 0===r?e:r,s=-1!==n.indexOf(o);if(void 0!==r&&(i=he(r)),null==i)return!1;if(null!=i.imports&&!s){let e;n.push(o);try{$e(i.imports,i=>{this.processInjectorType(i,t,n)&&(void 0===e&&(e=[]),e.push(i))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:i}=e[t];$e(i,e=>this.processProvider(e,n,i||Co))}}this.injectorDefTypes.add(o),this.records.set(o,Ro(i.factory,Eo));const a=i.providers;if(null!=a&&!s){const t=e;$e(a,e=>this.processProvider(e,t,a))}return void 0!==r&&void 0!==e.providers}processProvider(e,t,n){let i=Lo(e=we(e))?e:we(e&&e.provide);const r=function(e,t,n){return No(e)?Ro(void 0,e.useValue):Ro(function(e,t,n){let i=void 0;if(Lo(e)){const t=we(e);return gt(t)||ko(t)}if(No(e))i=()=>we(e.useValue);else if((r=e)&&r.useFactory)i=()=>e.useFactory(...Xe(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))i=()=>Ge(we(e.useExisting));else{const t=we(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return gt(t)||ko(t);i=()=>new t(...Xe(e.deps))}var r;return i}(e),Eo)}(e);if(Lo(e)||!0!==e.multi)this.records.get(i);else{let t=this.records.get(i);t||(t=Ro(void 0,Eo,!0),t.factory=()=>Xe(t.multi),this.records.set(i,t)),i=e,t.multi.push(e)}this.records.set(i,r)}hydrate(e,t){var n;return t.value===Eo&&(t.value=To,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function ko(e){const t=ce(e),n=null!==t?t.factory:gt(e);if(null!==n)return n;const i=he(e);if(null!==i)return i.factory;if(e instanceof Ne)throw new Error(`Token ${ve(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let i=0;i<e;i++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${ve(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[de]||e[me]||e[fe]&&e[fe]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Ro(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function No(e){return null!==e&&"object"==typeof e&&ze in e}function Lo(e){return"function"==typeof e}const Do=function(e,t,n){return function(e,t=null,n=null,i){const r=Oo(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)};let Fo=(()=>{class e{static create(e,t){return Array.isArray(e)?Do(e,t,""):Do(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=De,e.NULL=new Ye,e.\u0275prov=ae({token:e,providedIn:"any",factory:()=>Ge(Le)}),e.__NG_ELEMENT_ID__=-1,e})();const Uo=new Ne("AnalyzeForEntryComponents");function zo(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?o=e:1==o?r=ye(r,e):2==o&&(i=ye(i,e+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Ho(e,t){const n=Vt(e)[1],i=n.data.length-1;xn(n,{directiveStart:i,directiveEnd:i+1})}let Bo=null;function jo(){if(!Bo){const e=Te.Symbol;if(e&&e.iterator)Bo=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Bo=n)}}}return Bo}function Vo(e){return!!Wo(e)&&(Array.isArray(e)||!(e instanceof Map)&&jo()in e)}function Wo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Go(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function qo(e,t,n,i){const r=$t();return Go(r,an(),t)&&(Qt(),function(e,t,n,i,r,o){const s=Ht(e,t),a=t[11];if(null==i)Dt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const t=null==r?Un(i):r(i,e.tagName||"",n);Dt(a)?a.setAttribute(s,n,t,o):o?s.setAttributeNS(o,n,t):s.setAttribute(n,t)}}(wn(),r,e,t,n,i)),qo}function Xo(e,t,n,i,r,o,s,a){const l=$t(),c=Qt(),u=e+yt,h=c.firstCreatePass?function(e,t,n,i,r,o,s,a,l){const c=t.consts,u=fr(t,e,0,s||null,qt(c,a));Cr(t,n,u,qt(c,l)),xn(t,u);const h=u.tViews=Sr(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(e,c,l,t,n,i,r,o,s):c.data[u];tn(h,!1);const d=l[11].createComment("");so(c,l,d,h),Hi(d,l),jr(l,l[u]=zr(d,l,d,h)),Mt(h)&&br(c,l,h),null!=s&&wr(l,h,a)}function Yo(e,t=oe.Default){const n=$t();return null===n?Ge(e,t):Jn(en(),n,we(e),t)}function Zo(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let i=0;for(;i<e;){const r=n[i];if(In(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<e&&"string"==typeof n[i];)i++;else{if(r===t)return n[i+1];i+=2}}}return null}(en(),e)}function Jo(e,t,n){const i=$t();return Go(i,an(),t)&&Tr(Qt(),wn(),i,e,t,i[11],n,!1),Jo}function $o(e,t,n,i,r){const o=r?"class":"style";Jr(e,n,t.inputs[o],o,i)}function Qo(e,t,n,i){const r=$t(),o=Qt(),s=yt+e,a=r[11],l=r[s]=dr(t,a,Zt.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,i,r,o,s){const a=t.consts,l=fr(t,e,2,r,qt(a,o));return Cr(t,n,l,qt(a,s)),null!==l.attrs&&zo(l,l.attrs,!1),null!==l.mergedAttrs&&zo(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(e,o,r,0,t,n,i):o.data[s];tn(c,!0);const u=c.mergedAttrs;null!==u&&On(a,l,u);const h=c.classes;null!==h&&ho(a,l,h);const d=c.styles;null!==d&&uo(a,l,d),so(o,r,l,c),0===Zt.lFrame.elementDepthCount&&Hi(l,r),Zt.lFrame.elementDepthCount++,Mt(c)&&(br(o,r,c),_r(o,c,r)),null!==i&&wr(r,c)}function Ko(){let e=en();nn()?rn():(e=e.parent,tn(e,!1));const t=e;Zt.lFrame.elementDepthCount--;const n=Qt();n.firstCreatePass&&(xn(n,e),xt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&$o(n,t,$t(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&$o(n,t,$t(),t.stylesWithoutHost,!1)}function es(e,t,n,i){Qo(e,t,n,i),Ko()}function ts(e,t,n){const i=$t(),r=Qt(),o=e+yt,s=r.firstCreatePass?function(e,t,n,i,r){const o=t.consts,s=qt(o,i),a=fr(t,e,3,"ng-container",s);return null!==s&&zo(a,s,!0),Cr(t,n,a,qt(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(e,r,i,t,n):r.data[o];tn(s,!0);const a=i[o]=i[11].createComment("");so(r,i,a,s),Hi(a,i),Mt(s)&&(br(r,i,s),_r(r,s,i)),null!=n&&wr(i,s)}function ns(){let e=en();const t=Qt();nn()?rn():(e=e.parent,tn(e,!1)),t.firstCreatePass&&(xn(t,e),xt(e)&&t.queries.elementEnd(e))}function is(){return $t()}function rs(e){return!!e&&"function"==typeof e.then}function os(e,t,n=!1,i){const r=$t(),o=Qt(),s=en();return function(e,t,n,i,r,o,s=!1,a){const l=Mt(i),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=Yr(t);let h=!0;if(2===i.type){const d=Ht(i,t),p=a?a(d):ot,f=p.target||d,m=u.length,g=a?e=>a(Ut(e[i.index])).target:i.index;if(Dt(n)){let s=null;if(!a&&l&&(s=function(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const e=r[o];if(e===n&&r[o+1]===i){const e=t[7],n=r[o+2];return e.length>n?e[n]:null}"string"==typeof e&&(o+=2)}return null}(e,t,r,i.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=as(i,t,o,!1);const e=n.listen(p.name||f,r,o);u.push(o,e),c&&c.push(r,g,m,m+1)}}else o=as(i,t,o,!0),f.addEventListener(r,o,s),u.push(o),c&&c.push(r,g,m,s)}const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(o),s=u.length;u.push(o,e),c&&c.push(r,i.index,s,-(s+1))}}}(o,r,r[11],s,e,t,n,i),os}function ss(e,t,n){try{return!1!==t(n)}catch(i){return Zr(e,i),!1}}function as(e,t,n,i){return function r(o){if(o===Function)return n;const s=2&e.flags?jt(e.index,t):t;0==(32&t[2])&&Vr(s);let a=ss(t,n,o),l=r.__ngNextListenerFn__;for(;l;)a=ss(t,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ls(e=1){return function(e){return(Zt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Zt.lFrame.contextLView))[8]}(e)}const cs=[];function us(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?sr(o):lr(o),l=!1;for(;0!==a&&(!1===l||s);){const n=e[a+1];hs(e[a],t)&&(l=!0,e[a+1]=i?ur(n):ar(n)),a=i?sr(n):lr(n)}l&&(e[n+1]=i?ar(o):ur(o))}function hs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&nt(e,t)>=0}function ds(e,t,n){return fs(e,t,n,!1),ds}function ps(e,t){return fs(e,t,null,!0),ps}function fs(e,t,n,i){const r=$t(),o=Qt(),s=function(e){const t=Zt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();o.firstUpdatePass&&function(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[_n()+yt],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(e.flags&(t?16:32))})(o,i)&&null===t&&!s&&(t=!1),t=function(e,t,n,i){const r=function(e){const t=Zt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=gs(n=ms(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=ms(r,e,t,n,i),null===o){let n=function(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==lr(i))return e[sr(i)]}(e,t,i);void 0!==n&&Array.isArray(n)&&(n=ms(null,e,t,n[1],i),n=gs(n,t.attrs,i),function(e,t,n,i){e[sr(n?t.classBindings:t.styleBindings)]=i}(e,t,i,n))}else o=function(e,t,n){let i=void 0;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=gs(i,e[o].hostAttrs,n);return gs(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=sr(s),l=lr(s);e[i]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||nt(e,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){const t=sr(e[a+1]);e[i+1]=or(t,a),0!==t&&(e[t+1]=cr(e[t+1],i)),e[a+1]=131071&e[a+1]|i<<17}else e[i+1]=or(a,0),0!==a&&(e[a+1]=cr(e[a+1],i)),a=i;else e[i+1]=or(l,0),0===a?a=i:e[l+1]=cr(e[l+1],i),l=i;u&&(e[i+1]=ar(e[i+1])),us(e,c,i,!0),us(e,c,i,!1),function(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&nt(o,t)>=0&&(n[i+1]=ur(n[i+1]))}(t,c,e,i,o),s=or(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}(o,e,s,i),t!==Qi&&Go(r,s,t)&&function(e,t,n,i,r,o,s,a){if(2!==t.type)return;const l=e.data,c=l[a+1];ys(1==(1&c)?vs(l,t,n,r,lr(c),s):void 0)||(ys(o)||function(e){return 2==(2&e)}(c)&&(o=vs(l,null,n,r,a,s)),function(e,t,n,i,r){const o=Dt(e);if(t)r?o?e.addClass(n,i):n.classList.add(i):o?e.removeClass(n,i):n.classList.remove(i);else{const t=-1==i.indexOf("-")?void 0:2;null==r?o?e.removeStyle(n,i,t):n.style.removeProperty(i):o?e.setStyle(n,i,r,t):n.style.setProperty(i,r)}}(i,s,zt(_n(),n),r,o))}(o,o.data[_n()+yt],r,r[11],e,r[s+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=ve(ci(e)))),e}(t,n),i,s)}function ms(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=gs(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function gs(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),et(e,s,!!n||t[++o]))}return void 0===e?null:e}function vs(e,t,n,i,r,o){const s=null===t;let a=void 0;for(;r>0;){const t=e[r],o=Array.isArray(t),l=o?t[1]:t,c=null===l;let u=n[r+1];u===Qi&&(u=c?cs:void 0);let h=c?tt(u,i):l===i?u:void 0;if(o&&!ys(h)&&(h=tt(t,i)),ys(h)&&(a=h,s))return a;const d=e[r+1];r=s?sr(d):lr(d)}if(null!==t){let e=o?t.residualClasses:t.residualStyles;null!=e&&(a=tt(e,i))}return a}function ys(e){return void 0!==e}function _s(e,t=""){const n=$t(),i=Qt(),r=e+yt,o=i.firstCreatePass?fr(i,e,2,null,null):i.data[r],s=n[r]=function(e,t){return Dt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);so(i,n,s,o),tn(o,!1)}function bs(e){return ws("",e,""),bs}function ws(e,t,n){const i=$t(),r=function(e,t,n,i){return Go(e,an(),n)?t+Un(n)+i:Qi}(i,e,t,n);return r!==Qi&&function(e,t,n){const i=zt(t,e),r=e[11];Dt(r)?r.setValue(i,n):i.textContent=n}(i,_n(),r),ws}function xs(e,t,n){const i=$t();return Go(i,an(),t)&&Tr(Qt(),wn(),i,e,t,i[11],n,!0),xs}class Ss{}class Ms{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ve(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Es=(()=>{class e{}return e.NULL=new Ms,e})(),Ts=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Cs(e),e})();const Cs=function(e){return yo(e,en(),$t())};class As{}var Ps=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Os=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Is(),e})();const Is=function(){const e=$t(),t=jt(en().index,e);return function(e){const t=e[11];if(Dt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(bt(t)?t:e)};let ks=(()=>{class e{}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>null}),e})();class Rs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ns=new Rs("10.1.6");class Ls{constructor(){}supports(e){return Vo(e)}create(e){return new Fs(e)}}const Ds=(e,t)=>t;class Fs{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ds}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const o=!n||t&&t.currentIndex<Bs(n,i,r)?t:n,s=Bs(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{r||(r=[]);const e=s-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;t<=o&&o<e&&(r[n]=i+1)}r[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Vo(e))throw new Error(`Error trying to diff '${ve(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],i=this._trackByFn(t,n),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,t)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),o=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[jo()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,e,i,t)),Object.is(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),o=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new Us(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Hs),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Us{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zs{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Hs{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new zs,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bs(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class js{constructor(){}supports(e){return e instanceof Map||Wo(e)}create(){return new Vs}}class Vs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Wo(e)))throw new Error(`Error trying to diff '${ve(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new Ws(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ws{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Gs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new re,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new e([new Ls])}),e})(),qs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new re,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new e([new js])}),e})();const Xs=[new js],Ys=new Gs([new Ls]),Zs=new qs(Xs);let Js=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>$s(e,Ts),e})();const $s=function(e,t){return _o(e,t,en(),$t())};let Qs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ks(e,Ts),e})();const Ks=function(e,t){return bo(e,t,en(),$t())},ea={};class ta extends Es{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=mt(e);return new ra(t,this.ngModule)}}function na(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const ia=new Ne("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Hn});class ra extends Ss{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map($i).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return na(this.componentDef.inputs)}get outputs(){return na(this.componentDef.outputs)}create(e,t,n,i){const r=(i=i||this.ngModule)?function(e,t){return{get:(n,i,r)=>{const o=e.get(n,ea,r);return o!==ea||i===ea?o:t.get(n,i,r)}}}(e,i.injector):e,o=r.get(As,Ft),s=r.get(ks,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Dt(e))return e.selectRootElement(t,n===rt.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(a,n,this.componentDef.encapsulation):dr(l,o.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?Rt:"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Hn,clean:Xr,playerHandler:null,flags:0},d=Sr(0,null,null,1,0,null,null,null,null,null),p=pr(null,d,h,u,null,null,o,a,s,r);let f,m;pn(p);try{const e=function(e,t,n,i,r,o){const s=n[1];n[20]=e;const a=fr(s,0,2,null,null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(zo(a,l,!0),null!==e&&(On(r,e,l),null!==a.classes&&ho(r,e,a.classes),null!==a.styles&&uo(r,e,a.styles)));const c=i.createRenderer(e,t),u=pr(n,xr(t),null,t.onPush?64:16,n[20],a,i,c,null,null);return s.firstCreatePass&&(Zn(Gn(a,n),s,t.type),kr(s,a),Nr(a,n.length,1)),jr(n,u),n[20]=u}(c,this.componentDef,p,o,a);if(c)if(n)On(a,c,["ng-version",Ns.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!Xi(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&On(a,c,e),t&&t.length>0&&ho(a,c,t.join(" "))}if(m=Bt(d,0),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=t[n];e.push(null!=i?Array.from(i):null)}}f=function(e,t,n,i,r){const o=n[1],s=function(e,t,n){const i=en();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ir(e,i,1),Lr(e,t,n));const r=ei(t,e,t.length-1,i);Hi(r,t);const o=Ht(i,t);return o&&Hi(o,t),r}(o,n,t);i.components.push(s),e[8]=s,r&&r.forEach(e=>e(s,t)),t.contentQueries&&t.contentQueries(1,s,n.length-1);const a=en();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){bn(a.index-yt);const e=n[1];Ar(e,t),Pr(e,n,t.hostVars),Or(t,s)}return s}(e,this.componentDef,p,h,[Ho]),mr(d,p,null)}finally{yn()}return new oa(this.componentType,f,yo(Ts,m,p),p,m)}}class oa extends class{}{constructor(e,t,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new fo(i),this.componentType=e}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const sa=void 0;var aa=["en",[["a","p"],["AM","PM"],sa],[["AM","PM"],sa,sa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sa,"{1} 'at' {0}",sa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let la={};function ca(e){return e in la||(la[e]=Te.ng&&Te.ng.common&&Te.ng.common.locales&&Te.ng.common.locales[e]),la[e]}var ua=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const ha="en-US";let da=ha;function pa(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,i){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(da=e.toLowerCase().replace(/_/g,"-"))}const fa=new Map;class ma extends Ze{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ta(this);const n=vt(e),i=e[Ie]||null;i&&pa(i),this._bootstrapComponents=Bn(n.bootstrap),this._r3Injector=Oo(e,t,[{provide:Ze,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],ve(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Fo.THROW_IF_NOT_FOUND,n=oe.Default){return e===Fo||e===Ze||e===Le?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ga extends Je{constructor(e){super(),this.moduleType=e,null!==vt(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ve(t)} vs ${ve(t.name)}`)})(e,fa.get(e),t),fa.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new ma(this.moduleType,e)}}function va(e,t,n){const i=function(){const e=Zt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}()+e,r=$t();return r[i]===Qi?function(e,t,n){return e[t]=n}(r,i,n?t.call(n):t()):function(e,t){return e[t]}(r,i)}const ya=class extends S{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i,r=e=>null,o=()=>null;e&&"object"==typeof e?(i=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(r=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(i,r,o);return e instanceof h&&e.add(s),s}};function _a(){return this._results[jo()]()}class ba{constructor(){this.dirty=!0,this._results=[],this.changes=new ya,this.length=0;const e=jo(),t=ba.prototype;t[e]||(t[e]=_a)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?(n===t&&(n=t.slice(0,i)),e(r,n)):n!==t&&n.push(r)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class wa{constructor(e){this.queryList=e,this.matches=null}clone(){return new wa(this.queryList)}setDirty(){this.queryList.setDirty()}}class xa{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);i.push(this.queries[n.indexInDeclarationView].clone())}return new xa(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==La(e,t).matches&&this.queries[t].setDirty()}}class Sa{constructor(e,t,n,i=null){this.predicate=e,this.descendants=t,this.isStatic=n,this.read=i}}class Ma{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const i=null!==t?t.length:0,r=this.getByIndex(n).embeddedTView(e,i);r&&(r.indexInDeclarationView=n,null!==t?t.push(r):t=[r])}return null!==t?new Ma(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ea{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ea(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&3===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(e,t,Ta(t,r)),this.matchTNodeWithReadOption(e,t,Kn(t,e,r,!1,!1))}else n===Js?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Kn(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===Ts||i===Qs||i===Js&&0===t.type)this.addMatch(t.index,-2);else{const n=Kn(t,e,i,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Ta(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function Ca(e,t,n,i){return-1===n?function(e,t){return 2===e.type||3===e.type?yo(Ts,e,t):0===e.type?_o(Js,Ts,e,t):null}(t,e):-2===n?function(e,t,n){return n===Ts?yo(Ts,t,e):n===Js?_o(Js,Ts,t,e):n===Qs?bo(Qs,Ts,t,e):void 0}(e,t,i):ei(e,e[1],n,t)}function Aa(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const i=e.data,o=n.matches,s=[];for(let e=0;e<o.length;e+=2){const r=o[e];s.push(r<0?null:Ca(t,i[r],o[e+1],n.metadata.read))}r.matches=s}return r.matches}function Pa(e){const t=$t(),n=Qt(),i=un();hn(i+1);const r=La(n,i);if(e.dirty&&Wt(t)===r.metadata.isStatic){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?function e(t,n,i,r){const o=t.queries.getByIndex(i),s=o.matches;if(null!==s){const a=Aa(t,n,o,i);for(let t=0;t<s.length;t+=2){const i=s[t];if(i>0)r.push(a[t/2]);else{const o=s[t+1],a=n[-i];for(let t=_t;t<a.length;t++){const n=a[t];n[17]===n[3]&&e(n[1],n,o,r)}if(null!==a[9]){const t=a[9];for(let n=0;n<t.length;n++){const i=t[n];e(i[1],i,o,r)}}}}}return r}(n,t,i,[]):Aa(n,t,r,i);e.reset(o),e.notifyOnChanges()}return!0}return!1}function Oa(e,t,n){!function(e,t,n,i,r,o){e.firstCreatePass&&Na(e,new Sa(n,i,false,r),-1),Ra(e,t)}(Qt(),$t(),e,t,n)}function Ia(e,t,n,i){!function(e,t,n,i,r,o,s,a){e.firstCreatePass&&(Na(e,new Sa(n,i,false,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,a)),Ra(e,t)}(Qt(),$t(),t,n,i,0,en(),e)}function ka(){return e=$t(),t=un(),e[19].queries[t].queryList;var e,t}function Ra(e,t){const n=new ba;Mr(e,t,n,n.destroy),null===t[19]&&(t[19]=new xa),t[19].queries.push(new wa(n))}function Na(e,t,n){null===e.queries&&(e.queries=new Ma),e.queries.track(new Ea(t,n))}function La(e,t){return e.queries.getByIndex(t)}const Da=new Ne("Application Initializer");let Fa=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();rs(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Ge(Da,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Ua=new Ne("AppId"),za={provide:Ua,useFactory:function(){return`${Ha()}${Ha()}${Ha()}`},deps:[]};function Ha(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ba=new Ne("Platform Initializer"),ja=new Ne("Platform ID"),Va=new Ne("appBootstrapListener");let Wa=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Ga=new Ne("LocaleId"),qa=new Ne("DefaultCurrencyCode");class Xa{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ya=function(e){return new ga(e)},Za=Ya,Ja=function(e){return Promise.resolve(Ya(e))},$a=function(e){const t=Ya(e),n=Bn(vt(e).declarations).reduce((e,t)=>{const n=mt(t);return n&&e.push(new ra(n)),e},[]);return new Xa(t,n)},Qa=$a,Ka=function(e){return Promise.resolve($a(e))};let el=(()=>{class e{constructor(){this.compileModuleSync=Za,this.compileModuleAsync=Ja,this.compileModuleAndAllComponentsSync=Qa,this.compileModuleAndAllComponentsAsync=Ka}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const tl=(()=>Promise.resolve(0))();function nl(e){"undefined"==typeof Zone?tl.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class il{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ya(!1),this.onMicrotaskEmpty=new ya(!1),this.onStable=new ya(!1),this.onError=new ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=t,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let e=Te.requestAnimationFrame,t=Te.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Te,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,al(e),sl(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),al(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,i,r,o,s,a)=>{try{return ll(e),n.invokeTask(r,o,s,a)}finally{t&&"eventTask"===o.type&&t(),cl(e)}},onInvoke:(t,n,i,r,o,s,a)=>{try{return ll(e),t.invoke(i,r,o,s,a)}finally{cl(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e._hasPendingMicrotasks=r.microTask,al(e),sl(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!il.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(il.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,e,ol,rl,rl);try{return r.runTask(o,t,n)}finally{r.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function rl(){}const ol={};function sl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function al(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function ll(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function cl(e){e._nesting--,sl(e)}class ul{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ya,this.onMicrotaskEmpty=new ya,this.onStable=new ya,this.onError=new ya}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,i){return e.apply(t,n)}}let hl=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{il.assertNotInAngularZone(),nl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nl(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Ge(il))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),dl=(()=>{class e{constructor(){this._applications=new Map,ml.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return ml.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class pl{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let fl,ml=new pl;const gl=new Ne("AllowMultipleToken");class vl{constructor(e,t){this.name=e,this.token=t}}function yl(e,t,n=[]){const i="Platform: "+t,r=new Ne(i);return(t=[])=>{let o=_l();if(!o||o.injector.get(gl,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0},{provide:Mo,useValue:"platform"});!function(e){if(fl&&!fl.destroyed&&!fl.injector.get(gl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");fl=e.get(bl);const t=e.get(Ba,null);t&&t.forEach(e=>e())}(Fo.create({providers:e,name:i}))}return function(e){const t=_l();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function _l(){return fl&&!fl.destroyed?fl:null}let bl=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ul:("zone.js"===e?void 0:e)||new il({enableLongStackTrace:pi(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),i=[{provide:il,useValue:n}];return n.run(()=>{const t=Fo.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),o=r.injector.get(ai,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>Sl(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const i=n();return rs(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(o,n,()=>{const e=r.injector.get(Fa);return e.runInitializers(),e.donePromise.then(()=>(pa(r.injector.get(Ga,ha)||ha),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=wl({},t);return function(e,t,n){const i=new ga(n);return Promise.resolve(i)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(xl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ve(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Ge(Fo))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function wl(e,t){return Array.isArray(t)?t.reduce(wl,e):Object.assign(Object.assign({},e),t)}let xl=(()=>{class e{constructor(e,t,n,i,r,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=pi(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{il.assertNotInAngularZone(),nl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return E(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof y?e[0]:V(t)(W(e,n))}(s,a.pipe(e=>{return G()((t=$,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,Z);return i.source=e,i.subjectFactory=n,i})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ss?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Ze),r=n.create(Fo.NULL,[],t||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(hl,null);return o&&r.injector.get(dl).registerApplication(r.location.nativeElement,o),this._loadComponent(r),pi()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Sl(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Va,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Sl(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Ge(il),Ge(Wa),Ge(Fo),Ge(ai),Ge(Es),Ge(Fa))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function Sl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ml{}class El{}const Tl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Cl=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Tl}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,i]=e.split("#");return void 0===i&&(i="default"),n("zn8P")(t).then(e=>e[i]).then(e=>Al(e,t,i)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,i]=e.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[i+r]).then(e=>Al(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(Ge(el),Ge(El,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function Al(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Pl=yl(null,"core",[{provide:ja,useValue:"unknown"},{provide:bl,deps:[Fo]},{provide:dl,deps:[]},{provide:Wa,deps:[]}]),Ol=[{provide:xl,useClass:xl,deps:[il,Wa,Fo,ai,Es,Fa]},{provide:ia,deps:[il],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Fa,useClass:Fa,deps:[[new ne,Da]]},{provide:el,useClass:el,deps:[]},za,{provide:Gs,useFactory:function(){return Ys},deps:[]},{provide:qs,useFactory:function(){return Zs},deps:[]},{provide:Ga,useFactory:function(e){return pa(e=e||"undefined"!=typeof $localize&&$localize.locale||ha),e},deps:[[new te(Ga),new ne,new re]]},{provide:qa,useValue:"USD"}];let Il=(()=>{class e{constructor(e){}}return e.\u0275mod=dt({type:e}),e.\u0275inj=le({factory:function(t){return new(t||e)(Ge(xl))},providers:Ol}),e})(),kl=null;function Rl(){return kl}const Nl=new Ne("DocumentToken");let Ll=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({factory:Dl,token:e,providedIn:"platform"}),e})();function Dl(){return Ge(Ul)}const Fl=new Ne("Location Initialized");let Ul=(()=>{class e extends Ll{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Rl().getLocation(),this._history=Rl().getHistory()}getBaseHrefFromDOM(){return Rl().getBaseHref(this._doc)}onPopState(e){Rl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Rl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){zl()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){zl()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Ge(Nl))},e.\u0275prov=ae({factory:Hl,token:e,providedIn:"platform"}),e})();function zl(){return!!window.history.pushState}function Hl(){return new Ul(Ge(Nl))}function Bl(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function jl(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Vl(e){return e&&"?"!==e[0]?"?"+e:e}let Wl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({factory:Gl,token:e,providedIn:"root"}),e})();function Gl(e){const t=Ge(Nl).location;return new Xl(Ge(Ll),t&&t.origin||"")}const ql=new Ne("appBaseHref");let Xl=(()=>{class e extends Wl{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Bl(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Vl(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,i){const r=this.prepareExternalUrl(n+Vl(i));this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){const r=this.prepareExternalUrl(n+Vl(i));this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ll),Ge(ql,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),Yl=(()=>{class e extends Wl{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Bl(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,i){let r=this.prepareExternalUrl(n+Vl(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){let r=this.prepareExternalUrl(n+Vl(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ll),Ge(ql,8))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),Zl=(()=>{class e{constructor(e,t){this._subject=new ya,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=jl($l(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Vl(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,$l(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vl(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vl(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(Ge(Wl),Ge(Ll))},e.normalizeQueryParams=Vl,e.joinWithSlash=Bl,e.stripTrailingSlash=jl,e.\u0275prov=ae({factory:Jl,token:e,providedIn:"root"}),e})();function Jl(){return new Zl(Ge(Wl),Ge(Ll))}function $l(e){return e.replace(/\/index.html$/,"")}var Ql=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Kl{}let ec=(()=>{class e extends Kl{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ca(t);if(n)return n;const i=t.split("-")[0];if(n=ca(i),n)return n;if("en"===i)return aa;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[ua.PluralCase]}(t||this.locale)(e)){case Ql.Zero:return"zero";case Ql.One:return"one";case Ql.Two:return"two";case Ql.Few:return"few";case Ql.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ga))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),tc=(()=>{class e{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Vo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+ve(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(Yo(Gs),Yo(qs),Yo(Ts),Yo(Os))},e.\u0275dir=ft({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class nc{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ic=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){pi()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new nc(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new rc(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new rc(e,r);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Yo(Qs),Yo(Js),Yo(Gs))},e.\u0275dir=ft({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class rc{constructor(e,t){this.record=e,this.view=t}}let oc=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new sc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ac("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ac("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Yo(Qs),Yo(Js))},e.\u0275dir=ft({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class sc{constructor(){this.$implicit=null,this.ngIf=null}}function ac(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ve(t)}'.`)}let lc=(()=>{class e{}return e.\u0275mod=dt({type:e}),e.\u0275inj=le({factory:function(t){return new(t||e)},providers:[{provide:Kl,useClass:ec}]}),e})(),cc=(()=>{class e{}return e.\u0275prov=ae({token:e,providedIn:"root",factory:()=>new uc(Ge(Nl),window,Ge(ai))}),e})();class uc{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportsScrolling()){const t=this.document.getElementById(e)||this.document.getElementsByName(e)[0];t&&this.scrollToElement(t)}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const e=hc(this.window.history)||hc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(e){return!1}}}function hc(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class dc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new dc,kl||(kl=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=fc||(fc=document.querySelector("base"),fc)?fc.getAttribute("href"):null;return null==t?null:(n=t,pc||(pc=document.createElement("a")),pc.setAttribute("href",n),"/"===pc.pathname.charAt(0)?pc.pathname:"/"+pc.pathname);var n}resetBaseElement(){fc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}(document.cookie,e)}}let pc,fc=null;const mc=new Ne("TRANSITION_ID"),gc=[{provide:Da,useFactory:function(e,t,n){return()=>{n.get(Fa).donePromise.then(()=>{const n=Rl();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[mc,Nl,Fo],multi:!0}];class vc{static init(){var e;e=new vc,ml=e}addToWindow(e){Te.getAngularTestability=(t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},Te.getAllAngularTestabilities=()=>e.getAllTestabilities(),Te.getAllAngularRootElements=()=>e.getAllRootElements(),Te.frameworkStabilizers||(Te.frameworkStabilizers=[]),Te.frameworkStabilizers.push(e=>{const t=Te.getAllAngularTestabilities();let n=t.length,i=!1;const r=function(t){i=i||t,n--,0==n&&e(i)};t.forEach((function(e){e.whenStable(r)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?Rl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const yc=new Ne("EventManagerPlugins");let _c=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(Ge(yc),Ge(il))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class bc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=Rl().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let wc=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),xc=(()=>{class e extends wc{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Rl().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Ge(Nl))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Sc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Mc=/%COMP%/g;function Ec(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Ec(e,r,n):(r=r.replace(Mc,e),n.push(r))}return n}function Tc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cc=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ac(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case rt.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Pc(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case rt.Native:case rt.ShadowDom:return new Oc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Ec(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Ge(_c),Ge(xc),Ge(Ua))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();class Ac{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Sc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const r=Sc[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Sc[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&Ps.DashCase?e.style.setProperty(t,n,i&Ps.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Ps.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tc(n)):this.eventManager.addEventListener(e,t,Tc(n))}}class Pc extends Ac{constructor(e,t,n,i){super(e),this.component=n;const r=Ec(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(Mc,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Mc,i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Oc extends Ac{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===rt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=Ec(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const e=document.createElement("style");e.textContent=r[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ic=(()=>{class e extends bc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Ge(Nl))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const kc=["alt","control","meta","shift"],Rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lc={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Dc=(()=>{class e extends bc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),o=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rl().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let o="";if(kc.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=r,0!=n.length||0===r.length)return null;const s={};return s.domEventName=i,s.fullKey=o,s}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Nc.hasOwnProperty(t)&&(t=Nc[t]))}return Rc[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),kc.forEach(i=>{i!=n&&(0,Lc[i])(e)&&(t+=i+".")}),t+=n,t}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Ge(Nl))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const Fc=yl(Pl,"browser",[{provide:ja,useValue:"browser"},{provide:Ba,useValue:function(){dc.makeCurrent(),vc.init()},multi:!0},{provide:Nl,useFactory:function(){return function(e){Nt=e}(document),document},deps:[]}]),Uc=[[],{provide:Mo,useValue:"root"},{provide:ai,useFactory:function(){return new ai},deps:[]},{provide:yc,useClass:Ic,multi:!0,deps:[Nl,il,ja]},{provide:yc,useClass:Dc,multi:!0,deps:[Nl]},[],{provide:Cc,useClass:Cc,deps:[_c,xc,Ua]},{provide:As,useExisting:Cc},{provide:wc,useExisting:xc},{provide:xc,useClass:xc,deps:[Nl]},{provide:hl,useClass:hl,deps:[il]},{provide:_c,useClass:_c,deps:[yc,il]},[]];let zc=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ua,useValue:t.appId},{provide:mc,useExisting:Ua},gc]}}}return e.\u0275mod=dt({type:e}),e.\u0275inj=le({factory:function(t){return new(t||e)(Ge(e,12))},providers:Uc,imports:[lc,Il]}),e})();function Hc(...e){let t=e[e.length-1];return E(t)?(e.pop(),L(e,t)):W(e)}"undefined"!=typeof window&&window;class Bc extends S{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(e){super.next(this._value=e)}}class jc extends f{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Vc extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Wc(e,t,n,i,r=new Vc(e,n,i)){if(!r.closed)return t instanceof y?t.subscribe(r):N(t)(r)}const Gc={};class qc{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Xc(e,this.resultSelector))}}class Xc extends jc{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Gc),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Wc(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const i=this.values,r=this.toRespond?i[n]===Gc?--this.toRespond:this.toRespond:0;i[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Yc=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),Zc=new y(e=>e.complete());function Jc(e){return e?function(e){return new y(t=>e.schedule(()=>t.complete()))}(e):Zc}function $c(e){return new y(t=>{let n;try{n=e()}catch(i){return void t.error(i)}return(n?D(n):Jc()).subscribe(t)})}function Qc(){return V(1)}function Kc(e,t){return function(n){return n.lift(new eu(e,t))}}class eu{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new tu(e,this.predicate,this.thisArg))}}class tu extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const nu=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function iu(e){return function(t){return 0===e?Jc():t.lift(new ru(e))}}class ru{constructor(e){if(this.total=e,this.total<0)throw new nu}call(e,t){return t.subscribe(new ou(e,this.total))}}class ou extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=t++%n;e.next(i[r])}}e.complete()}}function su(e=cu){return t=>t.lift(new au(e))}class au{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new lu(e,this.errorFactory))}}class lu extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function cu(){return new Yc}function uu(e=null){return t=>t.lift(new hu(e))}class hu{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new du(e,this.defaultValue))}}class du extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function pu(e,t){return"function"==typeof t?n=>n.pipe(pu((n,i)=>D(e(n,i)).pipe(T((e,r)=>t(n,e,i,r))))):t=>t.lift(new fu(e))}class fu{constructor(e){this.project=e}call(e,t){return t.subscribe(new mu(e,this.project))}}class mu extends U{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new F(this),i=this.destination;i.add(n),this.innerSubscription=z(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function gu(e){return t=>0===e?Jc():t.lift(new vu(e))}class vu{constructor(e){if(this.total=e,this.total<0)throw new nu}call(e,t){return t.subscribe(new yu(e,this.total))}}class yu extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function _u(...e){return Qc()(Hc(...e))}class bu{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new wu(e,this.accumulator,this.seed,this.hasSeed))}}class wu extends f{constructor(e,t,n,i){super(e),this.accumulator=t,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function xu(e){return function(t){const n=new Su(e),i=t.lift(n);return n.caught=i}}class Su{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Mu(e,this.selector,this.caught))}}class Mu extends U{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new F(this);this.add(i);const r=z(n,i);r!==i&&this.add(r)}}}function Eu(e,t){return H(e,t,1)}function Tu(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Kc((t,n)=>e(t,n,i)):v,gu(1),n?uu(t):su(()=>new Yc))}function Cu(){}function Au(e,t,n){return function(i){return i.lift(new Pu(e,t,n))}}class Pu{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new Ou(e,this.nextOrObserver,this.error,this.complete))}}class Ou extends f{constructor(e,t,n,r){super(e),this._tapNext=Cu,this._tapError=Cu,this._tapComplete=Cu,this._tapError=n||Cu,this._tapComplete=r||Cu,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Cu,this._tapError=t.error||Cu,this._tapComplete=t.complete||Cu)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Iu{constructor(e){this.callback=e}call(e,t){return t.subscribe(new ku(e,this.callback))}}class ku extends f{constructor(e,t){super(e),this.add(new h(t))}}class Ru{constructor(e,t){this.id=e,this.url=t}}class Nu extends Ru{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lu extends Ru{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Du extends Ru{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fu extends Ru{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Uu extends Ru{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zu extends Ru{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hu extends Ru{constructor(e,t,n,i,r){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bu extends Ru{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ju extends Ru{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zu{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ju="primary";class $u{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qu(e){return new $u(e)}function Ku(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function eh(e,t,n){const i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const t=i[o],n=e[o];if(t.startsWith(":"))r[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function th(e,t){const n=Object.keys(e),i=Object.keys(t);if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!nh(e[r],t[r]))return!1;return!0}function nh(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((e,t)=>i[t]===e)}return e===t}function ih(e){return Array.prototype.concat.apply([],e)}function rh(e){return e.length>0?e[e.length-1]:null}function oh(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function sh(e){return(t=e)&&"function"==typeof t.subscribe?e:rs(e)?D(Promise.resolve(e)):Hc(e);var t}function ah(e,t,n){return n?function(e,t){return th(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!hh(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>nh(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,i,r){if(n.segments.length>r.length)return!!hh(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!hh(n.segments,r))return!1;for(const t in i.children){if(!n.children[t])return!1;if(!e(n.children[t],i.children[t]))return!1}return!0}{const e=r.slice(0,n.segments.length),o=r.slice(n.segments.length);return!!hh(n.segments,e)&&!!n.children.primary&&t(n.children.primary,i,o)}}(t,n,n.segments)}(e.root,t.root)}class lh{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return mh.serialize(this)}}class ch{constructor(e,t){this.segments=e,this.children=t,this.parent=null,oh(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gh(this)}}class uh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qu(this.parameters)),this._parameterMap}toString(){return xh(this)}}function hh(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function dh(e,t){let n=[];return oh(e.children,(e,i)=>{i===Ju&&(n=n.concat(t(e,i)))}),oh(e.children,(e,i)=>{i!==Ju&&(n=n.concat(t(e,i)))}),n}class ph{}class fh{parse(e){const t=new Ch(e);return new lh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,n){if(!t.hasChildren())return gh(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",i=[];return oh(t.children,(t,n)=>{n!==Ju&&i.push(`${n}:${e(t,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=dh(t,(n,i)=>i===Ju?[e(t.children.primary,!1)]:[`${i}:${e(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${gh(t)}/${n[0]}`:`${gh(t)}/(${n.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${yh(t)}=${yh(e)}`).join("&"):`${yh(t)}=${yh(n)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const mh=new fh;function gh(e){return e.segments.map(e=>xh(e)).join("/")}function vh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yh(e){return vh(e).replace(/%3B/gi,";")}function _h(e){return vh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bh(e){return decodeURIComponent(e)}function wh(e){return bh(e.replace(/\+/g,"%20"))}function xh(e){return`${_h(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${_h(e)}=${_h(t[e])}`).join("")}`;var t}const Sh=/^[^\/()?;=#]+/;function Mh(e){const t=e.match(Sh);return t?t[0]:""}const Eh=/^[^=?&#]+/,Th=/^[^?&#]+/;class Ch{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ch([],{}):new ch([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new ch(e,t)),n}parseSegment(){const e=Mh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new uh(bh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Mh(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Mh(this.remaining);e&&(n=e,this.capture(n))}e[bh(t)]=bh(n)}parseQueryParam(e){const t=function(e){const t=e.match(Eh);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Th);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const i=wh(t),r=wh(n);if(e.hasOwnProperty(i)){let t=e[i];Array.isArray(t)||(t=[t],e[i]=t),t.push(r)}else e[i]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Mh(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=Ju);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o.primary:new ch([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ah{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ph(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Ph(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Oh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Oh(e,this._root).map(e=>e.value)}}function Ph(e,t){if(e===t.value)return t;for(const n of t.children){const t=Ph(e,n);if(t)return t}return null}function Oh(e,t){if(e===t.value)return[t];for(const n of t.children){const i=Oh(e,n);if(i.length)return i.unshift(t),i}return[]}class Ih{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kh(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Rh extends Ah{constructor(e,t){super(e),this.snapshot=t,zh(this,e)}toString(){return this.snapshot.toString()}}function Nh(e,t){const n=function(e,t){const n=new Fh([],{},{},"",{},Ju,t,null,e.root,-1,{});return new Uh("",new Ih(n,[]))}(e,t),i=new Bc([new uh("",{})]),r=new Bc({}),o=new Bc({}),s=new Bc({}),a=new Bc(""),l=new Lh(i,r,s,a,o,Ju,t,n.root);return l.snapshot=n.root,new Rh(new Ih(l,[]),n)}class Lh{constructor(e,t,n,i,r,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(T(e=>Qu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(T(e=>Qu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dh(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const e=n[i],t=n[i-1];if(e.routeConfig&&""===e.routeConfig.path)i--;else{if(t.component)break;i--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Fh{constructor(e,t,n,i,r,o,s,a,l,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Uh extends Ah{constructor(e,t){super(t),this.url=e,zh(this,t)}toString(){return Hh(this._root)}}function zh(e,t){t.value._routerState=e,t.children.forEach(t=>zh(e,t))}function Hh(e){const t=e.children.length>0?` { ${e.children.map(Hh).join(", ")} } `:"";return`${e.value}${t}`}function Bh(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,th(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),th(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!th(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),th(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function jh(e,t){var n,i;return th(e.params,t.params)&&hh(n=e.url,i=t.url)&&n.every((e,t)=>th(e.parameters,i[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||jh(e.parent,t.parent))}function Vh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Wh(e,t,n,i,r){let o={};return i&&oh(i,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new lh(n.root===e?t:function e(t,n,i){const r={};return oh(t.children,(t,o)=>{r[o]=t===n?i:e(t,n,i)}),new ch(t.segments,r)}(n.root,e,t),o,r)}class Gh{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Vh(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(i&&i!==rh(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qh{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Xh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Yh(e,t,n){if(e||(e=new ch([],{})),0===e.segments.length&&e.hasChildren())return Zh(e,t,n);const i=function(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const t=e.segments[r],s=Xh(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Kh(s,a,t))return o;i+=2}else{if(!Kh(s,{},t))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const t=new ch(e.segments.slice(0,i.pathIndex),{});return t.children.primary=new ch(e.segments.slice(i.pathIndex),e.children),Zh(t,0,r)}return i.match&&0===r.length?new ch(e.segments,{}):i.match&&!e.hasChildren()?Jh(e,t,n):i.match?Zh(e,0,r):Jh(e,t,n)}function Zh(e,t,n){if(0===n.length)return new ch(e.segments,{});{const i=function(e){return"object"==typeof e[0]&&null!==e[0]&&e[0].outlets?e[0].outlets:{[Ju]:e}}(n),r={};return oh(i,(n,i)=>{null!==n&&(r[i]=Yh(e.children[i],t,n))}),oh(e.children,(e,t)=>{void 0===i[t]&&(r[t]=e)}),new ch(e.segments,r)}}function Jh(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&null!==n[r]&&void 0!==n[r].outlets){const e=$h(n[r].outlets);return new ch(i,e)}if(0===r&&Vh(n[0])){i.push(new uh(e.segments[t].path,n[0])),r++;continue}const o=Xh(n[r]),s=r<n.length-1?n[r+1]:null;o&&s&&Vh(s)?(i.push(new uh(o,Qh(s))),r+=2):(i.push(new uh(o,{})),r++)}return new ch(i,{})}function $h(e){const t={};return oh(e,(e,n)=>{null!==e&&(t[n]=Jh(new ch([],{}),0,e))}),t}function Qh(e){const t={};return oh(e,(e,n)=>t[n]=""+e),t}function Kh(e,t,n){return e==n.path&&th(t,n.parameters)}class ed{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Bh(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=kh(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,i[t],n),delete i[t]}),oh(i,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(e,t,r.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:i})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const i=kh(e),r=e.value.component?n.children:t;oh(i,(e,t)=>this.deactivateRouteAndItsChildren(e,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const i=kh(t);e.children.forEach(e=>{this.activateRoutes(e,i[e.value.outlet],n),this.forwardEvent(new Yu(e.value.snapshot))}),e.children.length&&this.forwardEvent(new qu(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(Bh(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,r.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const t=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const e=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),td(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=i,t.resolver=r,t.outlet&&t.outlet.activateWith(i,r),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function td(e){Bh(e.value),e.children.forEach(td)}class nd{constructor(e,t){this.routes=e,this.module=t}}function id(e){return"function"==typeof e}function rd(e){return e instanceof lh}const od=Symbol("INITIAL_VALUE");function sd(){return pu(e=>function(...e){let t=void 0,n=void 0;return E(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),W(e,n).lift(new qc(t))}(...e.map(e=>e.pipe(gu(1),function(...e){const t=e[e.length-1];return E(t)?(e.pop(),n=>_u(e,n,t)):t=>_u(e,t)}(od)))).pipe(function(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new bu(e,t,n))}}((e,t)=>{let n=!1;return t.reduce((e,i,r)=>{if(e!==od)return e;if(i===od&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||rd(i))return i}return e},e)},od),Kc(e=>e!==od),T(e=>rd(e)?e:!0===e),gu(1)))}class ad{constructor(e){this.segmentGroup=e||null}}class ld{constructor(e){this.urlTree=e}}function cd(e){return new y(t=>t.error(new ad(e)))}function ud(e){return new y(t=>t.error(new ld(e)))}function hd(e){return new y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class dd{constructor(e,t,n,i,r){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(Ze)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Ju).pipe(T(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(xu(e=>{if(e instanceof ld)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof ad)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ju).pipe(T(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(xu(e=>{if(e instanceof ad)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new ch([],{[Ju]:e}):e;return new lh(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(T(e=>new ch([],e))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Hc({});const n=[],i=[],r={};return oh(e,(e,o)=>{const s=t(o,e).pipe(T(e=>r[o]=e));o===Ju?n.push(s):i.push(s)}),Hc.apply(null,n.concat(i)).pipe(Qc(),function(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Kc((t,n)=>e(t,n,i)):v,iu(1),n?uu(t):su(()=>new Yc))}(),T(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(e,t,i,n))}expandSegment(e,t,n,i,r,o){return Hc(...n).pipe(Eu(s=>this.expandSegmentAgainstRoute(e,t,n,s,i,r,o).pipe(xu(e=>{if(e instanceof ad)return Hc(null);throw e}))),Tu(e=>!!e),xu((e,n)=>{if(e instanceof Yc||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,i,r))return Hc(new ch([],{}));throw new ad(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,i,r,o,s){return gd(i)!==o?cd(t):void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o):cd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ud(r):this.lineralizeSegments(n,r).pipe(H(n=>{const r=new ch(n,{});return this.expandSegment(e,r,t,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:c}=pd(t,i,r);if(!s)return cd(t);const u=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?ud(u):this.lineralizeSegments(i,u).pipe(H(i=>this.expandSegment(e,t,n,i.concat(r.slice(l)),o,!1)))}matchSegmentAgainstRoute(e,t,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(T(e=>(n._loadedConfig=e,new ch(i,{})))):Hc(new ch(i,{}));const{matched:r,consumedSegments:o,lastChild:s}=pd(t,n,i);if(!r)return cd(t);const a=i.slice(s);return this.getChildConfig(e,n,i).pipe(H(e=>{const n=e.module,i=e.routes,{segmentGroup:r,slicedSegments:s}=function(e,t,n,i){return n.length>0&&function(e,t,n){return n.some(n=>md(e,t,n)&&gd(n)!==Ju)}(e,n,i)?{segmentGroup:fd(new ch(t,function(e,t){const n={};n.primary=t;for(const i of e)""===i.path&&gd(i)!==Ju&&(n[gd(i)]=new ch([],{}));return n}(i,new ch(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>md(e,t,n))}(e,n,i)?{segmentGroup:fd(new ch(e.segments,function(e,t,n,i){const r={};for(const o of n)md(e,t,o)&&!i[gd(o)]&&(r[gd(o)]=new ch([],{}));return Object.assign(Object.assign({},i),r)}(e,n,i,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,i);return 0===s.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(T(e=>new ch(o,e))):0===i.length&&0===s.length?Hc(new ch(o,{})):this.expandSegment(n,r,i,s,Ju,!0).pipe(T(e=>new ch(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Hc(new nd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Hc(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(H(n=>n?this.configLoader.load(e.injector,t).pipe(T(e=>(t._loadedConfig=e,e))):function(e){return new y(t=>t.error(Ku(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Hc(new nd([],e))}runCanLoadGuards(e,t,n){const i=t.canLoad;return i&&0!==i.length?Hc(i.map(i=>{const r=e.get(i);let o;if(function(e){return e&&id(e.canLoad)}(r))o=r.canLoad(t,n);else{if(!id(r))throw new Error("Invalid CanLoad guard");o=r(t,n)}return sh(o)})).pipe(sd(),Au(e=>{if(!rd(e))return;const t=Ku(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),T(e=>!0===e)):Hc(!0)}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Hc(n);if(i.numberOfChildren>1||!i.children.primary)return hd(e.redirectTo);i=i.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const r=this.createSegmentGroup(e,t.root,n,i);return new lh(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return oh(e,(e,i)=>{if("string"==typeof e&&e.startsWith(":")){const r=e.substring(1);n[i]=t[r]}else n[i]=e}),n}createSegmentGroup(e,t,n,i){const r=this.createSegments(e,t.segments,n,i);let o={};return oh(t.children,(t,r)=>{o[r]=this.createSegmentGroup(e,t,n,i)}),new ch(r,o)}createSegments(e,t,n,i){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,i):this.findOrReturn(t,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function pd(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(t.matcher||eh)(n,e,t);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function fd(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new ch(e.segments.concat(t.segments),t.children)}return e}function md(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function gd(e){return e.outlet||Ju}class vd{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yd{constructor(e,t){this.component=e,this.route=t}}function _d(e,t,n){const i=e._root;return function e(t,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=kh(n);return t.children.forEach(t=>{!function(t,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,l=i?i.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!hh(e.url,t.url);case"pathParamsOrQueryParamsChange":return!hh(e.url,t.url)||!th(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jh(e,t)||!th(e.queryParams,t.queryParams);case"paramsChange":default:return!jh(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new vd(r)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?l?l.children:null:i,r,o),c&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new yd(l.outlet.component,a))}else a&&wd(n,l,o),o.canActivateChecks.push(new vd(r)),e(t,null,s.component?l?l.children:null:i,r,o)}(t,s[t.value.outlet],i,r.concat([t.value]),o),delete s[t.value.outlet]}),oh(s,(e,t)=>wd(e,i.getContext(t),o)),o}(i,t?t._root:null,n,[i.value])}function bd(e,t,n){const i=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function wd(e,t,n){const i=kh(e),r=e.value;oh(i,(e,i)=>{wd(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new yd(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function xd(e,t){return null!==e&&t&&t(new Xu(e)),Hc(!0)}function Sd(e,t){return null!==e&&t&&t(new Gu(e)),Hc(!0)}function Md(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?Hc(i.map(i=>$c(()=>{const r=bd(i,t,n);let o;if(function(e){return e&&id(e.canActivate)}(r))o=sh(r.canActivate(t,e));else{if(!id(r))throw new Error("Invalid CanActivate guard");o=sh(r(t,e))}return o.pipe(Tu())}))).pipe(sd()):Hc(!0)}function Ed(e,t,n){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>$c(()=>Hc(t.guards.map(r=>{const o=bd(r,t.node,n);let s;if(function(e){return e&&id(e.canActivateChild)}(o))s=sh(o.canActivateChild(i,e));else{if(!id(o))throw new Error("Invalid CanActivateChild guard");s=sh(o(i,e))}return s.pipe(Tu())})).pipe(sd())));return Hc(r).pipe(sd())}class Td{}class Cd{constructor(e,t,n,i,r,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const e=Od(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ju),n=new Fh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ju,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ih(n,t),r=new Uh(this.url,i);return this.inheritParamsAndData(r._root),Hc(r)}catch(e){return new y(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=Dh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=dh(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),i=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${i}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===Ju?-1:t.value.outlet===Ju?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,i){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,i)}catch(r){if(!(r instanceof Td))throw r}if(this.noLeftoversInUrl(t,n,i))return[];throw new Td}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo)throw new Td;if((e.outlet||Ju)!==i)throw new Td;let r,o=[],s=[];if("**"===e.path){const o=n.length>0?rh(n).parameters:{};r=new Fh(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rd(e),i,e.component,e,Ad(t),Pd(t)+n.length,Nd(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Td;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(t.matcher||eh)(n,e,t);if(!i)throw new Td;const r={};oh(i.posParams,(e,t)=>{r[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),r=new Fh(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rd(e),i,e.component,e,Ad(t),Pd(t)+o.length,Nd(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=Od(t,o,s,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return[new Ih(r,e)]}if(0===a.length&&0===c.length)return[new Ih(r,[])];const u=this.processSegment(a,l,c,Ju);return[new Ih(r,u)]}}function Ad(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Pd(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Od(e,t,n,i,r){if(n.length>0&&function(e,t,n){return n.some(n=>Id(e,t,n)&&kd(n)!==Ju)}(e,n,i)){const r=new ch(t,function(e,t,n,i){const r={};r.primary=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&kd(o)!==Ju){const n=new ch([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,r[kd(o)]=n}return r}(e,t,i,new ch(n,e.children)));return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Id(e,t,n))}(e,n,i)){const o=new ch(e.segments,function(e,t,n,i,r,o){const s={};for(const a of i)if(Id(e,n,a)&&!r[kd(a)]){const n=new ch([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[kd(a)]=n}return Object.assign(Object.assign({},r),s)}(e,t,n,i,e.children,r));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new ch(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Id(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function kd(e){return e.outlet||Ju}function Rd(e){return e.data||{}}function Nd(e){return e.resolve||{}}function Ld(e){return function(t){return t.pipe(pu(t=>{const n=e(t);return n?D(n).pipe(T(()=>t)):D([t])}))}}class Dd extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}let Fd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&es(0,"router-outlet")},directives:function(){return[tp]},encapsulation:2}),e})();function Ud(e,t=""){for(let n=0;n<e.length;n++){const i=e[n];zd(i,Hd(t,i))}}function zd(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Ju)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Ud(e.children,t)}function Hd(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Bd(e){const t=e.children&&e.children.map(Bd),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ju&&(n.component=Fd),n}const jd=new Ne("ROUTES");class Vd{constructor(e,t,n,i){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(T(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new nd(ih(i.injector.get(jd)).map(Bd),i)}))}loadModuleFactory(e){return"string"==typeof e?D(this.loader.load(e)):sh(e()).pipe(H(e=>e instanceof Je?Hc(e):D(this.compiler.compileModuleAsync(e))))}}class Wd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gd,this.attachRef=null}}class Gd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wd,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class qd{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Xd(e){throw e}function Yd(e,t,n){return t.parse("/")}function Zd(e,t){return Hc(null)}let Jd=(()=>{class e{constructor(e,t,n,i,r,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Xd,this.malformedUriErrorHandler=Yd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zd,afterPreactivation:Zd},this.urlHandlingStrategy=new qd,this.routeReuseStrategy=new Dd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Ze),this.console=r.get(Wa);const l=r.get(il);this.isNgZoneEnabled=l instanceof il,this.resetConfig(a),this.currentUrlTree=new lh(new ch([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vd(o,s,e=>this.triggerEvent(new Vu(e)),e=>this.triggerEvent(new Wu(e))),this.routerState=Nh(this.currentUrlTree,this.rootComponentType),this.transitions=new Bc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Kc(e=>0!==e.id),T(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),pu(e=>{let n=!1,i=!1;return Hc(e).pipe(Au(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pu(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Hc(e).pipe(pu(e=>{const n=this.transitions.getValue();return t.next(new Nu(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Zc:[e]}),pu(e=>Promise.resolve(e)),(i=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,s=this.config,function(e){return e.pipe(pu(e=>function(e,t,n,i,r){return new dd(e,t,n,i,r).apply()}(i,r,o,e.extractedUrl,s).pipe(T(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),Au(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,r){return function(o){return o.pipe(H(o=>function(e,t,n,i,r="emptyOnly",o="legacy"){return new Cd(e,t,n,i,r,o).recognize()}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(T(e=>Object.assign(Object.assign({},o),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Au(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Au(e=>{const n=new Uu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var i,r,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:s}=e,a=new Nu(n,this.serializeUrl(i),r,o);t.next(a);const l=Nh(i,this.rootComponentType).snapshot;return Hc(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Zc}),Ld(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),Au(e=>{const t=new zu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),T(e=>Object.assign(Object.assign({},e),{guards:_d(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(H(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Hc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return D(e).pipe(H(e=>function(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Hc(o.map(o=>{const s=bd(o,t,r);let a;if(function(e){return e&&id(e.canDeactivate)}(s))a=sh(s.canDeactivate(e,t,n,i));else{if(!id(s))throw new Error("Invalid CanDeactivate guard");a=sh(s(e,t,n,i))}return a.pipe(Tu())})).pipe(sd()):Hc(!0)}(e.component,e.route,n,t,i)),Tu(e=>!0!==e,!0))}(s,i,r,e).pipe(H(n=>n&&"boolean"==typeof n?function(e,t,n,i){return D(t).pipe(Eu(t=>D([Sd(t.route.parent,i),xd(t.route,i),Ed(e,t.path,n),Md(e,t.route,n)]).pipe(Qc(),Tu(e=>!0!==e,!0))),Tu(e=>!0!==e,!0))}(i,o,e,t):Hc(n)),T(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),Au(e=>{if(rd(e.guardsResult)){const t=Ku(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),Au(e=>{const t=new Hu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Kc(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Du(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Ld(e=>{if(e.guards.canActivateChecks.length)return Hc(e).pipe(Au(e=>{const t=new Bu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),pu(e=>{let n=!1;return Hc(e).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(e){return e.pipe(H(e=>{const{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return Hc(e);let o=0;return D(n).pipe(Eu(e=>function(e,t,n,i){return function(e,t,n,i){const r=Object.keys(e);if(0===r.length)return Hc({});const o={};return D(r).pipe(H(r=>function(e,t,n,i){const r=bd(e,t,i);return sh(r.resolve?r.resolve(t,n):r(t,n))}(e[r],t,n,i).pipe(Au(e=>{o[r]=e}))),iu(1),H(()=>Object.keys(o).length===r.length?Hc(o):Zc))}(e._resolve,e,t,i).pipe(T(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Dh(e,n).resolve),null)))}(e.route,t,i,r)),Au(()=>o++),iu(1),H(t=>o===n.length?Hc(e):Zc))}))}),Au({next:()=>n=!0,complete:()=>{if(!n){const n=new Du(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");t.next(n),e.resolve(!1)}}}));var i,r}),Au(e=>{const t=new ju(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Ld(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),T(e=>{const t=function(e,t,n){const i=function e(t,n,i){if(i&&t.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const o=function(t,n,i){return n.children.map(n=>{for(const r of i.children)if(t.shouldReuseRoute(r.value.snapshot,n.value))return e(t,n,r);return e(t,n)})}(t,n,i);return new Ih(r,o)}{const i=t.retrieve(n.value);if(i){const e=i.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let i=0;i<t.children.length;++i)e(t.children[i],n.children[i])}(n,e),e}{const i=new Lh(new Bc((r=n.value).url),new Bc(r.params),new Bc(r.queryParams),new Bc(r.fragment),new Bc(r.data),r.outlet,r.component,r),o=n.children.map(n=>e(t,n));return new Ih(i,o)}}var r}(e,t._root,n?n._root:void 0);return new Rh(i,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),Au(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=e=>this.triggerEvent(e),T(e=>(new ed(s,e.targetRouterState,e.currentRouterState,a).activate(o),e))),Au({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new Du(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new Iu(r))),xu(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=rd(n.url);i||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const r=new Du(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(r),i?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const i=new Fu(e.id,this.serializeUrl(e.extractedUrl),n);t.next(i);try{e.resolve(this.errorHandler(n))}catch(o){e.reject(o)}}var r;return Zc}));var r,o,s,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:i}=t,r={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,0!==Object.keys(e).length&&(r.state=e)}this.scheduleNavigation(i,e,n,r)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ud(e),this.config=e.map(Bd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=t;pi()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=a?this.currentUrlTree.fragment:r;let u=null;if(s)switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}else u=o?this.currentUrlTree.queryParams:i||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,i,r){if(0===n.length)return Wh(t.root,t.root,t,i,r);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Gh(!0,0,e);let t=0,n=!1;const i=e.reduce((e,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const t={};return oh(i.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(i.segmentPath)return[...e,i.segmentPath]}return"string"!=typeof i?[...e,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):[...e,i]},[]);return new Gh(n,t,i)}(n);if(o.toRoot())return Wh(t.root,new ch([],{}),t,i,r);const s=function(e,t,n){if(e.isAbsolute)return new qh(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new qh(e,e===t.root,0)}const i=Vh(e.commands[0])?0:1;return function(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new qh(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?Zh(s.segmentGroup,s.index,o.commands):Yh(s.segmentGroup,s.index,o.commands);return Wh(s.segmentGroup,a,t,i,r)}(l,this.currentUrlTree,e,u,c)}navigateByUrl(e,t={skipLocationChange:!1}){pi()&&this.isNgZoneEnabled&&!il.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=rd(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(rd(e))return ah(this.currentUrlTree,e,t);const n=this.parseUrl(e);return ah(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const i=e[n];return null!=i&&(t[n]=i),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Lu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,i,r){const o=this.getTransition(),s="imperative"!==t&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===e.toString();if(s&&a)return Promise.resolve(!0);let l,c,u;r?(l=r.resolve,c=r.reject,u=r.promise):u=new Promise((e,t)=>{l=e,c=t});const h=++this.navigationId;return this.setTransition({id:h,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,i){const r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(t){return new(t||e)(Ge(So),Ge(ph),Ge(Gd),Ge(Zl),Ge(Fo),Ge(Ml),Ge(el),Ge(void 0))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),$d=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.route=t,this.commands=[],this.onChanges=new S,null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){pi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:Kd(this.skipLocationChange),replaceUrl:Kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Kd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Kd(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Yo(Jd),Yo(Lh),Zo("tabindex"),Yo(Os),Yo(Ts))},e.\u0275dir=ft({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&os("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[At]}),e})(),Qd=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new S,this.subscription=e.events.subscribe(e=>{e instanceof Lu&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){pi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,i,r){if(0!==e||t||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Kd(this.skipLocationChange),replaceUrl:Kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Kd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Kd(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Yo(Jd),Yo(Lh),Yo(Wl))},e.\u0275dir=ft({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&os("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)})),2&e&&(xs("href",t.href,Ui),qo("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[At]}),e})();function Kd(e){return""===e||!!e}let ep=(()=>{class e{constructor(e,t,n,i,r,o){this.router=e,this.element=t,this.renderer=n,this.cdr=i,this.link=r,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof Lu&&this.update()})}ngAfterContentInit(){D([this.links.changes,this.linksWithHrefs.changes,Hc(null)]).pipe(V()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=D(t).pipe(V()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(Yo(Jd),Yo(Ts),Yo(Os),Yo(wo),Yo($d,8),Yo(Qd,8))},e.\u0275dir=ft({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var i;1&e&&(Ia(n,$d,!0),Ia(n,Qd,!0)),2&e&&(Pa(i=ka())&&(t.links=i),Pa(i=ka())&&(t.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[At]}),e})(),tp=(()=>{class e{constructor(e,t,n,i,r){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new ya,this.deactivateEvents=new ya,this.name=i||Ju,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new np(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Yo(Gd),Yo(Qs),Yo(Es),Zo("name"),Yo(wo))},e.\u0275dir=ft({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class np{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Lh?this.route:e===Gd?this.childContexts:this.parent.get(e,t)}}class ip{}class rp{preload(e,t){return Hc(null)}}let op=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=new Vd(t,n,t=>e.triggerEvent(new Vu(t)),t=>e.triggerEvent(new Wu(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Kc(e=>e instanceof Lu),Eu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ze);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const i of t)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const e=i._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(e,i)):i.children&&n.push(this.processRoutes(e,i.children));return D(n).pipe(V(),T(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(H(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Ge(Jd),Ge(Ml),Ge(el),Ge(Fo),Ge(ip))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})(),sp=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Nu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Lu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Zu&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Zu(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Ge(Jd),Ge(cc),Ge(void 0))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();const ap=new Ne("ROUTER_CONFIGURATION"),lp=new Ne("ROUTER_FORROOT_GUARD"),cp=[Zl,{provide:ph,useClass:fh},{provide:Jd,useFactory:function(e,t,n,i,r,o,s,a={},l,c){const u=new Jd(null,e,t,n,i,r,o,ih(s));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=Rl();u.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[ph,Gd,Zl,Fo,Ml,el,jd,ap,[class{},new ne],[class{},new ne]]},Gd,{provide:Lh,useFactory:function(e){return e.routerState.root},deps:[Jd]},{provide:Ml,useClass:Cl},op,rp,class{preload(e,t){return t().pipe(xu(()=>Hc(null)))}},{provide:ap,useValue:{enableTracing:!1}}];function up(){return new vl("Router",Jd)}let hp=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[cp,mp(t),{provide:lp,useFactory:fp,deps:[[Jd,new ne,new re]]},{provide:ap,useValue:n||{}},{provide:Wl,useFactory:pp,deps:[Ll,[new te(ql),new ne],ap]},{provide:sp,useFactory:dp,deps:[Jd,cc,ap]},{provide:ip,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:rp},{provide:vl,multi:!0,useFactory:up},[gp,{provide:Da,multi:!0,useFactory:vp,deps:[gp]},{provide:_p,useFactory:yp,deps:[gp]},{provide:Va,multi:!0,useExisting:_p}]]}}static forChild(t){return{ngModule:e,providers:[mp(t)]}}}return e.\u0275mod=dt({type:e}),e.\u0275inj=le({factory:function(t){return new(t||e)(Ge(lp,8),Ge(Jd,8))}}),e})();function dp(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new sp(e,t,n)}function pp(e,t,n={}){return n.useHash?new Yl(e,t):new Xl(e,t)}function fp(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function mp(e){return[{provide:Uo,multi:!0,useValue:e},{provide:jd,multi:!0,useValue:e}]}let gp=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(Fl,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Jd),i=this.injector.get(ap);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Hc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(ap),n=this.injector.get(op),i=this.injector.get(sp),r=this.injector.get(Jd),o=this.injector.get(xl);e===o.components[0]&&(this.isLegacyEnabled(t)?r.initialNavigation():this.isLegacyDisabled(t)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(Ge(Fo))},e.\u0275prov=ae({token:e,factory:e.\u0275fac}),e})();function vp(e){return e.appInitializer.bind(e)}function yp(e){return e.bootstrapListener.bind(e)}const _p=new Ne("Router Initializer");function bp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var xp,Sp,Mp,Ep,Tp,Cp,Ap,Pp,Op,Ip,kp,Rp,Np={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lp={duration:.5,overwrite:!1,delay:0},Dp=1e8,Fp=1e-8,Up=2*Math.PI,zp=Up/4,Hp=0,Bp=Math.sqrt,jp=Math.cos,Vp=Math.sin,Wp=function(e){return"string"==typeof e},Gp=function(e){return"function"==typeof e},qp=function(e){return"number"==typeof e},Xp=function(e){return void 0===e},Yp=function(e){return"object"==typeof e},Zp=function(e){return!1!==e},Jp=function(){return"undefined"!=typeof window},$p=function(e){return Gp(e)||Wp(e)},Qp="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Kp=Array.isArray,ef=/(?:-?\.?\d|\.)+/gi,tf=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,nf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rf=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,of=/[+-]=-?[\.\d]+/,sf=/[#\-+.]*\b[a-z\d-=+%.]+/gi,af={},lf={},cf=function(e){return(lf=Lf(e,af))&&vg},uf=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},hf=function(e,t){return!t&&console.warn(e)},df=function(e,t){return e&&(af[e]=t)&&lf&&(lf[e]=t)||af},pf=function(){return 0},ff={},mf=[],gf={},vf={},yf={},_f=30,bf=[],wf="",xf=function(e){var t,n,i=e[0];if(Yp(i)||Gp(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=bf.length;n--&&!bf[n].targetTest(i););t=bf[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new jm(e[n],t)))||e.splice(n,1);return e},Sf=function(e){return e._gsap||xf(am(e))[0]._gsap},Mf=function(e,t,n){return(n=e[t])&&Gp(n)?e[t]():Xp(n)&&e.getAttribute&&e.getAttribute(t)||n},Ef=function(e,t){return(e=e.split(",")).forEach(t)||e},Tf=function(e){return Math.round(1e5*e)/1e5||0},Cf=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},Af=function(e,t,n){var i,r=qp(e[1]),o=(r?2:1)+(t<2?0:1),s=e[o];if(r&&(s.duration=e[1]),s.parent=n,t){for(i=s;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=Zp(n.vars.inherit)&&n.parent;s.immediateRender=Zp(i.immediateRender),t<2?s.runBackwards=1:s.startAt=e[o-1]}return s},Pf=function(){var e,t,n=mf.length,i=mf.slice(0);for(gf={},mf.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Of=function(e,t,n,i){mf.length&&Pf(),e.render(t,n,i),mf.length&&Pf()},If=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(sf).length<2?t:Wp(e)?e.trim():e},kf=function(e){return e},Rf=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Nf=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},Lf=function(e,t){for(var n in t)e[n]=t[n];return e},Df=function e(t,n){for(var i in n)t[i]=Yp(n[i])?e(t[i]||(t[i]={}),n[i]):n[i];return t},Ff=function(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},Uf=function(e){var t=e.parent||xp,n=e.keyframes?Nf:Rf;if(Zp(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},zf=function(e,t,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=t._prev,o=t._next;r?r._next=o:e[n]===t&&(e[n]=o),o?o._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},Hf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Bf=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},jf=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Vf=function(e){return e._repeat?Wf(e._tTime,e=e.duration()+e._rDelay)*e:0},Wf=function(e,t){return(e/=t)&&~~e===e?~~e-1:~~e},Gf=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},qf=function(e){return e._end=Tf(e._start+(e._tDur/Math.abs(e._ts||e._rts||Fp)||0))},Xf=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Tf(e._dp._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),qf(e),n._dirty||Bf(n,e)),e},Yf=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Gf(e.rawTime(),t),(!t._dur||im(0,t.totalDuration(),n)-t._tTime>Fp)&&t.render(n,!0)),Bf(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Zf=function(e,t,n,i){return t.parent&&Hf(t),t._start=Tf(n+t._delay),t._end=Tf(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var o,s=e[i];if(r)for(o=t[r];s&&s[r]>o;)s=s._prev;s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=s,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),e._recent=t,i||Yf(e,t),e},Jf=function(e,t){return(af.ScrollTrigger||uf("scrollTrigger",t))&&af.ScrollTrigger.create(t,e)},$f=function(e,t,n,i){return Zm(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Cp!==Pm.frame?(mf.push(e),e._lazy=[t,i],1):void 0:1},Qf=function(e,t,n,i){var r=e._repeat,o=Tf(t)||0,s=e._tTime/e._tDur;return s&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:Tf(o*(r+1)+e._rDelay*r):o,s&&!i?Xf(e,e._tTime=e._tDur*s):e.parent&&qf(e),n||Bf(e.parent,e),e},Kf=function(e){return e instanceof Wm?Bf(e):Qf(e,e._dur)},em={_start:0,endTime:pf},tm=function e(t,n){var i,r,o=t.labels,s=t._recent||em,a=t.duration()>=Dp?s.endTime(!1):t._dur;return Wp(n)&&(isNaN(n)||n in o)?"<"===(i=n.charAt(0))||">"===i?("<"===i?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0):(i=n.indexOf("="))<0?(n in o||(o[n]=a),o[n]):(r=+(n.charAt(i-1)+n.substr(i+1)),i>1?e(t,n.substr(0,i-1))+r:a+r):null==n?a:+n},nm=function(e,t){return e||0===e?t(e):t},im=function(e,t,n){return n<e?e:n>t?t:n},rm=function(e){return(e=(e+"").substr((parseFloat(e)+"").length))&&isNaN(e)?e:""},om=[].slice,sm=function(e,t){return e&&Yp(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Yp(e[0]))&&!e.nodeType&&e!==Sp},am=function(e,t){return!Wp(e)||t||!Mp&&Om()?Kp(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var i;return Wp(e)&&!t||sm(e,1)?(i=n).push.apply(i,am(e)):n.push(e)}))||n}(e,t):sm(e)?om.call(e,0):e?[e]:[]:om.call(Ep.querySelectorAll(e),0)},lm=function(e){return e.sort((function(){return.5-Math.random()}))},cm=function(e){if(Gp(e))return e;var t=Yp(e)?e:{each:e},n=Fm(t.ease),i=t.from||0,r=parseFloat(t.base)||0,o={},s=i>0&&i<1,a=isNaN(i)||s,l=t.axis,c=i,u=i;return Wp(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!s&&a&&(c=i[0],u=i[1]),function(e,s,h){var d,p,f,m,g,v,y,_,b,w=(h||t).length,x=o[w];if(!x){if(!(b="auto"===t.grid?0:(t.grid||[1,Dp])[1])){for(y=-Dp;y<(y=h[b++].getBoundingClientRect().left)&&b<w;);b--}for(x=o[w]=[],d=a?Math.min(b,w)*c-.5:i%b,p=a?w*u/b-.5:i/b|0,y=0,_=Dp,v=0;v<w;v++)f=v%b-d,m=p-(v/b|0),x[v]=g=l?Math.abs("y"===l?m:f):Bp(f*f+m*m),g>y&&(y=g),g<_&&(_=g);"random"===i&&lm(x),x.max=y-_,x.min=_,x.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===i?-1:1),x.b=w<0?r-w:r,x.u=rm(t.amount||t.each)||0,n=n&&w<0?Lm(n):n}return w=(x[e]-x.min)/x.max||0,Tf(x.b+(n?n(w):w)*x.v)+x.u}},um=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){return Math.floor(Math.round(parseFloat(n)/e)*e*t)/t+(qp(n)?0:rm(n))}},hm=function(e,t){var n,i,r=Kp(e);return!r&&Yp(e)&&(n=r=e.radius||Dp,e.values?(e=am(e.values),(i=!qp(e[0]))&&(n*=n)):e=um(e.increment)),nm(t,r?Gp(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,o,s=parseFloat(i?t.x:t),a=parseFloat(i?t.y:0),l=Dp,c=0,u=e.length;u--;)(r=i?(r=e[u].x-s)*r+(o=e[u].y-a)*o:Math.abs(e[u]-s))<l&&(l=r,c=u);return c=!n||l<=n?e[c]:t,i||c===t||qp(t)?c:c+rm(t)}:um(e))},dm=function(e,t,n,i){return nm(Kp(e)?!t:!0===n?!!(n=0):!i,(function(){return Kp(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e+Math.random()*(t-e))/n)*n*i)/i}))},pm=function(e,t,n){return nm(n,(function(n){return e[~~t(n)]}))},fm=function(e){for(var t,n,i,r,o=0,s="";~(t=e.indexOf("random(",o));)i=e.indexOf(")",t),r="["===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?sf:ef),s+=e.substr(o,t-o)+dm(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),o=i+1;return s+e.substr(o,e.length-o)},mm=function(e,t,n,i,r){var o=t-e,s=i-n;return nm(r,(function(t){return n+((t-e)/o*s||0)}))},gm=function(e,t,n){var i,r,o,s=e.labels,a=Dp;for(i in s)(r=s[i]-t)<0==!!n&&r&&a>(r=Math.abs(r))&&(o=i,a=r);return o},vm=function(e,t,n){var i,r,o=e.vars,s=o[t];if(s)return i=o[t+"Params"],r=o.callbackScope||e,n&&mf.length&&Pf(),i?s.apply(r,i):s.call(r)},ym=function(e){return Hf(e),e.progress()<1&&vm(e,"onInterrupt"),e},_m=function(e){var t=(e=!e.name&&e.default||e).name,n=Gp(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:pf,render:lg,add:Xm,kill:ug,modifier:cg,rawVars:0},o={targetTest:0,get:0,getSetter:rg,aliases:{},register:0};if(Om(),e!==i){if(vf[t])return;Rf(i,Rf(Ff(e,r),o)),Lf(i.prototype,Lf(r,Ff(e,o))),vf[i.prop=t]=i,e.targetTest&&(bf.push(i),ff[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}df(t,i),e.register&&e.register(vg,i,pg)},bm=255,wm={aqua:[0,bm,bm],lime:[0,bm,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,bm],navy:[0,0,128],white:[bm,bm,bm],olive:[128,128,0],yellow:[bm,bm,0],orange:[bm,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[bm,0,0],pink:[bm,192,203],cyan:[0,bm,bm],transparent:[bm,bm,bm,0]},xm=function(e,t,n){return(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*bm+.5|0},Sm=function(e,t,n){var i,r,o,s,a,l,c,u,h,d,p=e?qp(e)?[e>>16,e>>8&bm,e&bm]:0:wm.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),wm[e])p=wm[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),r=e.charAt(2),o=e.charAt(3),e="#"+i+i+r+r+o+o),p=[(e=parseInt(e.substr(1),16))>>16,e>>8&bm,e&bm];else if("hsl"===e.substr(0,3))if(p=d=e.match(ef),t){if(~e.indexOf("="))return p=e.match(tf),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,a=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),p.length>3&&(p[3]*=1),p[0]=xm(s+1/3,i,r),p[1]=xm(s,i,r),p[2]=xm(s-1/3,i,r);else p=e.match(ef)||wm.transparent;p=p.map(Number)}return t&&!d&&(i=p[0]/bm,r=p[1]/bm,o=p[2]/bm,l=((c=Math.max(i,r,o))+(u=Math.min(i,r,o)))/2,c===u?s=a=0:(h=c-u,a=l>.5?h/(2-c-u):h/(c+u),s=c===i?(r-o)/h+(r<o?6:0):c===r?(o-i)/h+2:(i-r)/h+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*a+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},Mm=function(e){var t=[],n=[],i=-1;return e.split(Tm).forEach((function(e){var r=e.match(nf)||[];t.push.apply(t,r),n.push(i+=r.length+1)})),t.c=n,t},Em=function(e,t,n){var i,r,o,s,a="",l=(e+a).match(Tm),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=Sm(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=Mm(e),(i=n.c).join(a)!==o.c.join(a)))for(s=(r=e.replace(Tm,"1").split(nf)).length-1;u<s;u++)a+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!r)for(s=(r=e.split(Tm)).length-1;u<s;u++)a+=r[u]+l[u];return a+r[s]},Tm=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in wm)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Cm=/hsl[a]?\(/,Am=function(e){var t,n=e.join(" ");if(Tm.lastIndex=0,Tm.test(n))return t=Cm.test(n),e[1]=Em(e[1],t),e[0]=Em(e[0],t,Mm(e[1])),!0},Pm=function(){var e,t,n,i,r,o,s=Date.now,a=500,l=33,c=s(),u=c,h=1e3/240,d=h,p=[],f=function n(f){var m,g,v,y,_=s()-u,b=!0===f;if(_>a&&(c+=_-l),((m=(v=(u+=_)-c)-d)>0||b)&&(y=++i.frame,r=v-1e3*i.time,i.time=v/=1e3,d+=m+(m>=h?4:h-m),g=1),b||(e=t(n)),g)for(o=0;o<p.length;o++)p[o](v,r,y,f)};return i={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){Tp&&(!Mp&&Jp()&&(Sp=Mp=window,Ep=Sp.document||{},af.gsap=vg,(Sp.gsapVersions||(Sp.gsapVersions=[])).push(vg.version),cf(lf||Sp.GreenSockGlobals||!Sp.gsap&&Sp||{}),n=Sp.requestAnimationFrame),e&&i.sleep(),t=n||function(e){return setTimeout(e,d-1e3*i.time+1|0)},Pp=1,f(2))},sleep:function(){(n?Sp.cancelAnimationFrame:clearTimeout)(e),Pp=0,t=pf},lagSmoothing:function(e,t){a=e||1e8,l=Math.min(t,a,0)},fps:function(e){d=1e3*i.time+(h=1e3/(e||240))},add:function(e){p.indexOf(e)<0&&p.push(e),Om()},remove:function(e){var t;~(t=p.indexOf(e))&&p.splice(t,1)&&o>=t&&o--},_listeners:p}}(),Om=function(){return!Pp&&Pm.wake()},Im={},km=/^[\d.\-M][\d.\-,\s]/,Rm=/["']/g,Nm=function(e){for(var t,n,i,r={},o=e.substr(1,e.length-3).split(":"),s=o[0],a=1,l=o.length;a<l;a++)n=o[a],t=a!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,t),r[s]=isNaN(i)?i.replace(Rm,"").trim():+i,s=n.substr(t+1).trim();return r},Lm=function(e){return function(t){return 1-e(1-t)}},Dm=function e(t,n){for(var i,r=t._first;r;)r instanceof Wm?e(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Fm=function(e,t){return e&&(Gp(e)?e:Im[e]||function(e){var t,n,i,r,o=(e+"").split("("),s=Im[o[0]];return s&&o.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[Nm(o[1])]:(t=e,n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n),t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)).split(",").map(If)):Im._CE&&km.test(e)?Im._CE("",e):s}(e))||t},Um=function(e,t,n,i){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,o={easeIn:t,easeOut:n,easeInOut:i};return Ef(e,(function(e){for(var t in Im[e]=af[e]=o,Im[r=e.toLowerCase()]=n,o)Im[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Im[e+"."+t]=o[t]})),o},zm=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Hm=function e(t,n,i){var r=n>=1?n:1,o=(i||(t?.3:.45))/(n<1?n:1),s=o/Up*(Math.asin(1/r)||0),a=function(e){return 1===e?1:r*Math.pow(2,-10*e)*Vp((e-s)*o)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:zm(a);return o=Up/o,l.config=function(n,i){return e(t,n,i)},l},Bm=function e(t,n){void 0===n&&(n=1.70158);var i=function(e){return e?--e*e*((n+1)*e+n)+1:0},r="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:zm(i);return r.config=function(n){return e(t,n)},r};Ef("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Um(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Im.Linear.easeNone=Im.none=Im.Linear.easeIn,Um("Elastic",Hm("in"),Hm("out"),Hm()),Op=7.5625,kp=1/(Ip=2.75),Um("Bounce",(function(e){return 1-Rp(1-e)}),Rp=function(e){return e<kp?Op*e*e:e<.7272727272727273?Op*Math.pow(e-1.5/Ip,2)+.75:e<.9090909090909092?Op*(e-=2.25/Ip)*e+.9375:Op*Math.pow(e-2.625/Ip,2)+.984375}),Um("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Um("Circ",(function(e){return-(Bp(1-e*e)-1)})),Um("Sine",(function(e){return 1===e?1:1-jp(e*zp)})),Um("Back",Bm("in"),Bm("out"),Bm()),Im.SteppedEase=Im.steps=af.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0;return function(e){return((i*im(0,.99999999,e)|0)+r)*n}}},Lp.ease=Im["quad.out"],Ef("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return wf+=e+","+e+"Params,"}));var jm=function(e,t){this.id=Hp++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Mf,this.set=t?t.getSetter:rg},Vm=function(){function e(e,t){var n=e.parent||xp;this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Qf(this,+e.duration,1,1),this.data=e.data,Pp||Pm.wake(),n&&Zf(n,this,t||0===t?t:n._time,1),e.reversed&&this.reverse(),e.paused&&this.paused(!0)}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Qf(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Om(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Xf(this,e);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Zf(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Fp||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Of(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Vf(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Vf(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Wf(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Gf(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,jf(this.totalTime(im(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Om(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=Fp)&&Math.abs(this._zTime)!==Fp))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Zf(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Zp(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Gf(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e,Kf(this)):this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Kf(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(tm(this,e),Zp(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Zp(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Fp))},t.eventCallback=function(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise((function(n){var i=Gp(e)?e:kf,r=function(){var e=t.then;t.then=null,Gp(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){ym(this)},e}();Rf(Vm.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Wm=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t,n)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=Zp(t.sortChildren),i.parent&&Yf(i.parent,bp(i)),t.scrollTrigger&&Jf(bp(i),t.scrollTrigger),i}wp(t,e);var n=t.prototype;return n.to=function(e,t,n){return new Km(e,Af(arguments,0,this),tm(this,qp(t)?arguments[3]:n)),this},n.from=function(e,t,n){return new Km(e,Af(arguments,1,this),tm(this,qp(t)?arguments[3]:n)),this},n.fromTo=function(e,t,n,i){return new Km(e,Af(arguments,2,this),tm(this,qp(t)?arguments[4]:i)),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Uf(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Km(e,t,tm(this,n),1),this},n.call=function(e,t,n){return Zf(this,Km.delayedCall(0,e,t),tm(this,n))},n.staggerTo=function(e,t,n,i,r,o,s){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=o,n.onCompleteParams=s,n.parent=this,new Km(e,n,tm(this,r)),this},n.staggerFrom=function(e,t,n,i,r,o,s){return n.runBackwards=1,Uf(n).immediateRender=Zp(n.immediateRender),this.staggerTo(e,t,n,i,r,o,s)},n.staggerFromTo=function(e,t,n,i,r,o,s,a){return i.startAt=n,Uf(i).immediateRender=Zp(i.immediateRender),this.staggerTo(e,t,i,r,o,s,a)},n.render=function(e,t,n){var i,r,o,s,a,l,c,u,h,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==xp&&e>g-Fp&&e>=0?g:e<Fp?0:e,_=this._zTime<0!=e<0&&(this._initted||!v);if(y!==this._tTime||n||_){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),i=y,h=this._start,l=!(u=this._ts),_&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat&&(p=this._yoyo,i=Tf(y%(a=v+this._rDelay)),y===g?(s=this._repeat,i=v):((s=~~(y/a))&&s===y/a&&(i=v,s--),i>v&&(i=v)),d=Wf(this._tTime,a),!m&&this._tTime&&d!==s&&(d=s),p&&1&s&&(i=v-i,f=1),s!==d&&!this._lock)){var b=p&&1&d,w=b===(p&&1&s);if(s<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m||(f?0:Tf(s*a)),t,!v)._lock=0,!t&&this.parent&&vm(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m!==this._time||l!==!this._ts)return this;if(v=this._dur,g=this._tDur,w&&(this._lock=2,this.render(m=b?v:-1e-4,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Dm(this,f)}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,Tf(m),Tf(i)))&&(y-=i-(i=c._start)),this._tTime=y,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e),!m&&i&&!t&&vm(this,"onStart"),i>=m&&e>=0)for(r=this._first;r;){if(o=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=-1e-8);break}}r=o}else{r=this._last;for(var x=e<0?e:i;r;){if(o=r._prev,(r._act||x<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(x-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(x-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=x?-1e-8:Fp);break}}r=o}}if(c&&!t&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=h,qf(this),this.render(e,t,n);this._onUpdate&&!t&&vm(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Hf(this,1),t||e<0&&!m||!y&&!m||(vm(this,y===g?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(qp(t)||(t=tm(this,t)),!(e instanceof Vm)){if(Kp(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Wp(e))return this.addLabel(e,t);if(!Gp(e))return this;e=Km.delayedCall(0,e)}return this!==e?Zf(this,e,t):this},n.getChildren=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-Dp);for(var r=[],o=this._first;o;)o._start>=i&&(o instanceof Km?t&&r.push(o):(n&&r.push(o),e&&r.push.apply(r,o.getChildren(!0,t,n)))),o=o._next;return r},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Wp(e)?this.removeLabel(e):Gp(e)?this.killTweensOf(e):(zf(this,e),e===this._recent&&(this._recent=this._last),Bf(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Tf(Pm.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=tm(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var i=Km.delayedCall(0,t||pf,n);return i.data="isPause",this._hasPause=1,Zf(this,i,tm(this,e))},n.removePause=function(e){var t=this._first;for(e=tm(this,e);t;)t._start===e&&"isPause"===t.data&&Hf(t),t=t._next},n.killTweensOf=function(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)Gm!==i[r]&&i[r].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,i=[],r=am(e),o=this._first,s=qp(t);o;)o instanceof Km?Cf(o._targets,r)&&(s?(!Gm||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&i.push(o):(n=o.getTweensOf(r,t)).length&&i.push.apply(i,n),o=o._next;return i},n.tweenTo=function(e,t){t=t||{};var n=this,i=tm(n,e),r=t.startAt,o=t.onStart,s=t.onStartParams,a=Km.to(n,Rf(t,{ease:"none",lazy:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(r&&"time"in r?r.time:n._time))/n.timeScale())||Fp,onStart:function(){n.pause();var e=t.duration||Math.abs((i-n._time)/n.timeScale());a._dur!==e&&Qf(a,e,0,1).render(a._time,!0,!0),o&&o.apply(a,s||[])}}));return a},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Rf({startAt:{time:tm(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),gm(this,tm(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),gm(this,tm(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Fp)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,o=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in o)o[i]>=n&&(o[i]+=e);return Bf(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._time=this._tTime=this._pTime=0,e&&(this.labels={}),Bf(this)},n.totalDuration=function(e){var t,n,i,r=0,o=this,s=o._last,a=Dp;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(i=o.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>a&&o._sort&&s._ts&&!o._lock?(o._lock=1,Zf(o,s,n-s._delay,1)._lock=0):a=n,n<0&&s._ts&&(r-=n,(!i&&!o._dp||i&&i.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),a=0),s._end>r&&s._ts&&(r=s._end),s=t;Qf(o,o===xp&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(xp._ts&&(Of(xp,Gf(e,xp)),Cp=Pm.frame),Pm.frame>=_f){_f+=Np.autoSleep||120;var t=xp._first;if((!t||!t._ts)&&Np.autoSleep&&Pm._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Pm.sleep()}}},t}(Vm);Rf(Wm.prototype,{_lock:0,_hasPause:0,_forcing:0});var Gm,qm=function(e,t,n,i,r,o,s){var a,l,c,u,h,d,p,f,m=new pg(this._pt,e,t,0,1,ag,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=fm(i)),o&&(o(f=[n,i],e,t),n=f[0],i=f[1]),l=n.match(rf)||[];a=rf.exec(i);)u=a[0],h=i.substring(g,a.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=rf.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=s,(of.test(i)||p)&&(m.e=0),this._pt=m,m},Xm=function(e,t,n,i,r,o,s,a,l){Gp(i)&&(i=i(r||0,e,o));var c,u=e[t],h="get"!==n?n:Gp(u)?l?e[t.indexOf("set")||!Gp(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=Gp(u)?l?ng:tg:eg;if(Wp(i)&&(~i.indexOf("random(")&&(i=fm(i)),"="===i.charAt(1)&&(i=parseFloat(h)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(rm(h)||0))),h!==i)return isNaN(h*i)?(!u&&!(t in e)&&uf(t,i),qm.call(this,e,t,h,i,d,a||Np.stringFilter,l)):(c=new pg(this._pt,e,t,+h||0,i-(h||0),"boolean"==typeof u?sg:og,0,d),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},Ym=function(e,t,n,i,r,o){var s,a,l,c;if(vf[e]&&!1!==(s=new vf[e]).init(r,s.rawVars?t[e]:function(e,t,n,i,r){if(Gp(e)&&(e=Jm(e,r,t,n,i)),!Yp(e)||e.style&&e.nodeType||Kp(e)||Qp(e))return Wp(e)?Jm(e,r,t,n,i):e;var o,s={};for(o in e)s[o]=Jm(e[o],r,t,n,i);return s}(t[e],i,r,o,n),n,i,o)&&(n._pt=a=new pg(n._pt,r,e,0,1,s.render,s,0,s.priority),n!==Ap))for(l=n._ptLookup[n._targets.indexOf(r)],c=s._props.length;c--;)l[s._props[c]]=a;return s},Zm=function e(t,n){var i,r,o,s,a,l,c,u,h,d,p,f,m,g=t.vars,v=g.ease,y=g.startAt,_=g.immediateRender,b=g.lazy,w=g.onUpdate,x=g.onUpdateParams,S=g.callbackScope,M=g.runBackwards,E=g.yoyoEase,T=g.autoRevert,C=t._dur,A=t._startAt,P=t._targets,O=t.parent,I=O&&"nested"===O.data?O.parent._targets:P,k="auto"===t._overwrite,R=t.timeline;if(R&&(!g.keyframes||!v)&&(v="none"),t._ease=Fm(v,Lp.ease),t._yEase=E?Lm(Fm(!0===E?v:E,Lp.ease)):0,E&&t._yoyo&&!t._repeat&&(E=t._yEase,t._yEase=t._ease,t._ease=E),!R){if(f=(u=P[0]?Sf(P[0]).harness:0)&&g[u.prop],i=Ff(g,ff),A&&A.render(-1,!0).kill(),y){if(Hf(t._startAt=Km.set(P,Rf({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:Zp(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:x,callbackScope:S,stagger:0},y))),_)if(n>0)T||(t._startAt=0);else if(C&&!(n<0&&A))return void(n&&(t._zTime=n))}else if(M&&C)if(A)!T&&(t._startAt=0);else if(n&&(_=!1),o=Rf({overwrite:!1,data:"isFromStart",lazy:_&&Zp(b),immediateRender:_,stagger:0,parent:O},i),f&&(o[u.prop]=f),Hf(t._startAt=Km.set(P,o)),_){if(!n)return}else e(t._startAt,Fp);for(t._pt=0,b=C&&Zp(b)||b&&!C,r=0;r<P.length;r++){if(c=(a=P[r])._gsap||xf(P)[r]._gsap,t._ptLookup[r]=d={},gf[c.id]&&mf.length&&Pf(),p=I===P?r:I.indexOf(a),u&&!1!==(h=new u).init(a,f||i,t,p,I)&&(t._pt=s=new pg(t._pt,a,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){d[e]=s})),h.priority&&(l=1)),!u||f)for(o in i)vf[o]&&(h=Ym(o,i,t,p,a,I))?h.priority&&(l=1):d[o]=s=Xm.call(t,a,o,"get",i[o],p,I,0,g.stringFilter);t._op&&t._op[r]&&t.kill(a,t._op[r]),k&&t._pt&&(Gm=t,xp.killTweensOf(a,d,t.globalTime(0)),m=!t.parent,Gm=0),t._pt&&b&&(gf[c.id]=1)}l&&dg(t),t._onInit&&t._onInit(t)}t._from=!R&&!!g.runBackwards,t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},Jm=function(e,t,n,i,r){return Gp(e)?e.call(t,n,i,r):Wp(e)&&~e.indexOf("random(")?fm(e):e},$m=wf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Qm=($m+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Km=function(e){function t(t,n,i,r){var o;"number"==typeof n&&(i.duration=n,n=i,i=null);var s,a,l,c,u,h,d,p,f=(o=e.call(this,r?n:Uf(n),i)||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,y=f.stagger,_=f.overwrite,b=f.keyframes,w=f.defaults,x=f.scrollTrigger,S=f.yoyoEase,M=o.parent,E=(Kp(t)||Qp(t)?qp(t[0]):"length"in n)?[t]:am(t);if(o._targets=E.length?xf(E):hf("GSAP target "+t+" not found. https://greensock.com",!Np.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=_,b||y||$p(m)||$p(g)){if(n=o.vars,(s=o.timeline=new Wm({data:"nested",defaults:w||{}})).kill(),s.parent=bp(o),b)Rf(s.vars.defaults,{ease:"none"}),b.forEach((function(e){return s.to(E,e,">")}));else{if(c=E.length,d=y?cm(y):pf,Yp(y))for(u in y)~$m.indexOf(u)&&(p||(p={}),p[u]=y[u]);for(a=0;a<c;a++){for(u in l={},n)Qm.indexOf(u)<0&&(l[u]=n[u]);l.stagger=0,S&&(l.yoyoEase=S),p&&Lf(l,p),h=E[a],l.duration=+Jm(m,bp(o),a,h,E),l.delay=(+Jm(g,bp(o),a,h,E)||0)-o._delay,!y&&1===c&&l.delay&&(o._delay=g=l.delay,o._start+=g,l.delay=0),s.to(h,l,d(a,h,E))}s.duration()?m=g=0:o.timeline=0}m||o.duration(m=s.duration())}else o.timeline=0;return!0===_&&(Gm=bp(o),xp.killTweensOf(E),Gm=0),M&&Yf(M,bp(o)),(v||!m&&!b&&o._start===Tf(M._time)&&Zp(v)&&function e(t){return!t||t._ts&&e(t.parent)}(bp(o))&&"nested"!==M.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-g))),x&&Jf(bp(o),x),o}wp(t,e);var n=t.prototype;return n.render=function(e,t,n){var i,r,o,s,a,l,c,u,h,d=this._time,p=this._tDur,f=this._dur,m=e>p-Fp&&e>=0?p:e<Fp?0:e;if(f){if(m!==this._tTime||!e||n||this._startAt&&this._zTime<0!=e<0){if(i=m,u=this.timeline,this._repeat){if(i=Tf(m%(s=f+this._rDelay)),m===p?(o=this._repeat,i=f):((o=~~(m/s))&&o===m/s&&(i=f,o--),i>f&&(i=f)),(l=this._yoyo&&1&o)&&(h=this._yEase,i=f-i),a=Wf(this._tTime,s),i===d&&!n&&this._initted)return this;o!==a&&(u&&this._yEase&&Dm(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(Tf(s*o),!0).invalidate()._lock=0))}if(!this._initted){if($f(this,e<0?e:i,n,t))return this._tTime=0,this;if(f!==this._dur)return this.render(e,t,n)}for(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/f),this._from&&(this.ratio=c=1-c),i&&!d&&!t&&vm(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(e<0?e:!i&&l?-1e-8:u._dur*c,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),vm(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!t&&this.parent&&vm(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Hf(this,1),t||e<0&&!d||!m&&!d||(vm(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,i){var r,o,s=e.ratio,a=t<0||!t&&s&&!e._start&&e._zTime>Fp&&!e._dp._lock||(e._ts<0||e._dp._ts<0)&&"isFromStart"!==e.data&&"isStart"!==e.data?0:1,l=e._rDelay,c=0;if(l&&e._repeat&&(c=im(0,e._tDur,t),Wf(c,l)!==(o=Wf(e._tTime,l))&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||i||e._zTime===Fp||!t&&e._zTime){if(!e._initted&&$f(e,t,i,n))return;for(o=e._zTime,e._zTime=t||(n?Fp:0),n||(n=t&&!o),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,n||vm(e,"onStart"),r=e._pt;r;)r.r(a,r.d),r=r._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&vm(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&vm(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Hf(e,1),n||(vm(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t)&&(this._lazy=0,this.parent))return ym(this);if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Gm&&!0!==Gm.vars.overwrite)._first||ym(this),this.parent&&n!==this.timeline.totalDuration()&&Qf(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,o,s,a,l,c,u=this._targets,h=e?am(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(u,h))return"all"===t&&(this._pt=0),ym(this);for(i=this._op=this._op||[],"all"!==t&&(Wp(t)&&(a={},Ef(t,(function(e){return a[e]=1})),t=a),t=function(e,t){var n,i,r,o,s=e[0]?Sf(e[0]).harness:0,a=s&&s.aliases;if(!a)return t;for(i in n=Lf({},t),a)if(i in n)for(r=(o=a[i].split(",")).length;r--;)n[o[r]]=n[i];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(a in r=d[c],"all"===t?(i[c]=t,s=r,o={}):(o=i[c]=i[c]||{},s=t),s)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||zf(this,l,"_pt"),delete r[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&p&&ym(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,n){return new t(e,Af(arguments,1))},t.delayedCall=function(e,n,i,r){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},t.fromTo=function(e,n,i){return new t(e,Af(arguments,2))},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return xp.killTweensOf(e,t,n)},t}(Vm);Rf(Km.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ef("staggerTo,staggerFrom,staggerFromTo",(function(e){Km[e]=function(){var t=new Wm,n=om.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var eg=function(e,t,n){return e[t]=n},tg=function(e,t,n){return e[t](n)},ng=function(e,t,n,i){return e[t](i.fp,n)},ig=function(e,t,n){return e.setAttribute(t,n)},rg=function(e,t){return Gp(e[t])?tg:Xp(e[t])&&e.setAttribute?ig:eg},og=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},sg=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ag=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},lg=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},cg=function(e,t,n,i){for(var r,o=this._pt;o;)r=o._next,o.p===i&&o.modifier(e,t,n),o=r},ug=function(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?zf(this,i,"_pt"):i.dep||(t=1),i=n;return!t},hg=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},dg=function(e){for(var t,n,i,r,o=e._pt;o;){for(t=o._next,n=i;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:r)?o._prev._next=o:i=o,(o._next=n)?n._prev=o:r=o,o=t}e._pt=i},pg=function(){function e(e,t,n,i,r,o,s,a,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=o||og,this.d=s||this,this.set=a||eg,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=hg,this.m=e,this.mt=n,this.tween=t},e}();Ef(wf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return ff[e]=1})),af.TweenMax=af.TweenLite=Km,af.TimelineLite=af.TimelineMax=Wm,xp=new Wm({sortChildren:!1,defaults:Lp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Np.stringFilter=Am;var fg={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return _m(e)}))},timeline:function(e){return new Wm(e)},getTweensOf:function(e,t){return xp.getTweensOf(e,t)},getProperty:function(e,t,n,i){Wp(e)&&(e=am(e)[0]);var r=Sf(e||{}).get,o=n?kf:If;return"native"===n&&(n=""),e?t?o((vf[t]&&vf[t].get||r)(e,t,n,i)):function(t,n,i){return o((vf[t]&&vf[t].get||r)(e,t,n,i))}:e},quickSetter:function(e,t,n){if((e=am(e)).length>1){var i=e.map((function(e){return vg.quickSetter(e,t,n)})),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}var o=vf[t],s=Sf(e=e[0]||{}),a=s.harness&&(s.harness.aliases||{})[t]||t,l=o?function(t){var i=new o;Ap._pt=0,i.init(e,n?t+n:t,Ap,0,[e]),i.render(1,i),Ap._pt&&lg(1,Ap)}:s.set(e,a);return o?l:function(t){return l(e,a,n?t+n:t,s,1)}},isTweening:function(e){return xp.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Fm(e.ease,Lp.ease)),Df(Lp,e||{})},config:function(e){return Df(Np,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.defaults,r=e.extendTimeline;(e.plugins||"").split(",").forEach((function(e){return e&&!vf[e]&&!af[e]&&hf(t+" effect requires "+e+" plugin.")})),yf[t]=function(e,t,r){return n(am(e),Rf(t||{},i),r)},r&&(Wm.prototype[t]=function(e,n,i){return this.add(yf[t](e,Yp(n)?n:(i=n)&&{},this),i)})},registerEase:function(e,t){Im[e]=Fm(t)},parseEase:function(e,t){return arguments.length?Fm(e,t):Im},getById:function(e){return xp.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,i,r=new Wm(e);for(r.smoothChildTiming=Zp(e.smoothChildTiming),xp.remove(r),r._dp=0,r._time=r._tTime=xp._time,n=xp._first;n;)i=n._next,!t&&!n._dur&&n instanceof Km&&n.vars.onComplete===n._targets[0]||Zf(r,n,n._start-n._delay),n=i;return Zf(xp,r,0),r},utils:{wrap:function e(t,n,i){var r=n-t;return Kp(t)?pm(t,e(0,t.length),n):nm(i,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,n,i){var r=n-t,o=2*r;return Kp(t)?pm(t,e(0,t.length-1),n):nm(i,(function(e){return t+((e=(o+(e-t)%o)%o||0)>r?o-e:e)}))},distribute:cm,random:dm,snap:hm,normalize:function(e,t,n){return mm(e,t,0,1,n)},getUnit:rm,clamp:function(e,t,n){return nm(n,(function(n){return im(e,t,n)}))},splitColor:Sm,toArray:am,mapRange:mm,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||rm(n))}},interpolate:function e(t,n,i,r){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var s,a,l,c,u,h=Wp(t),d={};if(!0===i&&(r=1)&&(i=null),h)t={p:t},n={p:n};else if(Kp(t)&&!Kp(n)){for(l=[],u=(c=t.length)-2,a=1;a<c;a++)l.push(e(t[a-1],t[a]));c--,o=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},i=n}else r||(t=Lf(Kp(t)?[]:{},t));if(!l){for(s in n)Xm.call(d,t,s,"get",n[s]);o=function(e){return lg(e,d)||(h?t.p:t)}}}return nm(i,o)},shuffle:lm},install:cf,effects:yf,ticker:Pm,updateRoot:Wm.updateRoot,plugins:vf,globalTimeline:xp,core:{PropTween:pg,globals:df,Tween:Km,Timeline:Wm,Animation:Vm,getCache:Sf,_removeLinkedListItem:zf}};Ef("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return fg[e]=Km[e]})),Pm.add(Wm.updateRoot),Ap=fg.to({},{duration:0});var mg=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},gg=function(e,t){return{name:e,rawVars:1,init:function(e,n,i){i._onInit=function(e){var i,r;if(Wp(n)&&(i={},Ef(n,(function(e){return i[e]=1})),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function(e,t){var n,i,r,o=e._targets;for(n in t)for(i=o.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=mg(r,n)),r&&r.modifier&&r.modifier(t[n],e,o[i],n))}(e,n)}}}},vg=fg.registerPlugin({name:"attr",init:function(e,t,n,i,r){var o,s;for(o in t)(s=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],i,r,0,0,o))&&(s.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},gg("roundProps",um),gg("modifiers"),gg("snap",hm))||fg;Km.version=Wm.version=vg.version="3.5.1",Tp=1,Jp()&&Om();var yg,_g,bg,wg,xg,Sg,Mg,Eg,Tg=Im.Power2,Cg={},Ag=180/Math.PI,Pg=Math.PI/180,Og=Math.atan2,Ig=/([A-Z])/g,kg=/(?:left|right|width|margin|padding|x)/i,Rg=/[\s,\(]\S/,Ng={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Lg=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Dg=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Fg=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Ug=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},zg=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Hg=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Bg=function(e,t,n){return e.style[t]=n},jg=function(e,t,n){return e.style.setProperty(t,n)},Vg=function(e,t,n){return e._gsap[t]=n},Wg=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Gg=function(e,t,n,i,r){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(r,o)},qg=function(e,t,n,i,r){var o=e._gsap;o[t]=n,o.renderTransform(r,o)},Xg="transform",Yg=Xg+"Origin",Zg=function(e,t){var n=_g.createElementNS?_g.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):_g.createElement(e);return n.style?n:_g.createElement(e)},Jg=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(Ig,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Qg(n)||n,1)||""},$g="O,Moz,ms,Ms,Webkit".split(","),Qg=function(e,t,n){var i=(t||xg).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!($g[r]+e in i););return r<0?null:(3===r?"ms":r>=0?$g[r]:"")+e},Kg=function(){"undefined"!=typeof window&&window.document&&(yg=window,bg=(_g=yg.document).documentElement,xg=Zg("div")||{style:{}},Sg=Zg("div"),Xg=Qg(Xg),Yg=Xg+"Origin",xg.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Eg=!!Qg("perspective"),wg=1)},ev=function e(t){var n,i=Zg("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,o=this.nextSibling,s=this.style.cssText;if(bg.appendChild(i),i.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(a){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(o?r.insertBefore(this,o):r.appendChild(this)),bg.removeChild(i),this.style.cssText=s,n},tv=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},nv=function(e){var t;try{t=e.getBBox()}catch(n){t=ev.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===ev||(t=ev.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+tv(e,["x","cx","x1"])||0,y:+tv(e,["y","cy","y1"])||0,width:0,height:0}},iv=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!nv(e))},rv=function(e,t){if(t){var n=e.style;t in Cg&&t!==Yg&&(t=Xg),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(Ig,"-$1").toLowerCase())):n.removeAttribute(t)}},ov=function(e,t,n,i,r,o){var s=new pg(e._pt,t,n,0,1,o?Hg:zg);return e._pt=s,s.b=i,s.e=r,e._props.push(n),s},sv={deg:1,rad:1,turn:1},av=function e(t,n,i,r){var o,s,a,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",h=xg.style,d=kg.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,v="%"===r;return r===u||!c||sv[r]||sv[u]?c:("px"!==u&&!g&&(c=e(t,n,i,"px")),l=t.getCTM&&iv(t),v&&(Cg[n]||~n.indexOf("adius"))?Tf(c/(l?t.getBBox()[d?"width":"height"]:t[f])*m):(h[d?"width":"height"]=m+(g?u:r),s=~n.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(s=(t.ownerSVGElement||{}).parentNode),s&&s!==_g&&s.appendChild||(s=_g.body),(a=s._gsap)&&v&&a.width&&d&&a.time===Pm.time?Tf(c/a.width*m):((v||"%"===u)&&(h.position=Jg(t,"position")),s===t&&(h.position="static"),s.appendChild(xg),o=xg[f],s.removeChild(xg),h.position="absolute",d&&v&&((a=Sf(s)).time=Pm.time,a.width=s[f]),Tf(g?o*c/m:o&&c?m/o*c:0))))},lv=function(e,t,n,i){var r;return wg||Kg(),t in Ng&&"transform"!==t&&~(t=Ng[t]).indexOf(",")&&(t=t.split(",")[0]),Cg[t]&&"transform"!==t?(r=_v(e,i),r="transformOrigin"!==t?r[t]:bv(Jg(e,Yg))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=dv[t]&&dv[t](e,t,n)||Jg(e,t)||Mf(e,t)||("opacity"===t?1:0)),n&&!~(r+"").indexOf(" ")?av(e,t,r,n)+n:r},cv=function(e,t,n,i){if(!n||"none"===n){var r=Qg(t,e,1),o=r&&Jg(e,r,1);o&&o!==n?(t=r,n=o):"borderColor"===t&&(n=Jg(e,"borderTopColor"))}var s,a,l,c,u,h,d,p,f,m,g,v,y=new pg(this._pt,e.style,t,0,1,ag),_=0,b=0;if(y.b=n,y.e=i,n+="","auto"==(i+="")&&(e.style[t]=i,i=Jg(e,t)||i,e.style[t]=n),Am(s=[n,i]),i=s[1],l=(n=s[0]).match(nf)||[],(i.match(nf)||[]).length){for(;a=nf.exec(i);)d=a[0],f=i.substring(_,a.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(h=l[b++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),_=nf.lastIndex-m.length,m||(m=m||Np.units[t]||g,_===i.length&&(i+=m,y.e+=m)),g!==m&&(c=av(e,t,h,m)||0),y._pt={_next:y._pt,p:f||1===b?f:",",s:c,c:v?v*p:p-c,m:u&&u<4?Math.round:0});y.c=_<i.length?i.substring(_,i.length):""}else y.r="display"===t&&"none"===i?Hg:zg;return of.test(i)&&(y.e=0),this._pt=y,y},uv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},hv=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,o=t.t,s=t.u,a=o._gsap;if("all"===s||!0===s)o.style.cssText="",i=1;else for(r=(s=s.split(",")).length;--r>-1;)Cg[n=s[r]]&&(i=1,n="transformOrigin"===n?Yg:Xg),rv(o,n);i&&(rv(o,Xg),a&&(a.svg&&o.removeAttribute("transform"),_v(o,1),a.uncache=1))}},dv={clearProps:function(e,t,n,i,r){if("isFromStart"!==r.data){var o=e._pt=new pg(e._pt,t,n,0,0,hv);return o.u=i,o.pr=-10,o.tween=r,e._props.push(n),1}}},pv=[1,0,0,1,0,0],fv={},mv=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},gv=function(e){var t=Jg(e,Xg);return mv(t)?pv:t.substr(7).match(tf).map(Tf)},vv=function(e,t){var n,i,r,o,s=e._gsap||Sf(e),a=e.style,l=gv(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?pv:l:(l!==pv||e.offsetParent||e===bg||s.svg||(r=a.display,a.display="block",(n=e.parentNode)&&e.offsetParent||(o=1,i=e.nextSibling,bg.appendChild(e)),l=gv(e),r?a.display=r:rv(e,"display"),o&&(i?n.insertBefore(e,i):n?n.appendChild(e):bg.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},yv=function(e,t,n,i,r,o){var s,a,l,c=e._gsap,u=r||vv(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],_=u[4],b=u[5],w=t.split(" "),x=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?u!==pv&&(a=m*y-g*v)&&(l=x*(-g/a)+S*(m/a)-(m*b-g*_)/a,x=x*(y/a)+S*(-v/a)+(v*b-y*_)/a,S=l):(x=(s=nv(e)).x+(~w[0].indexOf("%")?x/100*s.width:x),S=s.y+(~(w[1]||w[0]).indexOf("%")?S/100*s.height:S)),i||!1!==i&&c.smooth?(c.xOffset=p+((_=x-h)*m+(b=S-d)*v)-_,c.yOffset=f+(_*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=x,c.yOrigin=S,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[Yg]="0px 0px",o&&(ov(o,c,"xOrigin",h,x),ov(o,c,"yOrigin",d,S),ov(o,c,"xOffset",p,c.xOffset),ov(o,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},_v=function(e,t){var n=e._gsap||new jm(e);if("x"in n&&!t&&!n.uncache)return n;var i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,_,b,w,x,S,M,E,T,C,A,P,O,I,k,R,N,L=e.style,D=n.scaleX<0,F="px",U="deg",z=Jg(e,Yg)||"0";return i=r=o=l=c=u=h=d=p=0,s=a=1,n.svg=!(!e.getCTM||!iv(e)),g=vv(e,n.svg),n.svg&&(T=!n.uncache&&e.getAttribute("data-svg-origin"),yv(e,T||z,!!T||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==pv&&(b=g[0],w=g[1],x=g[2],S=g[3],i=M=g[4],r=E=g[5],6===g.length?(s=Math.sqrt(b*b+w*w),a=Math.sqrt(S*S+x*x),l=b||w?Og(w,b)*Ag:0,(h=x||S?Og(x,S)*Ag+l:0)&&(a*=Math.cos(h*Pg)),n.svg&&(i-=f-(f*b+m*x),r-=m-(f*w+m*S))):(k=g[7],P=g[8],O=g[9],R=g[11],i=g[12],r=g[13],o=g[14],c=(v=Og(N=g[6],I=g[10]))*Ag,v&&(T=M*(y=Math.cos(-v))+P*(_=Math.sin(-v)),C=E*y+O*_,A=N*y+I*_,P=M*-_+P*y,O=E*-_+O*y,I=N*-_+I*y,R=k*-_+R*y,M=T,E=C,N=A),u=(v=Og(-x,I))*Ag,v&&(y=Math.cos(-v),R=S*(_=Math.sin(-v))+R*y,b=T=b*y-P*_,w=C=w*y-O*_,x=A=x*y-I*_),l=(v=Og(w,b))*Ag,v&&(T=b*(y=Math.cos(v))+w*(_=Math.sin(v)),C=M*y+E*_,w=w*y-b*_,E=E*y-M*_,b=T,M=C),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),s=Tf(Math.sqrt(b*b+w*w+x*x)),a=Tf(Math.sqrt(E*E+N*N)),v=Og(M,E),h=Math.abs(v)>2e-4?v*Ag:0,p=R?1/(R<0?-R:R):0),n.svg&&(T=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!mv(Jg(e,Xg)),T&&e.setAttribute("transform",T))),Math.abs(h)>90&&Math.abs(h)<270&&(D?(s*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),n.x=((n.xPercent=i&&Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+F,n.y=((n.yPercent=r&&Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+F,n.z=o+F,n.scaleX=Tf(s),n.scaleY=Tf(a),n.rotation=Tf(l)+U,n.rotationX=Tf(c)+U,n.rotationY=Tf(u)+U,n.skewX=h+U,n.skewY=d+U,n.transformPerspective=p+F,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(L[Yg]=bv(z)),n.xOffset=n.yOffset=0,n.force3D=Np.force3D,n.renderTransform=n.svg?Cv:Eg?Tv:xv,n.uncache=0,n},bv=function(e){return(e=e.split(" "))[0]+" "+e[1]},wv=function(e,t,n){var i=rm(t);return Tf(parseFloat(t)+parseFloat(av(e,"x",n+"px",i)))+i},xv=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Tv(e,t)},Sv="0deg",Mv="0px",Ev=") ",Tv=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,o=n.x,s=n.y,a=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,_="",b="auto"===g&&e&&1!==e||!0===g;if(y&&(u!==Sv||c!==Sv)){var w,x=parseFloat(c)*Pg,S=Math.sin(x),M=Math.cos(x);x=parseFloat(u)*Pg,w=Math.cos(x),o=wv(v,o,S*w*-y),s=wv(v,s,-Math.sin(x)*-y),a=wv(v,a,M*w*-y+y)}m!==Mv&&(_+="perspective("+m+Ev),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),(b||o!==Mv||s!==Mv||a!==Mv)&&(_+=a!==Mv||b?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+Ev),l!==Sv&&(_+="rotate("+l+Ev),c!==Sv&&(_+="rotateY("+c+Ev),u!==Sv&&(_+="rotateX("+u+Ev),h===Sv&&d===Sv||(_+="skew("+h+", "+d+Ev),1===p&&1===f||(_+="scale("+p+", "+f+Ev),v.style[Xg]=_||"translate(0, 0)"},Cv=function(e,t){var n,i,r,o,s,a=t||this,l=a.xPercent,c=a.yPercent,u=a.x,h=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,v=a.target,y=a.xOrigin,_=a.yOrigin,b=a.xOffset,w=a.yOffset,x=a.forceCSS,S=parseFloat(u),M=parseFloat(h);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Pg,p*=Pg,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,o=Math.cos(d-p)*g,p&&(f*=Pg,s=Math.tan(p-f),r*=s=Math.sqrt(1+s*s),o*=s,f&&(s=Math.tan(f),n*=s=Math.sqrt(1+s*s),i*=s)),n=Tf(n),i=Tf(i),r=Tf(r),o=Tf(o)):(n=m,o=g,i=r=0),(S&&!~(u+"").indexOf("px")||M&&!~(h+"").indexOf("px"))&&(S=av(v,"x",u,"px"),M=av(v,"y",h,"px")),(y||_||b||w)&&(S=Tf(S+y-(y*n+_*r)+b),M=Tf(M+_-(y*i+_*o)+w)),(l||c)&&(s=v.getBBox(),S=Tf(S+l/100*s.width),M=Tf(M+c/100*s.height)),v.setAttribute("transform",s="matrix("+n+","+i+","+r+","+o+","+S+","+M+")"),x&&(v.style[Xg]=s)},Av=function(e,t,n,i,r,o){var s,a,l=360,c=Wp(r),u=parseFloat(r)*(c&&~r.indexOf("rad")?Ag:1),h=o?u*o:u-i,d=i+h+"deg";return c&&("short"===(s=r.split("_")[1])&&(h%=l)!=h%180&&(h+=h<0?l:-360),"cw"===s&&h<0?h=(h+36e9)%l-~~(h/l)*l:"ccw"===s&&h>0&&(h=(h-36e9)%l-~~(h/l)*l)),e._pt=a=new pg(e._pt,t,n,i,h,Dg),a.e=d,a.u="deg",e._props.push(n),a},Pv=function(e,t,n){var i,r,o,s,a,l,c,u=Sg.style,h=n._gsap;for(r in u.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",u[Xg]=t,_g.body.appendChild(Sg),i=_v(Sg,1),Cg)(o=h[r])!==(s=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=rm(o)!==(c=rm(s))?av(n,r,o,c):parseFloat(o),l=parseFloat(s),e._pt=new pg(e._pt,h,r,a,l-a,Lg),e._pt.u=c||0,e._props.push(r));_g.body.removeChild(Sg)};Ef("padding,margin,Width,Radius",(function(e,t){var n="Top",i="Right",r="Bottom",o="Left",s=(t<3?[n,i,r,o]:[n+o,n+i,r+i,r+o]).map((function(n){return t<2?e+n:"border"+n+e}));dv[t>1?"border"+e:e]=function(e,t,n,i,r){var o,a;if(arguments.length<4)return o=s.map((function(t){return lv(e,t,n)})),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(i+"").split(" "),a={},s.forEach((function(e,t){return a[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,a,r)}}));var Ov,Iv,kv={name:"css",register:Kg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var o,s,a,l,c,u,h,d,p,f,m,g,v,y,_,b,w,x,S,M=this._props,E=e.style;for(h in wg||Kg(),t)if("autoRound"!==h&&(s=t[h],!vf[h]||!Ym(h,t,n,i,e,r)))if(u=dv[h],"function"==(c=typeof s)&&(c=typeof(s=s.call(n,i,e,r))),"string"===c&&~s.indexOf("random(")&&(s=fm(s)),u)u(this,e,h,s,n)&&(_=1);else if("--"===h.substr(0,2))this.add(E,"setProperty",getComputedStyle(e).getPropertyValue(h)+"",s+"",i,r,0,0,h);else if("undefined"!==c){if(o=lv(e,h),l=parseFloat(o),(f="string"===c&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),a=parseFloat(s),h in Ng&&("autoAlpha"===h&&(1===l&&"hidden"===lv(e,"visibility")&&a&&(l=0),ov(this,E,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&~(h=Ng[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in Cg)if(g||((v=e._gsap).renderTransform||_v(e),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new pg(this._pt,E,Xg,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new pg(this._pt,v,"scaleY",v.scaleY,f?f*a:a-v.scaleY),M.push("scaleY",h),h+="X";else{if("transformOrigin"===h){w=void 0,x=void 0,S=void 0,S=(w=(b=s).split(" "))[1]||"50%","top"!==(x=w[0])&&"bottom"!==x&&"left"!==S&&"right"!==S||(b=x,x=S,S=b),w[0]=uv[x]||x,w[1]=uv[S]||S,s=w.join(" "),v.svg?yv(e,s,0,y,0,this):((p=parseFloat(s.split(" ")[2])||0)!==v.zOrigin&&ov(this,v,"zOrigin",v.zOrigin,p),ov(this,E,h,bv(o),bv(s)));continue}if("svgOrigin"===h){yv(e,s,1,y,0,this);continue}if(h in fv){Av(this,v,h,l,s,f);continue}if("smoothOrigin"===h){ov(this,v,"smooth",v.smooth,s);continue}if("force3D"===h){v[h]=s;continue}if("transform"===h){Pv(this,s,e);continue}}else h in E||(h=Qg(h)||h);if(m||(a||0===a)&&(l||0===l)&&!Rg.test(s)&&h in E)a||(a=0),(d=(o+"").substr((l+"").length))!==(p=rm(s)||(h in Np.units?Np.units[h]:d))&&(l=av(e,h,o,p)),this._pt=new pg(this._pt,m?v:E,h,l,f?f*a:a-l,"px"!==p||!1===t.autoRound||m?Lg:Ug),this._pt.u=p||0,d!==p&&(this._pt.b=o,this._pt.r=Fg);else if(h in E)cv.call(this,e,h,o,s);else{if(!(h in e)){uf(h,s);continue}this.add(e,h,e[h],s,i,r)}M.push(h)}_&&dg(this)},get:lv,aliases:Ng,getSetter:function(e,t,n){var i=Ng[t];return i&&i.indexOf(",")<0&&(t=i),t in Cg&&t!==Yg&&(e._gsap.x||lv(e,"x"))?n&&Mg===n?"scale"===t?Wg:Vg:(Mg=n||{})&&("scale"===t?Gg:qg):e.style&&!Xp(e.style[t])?Bg:~t.indexOf("-")?jg:rg(e,t)},core:{_removeProperty:rv,_getMatrix:vv}};vg.utils.checkPrefix=Qg,Iv=Ef("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Ov="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Cg[e]=1})),Ef(Ov,(function(e){Np.units[e]="deg",fv[e]=1})),Ng[Iv[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Ov,Ef("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Ng[t[1]]=Iv[t[0]]})),Ef("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Np.units[e]="px"})),vg.registerPlugin(kv);var Rv=vg.registerPlugin(kv)||vg;function Nv(e){const t=e.prototype.ngOnDestroy;e.prototype.isDestroyed=function(){return void 0!==this._isComponentDestroyed&&this._isComponentDestroyed},e.prototype.ngOnDestroy=function(){t&&"function"==typeof t&&t.apply(this,arguments),this._isComponentDestroyed=!0}}const Lv=100,Dv=1e3,Fv=1001,Uv=1002,zv=1003,Hv=1006,Bv=1008,jv=1009,Vv=1012,Wv=1014,Gv=1015,qv=1016,Xv=1020,Yv=1022,Zv=1023,Jv=1026,$v=1027,Qv=2300,Kv=2301,ey=2302,ty=2400,ny=2401,iy=2402,ry=2500,oy=3e3,sy=3001,ay=7680,ly=35044,cy=35048,uy="300 es";function hy(){}Object.assign(hy.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const dy=[];for(let qN=0;qN<256;qN++)dy[qN]=(qN<16?"0":"")+qN.toString(16);let py=1234567;const fy={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(dy[255&e]+dy[e>>8&255]+dy[e>>16&255]+dy[e>>24&255]+"-"+dy[255&t]+dy[t>>8&255]+"-"+dy[t>>16&15|64]+dy[t>>24&255]+"-"+dy[63&n|128]+dy[n>>8&255]+"-"+dy[n>>16&255]+dy[n>>24&255]+dy[255&i]+dy[i>>8&255]+dy[i>>16&255]+dy[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(py=e%2147483647),py=16807*py%2147483647,(py-1)/2147483646},degToRad:function(e){return e*fy.DEG2RAD},radToDeg:function(e){return e*fy.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+i)/2),u=s((t+i)/2),h=o((t-i)/2),d=s((t-i)/2),p=o((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(a*u,l*h,l*d,a*c);break;case"YZY":e.set(l*d,a*u,l*h,a*c);break;case"ZXZ":e.set(l*h,l*d,a*u,a*c);break;case"XZX":e.set(a*u,l*f,l*p,a*c);break;case"YXY":e.set(l*p,a*u,l*f,a*c);break;case"ZYZ":e.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class my{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class gy{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],w=i[5],x=i[8];return r[0]=o*f+s*v+a*b,r[3]=o*m+s*y+a*w,r[6]=o*g+s*_+a*x,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*w,r[7]=l*g+c*_+u*x,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*w,r[8]=h*g+d*_+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*r*c+n*s*a+i*r*l-i*o*a}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,i=this.elements,r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=d*l-c*h,f=c*u-d*a,m=h*a-l*u,g=r*p+o*f+s*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return i[0]=p*v,i[1]=(s*h-d*o)*v,i[2]=(c*o-s*l)*v,i[3]=f*v,i[4]=(d*r-s*u)*v,i[5]=(s*a-c*r)*v,i[6]=m*v,i[7]=(o*u-h*r)*v,i[8]=(l*r-o*a)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){const a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1)}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],s=i[6],a=i[1],l=i[4],c=i[7];return i[0]=t*r+n*a,i[3]=t*o+n*l,i[6]=t*s+n*c,i[1]=-n*r+t*a,i[4]=-n*o+t*l,i[7]=-n*s+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let vy;const yy={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===vy&&(vy=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),vy.width=e.width,vy.height=e.height;const n=vy.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vy}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let _y=0;function by(e,t,n,i,r,o,s,a,l,c){Object.defineProperty(this,"id",{value:_y++}),this.uuid=fy.generateUUID(),this.name="",this.image=void 0!==e?e:by.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:by.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Fv,this.wrapT=void 0!==i?i:Fv,this.magFilter=void 0!==r?r:Hv,this.minFilter=void 0!==o?o:Bv,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:Zv,this.internalFormat=null,this.type=void 0!==a?a:jv,this.offset=new my(0,0),this.repeat=new my(1,1),this.center=new my(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gy,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:oy,this.version=0,this.onUpdate=null}by.DEFAULT_IMAGE=void 0,by.DEFAULT_MAPPING=300,by.prototype=Object.assign(Object.create(hy.prototype),{constructor:by,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=fy.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)t.push(yy.getDataURL(i[e]))}else t=yy.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Dv:e.x=e.x-Math.floor(e.x);break;case Fv:e.x=e.x<0?0:1;break;case Uv:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Dv:e.y=e.y-Math.floor(e.y);break;case Fv:e.y=e.y<0?0:1;break;case Uv:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(by.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class wy{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,v=(g+1)/2,y=(c+h)/4,_=(u+f)/4,b=(p+m)/4;return e>a&&e>v?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):a>v?a<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=y/i,r=b/i):v<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=_/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function xy(e,t,n){this.width=e,this.height=t,this.scissor=new wy(0,0,e,t),this.scissorTest=!1,this.viewport=new wy(0,0,e,t),this.texture=new by(void 0,(n=n||{}).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Hv,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Sy(e,t,n){xy.call(this,e,t,n),this.samples=4}xy.prototype=Object.assign(Object.create(hy.prototype),{constructor:xy,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Sy.prototype=Object.assign(Object.create(xy.prototype),{constructor:Sy,isWebGLMultisampleRenderTarget:!0,copy:function(e){return xy.prototype.copy.call(this,e),this.samples=e.samples,this}});class My{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return n.copy(e).slerp(t,i)}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||a!==h||l!==d||c!==p){let e=1-s;const t=a*h+l*d+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=s*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-a*u,e[t+3]=c*p-s*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),h=a(n/2),d=a(i/2),p=a(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=n+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fy.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+i*l-r*a,this._y=i*c+o*a+r*s-n*l,this._z=r*c+o*l+n*a-i*s,this._w=o*c-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Ey{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Cy.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Cy.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*i-s*n,c=a*n+s*t-r*i,u=a*i+r*n-o*t,h=-r*t-o*n-s*i;return this.x=l*a+h*-r+c*-s-u*-o,this.y=c*a+h*-o+u*-r-l*-s,this.z=u*a+h*-s+l*-o-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Ty.copy(this).projectOnVector(e),this.sub(Ty)}reflect(e){return this.sub(Ty.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(fy.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Ty=new Ey,Cy=new My;class Ay{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Ey(1/0,1/0,1/0),this.max=void 0!==t?t:new Ey(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],u=e[a+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,o,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),u=e.getZ(a);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Iy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ey),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ey),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ky.copy(t.boundingBox),ky.applyMatrix4(e.matrixWorld),this.union(ky));const n=e.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ey),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Iy),Iy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zy),Hy.subVectors(this.max,zy),Ry.subVectors(e.a,zy),Ny.subVectors(e.b,zy),Ly.subVectors(e.c,zy),Dy.subVectors(Ny,Ry),Fy.subVectors(Ly,Ny),Uy.subVectors(Ry,Ly);let t=[0,-Dy.z,Dy.y,0,-Fy.z,Fy.y,0,-Uy.z,Uy.y,Dy.z,0,-Dy.x,Fy.z,0,-Fy.x,Uy.z,0,-Uy.x,-Dy.y,Dy.x,0,-Fy.y,Fy.x,0,-Uy.y,Uy.x,0];return!!Py(t,Ry,Ny,Ly,Hy)&&(t=[1,0,0,0,1,0,0,0,1],!!Py(t,Ry,Ny,Ly,Hy)&&(By.crossVectors(Dy,Fy),t=[By.x,By.y,By.z],Py(t,Ry,Ny,Ly,Hy)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ey),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Iy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Iy).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Oy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oy)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function Py(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){jy.fromArray(e,o);const s=r.x*Math.abs(jy.x)+r.y*Math.abs(jy.y)+r.z*Math.abs(jy.z),a=t.dot(jy),l=n.dot(jy),c=i.dot(jy);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const Oy=[new Ey,new Ey,new Ey,new Ey,new Ey,new Ey,new Ey,new Ey],Iy=new Ey,ky=new Ay,Ry=new Ey,Ny=new Ey,Ly=new Ey,Dy=new Ey,Fy=new Ey,Uy=new Ey,zy=new Ey,Hy=new Ey,By=new Ey,jy=new Ey,Vy=new Ay;class Wy{constructor(e,t){this.center=void 0!==e?e:new Ey,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Vy.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Ey),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Ay),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const Gy=new Ey,qy=new Ey,Xy=new Ey,Yy=new Ey,Zy=new Ey,Jy=new Ey,$y=new Ey;class Qy{constructor(e,t){this.origin=void 0!==e?e:new Ey,this.direction=void 0!==t?t:new Ey(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Ey),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Gy)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Ey),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Gy.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Gy.copy(this.direction).multiplyScalar(t).add(this.origin),Gy.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){qy.copy(e).add(t).multiplyScalar(.5),Xy.copy(t).sub(e).normalize(),Yy.copy(this.origin).sub(qy);const r=.5*e.distanceTo(t),o=-this.direction.dot(Xy),s=Yy.dot(this.direction),a=-Yy.dot(Xy),l=Yy.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*a-s,h=o*s-a,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-o*r+s)),h=u>0?-r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-a),r),d=h*(h+2*a)+l):(u=Math.max(0,-(o*r+s)),h=u>0?r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(Xy).multiplyScalar(h).add(qy),d}intersectSphere(e,t){Gy.subVectors(e.center,this.origin);const n=Gy.dot(this.direction),i=Gy.dot(Gy)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),s=n-o,a=n+o;return s<0&&a<0?null:this.at(s<0?a:s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||s>i?null:((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Gy)}intersectTriangle(e,t,n,i,r){Zy.subVectors(t,e),Jy.subVectors(n,e),$y.crossVectors(Zy,Jy);let o,s=this.direction.dot($y);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Yy.subVectors(this.origin,e);const a=o*this.direction.dot(Jy.crossVectors(Yy,Jy));if(a<0)return null;const l=o*this.direction.dot(Zy.cross(Yy));if(l<0)return null;if(a+l>s)return null;const c=-o*Yy.dot($y);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class Ky{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,o,s,a,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ky).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/e_.setFromMatrixColumn(e,0).length(),r=1/e_.setFromMatrixColumn(e,1).length(),o=1/e_.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,n=o*u,i=s*c,r=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-o*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*c,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*u,i=s*c,r=s*u;t[0]=a*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=a*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(n_,e,i_)}lookAt(e,t,n){const i=this.elements;return s_.subVectors(e,t),0===s_.lengthSq()&&(s_.z=1),s_.normalize(),r_.crossVectors(n,s_),0===r_.lengthSq()&&(1===Math.abs(n.z)?s_.x+=1e-4:s_.z+=1e-4,s_.normalize(),r_.crossVectors(n,s_)),r_.normalize(),o_.crossVectors(s_,r_),i[0]=r_.x,i[4]=o_.x,i[8]=s_.x,i[1]=r_.y,i[5]=o_.y,i[9]=s_.y,i[2]=r_.z,i[6]=o_.z,i[10]=s_.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],w=i[0],x=i[4],S=i[8],M=i[12],E=i[1],T=i[5],C=i[9],A=i[13],P=i[2],O=i[6],I=i[10],k=i[14],R=i[3],N=i[7],L=i[11],D=i[15];return r[0]=o*w+s*E+a*P+l*R,r[4]=o*x+s*T+a*O+l*N,r[8]=o*S+s*C+a*I+l*L,r[12]=o*M+s*A+a*k+l*D,r[1]=c*w+u*E+h*P+d*R,r[5]=c*x+u*T+h*O+d*N,r[9]=c*S+u*C+h*I+d*L,r[13]=c*M+u*A+h*k+d*D,r[2]=p*w+f*E+m*P+g*R,r[6]=p*x+f*T+m*O+g*N,r[10]=p*S+f*C+m*I+g*L,r[14]=p*M+f*A+m*k+g*D,r[3]=v*w+y*E+_*P+b*R,r[7]=v*x+y*T+_*O+b*N,r[11]=v*S+y*C+_*I+b*L,r[15]=v*M+y*A+_*k+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*a*u-i*l*u-r*s*h+n*l*h+i*s*d-n*a*d)+e[7]*(+t*a*d-t*l*h+r*o*h-i*o*d+i*l*c-r*a*c)+e[11]*(+t*l*u-t*s*d-r*o*u+n*o*d+r*s*c-n*l*c)+e[15]*(-i*s*c-t*a*u+t*s*h+i*o*u-n*o*h+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15],b=p*y*h-v*f*h+v*u*m-c*y*m-p*u*_+c*f*_,w=g*f*h-d*y*h-g*u*m+l*y*m+d*u*_-l*f*_,x=d*v*h-g*p*h+g*c*m-l*v*m-d*c*_+l*p*_,S=g*p*u-d*v*u-g*c*f+l*v*f+d*c*y-l*p*y,M=r*b+o*w+s*x+a*S;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/M;return n[0]=b*E,n[1]=(v*f*a-p*y*a-v*s*m+o*y*m+p*s*_-o*f*_)*E,n[2]=(c*y*a-v*u*a+v*s*h-o*y*h-c*s*_+o*u*_)*E,n[3]=(p*u*a-c*f*a-p*s*h+o*f*h+c*s*m-o*u*m)*E,n[4]=w*E,n[5]=(d*y*a-g*f*a+g*s*m-r*y*m-d*s*_+r*f*_)*E,n[6]=(g*u*a-l*y*a-g*s*h+r*y*h+l*s*_-r*u*_)*E,n[7]=(l*f*a-d*u*a+d*s*h-r*f*h-l*s*m+r*u*m)*E,n[8]=x*E,n[9]=(g*p*a-d*v*a-g*o*m+r*v*m+d*o*_-r*p*_)*E,n[10]=(l*v*a-g*c*a+g*o*h-r*v*h-l*o*_+r*c*_)*E,n[11]=(d*c*a-l*p*a-d*o*h+r*p*h+l*o*m-r*c*m)*E,n[12]=S*E,n[13]=(d*v*s-g*p*s+g*o*f-r*v*f-d*o*y+r*p*y)*E,n[14]=(g*c*s-l*v*s-g*o*u+r*v*u+l*o*y-r*c*y)*E,n[15]=(l*p*s-d*c*s+d*o*u-r*p*u-l*o*f+r*c*f)*E,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,c*s+n,c*a-i*o,0,l*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,u=s+s,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,g=s*u,v=a*l,y=a*c,_=a*u,b=n.x,w=n.y,x=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*w,i[5]=(1-(h+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(p+y)*x,i[9]=(m-v)*x,i[10]=(1-(h+f))*x,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=e_.set(i[0],i[1],i[2]).length();const o=e_.set(i[4],i[5],i[6]).length(),s=e_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],t_.copy(this);const a=1/r,l=1/o,c=1/s;return t_.elements[0]*=a,t_.elements[1]*=a,t_.elements[2]*=a,t_.elements[4]*=l,t_.elements[5]*=l,t_.elements[6]*=l,t_.elements[8]*=c,t_.elements[9]*=c,t_.elements[10]*=c,t.setFromRotationMatrix(t_),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,a=2*r/(n-i),l=(t+e)/(t-e),c=(n+i)/(n-i),u=-(o+r)/(o-r),h=-2*o*r/(o-r);return s[0]=2*r/(t-e),s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=a,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,o){const s=this.elements,a=1/(t-e),l=1/(n-i),c=1/(o-r),u=(t+e)*a,h=(n+i)*l,d=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const e_=new Ey,t_=new Ky,n_=new Ey(0,0,0),i_=new Ey(1,1,1),r_=new Ey,o_=new Ey,s_=new Ey;class a_{constructor(e=0,t=0,n=0,i=a_.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const i=fy.clamp,r=e.elements,o=r[0],s=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return l_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l_,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return c_.setFromEuler(this),this.setFromQuaternion(c_,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Ey(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}a_.DefaultOrder="XYZ",a_.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const l_=new Ky,c_=new My;class u_{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let h_=0;const d_=new Ey,p_=new My,f_=new Ky,m_=new Ey,g_=new Ey,v_=new Ey,y_=new My,__=new Ey(1,0,0),b_=new Ey(0,1,0),w_=new Ey(0,0,1),x_={type:"added"},S_={type:"removed"};function M_(){Object.defineProperty(this,"id",{value:h_++}),this.uuid=fy.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M_.DefaultUp.clone();const e=new Ey,t=new a_,n=new My,i=new Ey(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ky},normalMatrix:{value:new gy}}),this.matrix=new Ky,this.matrixWorld=new Ky,this.matrixAutoUpdate=M_.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new u_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}M_.DefaultUp=new Ey(0,1,0),M_.DefaultMatrixAutoUpdate=!0,M_.prototype=Object.assign(Object.create(hy.prototype),{constructor:M_,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return p_.setFromAxisAngle(e,t),this.quaternion.multiply(p_),this},rotateOnWorldAxis:function(e,t){return p_.setFromAxisAngle(e,t),this.quaternion.premultiply(p_),this},rotateX:function(e){return this.rotateOnAxis(__,e)},rotateY:function(e){return this.rotateOnAxis(b_,e)},rotateZ:function(e){return this.rotateOnAxis(w_,e)},translateOnAxis:function(e,t){return d_.copy(e).applyQuaternion(this.quaternion),this.position.add(d_.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(__,e)},translateY:function(e){return this.translateOnAxis(b_,e)},translateZ:function(e){return this.translateOnAxis(w_,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(f_.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?m_.copy(e):m_.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),g_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?f_.lookAt(g_,m_,this.up):f_.lookAt(m_,g_,this.up),this.quaternion.setFromRotationMatrix(f_),i&&(f_.extractRotation(i.matrixWorld),p_.setFromRotationMatrix(f_),this.quaternion.premultiply(p_.inverse()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(x_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(S_)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(S_)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),f_.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),f_.multiply(e.parent.matrixWorld)),e.applyMatrix4(f_),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Ey),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new My),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g_,e,v_),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Ey),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g_,y_,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Ey),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++)r(e.shapes,n[t]);else r(e.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}});const E_=new Ey,T_=new Ey,C_=new gy;class A_{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Ey(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=E_.subVectors(n,t).cross(T_.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Ey),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Ey);const n=e.delta(E_),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Ey),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||C_.getNormalMatrix(e),i=this.coplanarPoint(E_).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const P_=new Ey,O_=new Ey,I_=new Ey,k_=new Ey,R_=new Ey,N_=new Ey,L_=new Ey,D_=new Ey,F_=new Ey,U_=new Ey;class z_{constructor(e,t,n){this.a=void 0!==e?e:new Ey,this.b=void 0!==t?t:new Ey,this.c=void 0!==n?n:new Ey}static getNormal(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Ey),i.subVectors(n,t),P_.subVectors(e,t),i.cross(P_);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){P_.subVectors(i,t),O_.subVectors(n,t),I_.subVectors(e,t);const o=P_.dot(P_),s=P_.dot(O_),a=P_.dot(I_),l=O_.dot(O_),c=O_.dot(I_),u=o*l-s*s;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Ey),0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,k_),k_.x>=0&&k_.y>=0&&k_.x+k_.y<=1}static getUV(e,t,n,i,r,o,s,a){return this.getBarycoord(e,t,n,i,k_),a.set(0,0),a.addScaledVector(r,k_.x),a.addScaledVector(o,k_.y),a.addScaledVector(s,k_.z),a}static isFrontFacing(e,t,n,i){return P_.subVectors(n,t),O_.subVectors(e,t),P_.cross(O_).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return P_.subVectors(this.c,this.b),O_.subVectors(this.a,this.b),.5*P_.cross(O_).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Ey),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return z_.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new A_),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return z_.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return z_.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return z_.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return z_.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Ey);const n=this.a,i=this.b,r=this.c;let o,s;R_.subVectors(i,n),N_.subVectors(r,n),D_.subVectors(e,n);const a=R_.dot(D_),l=N_.dot(D_);if(a<=0&&l<=0)return t.copy(n);F_.subVectors(e,i);const c=R_.dot(F_),u=N_.dot(F_);if(c>=0&&u<=c)return t.copy(i);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(R_,o);U_.subVectors(e,r);const d=R_.dot(U_),p=N_.dot(U_);if(p>=0&&d<=p)return t.copy(r);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(N_,s);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return L_.subVectors(r,i),s=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(L_,s);const g=1/(m+f+h);return o=f*g,s=h*g,t.copy(n).addScaledVector(R_,o).addScaledVector(N_,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const H_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},B_={h:0,s:0,l:0},j_={h:0,s:0,l:0};function V_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function W_(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function G_(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class q_{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=fy.euclideanModulo(e,1),t=fy.clamp(t,0,1),n=fy.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=V_(r,i,e+1/3),this.g=V_(r,i,e),this.b=V_(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const i=n[2];switch(n[1]){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=H_[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t){void 0===t&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=W_(e.r),this.g=W_(e.g),this.b=W_(e.b),this}copyLinearToSRGB(e){return this.r=G_(e.r),this.g=G_(e.g),this.b=G_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),o=Math.min(t,n,i);let s,a;const l=(o+r)/2;if(o===r)s=0,a=0;else{const e=r-o;switch(a=l<=.5?e/(r+o):e/(2-r-o),r){case t:s=(n-i)/e+(n<i?6:0);break;case n:s=(i-t)/e+2;break;case i:s=(t-n)/e+4}s/=6}return e.h=s,e.s=a,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(B_),B_.h+=e,B_.s+=t,B_.l+=n,this.setHSL(B_.h,B_.s,B_.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(B_),e.getHSL(j_);const n=fy.lerp(B_.h,j_.h,t),i=fy.lerp(B_.s,j_.s,t),r=fy.lerp(B_.l,j_.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}q_.NAMES=H_,q_.prototype.r=1,q_.prototype.g=1,q_.prototype.b=1;class X_{constructor(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Ey,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new q_,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let Y_=0;function Z_(){Object.defineProperty(this,"id",{value:Y_++}),this.uuid=fy.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Lv,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ay,this.stencilZFail=ay,this.stencilZPass=ay,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function J_(e){Z_.call(this),this.type="MeshBasicMaterial",this.color=new q_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}Z_.prototype=Object.assign(Object.create(hy.prototype),{constructor:Z_,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Z_.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),(J_.prototype=Object.create(Z_.prototype)).constructor=J_,J_.prototype.isMeshBasicMaterial=!0,J_.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const $_=new Ey,Q_=new my;function K_(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=ly,this.updateRange={offset:0,count:-1},this.version=0}function eb(e,t,n){K_.call(this,new Int8Array(e),t,n)}function tb(e,t,n){K_.call(this,new Uint8Array(e),t,n)}function nb(e,t,n){K_.call(this,new Uint8ClampedArray(e),t,n)}function ib(e,t,n){K_.call(this,new Int16Array(e),t,n)}function rb(e,t,n){K_.call(this,new Uint16Array(e),t,n)}function ob(e,t,n){K_.call(this,new Int32Array(e),t,n)}function sb(e,t,n){K_.call(this,new Uint32Array(e),t,n)}function ab(e,t,n){K_.call(this,new Float32Array(e),t,n)}function lb(e,t,n){K_.call(this,new Float64Array(e),t,n)}Object.defineProperty(K_.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(K_.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new q_),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new my),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Ey),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new wy),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Q_.fromBufferAttribute(this,t),Q_.applyMatrix3(e),this.setXY(t,Q_.x,Q_.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)$_.fromBufferAttribute(this,t),$_.applyMatrix3(e),this.setXYZ(t,$_.x,$_.y,$_.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)$_.x=this.getX(t),$_.y=this.getY(t),$_.z=this.getZ(t),$_.applyMatrix4(e),this.setXYZ(t,$_.x,$_.y,$_.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)$_.x=this.getX(t),$_.y=this.getY(t),$_.z=this.getZ(t),$_.applyNormalMatrix(e),this.setXYZ(t,$_.x,$_.y,$_.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)$_.x=this.getX(t),$_.y=this.getY(t),$_.z=this.getZ(t),$_.transformDirection(e),this.setXYZ(t,$_.x,$_.y,$_.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(eb.prototype=Object.create(K_.prototype)).constructor=eb,(tb.prototype=Object.create(K_.prototype)).constructor=tb,(nb.prototype=Object.create(K_.prototype)).constructor=nb,(ib.prototype=Object.create(K_.prototype)).constructor=ib,(rb.prototype=Object.create(K_.prototype)).constructor=rb,(ob.prototype=Object.create(K_.prototype)).constructor=ob,(sb.prototype=Object.create(K_.prototype)).constructor=sb,(ab.prototype=Object.create(K_.prototype)).constructor=ab,(lb.prototype=Object.create(K_.prototype)).constructor=lb;class cb{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,i,r=void 0;const o=e.faces;for(i=0;i<o.length;i++){const e=o[i];e.materialIndex!==r&&(r=e.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,a=s.length;let l;if(a>0){l=[];for(let e=0;e<a;e++)l[e]={name:s[e].name,data:[]};this.morphTargets.position=l}const c=e.morphNormals,u=c.length;let h;if(u>0){h=[];for(let e=0;e<u;e++)h[e]={name:c[e].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,p=e.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){const e=t[g];this.vertices.push(n[e.a],n[e.b],n[e.c]);const v=e.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{const t=e.normal;this.normals.push(t,t,t)}const y=e.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const t=e.color;this.colors.push(t,t,t)}if(!0===r){const e=i[0][g];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new my,new my,new my))}if(!0===o){const e=i[1][g];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new my,new my,new my))}for(let t=0;t<a;t++){const n=s[t].vertices;l[t].data.push(n[e.a],n[e.b],n[e.c])}for(let t=0;t<u;t++){const e=c[t].vertexNormals[g];h[t].data.push(e.a,e.b,e.c)}f&&this.skinIndices.push(d[e.a],d[e.b],d[e.c]),m&&this.skinWeights.push(p[e.a],p[e.b],p[e.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function ub(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let hb=1;const db=new Ky,pb=new M_,fb=new Ey,mb=new Ay,gb=new Ay,vb=new Ey;function yb(){Object.defineProperty(this,"id",{value:hb+=2}),this.uuid=fy.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}yb.prototype=Object.assign(Object.create(hy.prototype),{constructor:yb,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return this.index=Array.isArray(e)?new(ub(e)>65535?sb:rb)(e,1):e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new gy).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return db.makeRotationX(e),this.applyMatrix4(db),this},rotateY:function(e){return db.makeRotationY(e),this.applyMatrix4(db),this},rotateZ:function(e){return db.makeRotationZ(e),this.applyMatrix4(db),this},translate:function(e,t,n){return db.makeTranslation(e,t,n),this.applyMatrix4(db),this},scale:function(e,t,n){return db.makeScale(e,t,n),this.applyMatrix4(db),this},lookAt:function(e){return pb.lookAt(e),pb.updateMatrix(),this.applyMatrix4(pb.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fb).negate(),this.translate(fb.x,fb.y,fb.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new ab(3*t.vertices.length,3),n=new ab(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new ab(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ab(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new cb).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new K_(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new K_(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new K_(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new K_(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new K_(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const t=[],i=e.morphTargets[n];for(let e=0,n=i.length;e<n;e++){const n=i[e],r=new ab(3*n.data.length,3);r.name=n.name,t.push(r.copyVector3sArray(n.data))}this.morphAttributes[n]=t}if(e.skinIndices.length>0){const t=new ab(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new ab(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ay);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ey(-1/0,-1/0,-1/0),new Ey(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++)mb.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(vb.addVectors(this.boundingBox.min,mb.min),this.boundingBox.expandByPoint(vb),vb.addVectors(this.boundingBox.max,mb.max),this.boundingBox.expandByPoint(vb)):(this.boundingBox.expandByPoint(mb.min),this.boundingBox.expandByPoint(mb.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Wy);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ey,1/0);if(e){const n=this.boundingSphere.center;if(mb.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++)gb.setFromBufferAttribute(t[e]),this.morphTargetsRelative?(vb.addVectors(mb.min,gb.min),mb.expandByPoint(vb),vb.addVectors(mb.max,gb.max),mb.expandByPoint(vb)):(mb.expandByPoint(gb.min),mb.expandByPoint(gb.max));mb.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)vb.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(vb));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)vb.fromBufferAttribute(o,t),s&&(fb.fromBufferAttribute(e,t),vb.add(fb)),i=Math.max(i,n.distanceToSquared(vb))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new K_(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Ey,r=new Ey,o=new Ey,s=new Ey,a=new Ey,l=new Ey,c=new Ey,u=new Ey;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),a.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,o=e.attributes[i],s=o.array,a=o.itemSize*t,l=Math.min(s.length,r.length-a);for(let e=0,t=a;e<l;e++,t++)r[t]=s[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)vb.fromBufferAttribute(e,t),vb.normalize(),e.setXYZ(t,vb.x,vb.y,vb.z)},toNonIndexed:function(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=t[l]*i;for(let e=0;e<i;e++)o[a++]=n[s++]}return new K_(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new yb,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a],i=t.toJSON(e.data);""!==t.name&&(i.name=t.name),e.data.attributes[a]=i}const i={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i],o=r.toJSON(e.data);""!==r.name&&(o.name=r.name),n.push(o)}n.length>0&&(i[a]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return(new yb).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i)this.setAttribute(l,i[l].clone(t));const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const _b=new Ky,bb=new Qy,wb=new Wy,xb=new Ey,Sb=new Ey,Mb=new Ey,Eb=new Ey,Tb=new Ey,Cb=new Ey,Ab=new Ey,Pb=new Ey,Ob=new Ey,Ib=new my,kb=new my,Rb=new my,Nb=new Ey,Lb=new Ey;function Db(e,t){M_.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new yb,this.material=void 0!==t?t:new J_,this.updateMorphTargets()}function Fb(e,t,n,i,r,o,s,a){let l;if(l=1===t.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,2!==t.side,a),null===l)return null;Lb.copy(a),Lb.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Lb);return c<n.near||c>n.far?null:{distance:c,point:Lb.clone(),object:e}}function Ub(e,t,n,i,r,o,s,a,l,c,u,h){xb.fromBufferAttribute(r,c),Sb.fromBufferAttribute(r,u),Mb.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){Ab.set(0,0,0),Pb.set(0,0,0),Ob.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(Eb.fromBufferAttribute(n,c),Tb.fromBufferAttribute(n,u),Cb.fromBufferAttribute(n,h),s?(Ab.addScaledVector(Eb,t),Pb.addScaledVector(Tb,t),Ob.addScaledVector(Cb,t)):(Ab.addScaledVector(Eb.sub(xb),t),Pb.addScaledVector(Tb.sub(Sb),t),Ob.addScaledVector(Cb.sub(Mb),t)))}xb.add(Ab),Sb.add(Pb),Mb.add(Ob)}e.isSkinnedMesh&&(e.boneTransform(c,xb),e.boneTransform(u,Sb),e.boneTransform(h,Mb));const p=Fb(e,t,n,i,xb,Sb,Mb,Nb);if(p){a&&(Ib.fromBufferAttribute(a,c),kb.fromBufferAttribute(a,u),Rb.fromBufferAttribute(a,h),p.uv=z_.getUV(Nb,xb,Sb,Mb,Ib,kb,Rb,new my)),l&&(Ib.fromBufferAttribute(l,c),kb.fromBufferAttribute(l,u),Rb.fromBufferAttribute(l,h),p.uv2=z_.getUV(Nb,xb,Sb,Mb,Ib,kb,Rb,new my));const e=new X_(c,u,h);z_.getNormal(xb,Sb,Mb,e.normal),p.face=e}return p}Db.prototype=Object.assign(Object.create(M_.prototype),{constructor:Db,isMesh:!0,copy:function(e){return M_.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),wb.copy(n.boundingSphere),wb.applyMatrix4(r),!1===e.ray.intersectsSphere(wb))return;if(_b.getInverse(r),bb.copy(e.ray).applyMatrix4(_b),null!==n.boundingBox&&!1===bb.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,s=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(p.start+p.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);o=Ub(this,f,e,bb,s,a,l,c,u,i,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else for(let n=Math.max(0,d.start),p=Math.min(r.count,d.start+d.count);n<p;n+=3){const h=r.getX(n),d=r.getX(n+1),p=r.getX(n+2);o=Ub(this,i,e,bb,s,a,l,c,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==s)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const r=h[n],p=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3)o=Ub(this,p,e,bb,s,a,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,t.push(o))}else for(let n=Math.max(0,d.start),p=Math.min(s.count,d.start+d.count);n<p;n+=3)o=Ub(this,i,e,bb,s,a,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(n.isGeometry){const r=Array.isArray(i),s=n.vertices,a=n.faces;let l;const c=n.faceVertexUvs[0];c.length>0&&(l=c);for(let n=0,u=a.length;n<u;n++){const c=a[n],u=r?i[c.materialIndex]:i;if(void 0===u)continue;const h=s[c.a],d=s[c.b],p=s[c.c];if(o=Fb(this,u,e,bb,h,d,p,Nb),o){if(l&&l[n]){const e=l[n];Ib.copy(e[0]),kb.copy(e[1]),Rb.copy(e[2]),o.uv=z_.getUV(Nb,h,d,p,Ib,kb,Rb,new my)}o.face=c,o.faceIndex=n,t.push(o)}}}}});class zb extends yb{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,i,r,o,p,f,m,g,v){const y=o/m,_=p/g,b=o/2,w=p/2,x=f/2,S=m+1,M=g+1;let E=0,T=0;const C=new Ey;for(let s=0;s<M;s++){const o=s*_-w;for(let a=0;a<S;a++)C[e]=(a*y-b)*i,C[t]=o*r,C[n]=x,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),u.push(a/m),u.push(1-s/g),E+=1}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=h+e+S*(s+1),n=h+(e+1)+S*(s+1),i=h+(e+1)+S*s;a.push(h+e+S*s,t,i),a.push(t,n,i),T+=6}s.addGroup(d,T,v),d+=T,h+=E}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new ab(l,3)),this.setAttribute("normal",new ab(c,3)),this.setAttribute("uv",new ab(u,2))}}function Hb(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];t[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}}return t}function Bb(e){const t={};for(let n=0;n<e.length;n++){const i=Hb(e[n]);for(const e in i)t[e]=i[e]}return t}const jb={clone:Hb,merge:Bb};function Vb(e){Z_.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Wb(){M_.call(this),this.type="Camera",this.matrixWorldInverse=new Ky,this.projectionMatrix=new Ky,this.projectionMatrixInverse=new Ky}function Gb(e,t,n,i){Wb.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(Vb.prototype=Object.create(Z_.prototype)).constructor=Vb,Vb.prototype.isShaderMaterial=!0,Vb.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hb(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},Vb.prototype.toJSON=function(e){const t=Z_.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;t.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},Wb.prototype=Object.assign(Object.create(M_.prototype),{constructor:Wb,isCamera:!0,copy:function(e,t){return M_.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Ey),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){M_.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){M_.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Gb.prototype=Object.assign(Object.create(Wb.prototype),{constructor:Gb,isPerspectiveCamera:!0,copy:function(e,t){return Wb.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*fy.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*fy.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*fy.RAD2DEG*Math.atan(Math.tan(.5*fy.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*fy.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/s,i*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=M_.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const qb=90;function Xb(e,t,n){if(M_.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Gb(qb,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Ey(1,0,0)),this.add(i);const r=new Gb(qb,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ey(-1,0,0)),this.add(r);const o=new Gb(qb,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Ey(0,1,0)),this.add(o);const s=new Gb(qb,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Ey(0,-1,0)),this.add(s);const a=new Gb(qb,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Ey(0,0,1)),this.add(a);const l=new Gb(qb,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Ey(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}function Yb(e,t,n,i,r,o,s,a,l,c){by.call(this,e=void 0!==e?e:[],t=void 0!==t?t:301,n,i,r,o,s=void 0!==s?s:Yv,a,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function Zb(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),xy.call(this,e,e,t),this.texture=new Yb(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function Jb(e,t,n,i,r,o,s,a,l,c,u,h){by.call(this,null,o,s,a,l,c,i,r,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:zv,this.minFilter=void 0!==c?c:zv,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(Xb.prototype=Object.create(M_.prototype)).constructor=Xb,(Yb.prototype=Object.create(by.prototype)).constructor=Yb,Yb.prototype.isCubeTexture=!0,Object.defineProperty(Yb.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),(Zb.prototype=Object.create(xy.prototype)).constructor=Zb,Zb.prototype.isWebGLCubeRenderTarget=!0,Zb.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=Zv,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n=new zb(5,5,5),i=new Vb({name:"CubemapFromEquirect",uniforms:Hb({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:1,blending:0});i.uniforms.tEquirect.value=t;const r=new Db(n,i),o=t.minFilter;return t.minFilter===Bv&&(t.minFilter=Hv),new Xb(1,10,this).update(e,r),t.minFilter=o,r.geometry.dispose(),r.material.dispose(),this},Zb.prototype.clear=function(e,t,n,i){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)},(Jb.prototype=Object.create(by.prototype)).constructor=Jb,Jb.prototype.isDataTexture=!0;const $b=new Wy,Qb=new Ey;class Kb{constructor(e,t,n,i,r,o){this.planes=[void 0!==e?e:new A_,void 0!==t?t:new A_,void 0!==n?n:new A_,void 0!==i?i:new A_,void 0!==r?r:new A_,void 0!==o?o:new A_]}set(e,t,n,i,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(s-i,u-a,f-h,y-m).normalize(),t[1].setComponents(s+i,u+a,f+h,y+m).normalize(),t[2].setComponents(s+r,u+l,f+d,y+g).normalize(),t[3].setComponents(s-r,u-l,f-d,y-g).normalize(),t[4].setComponents(s-o,u-c,f-p,y-v).normalize(),t[5].setComponents(s+o,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$b.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($b)}intersectsSprite(e){return $b.center.set(0,0,0),$b.radius=.7071067811865476,$b.applyMatrix4(e.matrixWorld),this.intersectsSphere($b)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Qb.x=i.normal.x>0?e.max.x:e.min.x,Qb.y=i.normal.y>0?e.max.y:e.min.y,Qb.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Qb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function ew(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function tw(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var o=i.get(t);return void((!o||o.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=i.get(t);void 0===s?i.set(t,function(t,n){const i=t.array,r=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):s.version<t.version&&(function(t,i,r){const o=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,o):(n?e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(s.buffer,t,r),s.version=t.version)}}}class nw extends yb{constructor(e,t,n,i){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=(e=e||1)/2,o=(t=t||1)/2,s=Math.floor(n)||1,a=Math.floor(i)||1,l=s+1,c=a+1,u=e/s,h=t/a,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++)p.push(t*u-r,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/a)}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*(g+1),n=e+1+l*(g+1),i=e+1+l*g;d.push(e+l*g,t,i),d.push(t,n,i)}this.setIndex(d),this.setAttribute("position",new ab(p,3)),this.setAttribute("normal",new ab(f,3)),this.setAttribute("uv",new ab(m,2))}}const iw={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},rw={common:{diffuse:{value:new q_(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new gy},uv2Transform:{value:new gy},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new my(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new q_(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new q_(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gy}},sprite:{diffuse:{value:new q_(15658734)},opacity:{value:1},center:{value:new my(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gy}}},ow={basic:{uniforms:Bb([rw.common,rw.specularmap,rw.envmap,rw.aomap,rw.lightmap,rw.fog]),vertexShader:iw.meshbasic_vert,fragmentShader:iw.meshbasic_frag},lambert:{uniforms:Bb([rw.common,rw.specularmap,rw.envmap,rw.aomap,rw.lightmap,rw.emissivemap,rw.fog,rw.lights,{emissive:{value:new q_(0)}}]),vertexShader:iw.meshlambert_vert,fragmentShader:iw.meshlambert_frag},phong:{uniforms:Bb([rw.common,rw.specularmap,rw.envmap,rw.aomap,rw.lightmap,rw.emissivemap,rw.bumpmap,rw.normalmap,rw.displacementmap,rw.fog,rw.lights,{emissive:{value:new q_(0)},specular:{value:new q_(1118481)},shininess:{value:30}}]),vertexShader:iw.meshphong_vert,fragmentShader:iw.meshphong_frag},standard:{uniforms:Bb([rw.common,rw.envmap,rw.aomap,rw.lightmap,rw.emissivemap,rw.bumpmap,rw.normalmap,rw.displacementmap,rw.roughnessmap,rw.metalnessmap,rw.fog,rw.lights,{emissive:{value:new q_(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:iw.meshphysical_vert,fragmentShader:iw.meshphysical_frag},toon:{uniforms:Bb([rw.common,rw.aomap,rw.lightmap,rw.emissivemap,rw.bumpmap,rw.normalmap,rw.displacementmap,rw.gradientmap,rw.fog,rw.lights,{emissive:{value:new q_(0)}}]),vertexShader:iw.meshtoon_vert,fragmentShader:iw.meshtoon_frag},matcap:{uniforms:Bb([rw.common,rw.bumpmap,rw.normalmap,rw.displacementmap,rw.fog,{matcap:{value:null}}]),vertexShader:iw.meshmatcap_vert,fragmentShader:iw.meshmatcap_frag},points:{uniforms:Bb([rw.points,rw.fog]),vertexShader:iw.points_vert,fragmentShader:iw.points_frag},dashed:{uniforms:Bb([rw.common,rw.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:iw.linedashed_vert,fragmentShader:iw.linedashed_frag},depth:{uniforms:Bb([rw.common,rw.displacementmap]),vertexShader:iw.depth_vert,fragmentShader:iw.depth_frag},normal:{uniforms:Bb([rw.common,rw.bumpmap,rw.normalmap,rw.displacementmap,{opacity:{value:1}}]),vertexShader:iw.normal_vert,fragmentShader:iw.normal_frag},sprite:{uniforms:Bb([rw.sprite,rw.fog]),vertexShader:iw.sprite_vert,fragmentShader:iw.sprite_frag},background:{uniforms:{uvTransform:{value:new gy},t2D:{value:null}},vertexShader:iw.background_vert,fragmentShader:iw.background_frag},cube:{uniforms:Bb([rw.envmap,{opacity:{value:1}}]),vertexShader:iw.cube_vert,fragmentShader:iw.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:iw.equirect_vert,fragmentShader:iw.equirect_frag},distanceRGBA:{uniforms:Bb([rw.common,rw.displacementmap,{referencePosition:{value:new Ey},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:iw.distanceRGBA_vert,fragmentShader:iw.distanceRGBA_frag},shadow:{uniforms:Bb([rw.lights,rw.fog,{color:{value:new q_(0)},opacity:{value:1}}]),vertexShader:iw.shadow_vert,fragmentShader:iw.shadow_frag}};function sw(e,t,n,i,r){const o=new q_(0);let s,a,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),l=void 0!==t?t:1,d(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(o,l)},render:function(n,r,p,f){let m=!0===r.isScene?r.background:null;m&&m.isTexture&&(m=t.get(m));const g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?d(o,l):m&&m.isColor&&(d(m,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||306===m.mapping)?(void 0===a&&(a=new Db(new zb(1,1,1),new Vb({name:"BackgroundCubeMaterial",uniforms:Hb(ow.cube.uniforms),vertexShader:ow.cube.vertexShader,fragmentShader:ow.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(a)),m.isWebGLCubeRenderTarget&&(m=m.texture),a.material.uniforms.envMap.value=m,a.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,c===m&&u===m.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=m,u=m.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):m&&m.isTexture&&(void 0===s&&(s=new Db(new nw(2,2),new Vb({name:"BackgroundMaterial",uniforms:Hb(ow.background.uniforms),vertexShader:ow.background.vertexShader,fragmentShader:ow.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&u===m.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=m,u=m.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function aw(e,t,n,i){const r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=d(null);let c=l;function u(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let o=0;o<r;o++)t[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,r){const o=c.enabledAttributes,s=c.attributeDivisors;c.newAttributes[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function v(t,n,r,o,s,a){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,o,s,a):e.vertexAttribIPointer(t,n,r,s,a)}function y(){_(),c!==l&&(c=l,u(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,_){let b=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];return void 0===u&&(u=d(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[s]=u),u}(y,h,l);c!==t&&(c=t,u(c.object)),b=function(e,t){const n=c.attributes,i=e.attributes;if(Object.keys(n).length!==Object.keys(i).length)return!0;for(const r in i){const e=n[r],t=i[r];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0}return c.index!==t}(y,_),b&&function(e,t){const n={},i=e.attributes;for(const r in i){const e=i[r],t={};t.attribute=e,e.data&&(t.data=e.data),n[r]=t}c.attributes=n,c.index=t}(y,_)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==_&&n.update(_,34963),b&&(function(r,o,s,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const i=c[t];if(i>=0){const o=l[t];if(void 0!==o){const t=o.normalized,r=o.itemSize,s=n.get(o);if(void 0===s)continue;const l=s.buffer,c=s.type,u=s.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,s=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)):f(i),e.bindBuffer(34962,l),v(i,r,c,t,s*u,h*u)}else o.isInstancedBufferAttribute?(m(i,o.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)):f(i),e.bindBuffer(34962,l),v(i,r,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const o=t.buffer,s=t.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(i+0,4,s,!1,64,0),e.vertexAttribPointer(i+1,4,s,!1,64,16),e.vertexAttribPointer(i+2,4,s,!1,64,32),e.vertexAttribPointer(i+3,4,s,!1,64,48)}else if("instanceColor"===t){const t=n.get(r.instanceColor);if(void 0===t)continue;const o=t.buffer,s=t.type;m(i,1),e.bindBuffer(34962,o),e.vertexAttribPointer(i,3,s,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}g()}(r,l,h,y),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:y,resetDefaultState:_,dispose:function(){y();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function lw(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,s,a){if(0===a)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,s,a),n.update(s,o,a)}}function cw(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?e.getParameter(36183):0}}function uw(e){const t=this;let n=null,i=0,r=!1,o=!1;const s=new A_,a=new gy,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const t=i+4*o,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(r,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const s=0!==e.length||t||0!==i||r;return r=t,n=u(e,o,0),i=e.length,s},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,s,a){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!r||null===h||0===h.length||o&&!p)o?u(null):c();else{const e=o?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=u(h,s,t,a);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function hw(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(303===o||304===o){if(t.has(r))return n(t.get(r).texture,r.mapping);{const o=r.image;if(o&&o.height>0){const s=e.getRenderList(),a=e.getRenderTarget(),l=e.getRenderState(),c=new Zb(o.height/2);return c.fromEquirectangularTexture(e,r),t.set(r,c),e.setRenderTarget(a),e.setRenderList(s),e.setRenderState(l),r.addEventListener("dispose",i),n(c.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}function dw(e){const t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,null!==i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function pw(e,t,n,i){const r=new WeakMap,o=new WeakMap;function s(e){const a=e.target,l=r.get(a);null!==l.index&&t.remove(l.index);for(const n in l.attributes)t.remove(l.attributes[n]);a.removeEventListener("dispose",s),r.delete(a);const c=o.get(l);c&&(t.remove(c),o.delete(l)),i.releaseStatesOfGeometry(l),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{s=r.version;for(let e=0,t=r.array.length/3-1;e<t;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const a=new(ub(n)>65535?sb:rb)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){let i=r.get(t);return i||(t.addEventListener("dispose",s),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new yb).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){const n=e.attributes;for(const r in n)t.update(n[r],34962);const i=e.morphAttributes;for(const r in i){const e=i[r];for(let n=0,i=e.length;n<i;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function fw(e,t,n,i){const r=i.isWebGL2;let o,s,a;this.setMode=function(e){o=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,s,t*a),n.update(i,o,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,s,i*a,c),n.update(l,o,c)}}function mw(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function gw(e,t){return e[0]-t[0]}function vw(e,t){return Math.abs(t[1])-Math.abs(e[1])}function yw(e){const t={},n=new Float32Array(8),i=[];for(let r=0;r<8;r++)i[r]=[r,0];return{update:function(r,o,s,a){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[o.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(vw);for(let e=0;e<8;e++)e<c&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(gw);const h=s.morphTargets&&o.morphAttributes.position,d=s.morphNormals&&o.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],s=t[1];r!==Number.MAX_SAFE_INTEGER&&s?(h&&o.getAttribute("morphTarget"+e)!==h[r]&&o.setAttribute("morphTarget"+e,h[r]),d&&o.getAttribute("morphNormal"+e)!==d[r]&&o.setAttribute("morphNormal"+e,d[r]),n[e]=s,p+=s):(h&&void 0!==o.getAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&void 0!==o.getAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const f=o.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",f),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function _w(e,t,n,i){let r=new WeakMap;return{update:function(e){const o=i.render.frame,s=e.geometry,a=t.get(e,s);return r.get(a)!==o&&(s.isGeometry&&a.updateFromObject(e),t.update(a),r.set(a,o)),e.isInstancedMesh&&(n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),a},dispose:function(){r=new WeakMap}}}function bw(e,t,n,i){by.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=zv,this.minFilter=zv,this.wrapR=Fv,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ww(e,t,n,i){by.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=zv,this.minFilter=zv,this.wrapR=Fv,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ow.physical={uniforms:Bb([ow.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new my(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new q_(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:iw.meshphysical_vert,fragmentShader:iw.meshphysical_frag},(bw.prototype=Object.create(by.prototype)).constructor=bw,bw.prototype.isDataTexture2DArray=!0,(ww.prototype=Object.create(by.prototype)).constructor=ww,ww.prototype.isDataTexture3D=!0;const xw=new by,Sw=new bw,Mw=new ww,Ew=new Yb,Tw=[],Cw=[],Aw=new Float32Array(16),Pw=new Float32Array(9),Ow=new Float32Array(4);function Iw(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=Tw[r];if(void 0===o&&(o=new Float32Array(r),Tw[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function kw(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Rw(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Nw(e,t){let n=Cw[t];void 0===n&&(n=new Int32Array(t),Cw[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Lw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Dw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(kw(n,t))return;e.uniform2fv(this.addr,t),Rw(n,t)}}function Fw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(kw(n,t))return;e.uniform3fv(this.addr,t),Rw(n,t)}}function Uw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(kw(n,t))return;e.uniform4fv(this.addr,t),Rw(n,t)}}function zw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(kw(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Rw(n,t)}else{if(kw(n,i))return;Ow.set(i),e.uniformMatrix2fv(this.addr,!1,Ow),Rw(n,i)}}function Hw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(kw(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Rw(n,t)}else{if(kw(n,i))return;Pw.set(i),e.uniformMatrix3fv(this.addr,!1,Pw),Rw(n,i)}}function Bw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(kw(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Rw(n,t)}else{if(kw(n,i))return;Aw.set(i),e.uniformMatrix4fv(this.addr,!1,Aw),Rw(n,i)}}function jw(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||xw,r)}function Vw(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Sw,r)}function Ww(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Mw,r)}function Gw(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Ew,r)}function qw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xw(e,t){const n=this.cache;kw(n,t)||(e.uniform2iv(this.addr,t),Rw(n,t))}function Yw(e,t){const n=this.cache;kw(n,t)||(e.uniform3iv(this.addr,t),Rw(n,t))}function Zw(e,t){const n=this.cache;kw(n,t)||(e.uniform4iv(this.addr,t),Rw(n,t))}function Jw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function $w(e,t){e.uniform1fv(this.addr,t)}function Qw(e,t){e.uniform1iv(this.addr,t)}function Kw(e,t){e.uniform2iv(this.addr,t)}function ex(e,t){e.uniform3iv(this.addr,t)}function tx(e,t){e.uniform4iv(this.addr,t)}function nx(e,t){const n=Iw(t,this.size,2);e.uniform2fv(this.addr,n)}function ix(e,t){const n=Iw(t,this.size,3);e.uniform3fv(this.addr,n)}function rx(e,t){const n=Iw(t,this.size,4);e.uniform4fv(this.addr,n)}function ox(e,t){const n=Iw(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sx(e,t){const n=Iw(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ax(e,t){const n=Iw(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function lx(e,t,n){const i=t.length,r=Nw(n,i);e.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTexture2D(t[o]||xw,r[o])}function cx(e,t,n){const i=t.length,r=Nw(n,i);e.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTextureCube(t[o]||Ew,r[o])}function ux(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Lw;case 35664:return Dw;case 35665:return Fw;case 35666:return Uw;case 35674:return zw;case 35675:return Hw;case 35676:return Bw;case 5124:case 35670:return qw;case 35667:case 35671:return Xw;case 35668:case 35672:return Yw;case 35669:case 35673:return Zw;case 5125:return Jw;case 35678:case 36198:case 36298:case 36306:case 35682:return jw;case 35679:case 36299:case 36307:return Ww;case 35680:case 36300:case 36308:case 36293:return Gw;case 36289:case 36303:case 36311:case 36292:return Vw}}(t.type)}function hx(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return $w;case 35664:return nx;case 35665:return ix;case 35666:return rx;case 35674:return ox;case 35675:return sx;case 35676:return ax;case 5124:case 35670:return Qw;case 35667:case 35671:return Kw;case 35668:case 35672:return ex;case 35669:case 35673:return tx;case 35678:case 36198:case 36298:case 36306:case 35682:return lx;case 35680:case 36300:case 36308:case 36293:return cx}}(t.type)}function dx(e){this.id=e,this.seq=[],this.map={}}hx.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Rw(t,e)},dx.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const px=/([\w\d_]+)(\])?(\[|\.)?/g;function fx(e,t){e.seq.push(t),e.map[t.id]=t}function mx(e,t,n){const i=e.name,r=i.length;for(px.lastIndex=0;;){const o=px.exec(i),s=px.lastIndex;let a=o[1];const l=o[3];if("]"===o[2]&&(a|=0),void 0===l||"["===l&&s+2===r){fx(n,void 0===l?new ux(a,e,t):new hx(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new dx(a),fx(n,e)),n=e}}}function gx(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);mx(n,e.getUniformLocation(t,n.name),this)}}function vx(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}gx.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},gx.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},gx.upload=function(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},gx.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let yx=0;function _x(e){switch(e){case oy:return["Linear","( value )"];case sy:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function bx(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function wx(e,t){const n=_x(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xx(e,t){const n=_x(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sx(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Mx(e){return""!==e}function Ex(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Tx(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Cx=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ax(e){return e.replace(Cx,Px)}function Px(e,t){const n=iw[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ax(n)}const Ox=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ix=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kx(e){return e.replace(Ix,Nx).replace(Ox,Rx)}function Rx(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Nx(0,t,n,i)}function Nx(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Lx(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Dx(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mx).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(Mx).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Mx).join("\n"),v.length>0&&(v+="\n")):(g=[Lx(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mx).join("\n"),v=[p,Lx(n),"#define SHADER_NAME "+n.shaderName,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?iw.tonemapping_pars_fragment:"",0!==n.toneMapping?Sx("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",iw.encodings_pars_fragment,n.map?wx("mapTexelToLinear",n.mapEncoding):"",n.matcap?wx("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?wx("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?wx("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?wx("lightMapTexelToLinear",n.lightMapEncoding):"",xx("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Mx).join("\n")),s=Ax(s),s=Ex(s,n),s=Tx(s,n),a=Ax(a),a=Ex(a,n),a=Tx(a,n),s=kx(s),a=kx(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===uy?"":"out highp vec4 pc_fragColor;",n.glslVersion===uy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+v+a,b=vx(r,35633,y+g+s),w=vx(r,35632,_);if(r.attachShader(m,b),r.attachShader(m,w),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(b).trim(),n=r.getShaderInfoLog(w).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=bx(r,b,"vertex"),n=bx(r,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let x,S;return r.deleteShader(b),r.deleteShader(w),this.getUniforms=function(){return void 0===x&&(x=new gx(r,m)),x},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=yx++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=w,this}function Fx(e,t,n,i,r,o){const s=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=oy,t}return{getParameters:function(r,s,f,g,v){const y=g.fog,_=t.get(r.envMap||(r.isMeshStandardMaterial?g.environment:null)),b=p[r.type],w=v.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=Math.floor((u-20)/4),n=Math.min(e,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}}(v):0;let x,S;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.")),b){const e=ow[b];x=e.vertexShader,S=e.fragmentShader}else x=r.vertexShader,S=r.fragmentShader;const M=e.getRenderTarget();return{isWebGL2:a,shaderID:b,shaderName:r.type,vertexShader:x,fragmentShader:S,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==M?m(M.texture):e.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!y,useFog:r.fog,fogExp2:y&&y.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&w>0,maxBones:w,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<f.length;e++)n.push(t[f[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;return n=t?jb.clone(ow[t].uniforms):e.uniforms,n},acquireProgram:function(t,n){let i;for(let e=0,r=s.length;e<r;e++){const t=s[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Dx(e,n,t,r),s.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Ux(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function zx(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Hx(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Bx(e){const t=[];let n=0;const i=[],r=[],o={id:-1};function s(i,r,s,a,l,c){let u=t[n];const h=e.get(s);return void 0===u?(u={id:i.id,object:i,geometry:r,material:s,program:h.program||o,groupOrder:a,renderOrder:i.renderOrder,z:l,group:c},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=s,u.program=h.program||o,u.groupOrder=a,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,o,a,l){const c=s(e,t,n,o,a,l);(!0===n.transparent?r:i).push(c)},unshift:function(e,t,n,o,a,l){const c=s(e,t,n,o,a,l);(!0===n.transparent?r:i).unshift(c)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||zx),r.length>1&&r.sort(t||Hx)}}}function jx(e){let t=new WeakMap;return{get:function(n,i){const r=t.get(n);let o;return void 0===r?(o=new Bx(e),t.set(n,new WeakMap),t.get(n).set(i,o)):(o=r.get(i),void 0===o&&(o=new Bx(e),r.set(i,o))),o},dispose:function(){t=new WeakMap}}}function Vx(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ey,color:new q_};break;case"SpotLight":n={position:new Ey,direction:new Ey,color:new q_,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ey,color:new q_,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ey,skyColor:new q_,groundColor:new q_};break;case"RectAreaLight":n={color:new q_,position:new Ey,halfWidth:new Ey,halfHeight:new Ey}}return e[t.id]=n,n}}}let Wx=0;function Gx(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function qx(e,t){const n=new Vx,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new my};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new my,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)r.probe.push(new Ey);const o=new Ey,s=new Ky,a=new Ky;return{setup:function(l,c,u){let h=0,d=0,p=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let f=0,m=0,g=0,v=0,y=0,_=0,b=0,w=0;const x=u.matrixWorldInverse;l.sort(Gx);for(let e=0,t=l.length;e<t;e++){const t=l[e],c=t.color,u=t.intensity,S=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)h+=c.r*u,d+=c.g*u,p+=c.b*u;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],u);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(x),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[f]=n,r.directionalShadowMap[f]=M,r.directionalShadowMatrix[f]=t.shadow.matrix,_++}r.directional[f]=e,f++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(x),e.color.copy(c).multiplyScalar(u),e.distance=S,e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(x),e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[g]=n,r.spotShadowMap[g]=M,r.spotShadowMatrix[g]=t.shadow.matrix,w++}r.spot[g]=e,g++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(c).multiplyScalar(u),e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(x),a.identity(),s.copy(t.matrixWorld),s.premultiply(x),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),r.rectArea[v]=e,v++}else if(t.isPointLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(x),e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[m]=n,r.pointShadowMap[m]=M,r.pointShadowMatrix[m]=t.shadow.matrix,b++}r.point[m]=e,m++}else if(t.isHemisphereLight){const e=n.get(t);e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(x),e.direction.normalize(),e.skyColor.copy(t.color).multiplyScalar(u),e.groundColor.copy(t.groundColor).multiplyScalar(u),r.hemi[y]=e,y++}}v>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=rw.LTC_FLOAT_1,r.rectAreaLTC2=rw.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=rw.LTC_HALF_1,r.rectAreaLTC2=rw.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const S=r.hash;S.directionalLength===f&&S.pointLength===m&&S.spotLength===g&&S.rectAreaLength===v&&S.hemiLength===y&&S.numDirectionalShadows===_&&S.numPointShadows===b&&S.numSpotShadows===w||(r.directional.length=f,r.spot.length=g,r.rectArea.length=v,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=w,S.directionalLength=f,S.pointLength=m,S.spotLength=g,S.rectAreaLength=v,S.hemiLength=y,S.numDirectionalShadows=_,S.numPointShadows=b,S.numSpotShadows=w,r.version=Wx++)},state:r}}function Xx(e,t){const n=new qx(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,r,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function Yx(e,t){let n=new WeakMap;return{get:function(i,r){let o;return!1===n.has(i)?(o=new Xx(e,t),n.set(i,new WeakMap),n.get(i).set(r,o)):!1===n.get(i).has(r)?(o=new Xx(e,t),n.get(i).set(r,o)):o=n.get(i).get(r),o},dispose:function(){n=new WeakMap}}}function Zx(e){Z_.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Jx(e){Z_.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ey,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function $x(e,t,n){let i=new Kb;const r=new my,o=new my,s=new wy,a=[],l=[],c={},u={0:1,1:0,2:2},h=new Vb({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new my},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONAL_PASS=1;const p=new yb;p.setAttribute("position",new K_(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Db(p,h),m=this;function g(n,i){const r=t.update(f);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,d,f,null)}function v(e,t,n){const i=e<<0|t<<1|n<<2;let r=a[i];return void 0===r&&(r=new Zx({depthPacking:3201,morphTargets:e,skinning:t}),a[i]=r),r}function y(e,t,n){const i=e<<0|t<<1|n<<2;let r=l[i];return void 0===r&&(r=new Jx({morphTargets:e,skinning:t}),l[i]=r),r}function _(t,n,i,r,o,s,a){let l=null,h=v,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=y,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=h(e,r,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=l.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=l.clone(),n[t]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=3===a?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=s),l}function b(n,r,o,s,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=_(n,i,u,s,o.near,o.far,a);e.renderBufferDirect(o,null,i,t,n,c)}}}else if(r.visible){const t=_(n,i,r,s,o.near,o.far,a);e.renderBufferDirect(o,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,o,s,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,a,l){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const c=t[p],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const h=u.getFrameExtents();if(r.multiply(h),o.copy(u.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/h.x),r.x=o.x*h.x,u.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/h.y),r.y=o.y*h.y,u.mapSize.y=o.y)),null===u.map&&!u.isPointLightShadow&&3===this.type){const e={minFilter:Hv,magFilter:Hv,format:Zv};u.map=new xy(r.x,r.y,e),u.map.texture.name=c.name+".shadowMap",u.mapPass=new xy(r.x,r.y,e),u.camera.updateProjectionMatrix()}null===u.map&&(u.map=new xy(r.x,r.y,{minFilter:zv,magFilter:zv,format:Zv}),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()),e.setRenderTarget(u.map),e.clear();const f=u.getViewportCount();for(let e=0;e<f;e++){const t=u.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(s),u.updateMatrices(c,e),i=u.getFrustum(),b(a,l,u.camera,c,this.type)}u.isPointLightShadow||3!==this.type||g(u,l),u.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function Qx(e,t,n){const i=n.isWebGL2,r=new function(){let t=!1;const n=new wy;let i=null;const r=new wy(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?R(2929):N(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?R(2960):N(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&l===i||(e.stencilOp(t,n,i),s=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null}}};let a={},l=null,c=null,u=null,h=null,d=null,p=null,f=null,m=null,g=null,v=!1,y=null,_=null,b=null,w=null,x=null;const S=e.getParameter(35661);let M=!1,E=0;const T=e.getParameter(7938);-1!==T.indexOf("WebGL")?(E=parseFloat(/^WebGL\ ([0-9])/.exec(T)[1]),M=E>=1):-1!==T.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(T)[1]),M=E>=2);let C=null,A={};const P=new wy,O=new wy;function I(t,n,i){const r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let s=0;s<i;s++)e.texImage2D(n+s,0,6408,1,1,0,6408,5121,r);return o}const k={};function R(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function N(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}k[3553]=I(3553,3553,1),k[34067]=I(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),R(2929),o.setFunc(3),U(!1),z(1),R(2884),F(0);const L={[Lv]:32774,101:32778,102:32779};if(i)L[103]=32775,L[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(L[103]=e.MIN_EXT,L[104]=e.MAX_EXT)}const D={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function F(t,n,i,r,o,s,a,l){if(0!==t){if(c||(R(3042),c=!0),5===t)o=o||n,s=s||i,a=a||r,n===h&&o===f||(e.blendEquationSeparate(L[n],L[o]),h=n,f=o),i===d&&r===p&&s===m&&a===g||(e.blendFuncSeparate(D[i],D[r],D[s],D[a]),d=i,p=r,m=s,g=a),u=t,v=null;else if(t!==u||l!==v){if(h===Lv&&f===Lv||(e.blendEquation(32774),h=Lv,f=Lv),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}d=null,p=null,m=null,g=null,u=t,v=l}}else c&&(N(3042),c=!1)}function U(t){y!==t&&(e.frontFace(t?2304:2305),y=t)}function z(t){0!==t?(R(2884),t!==_&&e.cullFace(1===t?1029:2===t?1028:1032)):N(2884),_=t}function H(t,n,i){t?(R(32823),w===n&&x===i||(e.polygonOffset(n,i),w=n,x=i)):N(32823)}function B(t){void 0===t&&(t=33984+S-1),C!==t&&(e.activeTexture(t),C=t)}return{buffers:{color:r,depth:o,stencil:s},enable:R,disable:N,useProgram:function(t){return l!==t&&(e.useProgram(t),l=t,!0)},setBlending:F,setMaterial:function(e,t){2===e.side?N(2884):R(2884);let n=1===e.side;t&&(n=!n),U(n),1===e.blending&&!1===e.transparent?F(0):F(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;s.setTest(i),i&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:U,setCullFace:z,setLineWidth:function(t){t!==b&&(M&&e.lineWidth(t),b=t)},setPolygonOffset:H,setScissorTest:function(e){e?R(3089):N(3089)},activeTexture:B,bindTexture:function(t,n){null===C&&B();let i=A[C];void 0===i&&(i={type:void 0,texture:void 0},A[C]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||k[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=A[C];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===P.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),P.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){a={},C=null,A={},l=null,u=null,y=null,_=null,r.reset(),o.reset(),s.reset()}}}function Kx(e,t,n,i,r,o,s){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(F){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?fy.floorPowerOfTwo:Math.floor,o=i(r*e.width),s=i(r*e.height);void 0===p&&(p=m(o,s));const a=n?m(o,s):p;return a.width=o,a.height=s,a.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return fy.isPowerOfTwo(e.width)&&fy.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==zv&&e.minFilter!==Hv}function _(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function b(n,i,r){if(!1===a)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return e===zv||1004===e||1005===e?9728:9729}function x(t){const n=t.target;n.removeEventListener("dispose",x),function(t){const n=i.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),i.remove(t))}(n),n.isVideoTexture&&d.delete(n),s.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}}(n),s.memory.textures--}let M=0;function E(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void I(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function T(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?function(t,i,r){if(6!==i.image.length)return;O(t,i),n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,i.flipY);const s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=s||l?l?i.image[e].image:i.image[e]:g(i.image[e],!1,!0,c);const h=u[0],d=v(h)||a,p=o.convert(i.format),f=o.convert(i.type),m=b(i.internalFormat,p,f);let w;if(P(34067,i,d),s){for(let e=0;e<6;e++){w=u[e].mipmaps;for(let t=0;t<w.length;t++){const r=w[t];i.format!==Zv&&i.format!==Yv?null!==p?n.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,r.width,r.height,0,p,f,r.data)}}t.__maxMipLevel=w.length-1}else{w=i.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<w.length;t++){const i=w[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,p,f,i.data)}}else{n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<w.length;t++)n.texImage2D(34069+e,t+1,m,p,f,w[t].image[e])}t.__maxMipLevel=w.length}y(i,d)&&_(34067,i,h.width,h.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(s,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}const C={[Dv]:10497,[Fv]:33071,[Uv]:33648},A={[zv]:9728,1004:9984,1005:9986,[Hv]:9729,1007:9985,[Bv]:9987};function P(n,o,s){s?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,A[o.magFilter]),e.texParameteri(n,10241,A[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===Fv&&o.wrapT===Fv||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==zv&&o.minFilter!==Hv&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=t.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Gv&&null===t.get("OES_texture_float_linear"))return;if(o.type===qv&&null===(a||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function O(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x),t.__webglTexture=e.createTexture(),s.memory.textures++)}function I(t,i,r){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),O(t,i),n.activeTexture(33984+r),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);const l=function(e){return!a&&(e.wrapS!==Fv||e.wrapT!==Fv||e.minFilter!==zv&&e.minFilter!==Hv)}(i)&&!1===v(i.image),c=g(i.image,l,!1,u),h=v(c)||a,d=o.convert(i.format);let p,f=o.convert(i.type),m=b(i.internalFormat,d,f);P(s,i,h);const w=i.mipmaps;if(i.isDepthTexture)m=6402,a?m=i.type===Gv?36012:i.type===Wv?33190:i.type===Xv?35056:33189:i.type===Gv&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Jv&&6402===m&&i.type!==Vv&&i.type!==Wv&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Vv,f=o.convert(i.type)),i.format===$v&&6402===m&&(m=34041,i.type!==Xv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Xv,f=o.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(i.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)p=w[e],i.format!==Zv&&i.format!==Yv?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],n.texImage2D(3553,e,m,d,f,p);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;y(i,h)&&_(s,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function k(t,r,s,a){const l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=b(r.texture.internalFormat,l,c);n.texImage2D(a,0,u,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,a,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function R(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Gv?r=36012:t.type===Wv&&(r=33190));const i=N(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=N(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=o.convert(n.texture.format),r=o.convert(n.texture.type),s=b(n.texture.internalFormat,t,r);if(i){const t=N(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(e){return a&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let L=!1,D=!1;this.allocateTextureUnit=function(){const e=M;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const r=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",S),l.__webglTexture=e.createTexture(),s.memory.textures++;const c=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=v(t)||a;if(!a||t.texture.format!==Yv||t.texture.type!==Gv&&t.texture.type!==qv||(t.texture.format=Zv,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let t=0;t<6;t++)r.__webglFramebuffer[t]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),u)if(a){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=o.convert(t.texture.format),i=o.convert(t.texture.type),s=b(t.texture.internalFormat,n,i),a=N(t);e.renderbufferStorageMultisample(36161,a,s,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),R(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),P(34067,t.texture,h);for(let e=0;e<6;e++)k(r.__webglFramebuffer[e],t,36064,34069+e);y(t.texture,h)&&_(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),P(3553,t.texture,h),k(r.__webglFramebuffer,t,36064,3553),y(t.texture,h)&&_(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&function(t){const n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Jv)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==$v)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),R(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),R(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(y(t,v(e)||a)){const r=e.isWebGLCubeRenderTarget?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),_(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(a){const n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const r=t.width,o=t.height;let s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,s,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),T(e,t)}}function eS(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===jv)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===Vv)return 5123;if(1013===e)return 5124;if(e===Wv)return 5125;if(e===Gv)return 5126;if(e===qv)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===Yv)return 6407;if(e===Zv)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===Jv)return 6402;if(e===$v)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Xv?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function tS(e){Gb.call(this),this.cameras=e||[]}function nS(){M_.call(this),this.type="Group"}function iS(){this._targetRay=null,this._grip=null,this._hand=null}function rS(e,t){const n=this;let i=null,r=1,o=null,s="local-floor",a=null;const l=[],c=new Map,u=new Gb;u.layers.enable(1),u.viewport=new wy;const h=new Gb;h.layers.enable(2),h.viewport=new wy;const d=[u,h],p=new tS;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function v(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),M.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){o=e,M.setContext(i),M.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function _(e){const t=i.inputSources;for(let n=0;n<l.length;n++)c.set(t[n],l[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],i=c.get(t);i&&(i.dispatchEvent({type:"disconnected",data:t}),c.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],i=c.get(t);i&&i.dispatchEvent({type:"connected",data:t})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new iS,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new iS,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new iS,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(e){if(i=e,null!==i){i.addEventListener("select",g),i.addEventListener("selectstart",g),i.addEventListener("selectend",g),i.addEventListener("squeeze",g),i.addEventListener("squeezestart",g),i.addEventListener("squeezeend",g),i.addEventListener("end",v);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n=new XRWebGLLayer(i,t,{antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r});i.updateRenderState({baseLayer:n}),i.requestReferenceSpace(s).then(y),i.addEventListener("inputsourceschange",_)}};const b=new Ey,w=new Ey;function x(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=h.near=u.near=e.near,p.far=h.far=u.far=e.far,f===p.near&&m===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const t=e.parent,n=p.cameras;x(p,t);for(let i=0;i<n.length;i++)x(n[i],t);e.matrixWorld.copy(p.matrixWorld);const r=e.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const i=b.distanceTo(w),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=i/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);const g=s+f,v=a+f;e.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/v*g,c*a/v*g,g,v)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let S=null;const M=new ew;M.setAnimationLoop((function(t,n){if(a=n.getViewerPose(o),null!==a){const t=a.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==p.cameras.length&&(p.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],o=n.getViewport(i),s=d[e];s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===e&&p.matrix.copy(s.matrix),!0===r&&p.cameras.push(s)}}const r=i.inputSources;for(let e=0;e<l.length;e++)l[e].update(r[e],n,o);S&&S(t,n)})),this.setAnimationLoop=function(e){S=e},this.dispose=function(){}}function oS(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,o){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,o):i.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function sS(e){const t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=oy,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,v=0,y=null,_=null,b=-1,w=null,x=null;const S=new wy,M=new wy;let E=null,T=t.width,C=t.height,A=1,P=null,O=null;const I=new wy(0,0,T,C),k=new wy(0,0,T,C);let R=!1;const N=new Kb;let L=!1,D=!1;const F=new Ky,U=new Ey,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===y?A:1}let B,j,V,W,G,q,X,Y,Z,J,$,Q,K,ee,te,ne,ie,re,oe,se,ae,le=n;function ce(e,n){for(let i=0;i<e.length;i++){const r=t.getContext(e[i],n);if(null!==r)return r}return null}try{const e={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",fe,!1),null===le){const t=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&t.shift(),le=ce(t,e),null===le)throw ce(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===le.getShaderPrecisionFormat&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Me){throw console.error("THREE.WebGLRenderer: "+Me.message),Me}function ue(){B=new dw(le),j=new cw(le,B,e),!1===j.isWebGL2&&(B.get("WEBGL_depth_texture"),B.get("OES_texture_float"),B.get("OES_texture_half_float"),B.get("OES_texture_half_float_linear"),B.get("OES_standard_derivatives"),B.get("OES_element_index_uint"),B.get("OES_vertex_array_object"),B.get("ANGLE_instanced_arrays")),B.get("OES_texture_float_linear"),se=new eS(le,B,j),V=new Qx(le,B,j),V.scissor(M.copy(k).multiplyScalar(A).floor()),V.viewport(S.copy(I).multiplyScalar(A).floor()),W=new mw(le),G=new Ux,q=new Kx(le,B,V,G,j,se,W),X=new hw(p),Y=new tw(le,j),ae=new aw(le,B,Y,j),Z=new pw(le,Y,W,ae),J=new _w(le,Z,Y,W),ie=new yw(le),te=new uw(G),$=new Fx(p,X,B,j,ae,te),Q=new oS(G),K=new jx(G),ee=new Yx(B,j),ne=new sw(p,X,V,J,a),re=new lw(le,B,W,j),oe=new fw(le,B,W,j),W.programs=$.programs,p.capabilities=j,p.extensions=B,p.properties=G,p.renderLists=K,p.state=V,p.info=W}ue();const he=new rS(p,le);this.xr=he;const de=new $x(p,J,j.maxTextureSize);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,ue()}function me(e){const t=e.target;t.removeEventListener("dispose",me),function(e){ge(e),G.remove(e)}(t)}function ge(e){const t=G.get(e).program;void 0!==t&&$.releaseProgram(t)}this.shadowMap=de,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const e=B.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=B.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(T,C,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new my),e.set(T,C)},this.setSize=function(e,n,i){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,C=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new my),e.set(T*A,C*A).floor()},this.setDrawingBufferSize=function(e,n,i){T=e,C=n,A=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new wy),e.copy(S)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),V.viewport(S.copy(I).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(k)},this.setScissor=function(e,t,n,i){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,i),V.scissor(M.copy(k).multiplyScalar(A).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){V.setScissorTest(R=e)},this.setOpaqueSort=function(e){P=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(){return ne.getClearColor()},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),le.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",fe,!1),K.dispose(),ee.dispose(),G.dispose(),X.dispose(),J.dispose(),ae.dispose(),he.dispose(),ye.stop()},this.renderBufferImmediate=function(e,t){ae.initAttributes();const n=G.get(e);e.hasPositions&&!n.position&&(n.position=le.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=le.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=le.createBuffer()),e.hasColors&&!n.color&&(n.color=le.createBuffer());const i=t.getAttributes();e.hasPositions&&(le.bindBuffer(34962,n.position),le.bufferData(34962,e.positionArray,35048),ae.enableAttribute(i.position),le.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(le.bindBuffer(34962,n.normal),le.bufferData(34962,e.normalArray,35048),ae.enableAttribute(i.normal),le.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(le.bindBuffer(34962,n.uv),le.bufferData(34962,e.uvArray,35048),ae.enableAttribute(i.uv),le.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(le.bindBuffer(34962,n.color),le.bufferData(34962,e.colorArray,35048),ae.enableAttribute(i.color),le.vertexAttribPointer(i.color,3,5126,!1,0,0)),ae.disableUnusedAttributes(),le.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=z);const s=r.isMesh&&r.matrixWorld.determinant()<0,a=Se(e,t,i,r);V.setMaterial(i,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=Z.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&ie.update(r,n,i,a),ae.setup(r,i,a,n,l);let d=re;null!==l&&(u=Y.get(l),d=oe,d.setIndex(u));const p=null!==l?l.count:c.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),_=Math.min(p,f+m,g+v)-1,b=Math.max(0,_-y+1);if(0!==b){if(r.isMesh)!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*H()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),V.setLineWidth(e*H()),d.setMode(r.isLineSegments?1:r.isLineLoop?2:3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,b,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,b,e)}else d.render(y,b)}},this.compile=function(e,t){d=ee.get(e,t),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);const n=new WeakMap;e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];!1===n.has(o)&&(xe(o,e,t),n.set(o))}else!1===n.has(i)&&(xe(i,e,t),n.set(i))}))};let ve=null;const ye=new ew;function _e(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=J.update(e),r=e.material;r.visible&&h.push(e,t,r,n,U.z,null)}}else if(e.isImmediateRenderObject)i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||N.intersectsObject(e))){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=J.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r[s.materialIndex];a&&a.visible&&h.push(e,t,a,n,U.z,s)}}else r.visible&&h.push(e,t,r,n,U.z,null)}const r=e.children;for(let o=0,s=r.length;o<s;o++)_e(r[o],t,n,i)}function be(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,l=null===i?o.material:i,c=o.group;if(n.isArrayCamera){x=n;const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];s.layers.test(i.layers)&&(V.viewport(S.copy(i.viewport)),d.setupLights(i),we(s,t,i,a,l,c))}}else x=null,we(s,t,n,a,l,c)}}function we(e,t,n,i,r,o){if(e.onBeforeRender(p,t,n,i,r,o),d=ee.get(t,x||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=Se(n,t,r,e);V.setMaterial(r),ae.reset(),function(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}(e,i)}else p.renderBufferDirect(n,t,i,r,e,o);e.onAfterRender(p,t,n,i,r,o),d=ee.get(t,x||n)}function xe(e,t,n){!0!==t.isScene&&(t=z);const i=G.get(e),r=d.state.lights,o=r.state.version,s=$.getParameters(e,r.state,d.state.shadowsArray,t,n),a=$.getProgramCacheKey(s);let l=i.program,c=!0;if(void 0===l)e.addEventListener("dispose",me);else if(l.cacheKey!==a)ge(e);else if(i.lightsStateVersion!==o)c=!1;else{if(void 0!==s.shaderID){const n=e.isMeshStandardMaterial?t.environment:null;return void(i.envMap=X.get(e.envMap||n))}c=!1}c&&(s.uniforms=$.getUniforms(e),e.onBeforeCompile(s,p),l=$.acquireProgram(s,a),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const u=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=te.numPlanes,i.numIntersection=te.numIntersection,u.clippingPlanes=te.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=X.get(e.envMap||i.environment),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const h=i.program.getUniforms(),f=gx.seqWithValue(h.seq,u);i.uniformsList=f}function Se(e,t,n,i){!0!==t.isScene&&(t=z),q.resetTextureUnits();const r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,s=null===y?p.outputEncoding:y.texture.encoding,a=X.get(n.envMap||o),l=G.get(n),c=d.state.lights;!0!==L||!0!==D&&e===w||te.setState(n,e,e===w&&n.id===b),n.version===l.__version?n.fog&&l.fog!==r||l.environment!==o||l.needsLights&&l.lightsStateVersion!==c.state.version?xe(n,t,i):void 0===l.numClippingPlanes||l.numClippingPlanes===te.numPlanes&&l.numIntersection===te.numIntersection?(l.outputEncoding!==s||l.envMap!==a)&&xe(n,t,i):xe(n,t,i):(xe(n,t,i),l.__version=n.version);let u=!1,h=!1,f=!1;const m=l.program,g=m.getUniforms(),v=l.uniforms;if(V.useProgram(m.program)&&(u=!0,h=!0,f=!0),n.id!==b&&(b=n.id,h=!0),u||w!==e){if(g.setValue(le,"projectionMatrix",e.projectionMatrix),j.logarithmicDepthBuffer&&g.setValue(le,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=g.map.cameraPosition;void 0!==t&&t.setValue(le,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(le,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(le,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(le,i,"bindMatrix"),g.setOptional(le,i,"bindMatrixInverse");const e=i.skeleton;if(e){const t=e.bones;if(j.floatVertexTextures){if(void 0===e.boneTexture){let n=Math.sqrt(4*t.length);n=fy.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new Jb(i,n,n,Zv,Gv);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}g.setValue(le,"boneTexture",e.boneTexture,q),g.setValue(le,"boneTextureSize",e.boneTextureSize)}else g.setOptional(le,e,"boneMatrices")}}var _,x;return(h||l.receiveShadow!==i.receiveShadow)&&(l.receiveShadow=i.receiveShadow,g.setValue(le,"receiveShadow",i.receiveShadow)),h&&(g.setValue(le,"toneMappingExposure",p.toneMappingExposure),l.needsLights&&((_=v).ambientLightColor.needsUpdate=x=f,_.lightProbe.needsUpdate=x,_.directionalLights.needsUpdate=x,_.directionalLightShadows.needsUpdate=x,_.pointLights.needsUpdate=x,_.pointLightShadows.needsUpdate=x,_.spotLights.needsUpdate=x,_.spotLightShadows.needsUpdate=x,_.rectAreaLights.needsUpdate=x,_.hemisphereLights.needsUpdate=x),r&&n.fog&&Q.refreshFogUniforms(v,r),Q.refreshMaterialUniforms(v,n,A,C),gx.upload(le,l.uniformsList,v,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(gx.upload(le,l.uniformsList,v,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(le,"center",i.center),g.setValue(le,"modelViewMatrix",i.modelViewMatrix),g.setValue(le,"normalMatrix",i.normalMatrix),g.setValue(le,"modelMatrix",i.matrixWorld),m}ye.setAnimationLoop((function(e){he.isPresenting||ve&&ve(e)})),"undefined"!=typeof window&&ye.setContext(window),this.setAnimationLoop=function(e){ve=e,he.setAnimationLoop(e),null===e?ye.stop():ye.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;ae.resetDefaultState(),b=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||y),d=ee.get(e,t),d.init(),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(F),D=this.localClippingEnabled,L=te.init(this.clippingPlanes,D,t),h=K.get(e,t),h.init(),_e(e,t,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(P,O),!0===L&&te.beginShadows();const r=d.state.shadowsArray;de.render(r,e,t),d.setupLights(t),!0===L&&te.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ne.render(h,e,t,i);const o=h.opaque,s=h.transparent;o.length>0&&be(o,e,t),s.length>0&&be(s,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==y&&(q.updateRenderTargetMipmap(y),q.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(e){m!==e&&null===y&&le.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return h},this.setRenderList=function(e){h=e},this.getRenderState=function(){return d},this.setRenderState=function(e){d=e},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t=0,n=0){y=e,g=t,v=n,e&&void 0===G.get(e).__webglFramebuffer&&q.setupRenderTarget(e);let i=m,r=!1;if(e){const n=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t],r=!0):i=e.isWebGLMultisampleRenderTarget?G.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),M.copy(e.scissor),E=e.scissorTest}else S.copy(I).multiplyScalar(A).floor(),M.copy(k).multiplyScalar(A).floor(),E=R;if(_!==i&&(le.bindFramebuffer(36160,i),_=i),V.viewport(S),V.scissor(M),V.setScissorTest(E),r){const i=G.get(e.texture);le.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,i,r,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){let s=!1;a!==_&&(le.bindFramebuffer(36160,a),s=!0);try{const a=e.texture,l=a.format,c=a.type;if(l!==Zv&&se.convert(l)!==le.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===jv||se.convert(c)===le.getParameter(35738)||c===Gv&&(j.isWebGL2||B.get("OES_texture_float")||B.get("WEBGL_color_buffer_float"))||c===qv&&B.get(j.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===le.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&le.readPixels(t,n,i,r,se.convert(l),se.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&le.bindFramebuffer(36160,_)}}},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i),s=se.convert(t.format);q.setTexture2D(t,0),le.copyTexImage2D(3553,n,s,e.x,e.y,r,o,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);const r=t.image.width,o=t.image.height,s=se.convert(n.format),a=se.convert(n.type);q.setTexture2D(n,0),le.pixelStorei(37440,n.flipY),le.pixelStorei(37441,n.premultiplyAlpha),le.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?le.texSubImage2D(3553,i,e.x,e.y,r,o,s,a,t.image.data):t.isCompressedTexture?le.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):le.texSubImage2D(3553,i,e.x,e.y,s,a,t.image),0===i&&n.generateMipmaps&&le.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),V.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function aS(e){sS.call(this,e)}(Zx.prototype=Object.create(Z_.prototype)).constructor=Zx,Zx.prototype.isMeshDepthMaterial=!0,Zx.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},(Jx.prototype=Object.create(Z_.prototype)).constructor=Jx,Jx.prototype.isMeshDistanceMaterial=!0,Jx.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},tS.prototype=Object.assign(Object.create(Gb.prototype),{constructor:tS,isArrayCamera:!0}),nS.prototype=Object.assign(Object.create(M_.prototype),{constructor:nS,isGroup:!0}),Object.assign(iS.prototype,{constructor:iS,getHandSpace:function(){if(null===this._hand&&(this._hand=new nS,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new nS;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new nS,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new nS,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e)if(l&&e.hand){o=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(e.hand[i]){const r=t.getJointPose(e.hand[i],n),o=l.joints[i];null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=r.radius),o.visible=null!==r;const s=l.joints[window.XRHand.INDEX_PHALANX_TIP],a=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=s.position.distanceTo(a.position),u=.02,h=.005;l.inputState.pinching&&c>u+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=u-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==s&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(rS.prototype,hy.prototype),aS.prototype=Object.assign(Object.create(sS.prototype),{constructor:aS,isWebGL1Renderer:!0});class lS extends M_{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function cS(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ly,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=fy.generateUUID()}Object.defineProperty(cS.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(cS.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fy.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new cS(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fy.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const uS=new Ey;function hS(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function dS(e){Z_.call(this),this.type="SpriteMaterial",this.color=new q_(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let pS;Object.defineProperties(hS.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(hS.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)uS.x=this.getX(t),uS.y=this.getY(t),uS.z=this.getZ(t),uS.applyMatrix4(e),this.setXYZ(t,uS.x,uS.y,uS.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new K_(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hS(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),(dS.prototype=Object.create(Z_.prototype)).constructor=dS,dS.prototype.isSpriteMaterial=!0,dS.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const fS=new Ey,mS=new Ey,gS=new Ey,vS=new my,yS=new my,_S=new Ky,bS=new Ey,wS=new Ey,xS=new Ey,SS=new my,MS=new my,ES=new my;function TS(e){if(M_.call(this),this.type="Sprite",void 0===pS){pS=new yb;const e=new cS(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);pS.setIndex([0,1,2,0,2,3]),pS.setAttribute("position",new hS(e,3,0,!1)),pS.setAttribute("uv",new hS(e,2,3,!1))}this.geometry=pS,this.material=void 0!==e?e:new dS,this.center=new my(.5,.5)}function CS(e,t,n,i,r,o){vS.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(yS.x=o*vS.x-r*vS.y,yS.y=r*vS.x+o*vS.y):yS.copy(vS),e.copy(t),e.x+=yS.x,e.y+=yS.y,e.applyMatrix4(_S)}TS.prototype=Object.assign(Object.create(M_.prototype),{constructor:TS,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mS.setFromMatrixScale(this.matrixWorld),_S.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&mS.multiplyScalar(-gS.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;CS(bS.set(-.5,-.5,0),gS,o,mS,i,r),CS(wS.set(.5,-.5,0),gS,o,mS,i,r),CS(xS.set(.5,.5,0),gS,o,mS,i,r),SS.set(0,0),MS.set(1,0),ES.set(1,1);let s=e.ray.intersectTriangle(bS,wS,xS,!1,fS);if(null===s&&(CS(wS.set(-.5,.5,0),gS,o,mS,i,r),MS.set(0,1),s=e.ray.intersectTriangle(bS,xS,wS,!1,fS),null===s))return;const a=e.ray.origin.distanceTo(fS);a<e.near||a>e.far||t.push({distance:a,point:fS.clone(),uv:z_.getUV(fS,bS,wS,xS,SS,MS,ES,new my),face:null,object:this})},copy:function(e){return M_.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const AS=new Ey,PS=new Ey;function OS(){M_.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function IS(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Db.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ky,this.bindMatrixInverse=new Ky}OS.prototype=Object.assign(Object.create(M_.prototype),{constructor:OS,isLOD:!0,copy:function(e){M_.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){AS.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(AS);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){AS.setFromMatrixPosition(e.matrixWorld),PS.setFromMatrixPosition(this.matrixWorld);const n=AS.distanceTo(PS)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=M_.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance})}return t}}),IS.prototype=Object.assign(Object.create(Db.prototype),{constructor:IS,isSkinnedMesh:!0,copy:function(e){return Db.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new wy,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Db.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new Ey,t=new wy,n=new wy,i=new Ey,r=new Ky;return function(o,s){const a=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),e.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let c=0;c<4;c++){const o=n.getComponent(c);if(0!==o){const n=t.getComponent(c);r.multiplyMatrices(a.bones[n].matrixWorld,a.boneInverses[n]),s.addScaledVector(i.copy(e).applyMatrix4(r),o)}}return s.applyMatrix4(this.bindMatrixInverse)}}()});const kS=new Ky,RS=new Ky;function NS(e,t){if(this.bones=(e=e||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ky)}}function LS(){M_.call(this),this.type="Bone"}Object.assign(NS.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const t=new Ky;this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++)kS.multiplyMatrices(e[r]?e[r].matrixWorld:RS,t[r]),kS.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new NS(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),LS.prototype=Object.assign(Object.create(M_.prototype),{constructor:LS,isBone:!0});const DS=new Ky,FS=new Ky,US=[],zS=new Db;function HS(e,t,n){Db.call(this,e,t),this.instanceMatrix=new K_(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function BS(e){Z_.call(this),this.type="LineBasicMaterial",this.color=new q_(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}HS.prototype=Object.assign(Object.create(Db.prototype),{constructor:HS,isInstancedMesh:!0,copy:function(e){return Db.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new K_(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(zS.geometry=this.geometry,zS.material=this.material,void 0!==zS.material)for(let r=0;r<i;r++){this.getMatrixAt(r,DS),FS.multiplyMatrices(n,DS),zS.matrixWorld=FS,zS.raycast(e,US);for(let e=0,n=US.length;e<n;e++){const n=US[e];n.instanceId=r,n.object=this,t.push(n)}US.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),(BS.prototype=Object.create(Z_.prototype)).constructor=BS,BS.prototype.isLineBasicMaterial=!0,BS.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const jS=new Ey,VS=new Ey,WS=new Ky,GS=new Qy,qS=new Wy;function XS(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),M_.call(this),this.type="Line",this.geometry=void 0!==e?e:new yb,this.material=void 0!==t?t:new BS,this.updateMorphTargets()}XS.prototype=Object.assign(Object.create(M_.prototype),{constructor:XS,isLine:!0,copy:function(e){return M_.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)jS.fromBufferAttribute(t,e-1),VS.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=jS.distanceTo(VS);e.setAttribute("lineDistance",new ab(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,i=t.length;e<i;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),qS.copy(n.boundingSphere),qS.applyMatrix4(i),qS.radius+=r,!1===e.ray.intersectsSphere(qS))return;WS.getInverse(i),GS.copy(e.ray).applyMatrix4(WS);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new Ey,l=new Ey,c=new Ey,u=new Ey,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,o=n.length-1;i<o;i+=h){const o=n[i+1];if(a.fromBufferAttribute(r,n[i]),l.fromBufferAttribute(r,o),GS.distanceSqToSegment(a,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(u);h<e.near||h>e.far||t.push({distance:h,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,o=r.count-1;n<o;n+=h){if(a.fromBufferAttribute(r,n),l.fromBufferAttribute(r,n+1),GS.distanceSqToSegment(a,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(GS.distanceSqToSegment(i[n],i[n+1],u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const YS=new Ey,ZS=new Ey;function JS(e,t){XS.call(this,e,t),this.type="LineSegments"}function $S(e,t){XS.call(this,e,t),this.type="LineLoop"}function QS(e){Z_.call(this),this.type="PointsMaterial",this.color=new q_(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}JS.prototype=Object.assign(Object.create(XS.prototype),{constructor:JS,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)YS.fromBufferAttribute(t,e),ZS.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+YS.distanceTo(ZS);e.setAttribute("lineDistance",new ab(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,i=t.length;e<i;e+=2)YS.copy(t[e]),ZS.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+YS.distanceTo(ZS)}return this}}),$S.prototype=Object.assign(Object.create(XS.prototype),{constructor:$S,isLineLoop:!0}),(QS.prototype=Object.create(Z_.prototype)).constructor=QS,QS.prototype.isPointsMaterial=!0,QS.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const KS=new Ky,eM=new Qy,tM=new Wy,nM=new Ey;function iM(e,t){M_.call(this),this.type="Points",this.geometry=void 0!==e?e:new yb,this.material=void 0!==t?t:new QS,this.updateMorphTargets()}function rM(e,t,n,i,r,o,s){const a=eM.distanceSqToPoint(e);if(a<n){const n=new Ey;eM.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:s})}}function oM(e,t,n,i,r,o,s,a,l){by.call(this,e,t,n,i,r,o,s,a,l),this.format=void 0!==s?s:Yv,this.minFilter=void 0!==o?o:Hv,this.magFilter=void 0!==r?r:Hv,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function sM(e,t,n,i,r,o,s,a,l,c,u,h){by.call(this,null,o,s,a,l,c,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function aM(e,t,n,i,r,o,s,a,l){by.call(this,e,t,n,i,r,o,s,a,l),this.needsUpdate=!0}function lM(e,t,n,i,r,o,s,a,l,c){if((c=void 0!==c?c:Jv)!==Jv&&c!==$v)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Jv&&(n=Vv),void 0===n&&c===$v&&(n=Xv),by.call(this,null,i,r,o,s,a,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:zv,this.minFilter=void 0!==a?a:zv,this.flipY=!1,this.generateMipmaps=!1}iM.prototype=Object.assign(Object.create(M_.prototype),{constructor:iM,isPoints:!0,copy:function(e){return M_.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),tM.copy(n.boundingSphere),tM.applyMatrix4(i),tM.radius+=r,!1===e.ray.intersectsSphere(tM))return;KS.getInverse(i),eM.copy(e.ray).applyMatrix4(KS);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,a=n.length;r<a;r++){const a=n[r];nM.fromBufferAttribute(o,a),rM(nM,a,s,i,e,t,this)}}else for(let n=0,a=o.count;n<a;n++)nM.fromBufferAttribute(o,n),rM(nM,n,s,i,e,t,this)}else{const r=n.vertices;for(let n=0,o=r.length;n<o;n++)rM(r[n],n,s,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),oM.prototype=Object.assign(Object.create(by.prototype),{constructor:oM,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;0=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(sM.prototype=Object.create(by.prototype)).constructor=sM,sM.prototype.isCompressedTexture=!0,(aM.prototype=Object.create(by.prototype)).constructor=aM,aM.prototype.isCanvasTexture=!0,(lM.prototype=Object.create(by.prototype)).constructor=lM,lM.prototype.isDepthTexture=!0;let cM=0;const uM=new Ky,hM=new M_,dM=new Ey;function pM(){Object.defineProperty(this,"id",{value:cM+=2}),this.uuid=fy.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function fM(e,t,n,i,r){let o,s;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)s=LM(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=LM(o,e[o],e[o+1],s);return s&&PM(s,s.next)&&(DM(s),s=s.next),s}function mM(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!PM(i,i.next)&&0!==AM(i.prev,i,i.next))i=i.next;else{if(DM(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function gM(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=MM(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ,i);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(e,i,r,o);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,o?yM(e,i,r,o):vM(e))t.push(a.i/n),t.push(e.i/n),t.push(l.i/n),DM(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?gM(e=_M(mM(e),t,n),t,n,i,r,o,2):2===s&&bM(e,t,n,i,r,o):gM(mM(e),t,n,i,r,o,1);break}}function vM(e){const t=e.prev,n=e,i=e.next;if(AM(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(TM(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&AM(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function yM(e,t,n,i){const r=e.prev,o=e,s=e.next;if(AM(r,o,s)>=0)return!1;const a=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=MM(r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,t,n,i),u=MM(a,l,t,n,i);let h=e.prevZ,d=e.nextZ;for(;h&&h.z>=c&&d&&d.z<=u;){if(h!==e.prev&&h!==e.next&&TM(r.x,r.y,o.x,o.y,s.x,s.y,h.x,h.y)&&AM(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&TM(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&AM(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&TM(r.x,r.y,o.x,o.y,s.x,s.y,h.x,h.y)&&AM(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==e.prev&&d!==e.next&&TM(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&AM(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function _M(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!PM(r,o)&&OM(r,i,i.next,o)&&RM(r,o)&&RM(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),DM(i),DM(i.next),i=e=o),i=i.next}while(i!==e);return mM(i)}function bM(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&CM(s,e)){let a=NM(s,e);return s=mM(s,s.next),a=mM(a,a.next),gM(s,t,n,i,r,o),void gM(a,t,n,i,r,o)}e=e.next}s=s.next}while(s!==e)}function wM(e,t){return e.x-t.x}function xM(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let o,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s){if(s=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&TM(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),RM(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&SM(o,n)))&&(o=n,h=u)),n=n.next}while(n!==a);return o}(e,t)){const n=NM(t,e);mM(t,t.next),mM(n,n.next)}}function SM(e,t){return AM(e.prev,e,t.prev)<0&&AM(t.next,e,e.next)<0}function MM(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function EM(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function TM(e,t,n,i,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function CM(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&OM(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(RM(e,t)&&RM(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(AM(e.prev,e,t.prev)||AM(e,t.prev,t))||PM(e,t)&&AM(e.prev,e,e.next)>0&&AM(t.prev,t,t.next)>0)}function AM(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function PM(e,t){return e.x===t.x&&e.y===t.y}function OM(e,t,n,i){const r=kM(AM(e,t,n)),o=kM(AM(e,t,i)),s=kM(AM(n,i,e)),a=kM(AM(n,i,t));return r!==o&&s!==a||!(0!==r||!IM(e,n,t))||!(0!==o||!IM(e,i,t))||!(0!==s||!IM(n,e,i))||!(0!==a||!IM(n,t,i))}function IM(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function kM(e){return e>0?1:e<0?-1:0}function RM(e,t){return AM(e.prev,e,e.next)<0?AM(e,t,e.next)>=0&&AM(e,e.prev,t)>=0:AM(e,t,e.prev)<0||AM(e,e.next,t)<0}function NM(e,t){const n=new FM(e.i,e.x,e.y),i=new FM(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function LM(e,t,n,i){const r=new FM(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function DM(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function FM(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}pM.prototype=Object.assign(Object.create(hy.prototype),{constructor:pM,isGeometry:!0,applyMatrix4:function(e){const t=(new gy).getNormalMatrix(e);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(let n=0,i=this.faces.length;n<i;n++){const e=this.faces[n];e.normal.applyMatrix3(t).normalize();for(let n=0,i=e.vertexNormals.length;n<i;n++)e.vertexNormals[n].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return uM.makeRotationX(e),this.applyMatrix4(uM),this},rotateY:function(e){return uM.makeRotationY(e),this.applyMatrix4(uM),this},rotateZ:function(e){return uM.makeRotationZ(e),this.applyMatrix4(uM),this},translate:function(e,t,n){return uM.makeTranslation(e,t,n),this.applyMatrix4(uM),this},scale:function(e,t,n){return uM.makeScale(e,t,n),this.applyMatrix4(uM),this},lookAt:function(e){return hM.lookAt(e),hM.updateMatrix(),this.applyMatrix4(hM.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,o=i.normal,s=i.color,a=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let h=0;h<r.count;h++)t.vertices.push((new Ey).fromBufferAttribute(r,h)),void 0!==s&&t.colors.push((new q_).fromBufferAttribute(s,h));function c(e,n,i,r){const c=void 0===s?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=void 0===o?[]:[(new Ey).fromBufferAttribute(o,e),(new Ey).fromBufferAttribute(o,n),(new Ey).fromBufferAttribute(o,i)],h=new X_(e,n,i,u,c,r);t.faces.push(h),void 0!==a&&t.faceVertexUvs[0].push([(new my).fromBufferAttribute(a,e),(new my).fromBufferAttribute(a,n),(new my).fromBufferAttribute(a,i)]),void 0!==l&&t.faceVertexUvs[1].push([(new my).fromBufferAttribute(l,e),(new my).fromBufferAttribute(l,n),(new my).fromBufferAttribute(l,i)])}const u=e.groups;if(u.length>0)for(let h=0;h<u.length;h++){const e=u[h],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)void 0!==n?c(n.getX(i),n.getX(i+1),n.getX(i+2),e.materialIndex):c(i,i+1,i+2,e.materialIndex)}else if(void 0!==n)for(let h=0;h<n.count;h+=3)c(n.getX(h),n.getX(h+1),n.getX(h+2));else for(let h=0;h<r.count;h+=3)c(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(dM).negate(),this.translate(dM.x,dM.y,dM.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Ky;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new Ey,t=new Ey;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],o=this.vertices[i.b];e.subVectors(this.vertices[i.c],o),t.subVectors(r,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);const t=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)t[n]=new Ey;if(e){const e=new Ey,n=new Ey;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],o=this.vertices[r.a],s=this.vertices[r.b];e.subVectors(this.vertices[r.c],s),n.subVectors(o,s),e.cross(n),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)t[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){const e=this.faces[n],i=e.vertexNormals;3===i.length?(i[0].copy(t[e.a]),i[1].copy(t[e.b]),i[2].copy(t[e.c])):(i[0]=t[e.a].clone(),i[1]=t[e.b].clone(),i[2]=t[e.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const e=new pM;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,i=this.faces.length;t<i;t++){const t=new Ey,i={a:new Ey,b:new Ey,c:new Ey};e.push(t),n.push(i)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=n.vertexNormals[e];n.faceNormals[e].copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ay),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Wy),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i;const r=this.vertices.length,o=this.vertices,s=e.vertices,a=this.faces,l=e.faces,c=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new gy).getNormalMatrix(t));for(let h=0,d=s.length;h<d;h++){const e=s[h].clone();void 0!==t&&e.applyMatrix4(t),o.push(e)}for(let h=0,d=u.length;h<d;h++)c.push(u[h].clone());for(let h=0,d=l.length;h<d;h++){const e=l[h];let t,o;const s=e.vertexNormals,c=e.vertexColors,u=new X_(e.a+r,e.b+r,e.c+r);u.normal.copy(e.normal),void 0!==i&&u.normal.applyMatrix3(i).normalize();for(let n=0,r=s.length;n<r;n++)t=s[n].clone(),void 0!==i&&t.applyMatrix3(i).normalize(),u.vertexNormals.push(t);u.color.copy(e.color);for(let n=0,i=c.length;n<i;n++)o=c[n],u.vertexColors.push(o.clone());u.materialIndex=e.materialIndex+n,a.push(u)}for(let h=0,d=e.faceVertexUvs.length;h<d;h++){const t=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let e=0,n=t.length;e<n;e++){const n=t[e],i=[];for(let e=0,t=n.length;e<t;e++)i.push(n[e].clone());this.faceVertexUvs[h].push(i)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let s=0,a=this.vertices.length;s<a;s++){const r=this.vertices[s],o=Math.round(r.x*i)+"_"+Math.round(r.y*i)+"_"+Math.round(r.z*i);void 0===e[o]?(e[o]=s,t.push(this.vertices[s]),n[s]=t.length-1):n[s]=n[e[o]]}const r=[];for(let s=0,a=this.faces.length;s<a;s++){const e=this.faces[s];e.a=n[e.a],e.b=n[e.b],e.c=n[e.c];const t=[e.a,e.b,e.c];for(let n=0;n<3;n++)if(t[n]===t[(n+1)%3]){r.push(s);break}}for(let s=r.length-1;s>=0;s--){const e=r[s];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new Ey(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,o;n&&n.length===t&&(r=[]),i&&i.length===t&&(o=[]);for(let s=0;s<t;s++){const t=e[s]._id;r&&r.push(n[t]),o&&o.push(i[t])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let p=0;p<this.vertices.length;p++){const e=this.vertices[p];t.push(e.x,e.y,e.z)}const n=[],i=[],r={},o=[],s={},a=[],l={};for(let p=0;p<this.faces.length;p++){const e=this.faces[p],t=!0,i=!1,r=void 0!==this.faceVertexUvs[0][p],o=e.normal.length()>0,s=e.vertexNormals.length>0,a=1!==e.color.r||1!==e.color.g||1!==e.color.b,l=e.vertexColors.length>0;let f=0;if(f=c(f,0,0),f=c(f,1,t),f=c(f,2,i),f=c(f,3,r),f=c(f,4,o),f=c(f,5,s),f=c(f,6,a),f=c(f,7,l),n.push(f),n.push(e.a,e.b,e.c),n.push(e.materialIndex),r){const e=this.faceVertexUvs[0][p];n.push(d(e[0]),d(e[1]),d(e[2]))}if(o&&n.push(u(e.normal)),s){const t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(a&&n.push(h(e.color)),l){const t=e.vertexColors;n.push(h(t[0]),h(t[1]),h(t[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=i.length/3,i.push(e.x,e.y,e.z)),r[t]}function h(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==s[t]||(s[t]=o.length,o.push(e.getHex())),s[t]}function d(e){const t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=a.length/2,a.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e},clone:function(){return(new pM).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let h=0,d=t.length;h<d;h++)this.vertices.push(t[h].clone());const n=e.colors;for(let h=0,d=n.length;h<d;h++)this.colors.push(n[h].clone());const i=e.faces;for(let h=0,d=i.length;h<d;h++)this.faces.push(i[h].clone());for(let h=0,d=e.faceVertexUvs.length;h<d;h++){const t=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let e=0,n=t.length;e<n;e++){const n=t[e],i=[];for(let e=0,t=n.length;e<t;e++)i.push(n[e].clone());this.faceVertexUvs[h].push(i)}}const r=e.morphTargets;for(let h=0,d=r.length;h<d;h++){const e={};if(e.name=r[h].name,void 0!==r[h].vertices){e.vertices=[];for(let t=0,n=r[h].vertices.length;t<n;t++)e.vertices.push(r[h].vertices[t].clone())}if(void 0!==r[h].normals){e.normals=[];for(let t=0,n=r[h].normals.length;t<n;t++)e.normals.push(r[h].normals[t].clone())}this.morphTargets.push(e)}const o=e.morphNormals;for(let h=0,d=o.length;h<d;h++){const e={};if(void 0!==o[h].vertexNormals){e.vertexNormals=[];for(let t=0,n=o[h].vertexNormals.length;t<n;t++){const n=o[h].vertexNormals[t],i={};i.a=n.a.clone(),i.b=n.b.clone(),i.c=n.c.clone(),e.vertexNormals.push(i)}}if(void 0!==o[h].faceNormals){e.faceNormals=[];for(let t=0,n=o[h].faceNormals.length;t<n;t++)e.faceNormals.push(o[h].faceNormals[t].clone())}this.morphNormals.push(e)}const s=e.skinWeights;for(let h=0,d=s.length;h<d;h++)this.skinWeights.push(s[h].clone());const a=e.skinIndices;for(let h=0,d=a.length;h<d;h++)this.skinIndices.push(a[h].clone());const l=e.lineDistances;for(let h=0,d=l.length;h<d;h++)this.lineDistances.push(l[h]);const c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),new Ey,new Ey,new Ey,new z_;const UM={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return UM.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];zM(e),HM(n,e);let o=e.length;t.forEach(zM);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,HM(n,t[a]);const s=function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=fM(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,h,d,p;if(i&&(o=function(e,t,n,i){const r=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*i,l=o<s-1?t[o+1]*i:e.length,c=fM(e,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(EM(c));for(r.sort(wM),o=0;o<r.length;o++)xM(r[o],n),n=mM(n,n.next);return n}(e,t,o,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-a,u-l),p=0!==p?1/p:0}return gM(o,s,n,a,l,p),s}(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function zM(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function HM(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class BM extends yb{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,a=e.length;s<a;s++)o(e[s]);function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:jM;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,_,b,w=!1;f&&(g=f.getSpacedPoints(a),w=!0,c=!1,v=f.computeFrenetFrames(a,!1),y=new Ey,_=new Ey,b=new Ey),c||(p=0,u=0,h=0,d=0);const x=e.extractPoints(s);let S=x.shape;const M=x.holes;if(!UM.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];UM.isClockWise(t)&&(M[e]=t.reverse())}}const E=UM.triangulateShape(S,M),T=S;for(let t=0,n=M.length;t<n;t++)S=S.concat(M[t]);function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const A=S.length,P=E.length;function O(e,t,n){let i,r,o;const s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+a*a;if(Math.abs(s*c-a*l)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-a/h,f=t.y+s/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(s*c-a*l);i=p+s*m-e.x,r=f+a*m-e.y;const g=i*i+r*r;if(g<=2)return new my(i,r);o=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(i=-a,r=s,o=Math.sqrt(u)):(i=s,r=a,o=Math.sqrt(u/2))}return new my(i/o,r/o)}const I=[];for(let t=0,n=T.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=O(T[t],T[i],T[r]);const k=[];let R,N=I.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];R=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[t]=O(e[t],e[i],e[r]);k.push(R),N=N.concat(R)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=T.length;t<r;t++){const e=C(T[t],I[t],i);F(e.x,e.y,-n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];R=k[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],R[t],i);F(r.x,r.y,-n)}}}const L=h+d;for(let t=0;t<A;t++){const e=c?C(S[t],N[t],L):S[t];w?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(_).add(y),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<A;e++){const n=c?C(S[e],N[e],L):S[e];w?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(_).add(y),F(b.x,b.y,b.z)):F(n.x,n.y,l/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=T.length;t<r;t++){const e=C(T[t],I[t],i);F(e.x,e.y,l+n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];R=k[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],R[t],i);w?F(r.x,r.y+g[a-1].y,g[a-1].x+n):F(r.x,r.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=A*e,o=A*(e+1);z(t+i+n,t+r+n,t+r+o,t+i+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function U(e,t,r){H(e),H(t),H(r);const o=i.length/3,s=m.generateTopUV(n,i,o-3,o-2,o-1);B(s[0]),B(s[1]),B(s[2])}function z(e,t,r,o){H(e),H(t),H(o),H(t),H(r),H(o);const s=i.length/3,a=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);B(a[0]),B(a[1]),B(a[3]),B(a[1]),B(a[2]),B(a[3])}function H(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function B(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=A*e;for(let n=0;n<P;n++){const e=E[n];U(e[2]+t,e[1]+t,e[0]+t)}e=a+2*p,t=A*e;for(let n=0;n<P;n++){const e=E[n];U(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];U(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];U(t[0]+A*a,t[1]+A*a,t[2]+A*a)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;D(T,t),t+=T.length;for(let n=0,i=M.length;n<i;n++){const e=M[n];D(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new ab(i,3)),this.setAttribute("uv",new ab(r,2)),this.computeVertexNormals()}toJSON(){const e=yb.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++)n.shapes.push(e[i].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}const jM={generateTopUV:function(e,t,n,i,r){const o=t[3*i],s=t[3*i+1],a=t[3*r],l=t[3*r+1];return[new my(t[3*n],t[3*n+1]),new my(o,s),new my(a,l)]},generateSideWallUV:function(e,t,n,i,r,o){const s=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(a-u)<.01?[new my(s,1-l),new my(c,1-h),new my(d,1-f),new my(m,1-v)]:[new my(a,1-l),new my(u,1-h),new my(p,1-f),new my(g,1-v)]}};class VM extends pM{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new BM(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++)n.shapes.push(e[i].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}function WM(e,t,n){yb.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],o=[],s=[],a=1e-5,l=new Ey,c=new Ey,u=new Ey,h=new Ey,d=new Ey;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let f=0;f<=n;f++){const i=f/n;for(let n=0;n<=t;n++){const p=n/t;e(p,i,c),r.push(c.x,c.y,c.z),p-a>=0?(e(p-a,i,u),h.subVectors(c,u)):(e(p+a,i,u),h.subVectors(u,c)),i-a>=0?(e(p,i-a,u),d.subVectors(c,u)):(e(p,i+a,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),s.push(p,i)}}for(let f=0;f<n;f++)for(let e=0;e<t;e++){const t=f*p+e+1,n=(f+1)*p+e+1,r=(f+1)*p+e;i.push(f*p+e,t,r),i.push(t,n,r)}this.setIndex(i),this.setAttribute("position",new ab(r,3)),this.setAttribute("normal",new ab(o,3)),this.setAttribute("uv",new ab(s,2))}function GM(e,t,n){pM.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new WM(e,t,n)),this.mergeVertices()}(WM.prototype=Object.create(yb.prototype)).constructor=WM,(GM.prototype=Object.create(pM.prototype)).constructor=GM;class qM extends pM{constructor(e,t,n,i){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new nw(e,t,n,i)),this.mergeVertices()}}class XM extends yb{constructor(e,t){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],i=[],r=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,a,c),s+=a,a=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===UM.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===UM.isClockWise(e)&&(u[t]=e.reverse())}const h=UM.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++)c=c.concat(u[t]);for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,i=h.length;t<i;t++){const e=h[t];n.push(e[0]+s,e[1]+s,e[2]+s),a+=3}}this.setIndex(n),this.setAttribute("position",new ab(i,3)),this.setAttribute("normal",new ab(r,3)),this.setAttribute("uv",new ab(o,2))}toJSON(){const e=yb.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class YM extends pM{constructor(e,t){super(),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new XM(e,t)),this.mergeVertices()}toJSON(){const e=pM.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}function ZM(e){Z_.call(this),this.type="ShadowMaterial",this.color=new q_(0),this.transparent=!0,this.setValues(e)}function JM(e){Vb.call(this,e),this.type="RawShaderMaterial"}function $M(e){Z_.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new q_(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new my(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function QM(e){$M.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new my(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=fy.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function KM(e){Z_.call(this),this.type="MeshPhongMaterial",this.color=new q_(16777215),this.specular=new q_(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new my(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function eE(e){Z_.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new q_(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new my(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function tE(e){Z_.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new my(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function nE(e){Z_.call(this),this.type="MeshLambertMaterial",this.color=new q_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function iE(e){Z_.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new q_(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new my(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function rE(e){BS.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}(ZM.prototype=Object.create(Z_.prototype)).constructor=ZM,ZM.prototype.isShadowMaterial=!0,ZM.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this},(JM.prototype=Object.create(Vb.prototype)).constructor=JM,JM.prototype.isRawShaderMaterial=!0,($M.prototype=Object.create(Z_.prototype)).constructor=$M,$M.prototype.isMeshStandardMaterial=!0,$M.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},(QM.prototype=Object.create($M.prototype)).constructor=QM,QM.prototype.isMeshPhysicalMaterial=!0,QM.prototype.copy=function(e){return $M.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,this.sheen=e.sheen?(this.sheen||new q_).copy(e.sheen):null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},(KM.prototype=Object.create(Z_.prototype)).constructor=KM,KM.prototype.isMeshPhongMaterial=!0,KM.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(eE.prototype=Object.create(Z_.prototype)).constructor=eE,eE.prototype.isMeshToonMaterial=!0,eE.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(tE.prototype=Object.create(Z_.prototype)).constructor=tE,tE.prototype.isMeshNormalMaterial=!0,tE.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(nE.prototype=Object.create(Z_.prototype)).constructor=nE,nE.prototype.isMeshLambertMaterial=!0,nE.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(iE.prototype=Object.create(Z_.prototype)).constructor=iE,iE.prototype.isMeshMatcapMaterial=!0,iE.prototype.copy=function(e){return Z_.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(rE.prototype=Object.create(BS.prototype)).constructor=rE,rE.prototype.isLineDashedMaterial=!0,rE.prototype.copy=function(e){return BS.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var oE=Object.freeze({__proto__:null,ShadowMaterial:ZM,SpriteMaterial:dS,RawShaderMaterial:JM,ShaderMaterial:Vb,PointsMaterial:QS,MeshPhysicalMaterial:QM,MeshStandardMaterial:$M,MeshPhongMaterial:KM,MeshToonMaterial:eE,MeshNormalMaterial:tE,MeshLambertMaterial:nE,MeshDepthMaterial:Zx,MeshDistanceMaterial:Jx,MeshBasicMaterial:J_,MeshMatcapMaterial:iE,LineDashedMaterial:rE,LineBasicMaterial:BS,Material:Z_});const sE={arraySlice:function(e,t,n){return sE.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)},subclip:function(e,t,n,i,r){r=r||30;const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),a=[],c=[];for(let o=0;o<e.times.length;++o){const s=e.times[o]*r;if(!(s<n||s>=i)){a.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==a.length&&(e.times=sE.convertArray(a,e.times.constructor),e.values=sE.convertArray(c,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);const r=n.tracks.length,o=t/i;for(let s=0;s<r;++s){const t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===i}));if(void 0===r)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0])d=sE.arraySlice(t.values,a,l-a);else if(o>=t.times[h]){const e=h*l+a;d=sE.arraySlice(t.values,e,e+l-a)}else{const e=t.createInterpolant(),n=a,i=l-a;e.evaluate(o),d=sE.arraySlice(e.resultBuffer,n,i)}"quaternion"===i&&(new My).fromArray(d).normalize().conjugate().toArray(d);const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)My.multiplyQuaternionsFlat(r.values,t,d,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=d[n]}}}return e.blendMode=2501,e}};function aE(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function lE(e,t,n,i){aE.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function cE(e,t,n,i){aE.call(this,e,t,n,i)}function uE(e,t,n,i){aE.call(this,e,t,n,i)}function hE(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sE.convertArray(t,this.TimeBufferType),this.values=sE.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function dE(e,t,n){hE.call(this,e,t,n)}function pE(e,t,n,i){hE.call(this,e,t,n,i)}function fE(e,t,n,i){hE.call(this,e,t,n,i)}function mE(e,t,n,i){aE.call(this,e,t,n,i)}function gE(e,t,n,i){hE.call(this,e,t,n,i)}function vE(e,t,n,i){hE.call(this,e,t,n,i)}function yE(e,t,n,i){hE.call(this,e,t,n,i)}function _E(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:ry,this.uuid=fy.generateUUID(),this.duration<0&&this.resetDuration()}function bE(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fE;case"vector":case"vector2":case"vector3":case"vector4":return yE;case"color":return pE;case"quaternion":return gE;case"bool":case"boolean":return dE;case"string":return vE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];sE.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(aE.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(aE.prototype,{beforeStart_:aE.prototype.copySampleValue_,afterEnd_:aE.prototype.copySampleValue_}),lE.prototype=Object.assign(Object.create(aE.prototype),{constructor:lE,DefaultSettings_:{endingStart:ty,endingEnd:ty},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case ny:r=e,s=2*t-n;break;case iy:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case ny:o=e,a=2*n-t;break;case iy:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let b=0;b!==s;++b)r[b]=g*o[c+b]+v*o[l+b]+y*o[a+b]+_*o[u+b];return r}}),cE.prototype=Object.assign(Object.create(aE.prototype),{constructor:cE,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(i-t),u=1-c;for(let h=0;h!==s;++h)r[h]=o[l+h]*u+o[a+h]*c;return r}}),uE.prototype=Object.assign(Object.create(aE.prototype),{constructor:uE,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(hE,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:sE.convertArray(e.times,Array),values:sE.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(hE.prototype,{constructor:hE,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Kv,InterpolantFactoryMethodDiscrete:function(e){return new uE(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new cE(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new lE(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case Qv:t=this.InterpolantFactoryMethodDiscrete;break;case Kv:t=this.InterpolantFactoryMethodLinear;break;case ey:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qv;case this.InterpolantFactoryMethodLinear:return Kv;case this.InterpolantFactoryMethodSmooth:return ey}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=sE.arraySlice(n,r,o),this.values=sE.arraySlice(this.values,r*e,o*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=n[s];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==i&&sE.isTypedArray(i))for(let s=0,a=i.length;s!==a;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e},optimize:function(){const e=sE.arraySlice(this.times),t=sE.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===ey,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==a[0]))if(i)r=!0;else{const e=s*n,i=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const i=s*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,s=0;s!==n;++s)t[i+s]=t[e+s];++o}return o!==e.length?(this.times=sE.arraySlice(e,0,o),this.values=sE.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=sE.arraySlice(this.times,0),t=sE.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),dE.prototype=Object.assign(Object.create(hE.prototype),{constructor:dE,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Qv,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pE.prototype=Object.assign(Object.create(hE.prototype),{constructor:pE,ValueTypeName:"color"}),fE.prototype=Object.assign(Object.create(hE.prototype),{constructor:fE,ValueTypeName:"number"}),mE.prototype=Object.assign(Object.create(aE.prototype),{constructor:mE,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let l=e*s;for(let c=l+s;l!==c;l+=4)My.slerpFlat(r,0,o,l-s,o,l,a);return r}}),gE.prototype=Object.assign(Object.create(hE.prototype),{constructor:gE,ValueTypeName:"quaternion",DefaultInterpolation:Kv,InterpolantFactoryMethodLinear:function(e){return new mE(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),vE.prototype=Object.assign(Object.create(hE.prototype),{constructor:vE,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Qv,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),yE.prototype=Object.assign(Object.create(hE.prototype),{constructor:yE,ValueTypeName:"vector"}),Object.assign(_E,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let r=0,o=n.length;r!==o;++r)t.push(bE(n[r]).scale(i));return new _E(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(hE.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,o=[];for(let s=0;s<r;s++){let e=[],a=[];e.push((s+r-1)%r,s,(s+1)%r),a.push(0,1,0);const l=sE.getKeyframeOrder(e);e=sE.sortedArray(e,1,l),a=sE.sortedArray(a,1,l),i||0!==e[0]||(e.push(r),a.push(a[0])),o.push(new fE(".morphTargetInfluences["+t[s].name+"]",e,a).scale(1/n))}return new _E(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const o=[];for(const s in i)o.push(_E.CreateFromMorphTargetSequence(s,i[s],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],s=[];sE.flattenJSON(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],o=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new fE(".morphTargetInfluence["+r+"]",t,o))}a=t.length*(o||1)}else{const r=".bones["+t[c].name+"]";n(yE,r+".position",e,"pos",i),n(gE,r+".quaternion",e,"rot",i),n(yE,r+".scale",e,"scl",i)}}return 0===i.length?null:new _E(r,a,i,s)}}),Object.assign(_E.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new _E(this.name,this.duration,e,this.blendMode)}});const wE={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},xE=new function(e,t,n){const i=this;let r=!1,o=0,s=0,a=void 0;const l=[];this.onStart=void 0,this.onLoad=void 0,this.onProgress=void 0,this.onError=void 0,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,s),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}};function SE(e){this.manager=void 0!==e?e:xE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(SE.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const ME={};function EE(e){SE.call(this,e)}function TE(e){SE.call(this,e)}function CE(e){SE.call(this,e)}function AE(e){SE.call(this,e)}function PE(e){SE.call(this,e)}function OE(e){SE.call(this,e)}function IE(e){SE.call(this,e)}function kE(){this.type="Curve",this.arcLengthDivisions=200}function RE(e,t,n,i,r,o,s,a){kE.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function NE(e,t,n,i,r,o){RE.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function LE(){let e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+a)+(i-n)/a;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}EE.prototype=Object.assign(Object.create(SE.prototype),{constructor:EE,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=wE.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0!==ME[e])return void ME[e].push({onLoad:t,onProgress:n,onError:i});const s=e.match(/^data:(.*?)(;base64)?,(.*)$/);let a;if(s){const n=s[1],o=!!s[2];let a=s[3];a=decodeURIComponent(a),o&&(a=atob(a));try{let i;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(a.length);for(let n=0;n<a.length;n++)e[n]=a.charCodeAt(n);i="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(a,n);break;case"json":i=JSON.parse(a);break;default:i=a}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(l){setTimeout((function(){i&&i(l),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{ME[e]=[],ME[e].push({onLoad:t,onProgress:n,onError:i}),a=new XMLHttpRequest,a.open("GET",e,!0),a.addEventListener("load",(function(t){const n=this.response,i=ME[e];if(delete ME[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),wE.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),a.addEventListener("progress",(function(t){const n=ME[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),a.addEventListener("error",(function(t){const n=ME[e];delete ME[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),a.addEventListener("abort",(function(t){const n=ME[e];delete ME[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)a.setRequestHeader(e,this.requestHeader[e]);a.send(null)}return r.manager.itemStart(e),a},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),TE.prototype=Object.assign(Object.create(SE.prototype),{constructor:TE,load:function(e,t,n,i){const r=this,o=new EE(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=_E.parse(e[n]);t.push(i)}return t}}),CE.prototype=Object.assign(Object.create(SE.prototype),{constructor:CE,load:function(e,t,n,i){const r=this,o=[],s=new sM;s.image=o;const a=new EE(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const n=r.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Hv),s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,i)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else a.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Hv),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,i);return s}}),AE.prototype=Object.assign(Object.create(SE.prototype),{constructor:AE,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=wE.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),wE.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}),PE.prototype=Object.assign(Object.create(SE.prototype),{constructor:PE,load:function(e,t,n,i){const r=new Yb,o=new AE(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(e[n],(function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}}),OE.prototype=Object.assign(Object.create(SE.prototype),{constructor:OE,load:function(e,t,n,i){const r=this,o=new Jb,s=new EE(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Fv,o.wrapT=void 0!==n.wrapT?n.wrapT:Fv,o.magFilter=void 0!==n.magFilter?n.magFilter:Hv,o.minFilter=void 0!==n.minFilter?n.minFilter:Hv,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Bv),1===n.mipmapCount&&(o.minFilter=Hv),o.needsUpdate=!0,t&&t(o,n))}),n,i),o}}),IE.prototype=Object.assign(Object.create(SE.prototype),{constructor:IE,load:function(e,t,n,i){const r=new by,o=new AE(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Yv:Zv,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(kE.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let s,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),s=n[i]-o,s<0)a=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)},getTangent:function(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new my:new Ey);return a.copy(s).sub(o).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Ey,i=[],r=[],o=[],s=new Ey,a=new Ky;for(let d=0;d<=e;d++)i[d]=this.getTangentAt(d/e,new Ey),i[d].normalize();r[0]=new Ey,o[0]=new Ey;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(i[d-1],i[d]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(fy.clamp(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(a.makeRotationAxis(s,e))}o[d].crossVectors(i[d],r[d])}if(!0===t){let t=Math.acos(fy.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),(RE.prototype=Object.create(kE.prototype)).constructor=RE,RE.prototype.isEllipseCurve=!0,RE.prototype.getPoint=function(e,t){const n=t||new my,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(a,l)},RE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},RE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},RE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},(NE.prototype=Object.create(RE.prototype)).constructor=NE,NE.prototype.isArcCurve=!0;const DE=new Ey,FE=new LE,UE=new LE,zE=new LE;function HE(e,t,n,i){kE.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function BE(e,t,n,i,r){const o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function jE(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function VE(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function WE(e,t,n,i){kE.call(this),this.type="CubicBezierCurve",this.v0=e||new my,this.v1=t||new my,this.v2=n||new my,this.v3=i||new my}function GE(e,t,n,i){kE.call(this),this.type="CubicBezierCurve3",this.v0=e||new Ey,this.v1=t||new Ey,this.v2=n||new Ey,this.v3=i||new Ey}function qE(e,t){kE.call(this),this.type="LineCurve",this.v1=e||new my,this.v2=t||new my}function XE(e,t){kE.call(this),this.type="LineCurve3",this.v1=e||new Ey,this.v2=t||new Ey}function YE(e,t,n){kE.call(this),this.type="QuadraticBezierCurve",this.v0=e||new my,this.v1=t||new my,this.v2=n||new my}function ZE(e,t,n){kE.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Ey,this.v1=t||new Ey,this.v2=n||new Ey}function JE(e){kE.call(this),this.type="SplineCurve",this.points=e||[]}(HE.prototype=Object.create(kE.prototype)).constructor=HE,HE.prototype.isCatmullRomCurve3=!0,HE.prototype.getPoint=function(e,t){const n=t||new Ey,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(DE.subVectors(i[0],i[1]).add(i[0]),s=DE);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?a=i[(l+2)%r]:(DE.subVectors(i[r-1],i[r-2]).add(i[r-1]),a=DE),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),FE.initNonuniformCatmullRom(s.x,u.x,h.x,a.x,t,n,i),UE.initNonuniformCatmullRom(s.y,u.y,h.y,a.y,t,n,i),zE.initNonuniformCatmullRom(s.z,u.z,h.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(FE.initCatmullRom(s.x,u.x,h.x,a.x,this.tension),UE.initCatmullRom(s.y,u.y,h.y,a.y,this.tension),zE.initCatmullRom(s.z,u.z,h.z,a.z,this.tension));return n.set(FE.calc(c),UE.calc(c),zE.calc(c)),n},HE.prototype.copy=function(e){kE.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},HE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},HE.prototype.fromJSON=function(e){kE.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ey).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},(WE.prototype=Object.create(kE.prototype)).constructor=WE,WE.prototype.isCubicBezierCurve=!0,WE.prototype.getPoint=function(e,t){const n=t||new my,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(VE(e,i.x,r.x,o.x,s.x),VE(e,i.y,r.y,o.y,s.y)),n},WE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},WE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},WE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(GE.prototype=Object.create(kE.prototype)).constructor=GE,GE.prototype.isCubicBezierCurve3=!0,GE.prototype.getPoint=function(e,t){const n=t||new Ey,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(VE(e,i.x,r.x,o.x,s.x),VE(e,i.y,r.y,o.y,s.y),VE(e,i.z,r.z,o.z,s.z)),n},GE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},GE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},GE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(qE.prototype=Object.create(kE.prototype)).constructor=qE,qE.prototype.isLineCurve=!0,qE.prototype.getPoint=function(e,t){const n=t||new my;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},qE.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},qE.prototype.getTangent=function(e,t){const n=t||new my;return n.copy(this.v2).sub(this.v1).normalize(),n},qE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(XE.prototype=Object.create(kE.prototype)).constructor=XE,XE.prototype.isLineCurve3=!0,XE.prototype.getPoint=function(e,t){const n=t||new Ey;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},XE.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},XE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},XE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},XE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(YE.prototype=Object.create(kE.prototype)).constructor=YE,YE.prototype.isQuadraticBezierCurve=!0,YE.prototype.getPoint=function(e,t){const n=t||new my,i=this.v0,r=this.v1,o=this.v2;return n.set(jE(e,i.x,r.x,o.x),jE(e,i.y,r.y,o.y)),n},YE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},YE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},YE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(ZE.prototype=Object.create(kE.prototype)).constructor=ZE,ZE.prototype.isQuadraticBezierCurve3=!0,ZE.prototype.getPoint=function(e,t){const n=t||new Ey,i=this.v0,r=this.v1,o=this.v2;return n.set(jE(e,i.x,r.x,o.x),jE(e,i.y,r.y,o.y),jE(e,i.z,r.z,o.z)),n},ZE.prototype.copy=function(e){return kE.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ZE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ZE.prototype.fromJSON=function(e){return kE.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(JE.prototype=Object.create(kE.prototype)).constructor=JE,JE.prototype.isSplineCurve=!0,JE.prototype.getPoint=function(e,t){const n=t||new my,i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(BE(s,a.x,l.x,c.x,u.x),BE(s,a.y,l.y,c.y,u.y)),n},JE.prototype.copy=function(e){kE.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},JE.prototype.toJSON=function(){const e=kE.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},JE.prototype.fromJSON=function(e){kE.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new my).fromArray(n))}return this};var $E=Object.freeze({__proto__:null,ArcCurve:NE,CatmullRomCurve3:HE,CubicBezierCurve:WE,CubicBezierCurve3:GE,EllipseCurve:RE,LineCurve:qE,LineCurve3:XE,QuadraticBezierCurve:YE,QuadraticBezierCurve3:ZE,SplineCurve:JE});function QE(){kE.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function KE(e){QE.call(this),this.type="Path",this.currentPoint=new my,e&&this.setFromPoints(e)}function eT(e){KE.call(this,e),this.uuid=fy.generateUUID(),this.type="Shape",this.holes=[]}function tT(e,t){M_.call(this),this.type="Light",this.color=new q_(e),this.intensity=void 0!==t?t:1}function nT(e,t,n){tT.call(this,e,n),this.type="HemisphereLight",this.position.copy(M_.DefaultUp),this.updateMatrix(),this.groundColor=new q_(t)}function iT(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new my(512,512),this.map=null,this.mapPass=null,this.matrix=new Ky,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kb,this._frameExtents=new my(1,1),this._viewportCount=1,this._viewports=[new wy(0,0,1,1)]}function rT(){iT.call(this,new Gb(50,1,.5,500)),this.focus=1}function oT(e,t,n,i,r,o){tT.call(this,e,t),this.type="SpotLight",this.position.copy(M_.DefaultUp),this.updateMatrix(),this.target=new M_,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new rT}function sT(){iT.call(this,new Gb(90,1,.5,500)),this._frameExtents=new my(4,2),this._viewportCount=6,this._viewports=[new wy(2,1,1,1),new wy(0,1,1,1),new wy(3,1,1,1),new wy(1,1,1,1),new wy(3,0,1,1),new wy(1,0,1,1)],this._cubeDirections=[new Ey(1,0,0),new Ey(-1,0,0),new Ey(0,0,1),new Ey(0,0,-1),new Ey(0,1,0),new Ey(0,-1,0)],this._cubeUps=[new Ey(0,1,0),new Ey(0,1,0),new Ey(0,1,0),new Ey(0,1,0),new Ey(0,0,1),new Ey(0,0,-1)]}function aT(e,t,n,i){tT.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new sT}function lT(e,t,n,i,r,o){Wb.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function cT(){iT.call(this,new lT(-5,5,5,-5,.5,500))}function uT(e,t){tT.call(this,e,t),this.type="DirectionalLight",this.position.copy(M_.DefaultUp),this.updateMatrix(),this.target=new M_,this.shadow=new cT}function hT(e,t){tT.call(this,e,t),this.type="AmbientLight"}function dT(e,t,n,i){tT.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}QE.prototype=Object.assign(Object.create(kE.prototype),{constructor:QE,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new qE(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],o=r.getLength();return r.getPointAt(0===o?0:1-e/o)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){kE.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){const e=kE.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){kE.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new $E[n.type]).fromJSON(n))}return this}}),KE.prototype=Object.assign(Object.create(QE.prototype),{constructor:KE,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new qE(this.currentPoint.clone(),new my(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new YE(this.currentPoint.clone(),new my(e,t),new my(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,o){const s=new WE(this.currentPoint.clone(),new my(e,t),new my(n,i),new my(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this},splineThru:function(e){const t=new JE([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,o),this},absarc:function(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this},ellipse:function(e,t,n,i,r,o,s,a){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,o,s,a),this},absellipse:function(e,t,n,i,r,o,s,a){const l=new RE(e,t,n,i,r,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return QE.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=QE.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return QE.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),eT.prototype=Object.assign(Object.create(KE.prototype),{constructor:eT,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){KE.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){const e=KE.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){KE.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new KE).fromJSON(n))}return this}}),tT.prototype=Object.assign(Object.create(M_.prototype),{constructor:tT,isLight:!0,copy:function(e){return M_.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=M_.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),nT.prototype=Object.assign(Object.create(tT.prototype),{constructor:nT,isHemisphereLight:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(iT.prototype,{_projScreenMatrix:new Ky,_lightPositionWorld:new Ey,_lookTarget:new Ey,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),rT.prototype=Object.assign(Object.create(iT.prototype),{constructor:rT,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*fy.RAD2DEG*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),iT.prototype.updateMatrices.call(this,e)}}),oT.prototype=Object.assign(Object.create(tT.prototype),{constructor:oT,isSpotLight:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),sT.prototype=Object.assign(Object.create(iT.prototype),{constructor:sT,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}}),aT.prototype=Object.assign(Object.create(tT.prototype),{constructor:aT,isPointLight:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),lT.prototype=Object.assign(Object.create(Wb.prototype),{constructor:lT,isOrthographicCamera:!0,copy:function(e,t){return Wb.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=M_.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),cT.prototype=Object.assign(Object.create(iT.prototype),{constructor:cT,isDirectionalLightShadow:!0,updateMatrices:function(e){iT.prototype.updateMatrices.call(this,e)}}),uT.prototype=Object.assign(Object.create(tT.prototype),{constructor:uT,isDirectionalLight:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),hT.prototype=Object.assign(Object.create(tT.prototype),{constructor:hT,isAmbientLight:!0}),dT.prototype=Object.assign(Object.create(tT.prototype),{constructor:dT,isRectAreaLight:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=tT.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class pT{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ey)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}function fT(e,t){tT.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new pT}function mT(e){SE.call(this,e),this.textures={}}fT.prototype=Object.assign(Object.create(tT.prototype),{constructor:fT,isLightProbe:!0,copy:function(e){return tT.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=tT.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),mT.prototype=Object.assign(Object.create(SE.prototype),{constructor:mT,load:function(e,t,n,i){const r=this,o=new EE(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=new oE[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new q_).setHex(e.sheen)),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&(i.vertexColors="number"==typeof e.vertexColors?e.vertexColors>0:e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new q_).setHex(t.value);break;case"v2":i.uniforms[r].value=(new my).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new Ey).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new wy).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new gy).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Ky).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new my).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new my).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const gT=function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(n){return t}},vT=function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function yT(){yb.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function _T(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),K_.call(this,e,t,n),this.meshPerAttribute=i||1}function bT(e){SE.call(this,e)}yT.prototype=Object.assign(Object.create(yb.prototype),{constructor:yT,isInstancedBufferGeometry:!0,copy:function(e){return yb.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=yb.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),_T.prototype=Object.assign(Object.create(K_.prototype),{constructor:_T,isInstancedBufferAttribute:!0,copy:function(e){return K_.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=K_.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),bT.prototype=Object.assign(Object.create(SE.prototype),{constructor:bT,load:function(e,t,n,i){const r=this,o=new EE(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)},parse:function(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=new Uint32Array(e.arrayBuffers[t]).buffer;return n[t]=i,i}(e,r.buffer),s=new cS(new wT[r.type](o),r.stride);return s.uuid=r.uuid,t[i]=s,s}const r=e.isInstancedBufferGeometry?new yT:new yb,o=e.data.index;if(void 0!==o){const e=new wT[o.type](o.array);r.setIndex(new K_(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let n;if(t.isInterleavedBufferAttribute)n=new hS(i(e.data,t.data),t.itemSize,t.offset,t.normalized);else{const e=new wT[t.type](t.array);n=new(t.isInstancedBufferAttribute?_T:K_)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),r.setAttribute(u,n)}const a=e.data.morphAttributes;if(a)for(const u in a){const t=a[u],n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];let s;s=o.isInterleavedBufferAttribute?new hS(i(e.data,o.data),o.itemSize,o.offset,o.normalized):new K_(new wT[o.type](o.array),o.itemSize,o.normalized),void 0!==o.name&&(s.name=o.name),n.push(s)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Ey;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new Wy(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});const wT={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function xT(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),SE.call(this,e),this.options={premultiplyAlpha:"none"}}function ST(){this.type="ShapePath",this.color=new q_,this.subPaths=[],this.currentPath=null}function MT(e){this.type="Font",this.data=e}function ET(e,t,n,i,r){const o=r.glyphs[e]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const s=new ST;let a,l,c,u,h,d,p,f;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=e.length;r<o;)switch(e[r++]){case"m":a=e[r++]*t+n,l=e[r++]*t+i,s.moveTo(a,l);break;case"l":a=e[r++]*t+n,l=e[r++]*t+i,s.lineTo(a,l);break;case"q":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,s.quadraticCurveTo(h,d,c,u);break;case"b":c=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,p=e[r++]*t+n,f=e[r++]*t+i,s.bezierCurveTo(h,d,p,f,c,u)}}return{offsetX:o.ha*t,path:s}}function TT(e){SE.call(this,e)}let CT;function AT(e){SE.call(this,e)}function PT(e,t,n){fT.call(this,void 0,n);const i=(new q_).set(e),r=(new q_).set(t),o=new Ey(i.r,i.g,i.b),s=new Ey(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}function OT(e,t){fT.call(this,void 0,t);const n=(new q_).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}xT.prototype=Object.assign(Object.create(SE.prototype),{constructor:xT,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=wE.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){wE.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(ST.prototype,{moveTo:function(e,t){return this.currentPath=new KE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new eT;r.curves=i.curves,t.push(r)}return t}function i(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],s=t[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],a=-a,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const r=UM.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let s,a,l;const c=[];if(1===o.length)return a=o[0],l=new eT,l.curves=a.curves,c.push(l),c;let u=!r(o[0].getPoints());u=e?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let v=0,y=o.length;v<y;v++)a=o[v],p=a.getPoints(),s=r(p),s=e?!s:s,s?(!u&&d[g]&&g++,d[g]={s:new eT,p:p},d[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:p[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let n=0,i=d.length;n<i;n++)h[n]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let o=0;o<r.length;o++){const s=r[o];let a=!0;for(let r=0;r<d.length;r++)i(s.p,d[r].p)&&(n!==r&&t.push({froms:n,tos:r,hole:o}),a?(a=!1,h[r].push(s)):e=!0);a&&h[n].push(s)}}t.length>0&&(e||(m=h))}for(let v=0,y=d.length;v<y;v++){l=d[v].s,c.push(l),f=m[v];for(let e=0,t=f.length;e<t;e++)l.holes.push(f[e].h)}return c}}),Object.assign(MT.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);const n=[],i=function(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[];let a=0,l=0;for(let c=0;c<i.length;c++){const e=i[c];if("\n"===e)a=0,l-=o;else{const t=ET(e,r,a,l,n);a+=t.offsetX,s.push(t.path)}}return s}(e,t,this.data);for(let r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),TT.prototype=Object.assign(Object.create(SE.prototype),{constructor:TT,load:function(e,t,n,i){const r=this,o=new EE(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new MT(e)}}),AT.prototype=Object.assign(Object.create(SE.prototype),{constructor:AT,load:function(e,t,n,i){const r=this,o=new EE(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);(void 0===CT&&(CT=new(window.AudioContext||window.webkitAudioContext)),CT).decodeAudioData(e,(function(e){t(e)}))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}}),PT.prototype=Object.assign(Object.create(fT.prototype),{constructor:PT,isHemisphereLightProbe:!0,copy:function(e){return fT.prototype.copy.call(this,e),this},toJSON:function(e){return fT.prototype.toJSON.call(this,e)}}),OT.prototype=Object.assign(Object.create(fT.prototype),{constructor:OT,isAmbientLightProbe:!0,copy:function(e){return fT.prototype.copy.call(this,e),this},toJSON:function(e){return fT.prototype.toJSON.call(this,e)}});const IT=new Ky,kT=new Ky;function RT(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign((function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gb,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gb,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}).prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),i=t.eyeSep/2,r=i*t.near/t.focus,o=t.near*Math.tan(fy.DEG2RAD*t.fov*.5)/t.zoom;let s,a;kT.elements[12]=-i,IT.elements[12]=i,s=-o*t.aspect+r,a=o*t.aspect+r,n.elements[0]=2*t.near/(a-s),n.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(n),s=-o*t.aspect-r,a=o*t.aspect-r,n.elements[0]=2*t.near/(a-s),n.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(IT)}}),Object.assign(RT.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else o+=t,this._mixBufferRegion(n,r,0,t/o,i);this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&this._mixBufferRegion(n,i,t*this._origIndex,1-r,t),o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,i);break}},saveOriginalState:function(){const e=this.buffer,t=this.valueSize,n=t*this._origIndex;this.binding.getValue(e,n);for(let i=t,r=n;i!==r;++i)e[i]=e[n+i%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){My.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const o=this._workIndex*r;My.multiplyQuaternionsFlat(e,o,e,t,e,n),My.slerpFlat(e,t,e,t,e,o,i)},_lerp:function(e,t,n,i,r){const o=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*o+e[n+s]*i}},_lerpAdditive:function(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}});const NT=new RegExp("[\\[\\]\\.:\\/]","g"),LT="[^\\[\\]\\.:\\/]",DT="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",FT=/((?:WC+[\/:])*)/.source.replace("WC",LT),UT=/(WCOD+)?/.source.replace("WCOD",DT),zT=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LT),HT=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LT),BT=new RegExp("^"+FT+UT+zT+HT+"$"),jT=["material","materials","bones"];function VT(e,t,n){const i=n||WT.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function WT(e,t,n){this.path=t,this.parsedPath=n||WT.parseTrackName(t),this.node=WT.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(VT.prototype,{getValue:function(e,t){this.bind();const n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(WT,{Composite:VT,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new WT.Composite(e,t,n):new WT(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(NT,"")},parseTrackName:function(e){const t=BT.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==jT.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(WT.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=WT.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e);let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(WT.prototype,{_getValue_unbound:WT.prototype.getValue,_setValue_unbound:WT.prototype.setValue}),Object.assign((function(){this.uuid=fy.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}).prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let s=void 0,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)r[e].push(new WT(u,n[e],i[e]))}else if(d<l){s=e[d];const a=--l,c=e[a];t[c.uuid]=d,e[d]=c,t[h]=a,e[a]=u;for(let e=0,t=o;e!==t;++e){const t=r[e];let o=t[d];t[d]=t[a],void 0===o&&(o=new WT(u,n[e],i[e])),t[a]=o}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=r){const o=r++,c=e[o];t[c.uuid]=l,e[l]=c,t[a]=o,e[o]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[l];t[l]=t[o],t[o]=i}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<r){const s=--r,a=e[s],c=--o,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[c];t[l]=t[s],t[s]=i,t.pop()}}else{const r=--o,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,s=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=new Array(a.length);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(c);for(let u=l,h=a.length;u!==h;++u)c[u]=new WT(a[u],e,t);return c},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}});class GT{constructor(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;const r=t.tracks,o=r.length,s=new Array(o),a={endingStart:ty,endingEnd:ty};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=n/i;e.warp(1,i/n,t),this.warp(r,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);break;case ry:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=2202===n;if(0===e)return-1===r?i:o&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=ny,i.endingEnd=ny):(i.endingStart=e?this.zeroSlopeAtStart?ny:ty:iy,i.endingEnd=t?this.zeroSlopeAtEnd?ny:ty:iy)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}function qT(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}qT.prototype=Object.assign(Object.create(hy.prototype),{constructor:qT,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}l=new RT(WT.create(n,r,t&&t._propertyBindings[u].binding.parsedPath),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),o[u]=l}s[u].resultBuffer=l.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0==--e.referenceCount&&this._removeInactiveBinding(e)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new cE(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let o="string"==typeof e?_E.findByName(i,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:ry),void 0!==a){const e=a.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new GT(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?_E.findByName(n,e):e,o=this._actionsByClip[r?r.uuid:e];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){const t=this._actions,n=this._nActiveActions,i=this.time+=e*=this.timeScale,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,o);const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class XT{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new XT(void 0===this.value.clone?this.value:this.value.clone())}}function YT(e,t,n){cS.call(this,e,t),this.meshPerAttribute=n||1}function ZT(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function JT(e,t,n,i){this.ray=new Qy(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new u_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function $T(e,t){return e.distance-t.distance}function QT(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)QT(i[e],t,n,!0)}}YT.prototype=Object.assign(Object.create(cS.prototype),{constructor:YT,isInstancedInterleavedBuffer:!0,copy:function(e){return cS.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=cS.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=cS.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(ZT.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ZT.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(JT.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return QT(e,this,i,t),i.sort($T),i},intersectObjects:function(e,t,n){const i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,o=e.length;r<o;r++)QT(e[r],this,i,t);return i.sort($T),i}});const KT=new my;function eC(e){M_.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(eC.prototype=Object.create(M_.prototype)).constructor=eC,eC.prototype.isImmediateRenderObject=!0;const tC=new Ey,nC=new Ky,iC=new Ky;Math.pow(2,8);function rC(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),HE.call(this,e),this.type="catmullrom"}Math.sqrt(5),kE.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(kE.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(QE.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new pM;for(let n=0,i=e.length;n<i;n++){const i=e[n];t.vertices.push(new Ey(i.x,i.y,i.z||0))}return t}}),Object.assign(KE.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(HE.prototype),Object.create(HE.prototype),rC.prototype=Object.create(HE.prototype),Object.assign(rC.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),class extends JS{constructor(e,t,n,i){e=e||10,t=t||10,n=new q_(void 0!==n?n:4473924),i=new q_(void 0!==i?i:8947848);const r=t/2,o=e/t,s=e/2,a=[],l=[];for(let u=0,h=0,d=-s;u<=t;u++,d+=o){a.push(-s,0,d,s,0,d),a.push(d,0,-s,d,0,s);const e=u===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new yb;c.setAttribute("position",new ab(a,3)),c.setAttribute("color",new ab(l,3)),super(c,new BS({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends JS{constructor(e){const t=function e(t){const n=[];t&&t.isBone&&n.push(t);for(let i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new yb,i=[],r=[],o=new q_(0,0,1),s=new q_(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new ab(i,3)),n.setAttribute("color",new ab(r,3)),super(n,new BS({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");iC.getInverse(this.root.matrixWorld);for(let r=0,o=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(nC.multiplyMatrices(iC,e.matrixWorld),tC.setFromMatrixPosition(nC),i.setXYZ(o,tC.x,tC.y,tC.z),nC.multiplyMatrices(iC,e.parent.matrixWorld),tC.setFromMatrixPosition(nC),i.setXYZ(o+1,tC.x,tC.y,tC.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(SE.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),vT(e)}}),SE.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(class{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new my(1/0,1/0),this.max=void 0!==t?t:new my(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=KT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new my),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new my),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new my),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new my),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return KT.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Ay.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Wy.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Kb.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Object.assign(fy,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),fy.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),fy.ceilPowerOfTwo(e)}}),Object.assign(gy.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ky.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ey).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),A_.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},My.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Qy.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(z_.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(z_,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),z_.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),z_.getNormal(e,t,n,i)}}),Object.assign(eT.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new VM(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new YM(this,e)}}),Object.assign(my.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ey.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(wy.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pM.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(M_.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(M_.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Db.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Db.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(OS.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(NS.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),IS.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(kE.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Gb.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(tT.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(K_.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===cy},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(cy)}}}),Object.assign(K_.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?cy:ly),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(yb.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new K_(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(yb.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(yT.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(JT.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(cS.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===cy},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(cS.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?cy:ly),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(BM.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(lS.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(XT.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Z_.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new q_}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(KM.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(QM.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(Vb.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(sS.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(sS.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?sy:oy}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties($x.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(xy.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(class extends M_{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e){if(void 0===e&&(e=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new AT).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Xb.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Xb.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)},yy.crossOrigin=void 0,yy.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new IE;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},yy.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new PE;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},yy.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},yy.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"122"}}));var oC={},sC=void 0,aC=oC;function lC(e,t){var n,i=e.split("."),r=aC;!(i[0]in r)&&r.execScript&&r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||t===sC?r=r[n]?r[n]:r[n]={}:r[n]=t}var cC="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function uC(e){var t,n,i,r,o,s,a,l,c,u,h=e.length,d=0,p=Number.POSITIVE_INFINITY;for(l=0;l<h;++l)e[l]>d&&(d=e[l]),e[l]<p&&(p=e[l]);for(t=1<<d,n=new(cC?Uint32Array:Array)(t),i=1,r=0,o=2;i<=d;){for(l=0;l<h;++l)if(e[l]===i){for(s=0,a=r,c=0;c<i;++c)s=s<<1|1&a,a>>=1;for(u=i<<16|l,c=s;c<t;c+=o)n[c]=u;++r}++i,r<<=1,o<<=1}return[n,d,p]}function hC(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=cC?new Uint8Array(e):e,this.m=!1,this.i=pC,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case dC:this.b=32768,this.c=new(cC?Uint8Array:Array)(32768+this.h+258);break;case pC:this.b=0,this.c=new(cC?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var dC=0,pC=1,fC={t:dC,s:pC};hC.prototype.k=function(){for(;!this.m;){var e=RC(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,i=this.c,r=this.b,o=t.length,s=sC,a=i.length,l=sC;if(this.d=this.f=0,n+1>=o)throw Error("invalid uncompressed block header: LEN");if(s=t[n++]|t[n++]<<8,n+1>=o)throw Error("invalid uncompressed block header: NLEN");if(s===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+s>t.length)throw Error("input buffer is broken");switch(this.i){case dC:for(;r+s>i.length;){if(s-=l=a-r,cC)i.set(t.subarray(n,n+l),r),r+=l,n+=l;else for(;l--;)i[r++]=t[n++];this.b=r,i=this.e(),r=this.b}break;case pC:for(;r+s>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(cC)i.set(t.subarray(n,n+s),r),r+=s,n+=s;else for(;s--;)i[r++]=t[n++];this.a=n,this.b=r,this.c=i;break;case 1:this.j(OC,kC);break;case 2:var c,u,h,d,p=RC(this,5)+257,f=RC(this,5)+1,m=RC(this,4)+4,g=new(cC?Uint8Array:Array)(yC.length),v=sC,y=sC,_=sC,b=sC,w=sC;for(w=0;w<m;++w)g[yC[w]]=RC(this,3);if(!cC)for(w=m,m=g.length;w<m;++w)g[yC[w]]=0;for(c=uC(g),v=new(cC?Uint8Array:Array)(p+f),w=0,d=p+f;w<d;)switch(y=NC(this,c),y){case 16:for(b=3+RC(this,2);b--;)v[w++]=_;break;case 17:for(b=3+RC(this,3);b--;)v[w++]=0;_=0;break;case 18:for(b=11+RC(this,7);b--;)v[w++]=0;_=0;break;default:_=v[w++]=y}u=uC(cC?v.subarray(0,p):v.slice(0,p)),h=uC(cC?v.subarray(p):v.slice(p)),this.j(u,h);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var mC,gC,vC=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],yC=cC?new Uint16Array(vC):vC,_C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],bC=cC?new Uint16Array(_C):_C,wC=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],xC=cC?new Uint8Array(wC):wC,SC=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],MC=cC?new Uint16Array(SC):SC,EC=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],TC=cC?new Uint8Array(EC):EC,CC=new(cC?Uint8Array:Array)(288);for(mC=0,gC=CC.length;mC<gC;++mC)CC[mC]=143>=mC?8:255>=mC?9:279>=mC?7:8;var AC,PC,OC=uC(CC),IC=new(cC?Uint8Array:Array)(30);for(AC=0,PC=IC.length;AC<PC;++AC)IC[AC]=5;var kC=uC(IC);function RC(e,t){for(var n,i=e.f,r=e.d,o=e.input,s=e.a,a=o.length;r<t;){if(s>=a)throw Error("input buffer is broken");i|=o[s++]<<r,r+=8}return n=i&(1<<t)-1,e.f=i>>>t,e.d=r-t,e.a=s,n}function NC(e,t){for(var n,i,r=e.f,o=e.d,s=e.input,a=e.a,l=s.length,c=t[0],u=t[1];o<u&&!(a>=l);)r|=s[a++]<<o,o+=8;if((i=(n=c[r&(1<<u)-1])>>>16)>o)throw Error("invalid code length: "+i);return e.f=r>>i,e.d=o-i,e.a=a,65535&n}function LC(e,t){var n,i;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],i=e[this.a++],15&n){case DC:this.method=DC;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+i)%31)throw Error("invalid fcheck flag:"+((n<<8)+i)%31);if(32&i)throw Error("fdict flag is not supported");this.q=new hC(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}hC.prototype.j=function(e,t){var n=this.c,i=this.b;this.o=e;for(var r,o,s,a,l=n.length-258;256!==(r=NC(this,e));)if(256>r)i>=l&&(this.b=i,n=this.e(),i=this.b),n[i++]=r;else for(a=bC[o=r-257],0<xC[o]&&(a+=RC(this,xC[o])),r=NC(this,t),s=MC[r],0<TC[r]&&(s+=RC(this,TC[r])),i>=l&&(this.b=i,n=this.e(),i=this.b);a--;)n[i]=n[i++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=i},hC.prototype.w=function(e,t){var n=this.c,i=this.b;this.o=e;for(var r,o,s,a,l=n.length;256!==(r=NC(this,e));)if(256>r)i>=l&&(l=(n=this.e()).length),n[i++]=r;else for(a=bC[o=r-257],0<xC[o]&&(a+=RC(this,xC[o])),r=NC(this,t),s=MC[r],0<TC[r]&&(s+=RC(this,TC[r])),i+a>l&&(l=(n=this.e()).length);a--;)n[i]=n[i++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=i},hC.prototype.e=function(){var e,t,n=new(cC?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.c;if(cC)n.set(r.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=r[e+32768];if(this.g.push(n),this.l+=n.length,cC)r.set(r.subarray(i,i+32768));else for(e=0;32768>e;++e)r[e]=r[i+e];return this.b=32768,r},hC.prototype.z=function(e){var t,n,i,r=this.input.length/this.a+1|0,o=this.c;return e&&("number"==typeof e.p&&(r=e.p),"number"==typeof e.u&&(r+=e.u)),n=2>r?(i=(this.input.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+i:o.length<<1:o.length*r,cC?(t=new Uint8Array(n)).set(o):t=o,this.c=t},hC.prototype.n=function(){var e,t,n,i,r,o=0,s=this.c,a=this.g,l=new(cC?Uint8Array:Array)(this.l+(this.b-32768));if(0===a.length)return cC?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=a.length;t<n;++t)for(i=0,r=(e=a[t]).length;i<r;++i)l[o++]=e[i];for(t=32768,n=this.b;t<n;++t)l[o++]=s[t];return this.g=[],this.buffer=l},hC.prototype.v=function(){var e,t=this.b;return cC?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},LC.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var i=e;if("string"==typeof i){var r,o,s=i.split("");for(r=0,o=s.length;r<o;r++)s[r]=(255&s[r].charCodeAt(0))>>>0;i=s}for(var a,l=1,c=0,u=i.length,h=0;0<u;){u-=a=1024<u?1024:u;do{c+=l+=i[h++]}while(--a);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var DC=8;lC("Zlib.Inflate",LC),lC("Zlib.Inflate.prototype.decompress",LC.prototype.k);var FC,UC,zC,HC,BC={ADAPTIVE:fC.s,BLOCK:fC.t};if(Object.keys)FC=Object.keys(BC);else for(UC in FC=[],zC=0,BC)FC[zC++]=UC;for(zC=0,HC=FC.length;zC<HC;++zC)lC("Zlib.Inflate.BufferType."+(UC=FC[zC]),BC[UC]);var jC=oC.Zlib.Inflate,VC={findSpan:function(e,t,n){var i=n.length-e-1;if(t>=n[i])return i-1;if(t<=n[e])return e;for(var r=e,o=i,s=Math.floor((r+o)/2);t<n[s]||t>=n[s+1];)t<n[s]?o=s:r=s,s=Math.floor((r+o)/2);return s},calcBasisFunctions:function(e,t,n,i){var r=[],o=[],s=[];r[0]=1;for(var a=1;a<=n;++a){o[a]=t-i[e+1-a],s[a]=i[e+a]-t;for(var l=0,c=0;c<a;++c){var u=s[c+1],h=o[a-c],d=r[c]/(u+h);r[c]=l+u*d,l=h*d}r[a]=l}return r},calcBSplinePoint:function(e,t,n,i){for(var r=this.findSpan(e,i,t),o=this.calcBasisFunctions(r,i,e,t),s=new wy(0,0,0,0),a=0;a<=e;++a){var l=n[r-e+a],c=o[a],u=l.w*c;s.x+=l.x*u,s.y+=l.y*u,s.z+=l.z*u,s.w+=l.w*c}return s},calcBasisFunctionDerivatives:function(e,t,n,i,r){for(var o=[],s=0;s<=n;++s)o[s]=0;var a=[];for(s=0;s<=i;++s)a[s]=o.slice(0);var l=[];for(s=0;s<=n;++s)l[s]=o.slice(0);l[0][0]=1;for(var c=o.slice(0),u=o.slice(0),h=1;h<=n;++h){c[h]=t-r[e+1-h],u[h]=r[e+h]-t;for(var d=0,p=0;p<h;++p){var f=u[p+1],m=c[h-p];l[h][p]=f+m;var g=l[p][h-1]/l[h][p];l[p][h]=d+f*g,d=m*g}l[h][h]=d}for(h=0;h<=n;++h)a[0][h]=l[h][n];for(p=0;p<=n;++p){var v=0,y=1,_=[];for(s=0;s<=n;++s)_[s]=o.slice(0);_[0][0]=1;for(var b=1;b<=i;++b){var w=0,x=p-b,S=n-b;p>=b&&(_[y][0]=_[v][0]/l[S+1][x],w=_[y][0]*l[x][S]);var M=p-1<=S?b-1:n-p;for(h=x>=-1?1:-x;h<=M;++h)_[y][h]=(_[v][h]-_[v][h-1])/l[S+1][x+h],w+=_[y][h]*l[x+h][S];p<=S&&(_[y][b]=-_[v][b-1]/l[S+1][p],w+=_[y][b]*l[p][S]),a[b][p]=w,h=v,v=y,y=h}}for(p=n,b=1;b<=i;++b){for(h=0;h<=n;++h)a[b][h]*=p;p*=n-b}return a},calcBSplineDerivatives:function(e,t,n,i,r){for(var o=r<e?r:e,s=[],a=this.findSpan(e,i,t),l=this.calcBasisFunctionDerivatives(a,i,e,o,t),c=[],u=0;u<n.length;++u){var h=(p=n[u].clone()).w;p.x*=h,p.y*=h,p.z*=h,c[u]=p}for(var d=0;d<=o;++d){for(var p=c[a-e].clone().multiplyScalar(l[d][0]),f=1;f<=e;++f)p.add(c[a-e+f].clone().multiplyScalar(l[d][f]));s[d]=p}for(d=o+1;d<=r+1;++d)s[d]=new wy(0,0,0);return s},calcKoverI:function(e,t){for(var n=1,i=2;i<=e;++i)n*=i;var r=1;for(i=2;i<=t;++i)r*=i;for(i=2;i<=e-t;++i)r*=i;return n/r},calcRationalCurveDerivatives:function(e){for(var t=e.length,n=[],i=[],r=0;r<t;++r){var o=e[r];n[r]=new Ey(o.x,o.y,o.z),i[r]=o.w}for(var s=[],a=0;a<t;++a){var l=n[a].clone();for(r=1;r<=a;++r)l.sub(s[a-r].clone().multiplyScalar(this.calcKoverI(a,r)*i[r]));s[a]=l.divideScalar(i[0])}return s},calcNURBSDerivatives:function(e,t,n,i,r){var o=this.calcBSplineDerivatives(e,t,n,i,r);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,n,i,r,o,s,a){for(var l=this.findSpan(e,o,n),c=this.findSpan(t,s,i),u=this.calcBasisFunctions(l,o,e,n),h=this.calcBasisFunctions(c,s,t,i),d=[],p=0;p<=t;++p){d[p]=new wy(0,0,0,0);for(var f=0;f<=e;++f){var m=r[l-e+f][c-t+p].clone(),g=m.w;m.x*=g,m.y*=g,m.z*=g,d[p].add(m.multiplyScalar(u[f]))}}var v=new wy(0,0,0,0);for(p=0;p<=t;++p)v.add(d[p].multiplyScalar(h[p]));v.divideScalar(v.w),a.set(v.x,v.y,v.z)}},WC=function(e,t,n,i,r){kE.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=r||this.knots.length-1;for(var o=0;o<n.length;++o){var s=n[o];this.controlPoints[o]=new wy(s.x,s.y,s.z,s.w)}};(WC.prototype=Object.create(kE.prototype)).constructor=WC,WC.prototype.getPoint=function(e,t){var n=t||new Ey,i=VC.calcBSplinePoint(this.degree,this.knots,this.controlPoints,this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]));return 1!=i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)},WC.prototype.getTangent=function(e,t){var n=t||new Ey,i=VC.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),1);return n.copy(i[1]).normalize(),n};var GC=function(){var e,t,n;function i(e){SE.call(this,e)}function r(e,t){this.textureLoader=e,this.manager=t}function o(){}function s(){}function a(){}function l(){}function c(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function u(){}function h(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function d(e){return e/46186158e3}i.prototype=Object.assign(Object.create(SE.prototype),{constructor:i,load:function(e,t,n,i){var r=this,o=""===r.path?vT(e):r.path,s=new EE(this.manager);s.setPath(r.path),s.setResponseType("arraybuffer"),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(n,o))}catch(s){i&&i(s),r.manager.itemError(e)}}),n,i)},parse:function(t,n){if((o=t).byteLength>=(s="Kaydara FBX Binary  \0").length&&s===b(o,0,s.length))e=(new l).parse(t);else{var i=b(t);if(!function(e){for(var t,n=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0,r=0;r<n.length;++r)if(void 0,t=e[1-1],e=e.slice(i+1),i++,t===n[r])return!1;return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(h(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+h(i));e=(new a).parse(i)}var o,s;return new r(new IE(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),r.prototype={constructor:r,parse:function(){t=this.parseConnections();var e=this.parseImages(),i=this.parseTextures(e),r=this.parseMaterials(i),s=this.parseDeformers(),a=(new o).parse(s);return this.parseScene(s,a,r),n},parseConnections:function(){var t=new Map;return"Connections"in e&&e.Connections.connections.forEach((function(e){var n=e[0],i=e[1],r=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:i,relationship:r};t.get(n).parents.push(o),t.has(i)||t.set(i,{parents:[],children:[]});var s={ID:n,relationship:r};t.get(i).children.push(s)})),t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var i=e.Objects.Video;for(var r in i){var o=i[r];if(t[a=parseInt(r)]=o.RelativeFilename||o.Filename,"Content"in o&&(o.Content instanceof ArrayBuffer&&o.Content.byteLength>0||"string"==typeof o.Content&&""!==o.Content)){var s=this.parseImage(i[r]);n[o.RelativeFilename||o.Filename]=s}}}for(var a in t){var l=t[a];t[a]=void 0!==n[l]?n[l]:t[a].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var i=e.Objects.Texture;for(var r in i){var o=this.parseTexture(i[r],t);n.set(parseInt(r),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var i=e.WrapModeU,r=e.WrapModeV,o=void 0!==r?r.value:0;if(n.wrapS=0===(void 0!==i?i.value:0)?Dv:Fv,n.wrapT=0===o?Dv:Fv,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n},loadTexture:function(e,n){var i,r,o=this.textureLoader.path,s=t.get(e.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(0!==(i=n[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var a=e.FileName.slice(-3).toLowerCase();if("tga"===a){var l=this.manager.getHandler(".tga");null===l?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new by):r=l.load(i)}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new by):r=this.textureLoader.load(i);return this.textureLoader.setPath(o),r},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var i=e.Objects.Material;for(var r in i){var o=this.parseMaterial(i[r],t);null!==o&&n.set(parseInt(r),o)}}return n},parseMaterial:function(e,n){var i=e.id,r=e.attrName,o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!t.has(i))return null;var s,a=this.parseParameters(e,n,i);switch(o.toLowerCase()){case"phong":s=new KM;break;case"lambert":s=new nE;break;default:s=new KM}return s.setValues(a),s.name=r,s},parseParameters:function(e,n,i){var r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new q_).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(r.color=(new q_).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new q_).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(r.emissive=(new q_).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new q_).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new q_).fromArray(e.SpecularColor.value));var o=this;return t.get(i).children.forEach((function(e){switch(e.relationship){case"Bump":r.bumpMap=o.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=o.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=o.getTexture(n,e.ID),r.map.encoding=sy;break;case"DisplacementColor":r.displacementMap=o.getTexture(n,e.ID);break;case"EmissiveColor":r.emissiveMap=o.getTexture(n,e.ID),r.emissiveMap.encoding=sy;break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=o.getTexture(n,e.ID);break;case"ReflectionColor":r.envMap=o.getTexture(n,e.ID),r.envMap.mapping=303,r.envMap.encoding=sy;break;case"SpecularColor":r.specularMap=o.getTexture(n,e.ID),r.specularMap.encoding=sy;break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=o.getTexture(n,e.ID),r.transparent=!0}})),r},getTexture:function(n,i){return"LayeredTexture"in e.Objects&&i in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=t.get(i).children[0].ID),n.get(i)},parseDeformers:function(){var n={},i={};if("Deformer"in e.Objects){var r=e.Objects.Deformer;for(var o in r){var s=r[o],a=t.get(parseInt(o));if("Skin"===s.attrType){var l=this.parseSkeleton(a,r);l.ID=o,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=a.parents[0].ID,n[o]=l}else if("BlendShape"===s.attrType){var c={id:o};c.rawTargets=this.parseMorphTargets(a,r),c.id=o,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),i[o]=c}}}return{skeletons:n,morphTargets:i}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var i=t[e.ID];if("Cluster"===i.attrType){var r={ID:e.ID,indices:[],weights:[],transformLink:(new Ky).fromArray(i.TransformLink.a)};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var i=[],r=0;r<e.children.length;r++){var o=e.children[r],s=n[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;a.geoID=t.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,i.push(a)}return i},parseScene:function(i,r,o){n=new nS;var a=this.parseModels(i.skeletons,r,o),l=e.Objects.Model,c=this;a.forEach((function(e){c.setLookAtProperties(e,l[e.ID]),t.get(e.ID).parents.forEach((function(t){var n=a.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(i.skeletons,r,a),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=v(e.userData.transformData);e.applyMatrix4(t)}}));var u=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=u,n=n.children[0]),n.animations=u},parseModels:function(n,i,r){var o=new Map,s=e.Objects.Model;for(var a in s){var l=parseInt(a),c=s[a],u=t.get(l),h=this.buildSkeleton(u,n,l,c.attrName);if(!h){switch(c.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,i,r);break;case"NurbsCurve":h=this.createCurve(u,i);break;case"LimbNode":case"Root":h=new LS;break;case"Null":default:h=new nS}h.name=c.attrName?WT.sanitizeNodeName(c.attrName):"",h.ID=l}this.getTransformData(h,c),o.set(l,h)}return o},buildSkeleton:function(e,t,n,i){var r=null;return e.parents.forEach((function(e){for(var o in t){var s=t[o];s.rawBones.forEach((function(t,o){if(t.ID===e.ID){var a=r;(r=new LS).matrixWorld.copy(t.transformLink),r.name=i?WT.sanitizeNodeName(i):"",r.ID=n,s.bones[o]=r,null!==a&&r.add(a)}}))}})),r},createCamera:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new M_;else{var r=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(r=1);var o=1;void 0!==i.NearPlane&&(o=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var a=window.innerWidth,l=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(a=i.AspectWidth.value,l=i.AspectHeight.value);var c=a/l,u=45;void 0!==i.FieldOfView&&(u=i.FieldOfView.value);var h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:n=new Gb(u,c,o,s),null!==h&&n.setFocalLength(h);break;case 1:n=new lT(-a/2,a/2,l/2,-l/2,o,s);break;default:n=new M_}}return n},createLight:function(t){var n,i;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)})),void 0===i)n=new M_;else{var r;r=void 0===i.LightType?0:i.LightType.value;var o=16777215;void 0!==i.Color&&(o=(new q_).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var a=0;switch(void 0!==i.FarAttenuationEnd&&(a=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value),r){case 0:n=new aT(o,s,a,1);break;case 1:n=new uT(o,s);break;case 2:var l=Math.PI/3;void 0!==i.InnerAngle&&(l=fy.degToRad(i.InnerAngle.value));var c=0;void 0!==i.OuterAngle&&(c=fy.degToRad(i.OuterAngle.value),c=Math.max(c,1)),n=new oT(o,s,a,l,c,1);break;default:n=new aT(o,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var i,r=null,o=null,s=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?o=s:s.length>0?o=s[0]:(o=new KM({color:13421772}),s.push(o)),"color"in r.attributes&&s.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),(i=new IS(r,o)).normalizeSkinWeights()):i=new Db(r,o),i},createCurve:function(e,t){return new XS(e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),new BS({color:3342591,linewidth:1}))},getTransformData:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?y(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n},setLookAtProperties:function(i,r){"LookAtProperty"in r&&t.get(i.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var r=e.Objects.Model[t.ID];if("Lcl_Translation"in r){var o=r.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(o),n.add(i.target)):i.lookAt((new Ey).fromArray(o))}}}))},bindSkeleton:function(e,n,i){var r=this.parsePoseNodes();for(var o in e){var s=e[o];t.get(parseInt(s.ID)).parents.forEach((function(e){n.has(e.ID)&&t.get(e.ID).parents.forEach((function(e){i.has(e.ID)&&i.get(e.ID).bind(new NS(s.bones),r[e.ID])}))}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var r=n[i].PoseNode;Array.isArray(r)?r.forEach((function(e){t[e.Node]=(new Ky).fromArray(e.Matrix.a)})):t[r.Node]=(new Ky).fromArray(r.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,i=t[0],r=t[1],o=t[2];if(0!==i||0!==r||0!==o){var s=new q_(i,r,o);n.add(new hT(s,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,i){e.setupMorphMaterial(t,n,i)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,i){var r=e.uuid,o=t.uuid,s=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==r&&(s=!0)})):e.material.uuid===o&&e.uuid!==r&&(s=!0))})),!0===s){var a=t.clone();a.morphTargets=!0,void 0===i?e.material=a:e.material[i]=a}else t.morphTargets=!0}},o.prototype={constructor:o,parse:function(n){var i=new Map;if("Geometry"in e.Objects){var r=e.Objects.Geometry;for(var o in r){var s=t.get(parseInt(o)),a=this.parseGeometry(s,r[o],n);i.set(parseInt(o),a)}}return i},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,i){var r=i.skeletons,o=[],s=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==s.length){var a=t.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);t.children.forEach((function(e){void 0!==i.morphTargets[e.ID]&&o.push(i.morphTargets[e.ID])}));var l=s[0],c={};"RotationOrder"in l&&(c.eulerOrder=y(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);var u=v(c);return this.genGeometry(n,a,o,u)}},genGeometry:function(e,t,n,i){var r=new yb;e.attrName&&(r.name=e.attrName);var o=this.parseGeoNode(e,t),s=this.genBuffers(o),a=new ab(s.vertex,3);if(a.applyMatrix4(i),r.setAttribute("position",a),s.colors.length>0&&r.setAttribute("color",new ab(s.colors,3)),t&&(r.setAttribute("skinIndex",new rb(s.weightsIndices,4)),r.setAttribute("skinWeight",new ab(s.vertexWeights,4)),r.FBX_Deformer=t),s.normal.length>0){var l=(new gy).getNormalMatrix(i),c=new ab(s.normal,3);c.applyNormalMatrix(l),r.setAttribute("normal",c)}if(s.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),r.setAttribute(n,new ab(s.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){var u=s.materialIndex[0],h=0;if(s.materialIndex.forEach((function(e,t){e!==u&&(r.addGroup(h,t-h,u),u=e,h=t)})),r.groups.length>0){var d=r.groups[r.groups.length-1],p=d.start+d.count;p!==s.materialIndex.length&&r.addGroup(p,s.materialIndex.length-p,u)}0===r.groups.length&&r.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(r,e,n,i),r},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var i=0;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(i,r){void 0===n.weightTable[i]&&(n.weightTable[i]=[]),n.weightTable[i].push({id:t,weight:e.weights[r]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,i=0,r=!1,o=[],s=[],a=[],l=[],c=[],u=[],h=this;return e.vertexIndices.forEach((function(d,p){var m=!1;d<0&&(d^=-1,m=!0);var g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var y=f(p,n,d,e.color);a.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){r||(r=!0);var _=[0,0,0,0],b=[0,0,0,0];v.forEach((function(e,t){var n=e,i=g[t];b.forEach((function(e,t,r){if(n>e){r[t]=n,n=e;var o=_[t];_[t]=i,i=o}}))})),g=_,v=b}for(;v.length<4;)v.push(0),g.push(0);for(var w=0;w<4;++w)c.push(v[w]),u.push(g[w])}if(e.normal&&(y=f(p,n,d,e.normal),s.push(y[0],y[1],y[2])),e.material&&"AllSame"!==e.material.mappingType)var x=f(p,n,d,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var i=f(p,n,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(i[0]),l[t].push(i[1])})),i++,m&&(h.genFace(t,e,o,x,s,a,l,c,u,i),n++,i=0,o=[],s=[],a=[],l=[],c=[],u=[])})),t},genFace:function(e,t,n,i,r,o,s,a,l,c){for(var u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(a[0]),e.vertexWeights.push(a[1]),e.vertexWeights.push(a[2]),e.vertexWeights.push(a[3]),e.vertexWeights.push(a[4*(u-1)]),e.vertexWeights.push(a[4*(u-1)+1]),e.vertexWeights.push(a[4*(u-1)+2]),e.vertexWeights.push(a[4*(u-1)+3]),e.vertexWeights.push(a[4*u]),e.vertexWeights.push(a[4*u+1]),e.vertexWeights.push(a[4*u+2]),e.vertexWeights.push(a[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(u-1)]),e.normal.push(r[3*(u-1)+1]),e.normal.push(r[3*(u-1)+2]),e.normal.push(r[3*u]),e.normal.push(r[3*u+1]),e.normal.push(r[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(s[n][0]),e.uvs[n].push(s[n][1]),e.uvs[n].push(s[n][2*(u-1)]),e.uvs[n].push(s[n][2*(u-1)+1]),e.uvs[n].push(s[n][2*u]),e.uvs[n].push(s[n][2*u+1])}))},addMorphTargets:function(t,n,i,r){if(0!==i.length){t.morphTargetsRelative=!0,t.morphAttributes.position=[];var o=this;i.forEach((function(i){i.rawTargets.forEach((function(i){var s=e.Objects.Geometry[i.geoID];void 0!==s&&o.genMorphGeometry(t,n,s,r,i.name)}))}))}},genMorphGeometry:function(e,t,n,i,r){for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],a=void 0!==n.Indexes?n.Indexes.a:[],l=new Float32Array(3*e.attributes.position.count),c=0;c<a.length;c++){var u=3*a[c];l[u]=s[3*c],l[u+1]=s[3*c+1],l[u+2]=s[3*c+2]}var h=new ab(this.genBuffers({vertexIndices:o,vertexPositions:l}).vertex,3);h.name=r||n.attrName,h.applyMatrix4(i),e.morphAttributes.position.push(h)},parseNormals:function(e){var t=e.ReferenceInformationType,n=[];return"IndexToDirect"===t&&("NormalIndex"in e?n=e.NormalIndex.a:"NormalsIndex"in e&&(n=e.NormalsIndex.a)),{dataSize:3,buffer:e.Normals.a,indices:n,mappingType:e.MappingInformationType,referenceType:t}},parseUVs:function(e){var t=e.ReferenceInformationType,n=[];return"IndexToDirect"===t&&(n=e.UVIndex.a),{dataSize:2,buffer:e.UV.a,indices:n,mappingType:e.MappingInformationType,referenceType:t}},parseVertexColors:function(e){var t=e.ReferenceInformationType,n=[];return"IndexToDirect"===t&&(n=e.ColorIndex.a),{dataSize:4,buffer:e.Colors.a,indices:n,mappingType:e.MappingInformationType,referenceType:t}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var i=e.Materials.a,r=[],o=0;o<i.length;++o)r.push(o);return{dataSize:1,buffer:i,indices:r,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===WC)return new yb;var t=parseInt(e.Order);if(isNaN(t))return new yb;for(var n,i,r=t-1,o=e.KnotVector.a,s=[],a=e.Points.a,l=0,c=a.length;l<c;l+=4)s.push((new wy).fromArray(a,l));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form)for(i=o.length-1-(n=r),l=0;l<r;++l)s.push(s[l]);var u=new WC(r,o,s,n,i).getPoints(7*s.length),h=new Float32Array(3*u.length);u.forEach((function(e,t){e.toArray(h,3*t)}));var d=new yb;return d.setAttribute("position",new K_(h,3)),d}},s.prototype={constructor:s,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var i=this.addClip(t[n]);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var i in t){var r=t[i];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){var o={id:r.id,attr:r.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var i=e.Objects.AnimationCurve;for(var r in i){var o={id:i[r].id,times:i[r].KeyTime.a.map(d),values:i[r].KeyValueFloat.a},s=t.get(o.id);if(void 0!==s){var a=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?n.get(a).curves.x=o:l.match(/Y/)?n.get(a).curves.y=o:l.match(/Z/)?n.get(a).curves.z=o:l.match(/d|DeformPercent/)&&n.has(a)&&(n.get(a).curves.morph=o)}}},parseAnimationLayers:function(i){var r=e.Objects.AnimationLayer,o=new Map;for(var s in r){var a=[],l=t.get(parseInt(s));void 0!==l&&(l.children.forEach((function(r,o){if(i.has(r.ID)){var s=i.get(r.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===a[o]&&void 0!==(p=t.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){if(void 0===(c=e.Objects.Model[p.toString()]))return;var l={modelName:c.attrName?WT.sanitizeNodeName(c.attrName):"",ID:c.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===c.id&&(l.transform=e.matrix,e.userData.transformData&&(l.eulerOrder=e.userData.transformData.eulerOrder))})),l.transform||(l.transform=new Ky),"PreRotation"in c&&(l.preRotation=c.PreRotation.value),"PostRotation"in c&&(l.postRotation=c.PostRotation.value),a[o]=l}a[o]&&(a[o][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===a[o]){var c,u=t.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,h=t.get(u).parents[0].ID,d=t.get(h).parents[0].ID,p=t.get(d).parents[0].ID;l={modelName:(c=e.Objects.Model[p]).attrName?WT.sanitizeNodeName(c.attrName):"",morphName:e.Objects.Deformer[u].attrName},a[o]=l}a[o][s.attr]=s}}})),o.set(parseInt(s),a))}return o},parseAnimStacks:function(n){var i=e.Objects.AnimationStack,r={};for(var o in i){var s=t.get(parseInt(o)).children,a=n.get(s[0].ID);r[o]={name:i[o].attrName,layer:a}}return r},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new _E(e.name,-1,t)},generateTracks:function(e){var t=[],n=new Ey,i=new My,r=new Ey;if(e.transform&&e.transform.decompose(n,i,r),n=n.toArray(),i=(new a_).setFromQuaternion(i,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==a&&t.push(a)}if(void 0!==e.DeformPercent){var l=this.generateMorphTrack(e);void 0!==l&&t.push(l)}return t},generateVectorTrack:function(e,t,n,i){var r=this.getTimesForAllAxes(t);return new yE(e+"."+i,r,this.getKeyframeTrackValues(r,t,n))},generateRotationTrack:function(e,t,n,i,r,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(fy.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(fy.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(fy.degToRad));var s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(fy.degToRad)).push(o),i=(new a_).fromArray(i),i=(new My).setFromEuler(i)),void 0!==r&&((r=r.map(fy.degToRad)).push(o),r=(new a_).fromArray(r),r=(new My).setFromEuler(r).inverse());for(var l=new My,c=new a_,u=[],h=0;h<a.length;h+=3)c.set(a[h],a[h+1],a[h+2],o),l.setFromEuler(c),void 0!==i&&l.premultiply(i),void 0!==r&&l.multiply(r),l.toArray(u,h/3*4);return new gE(e+".quaternion",s,u)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),r=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new fE(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t.sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,n){var i=n,r=[],o=-1,s=-1,a=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(s=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];r.push(n),i[0]=n}else r.push(i[0]);if(-1!==s){var l=t.y.values[s];r.push(l),i[1]=l}else r.push(i[1]);if(-1!==a){var c=t.z.values[a];r.push(c),i[2]=c}else r.push(i[2])})),r},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],i=e.values[t]-n,r=Math.abs(i);if(r>=180){for(var o=r/180,s=i/o,a=n+s,l=e.times[t-1],c=(e.times[t]-l)/o,u=l+c,h=[],d=[];u<e.times[t];)h.push(u),u+=c,d.push(a),a+=s;e.times=w(e.times,t,h),e.values=w(e.values,t,d)}}}},a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new u,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,i){var r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!r&&!o){var s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):a?t.parseNodeProperty(e,a,n[++i]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:n},o=this.parseNodeAttr(i),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in s?("PoseNode"===n?s.PoseNode.push(r):void 0!==s[n].id&&(s[n]={},s[n][s[n].id]=s[n]),""!==o.id&&(s[n][o.id]=r)):"number"==typeof o.id?(s[n]={},s[n][o.id]=r):"Properties70"!==n&&(s[n]="PoseNode"===n?[r]:r),"number"==typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}},parseNodeProperty:function(e,t,n){var i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===i){var s=r.split(",").slice(1),a=parseInt(s[0]),l=parseInt(s[1]),c=r.split(",").slice(3);i="connections",function(e,t){for(var n=0,i=e.length,r=t.length;n<r;n++,i++)e[i]=t[n]}(r=[a,l],c=c.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[i]&&(o[i]=[])}"Node"===i&&(o.id=r),i in o&&Array.isArray(o[i])?o[i].push(r):"a"!==i?o[i]=r:o.a=r,this.setCurrentProp(o,i),"a"===i&&","!==r.slice(-1)&&(o.a=_(r))}else this.parseNodeSpecialProperty(e,i,r)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=_(t.a))},parseNodeSpecialProperty:function(e,t,n){var i=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=i[0],o=i[1],s=i[2],a=i[3],l=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=_(l)}this.getPrevNode()[r]={type:o,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),r)}},l.prototype={constructor:l,parse:function(e){var t=new c(e);t.skip(23);var n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);for(var i=new u;!this.endOfContent(t);){var r=this.parseNode(t,n);null!==r&&i.add(r.name,r)}return i},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},i=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var o=e.getUint8(),s=e.getString(o);if(0===i)return null;for(var a=[],l=0;l<r;l++)a.push(this.parseProperty(e));var c=a.length>0?a[0]:"",u=a.length>1?a[1]:"",h=a.length>2?a[2]:"";for(n.singleProperty=1===r&&e.getOffset()===i;i>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(s,n,d)}return n.propertyList=a,"number"==typeof c&&(n.id=c),""!==u&&(n.attrName=u),""!==h&&(n.attrType=h),""!==s&&(n.name=s),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if("Connections"===e&&"C"===n.name){var r=[];n.propertyList.forEach((function(e,t){0!==t&&r.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===n.name)Object.keys(n).forEach((function(e){t[e]=n[e]}));else if("Properties70"===e&&"P"===n.name){var o,s=n.propertyList[0],a=n.propertyList[1],l=n.propertyList[2],c=n.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),o="Color"===a||"ColorRGB"===a||"Vector"===a||"Vector3D"===a||0===a.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[s]={type:a,type2:l,flag:c,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}var s=new c(new jC(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(i);case"d":return s.getFloat64Array(i);case"f":return s.getFloat32Array(i);case"i":return s.getInt32Array(i);case"l":return s.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},c.prototype={constructor:c,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295==(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),gT(new Uint8Array(t))}},u.prototype={constructor:u,add:function(e,t){this[e]=t}};var p=[];function f(e,t,n,i){var r;switch(i.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0]}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);var o=r*i.dataSize;return function(e,t,n,i){for(var r=n,o=0;r<i;r++,o++)e[o]=t[r];return e}(p,i.buffer,o,o+i.dataSize)}var m=new a_,g=new Ey;function v(e){var t,n=new Ky,i=new Ky,r=new Ky,o=new Ky,s=new Ky,a=new Ky,l=new Ky,c=new Ky,u=new Ky,h=new Ky,d=new Ky,p=e.inheritType?e.inheritType:0;e.translation&&n.setPosition(g.fromArray(e.translation)),e.preRotation&&((t=e.preRotation.map(fy.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(m.fromArray(t))),e.rotation&&((t=e.rotation.map(fy.degToRad)).push(e.eulerOrder),r.makeRotationFromEuler(m.fromArray(t))),e.postRotation&&((t=e.postRotation.map(fy.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(m.fromArray(t))),e.scale&&s.scale(g.fromArray(e.scale)),e.scalingOffset&&l.setPosition(g.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(g.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(g.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(g.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h=e.parentMatrixWorld);var f=i.multiply(r).multiply(o),v=new Ky;h.extractRotation(v),(new Ky).copyPosition(h);var y=new Ky;y.getInverse(v).multiply(h);var _=new Ky;if(0===p)_.copy(v).multiply(f).multiply(y).multiply(s);else if(1===p)_.copy(v).multiply(y).multiply(f).multiply(s);else{var b=(new Ky).getInverse(s),w=(new Ky).multiply(y).multiply(b);_.copy(v).multiply(f).multiply(w).multiply(s)}var x=(new Ky).getInverse(u),S=(new Ky).getInverse(a),M=new Ky;M.copy(n).multiply(c).multiply(u).multiply(i).multiply(r).multiply(o).multiply(x).multiply(l).multiply(a).multiply(s).multiply(S);var E=(new Ky).copyPosition(M),T=(new Ky).copy(h).multiply(E);return d.copyPosition(T),(new Ky).multiply(d).multiply(_)}function y(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?t[0]:t[e]}function _(e){return e.split(",").map((function(e){return parseFloat(e)}))}function b(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),gT(new Uint8Array(e,t,n))}function w(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return i}(),qC=n("C9BG"),XC=n.n(qC),YC=n("BWoW"),ZC=n.n(YC);class JC extends Vb{constructor(e,t){super({uniforms:{t:{value:e},fsCorr:{value:t},fadeIn:{value:0}},fragmentShader:XC.a,vertexShader:ZC.a})}update(e){this.uniforms.fsCorr.value.x=e.x,this.uniforms.fsCorr.value.y=e.y}}function $C(e,t,n){return e+(t-e)*n}class QC extends nS{constructor(e,t,n){super(),this.resolution=n,this.$video=t;const i=new Ay;i.expandByObject(e);const r=new Ey;e.position.sub(i.getCenter(r)),e.position.z-=r.z,this.add(e),this.fullscreenCorrection=new my(1,1),this.videoTexture=new oM(this.$video),this.screenMaterial=new JC(this.videoTexture,this.fullscreenCorrection),this.traverse(e=>{if(e.isMesh){if("Iphone_12Pro16"==e.name){e.material=this.screenMaterial,i.setFromObject(e);const t=i.getSize(r);this.screenSize=new my(t.x,t.y)}"Iphone_12Pro24"==e.name&&(e.visible=!1),e.material.side=2}}),this.scaledScreenSize=new my,this.croppedScreenSize=new my,this.videoSize=new my(this.$video.clientWidth,this.$video.clientHeight),this.videoAspect=this.videoSize.x/this.videoSize.y,this.scaledVideoSize=new my,this.fillScreen=1,this.minMaxRatio=1}set ndcX(e){this.position.x=.5*e*this.resolution.x}set ndcY(e){this.position.y=.5*e*this.resolution.y}set rX(e){this.rotation.x=e}set rY(e){this.rotation.y=e}set rZ(e){this.rotation.z=e}set videoFade(e){this.screenMaterial.uniforms.fadeIn.value=e}update(){const e=this.resolution.x/this.screenSize.x,t=this.resolution.y/this.screenSize.y,n=$C(Math.min(e,t),Math.max(e,t),this.minMaxRatio)*this.fillScreen;this.scaledScreenSize.copy(this.screenSize).multiplyScalar(n),this.croppedScreenSize.x=this.scaledScreenSize.x,this.croppedScreenSize.y=this.scaledScreenSize.y,this.scaledVideoSize.copy(this.croppedScreenSize);const i=this.croppedScreenSize.x/this.croppedScreenSize.y/this.videoAspect;i>1?this.scaledVideoSize.x/=i:this.scaledVideoSize.y*=i,this.fullscreenCorrection.copy(this.scaledScreenSize).divide(this.scaledVideoSize).multiplyScalar(1.065),this.screenMaterial.update(this.fullscreenCorrection),this.scale.setScalar(n)}updateResolution(e){this.resolution=e}}var KC=[{progress:0,"phone.videoFade":0,"phone.fillScreen":1,"phone.minMaxRatio":1,"phone.ndcX":0},{progress:.5,"phone.videoFade":0},{progress:.73,"phone.videoFade":1},{progress:1,"phone.fillScreen":.75,"phone.minMaxRatio":0,"phone.ndcX":0,"phone.ndcY":0,"phone.rX":0,"phone.rY":0,"phone.rZ":0},{progress:2,"phone.fillScreen":.65,"phone.ndcX":.45,"phone.ndcY":0,"phone.rX":-.61,"phone.rY":-.4385,"phone.rZ":-.35},{progress:3,"phone.fillScreen":.55,"phone.ndcX":-.3,"phone.ndcY":-.25,"phone.rX":-.61,"phone.rY":.4385,"phone.rZ":.35},{progress:3.5,"phone.rX":0,"phone.rY":0,"phone.rZ":0},{progress:4,"phone.ndcY":2,"phone.rX":0,"phone.rY":0,"phone.rZ":0}];class eA{constructor(e){this._entities=e,this._parametersValues=this._compileKeyframes(KC),this._parametersKeys=Object.keys(this._parametersValues),this._prevValues={},this._parametersKeys.forEach(e=>this._prevValues[e]=void 0)}_compileKeyframes(e){const t={};return e.forEach(e=>{let{progress:n}=e;Object.keys(e).forEach(i=>{"progress"!==i&&(t.hasOwnProperty(i)||(t[i]=[]),t[i].push({progress:n,value:e[i]}))})}),t}_ease(e,t,n){const i=(e-t)/(n-t),r=1-i;return i<.5?2*i*i:1-2*r*r}_getParameterValue(e,t){let n,i,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;const s=this._parametersValues[e],a=s.length;for(let l=0;l<a;l++){const e=s[l];e.progress>r&&e.progress<=t&&(r=e.progress,n=e.value),e.progress<=o&&e.progress>t&&(o=e.progress,i=e.value)}return r===Number.NEGATIVE_INFINITY?i:o===Number.POSITIVE_INFINITY||"volatile"===i||"volatile"===n||"boolean"==typeof n?n:$C(n,i,this._ease(t,r,o))}setProgress(e){for(let t=0;t<this._parametersKeys.length;t++){const n=this._parametersKeys[t],i=this._getParameterValue(n,e);if(i!==this._prevValues[n]&&"volatile"!==i){const e=n.split(".");let t,r=this._entities;for(t=0;t<e.length-1;t++)r=r[e[t]];r[e[t]]=i}this._prevValues[n]=i}}}class tA{constructor(e){this.manager=new eA(e)}setProgress(e){this.manager.setProgress(e)}}class nA{constructor(){this.FOV=15,this.dPosition={x:0,y:0}}load(e){return(new GC).loadAsync(e.phoneFBX).then(e=>this.phoneFBX=e)}create(e,t){this.container=e,this.resolution={x:e.clientWidth,y:e.clientHeight},this.renderer=new aS({antialias:!0,alpha:!0}),this.renderer.setSize(this.resolution.x,this.resolution.y),e.appendChild(this.renderer.domElement),this.scene=new lS,this.phone=new QC(this.phoneFBX,t,this.resolution),this.scene.add(this.phone);const n=new aT(16777215,1,5e3,2);n.position.set(-2e3,-1e3,1),this.scene.add(n),this.camera=new Gb(this.FOV,this.resolution.x/this.resolution.y,1,1e4),this.updateCamPosition(),this.scenario=new tA({phone:this.phone})}update(e,t){this.phone.position.x-=this.dPosition.x,this.phone.position.y-=this.dPosition.y,this.phone.update(),this.dPosition.x=(t.x/this.resolution.x-.5)*this.resolution.x*.025,this.dPosition.y=(.5-t.y/this.resolution.y)*this.resolution.y*.025,this.phone.position.x+=this.dPosition.x,this.phone.position.y+=this.dPosition.y}setProgress(e){this.scenario.setProgress(e)}render(){this.renderer.render(this.scene,this.camera)}updateCamPosition(){this.camera.position.z=.5*this.resolution.y/Math.tan(this.FOV/180*Math.PI*.5),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix()}onResize(){this.resolution.x=this.container.clientWidth,this.resolution.y=this.container.clientHeight,this.updateCamPosition(),this.phone.updateResolution(this.resolution)}}let iA=(()=>{class e{constructor(){this.link=new Bc(null)}getLink(){return this.link}setLink(e){this.link.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const rA=["app_store"],oA=["container"];let sA=(()=>{class e{constructor(){this.blackHover=!1}ngOnInit(){}ngAfterViewInit(){if(window.innerWidth>560){Rv.set(this.element.nativeElement,{xPercent:-50,yPercent:-50});const e=this.container.nativeElement,t=this.element.nativeElement;let n={x:e.offsetWidth/2,y:e.offsetHeight/2},i={x:n.x,y:n.y};const r=.1;let o=Rv.quickSetter(t,"x","px"),s=Rv.quickSetter(t,"y","px");e.addEventListener("mousemove",t=>{i.x=e.offsetWidth/2+(t.offsetX-e.offsetWidth/2)/3,i.y=e.offsetHeight/2+(t.offsetY-e.offsetHeight/2)/3}),e.addEventListener("mouseout",t=>{i.x=e.offsetWidth/2,i.y=e.offsetHeight/2}),Rv.ticker.add(()=>{var e=1-Math.pow(1-r,Rv.ticker.deltaRatio());n.x+=(i.x-n.x)*e,n.y+=(i.y-n.y)*e,o(n.x),s(n.y)}),window.addEventListener("resize",()=>{n={x:e.offsetWidth/2,y:e.offsetHeight/2},i={x:n.x,y:n.y}})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-app-store"]],viewQuery:function(e,t){var n;1&e&&(Oa(rA,!0),Oa(oA,!0)),2&e&&(Pa(n=ka())&&(t.element=n.first),Pa(n=ka())&&(t.container=n.first))},inputs:{blackHover:"blackHover"},decls:10,vars:2,consts:[["href","https://apps.apple.com/app/apple-store/id1494435397?mt=8","target","_blank",1,"app-store"],["container",""],["height","50","viewBox","0 0 143 50","width","143","xmlns","http://www.w3.org/2000/svg",1,"app-store__img"],["app_store",""],["fill","none","fill-rule","evenodd"],["fill","#fff","height","50","rx","22","width","143",1,"app-store__bg"],["fill","#000","fill-rule","nonzero","transform","translate(21 13)",1,"app-store__content"],["d","m32.3307026 18.70265h-4.7334l-1.13672 3.35645h-2.00488l4.4834-12.418h2.083l4.4834 12.418h-2.03907zm-4.24317-1.54883h3.752l-1.84961-5.44727h-.05176zm17.10059.37891c0 2.81348-1.50586 4.62109-3.77832 4.62109-1.1746148.0614446-2.2810376-.5537893-2.84863-1.584h-.043v4.48438h-1.8584v-12.04882h1.79886v1.50586h.03418c.5928083-1.0237521 1.7004242-1.6387212 2.88281-1.60059 2.29781.00001 3.8125 1.81641 3.8125 4.62208zm-1.91016 0c0-1.833-.94727-3.03809-2.39258-3.03809-1.41992 0-2.375 1.23047-2.375 3.03809 0 1.82422.95508 3.0459 2.375 3.0459 1.44532 0 2.39258-1.19629 2.39258-3.0459zm11.875 0c0 2.81348-1.50586 4.62109-3.77832 4.62109-1.1746148.0614446-2.2810376-.5537893-2.84863-1.584h-.043v4.48438h-1.8584v-12.04882h1.79882v1.50586h.03418c.5928126-1.0237515 1.7004328-1.6387169 2.88282-1.60058 2.29788 0 3.81253 1.8164 3.81253 4.62207zm-1.91015 0c0-1.833-.94728-3.03809-2.39259-3.03809-1.41992 0-2.375 1.23047-2.375 3.03809 0 1.82422.95508 3.0459 2.375 3.0459 1.44532 0 2.39259-1.19629 2.39259-3.0459zm8.49609 1.0664c.1377 1.23145 1.334 2.04 2.96875 2.04 1.56641 0 2.69336-.80859 2.69336-1.91895 0-.96387-.67969-1.541-2.28906-1.93652l-1.60937-.3877c-2.28027-.55078-3.33887-1.61719-3.33887-3.34766 0-2.14258 1.86719-3.61426 4.51855-3.61426 2.624 0 4.42285 1.47168 4.4834 3.61426h-1.876c-.1123-1.23926-1.13672-1.9873-2.63379-1.9873s-2.52148.75684-2.52148 1.8584c0 .87793.6543 1.39453 2.25488 1.79l1.36816.33594c2.54785.60254 3.60645 1.626 3.60645 3.44238 0 2.32324-1.85059 3.77832-4.79395 3.77832-2.75391 0-4.61328-1.4209-4.7334-3.667zm11.63574-7.73633v2.14258h1.72168v1.47168h-1.72168v4.99121c0 .77539.34473 1.13672 1.10156 1.13672.2043914-.0035641.4084521-.0179174.61133-.043v1.46289c-.3402717.0635796-.6861292.0923745-1.03223.08594-1.833 0-2.54785-.68848-2.54785-2.44434v-5.18942h-1.3164v-1.47168h1.31638v-2.14258zm2.71879 6.66993c0-2.84863 1.67773-4.63867 4.29395-4.63867 2.625 0 4.29492 1.79 4.29492 4.63867 0 2.85645-1.66113 4.63867-4.29492 4.63867-2.63286 0-4.29395-1.78223-4.29395-4.63867zm6.69531 0c0-1.9541-.89551-3.10742-2.40137-3.10742s-2.40039 1.16211-2.40039 3.10742c0 1.96191.89453 3.10645 2.40039 3.10645s2.40137-1.14454 2.40137-3.10645zm3.42574-4.52735h1.77247v1.541h.043c.247176-.9920116 1.1561325-1.6747484 2.17773-1.63574.214164-.0007478.4277371.0225107.63672.06934v1.73828c-.2703691-.0826167-.5524104-.1205487-.835-.1123-.5463518-.0221646-1.0750991.1955747-1.4474086.596046-.3723094.4004712-.5509849.9436647-.4891114 1.486954v5.37012h-1.8584zm13.19825 6.39453c-.25 1.64355-1.85059 2.77148-3.89844 2.77148-2.63379 0-4.26855-1.76465-4.26855-4.5957 0-2.83984 1.64355-4.68164 4.19043-4.68164 2.50488 0 4.08008 1.7207 4.08008 4.46582v.63672h-6.39453v.1123c-.0597026.6740316.1730415 1.3412294.6390299 1.8318799.4659883.4906505 1.1203076.7574634 1.7965201.7325701.9018422.0844996 1.752103-.4333623 2.09082-1.27344zm-6.2822376-2.70214h4.5263776c.0337254-.6056725-.1867435-1.1979469-.60829-1.6341385-.4215465-.4361915-1.0059492-.6767511-1.61241-.6637215-.6112583-.0036478-1.1986493.2370246-1.6316145.6685232-.4329652.4314987-.6756293 1.0180697-.6740631 1.6293368z"],["d","m27.8546226.294c.7889465-.05661582 1.5617022.24354743 2.1055712.81787182.5438691.57432439.8015246 1.36227297.7020488 2.14696818 0 1.90625-1.03027 3.002-2.80762 3.002h-2.15527v-5.96684zm-1.22852 5.123h1.125c.5638219.03370201 1.1128165-.18844099 1.4945485-.60474821s.5555611-.98245737.4732215-1.54125179c.076349-.55647547-.0999835-1.11795378-.480769-1.53086602-.3807855-.41291223-.9261754-.63404768-1.487001-.60292398h-1.125zm5.08301-1.40966c-.0772129-.80711495.3098036-1.58822807.9987359-2.01574263.6889323-.42751457 1.5606659-.42751457 2.2495981 0 .6889323.42751456 1.0759488 1.20862768.998736 2.01574263.0786819.80798226-.3079814 1.59061038-.9975245 2.0190453s-1.562478.42843492-2.2520211 0-1.0762064-1.21106304-.9975244-2.0190453zm3.33301 0c0-.97607-.43849-1.54687-1.20801-1.54687-.77246 0-1.207.5708-1.207 1.54688 0 .98389.43457 1.55029 1.207 1.55029.76954 0 1.20801-.57032 1.20801-1.5503zm6.55957 2.25341h-.92187l-.93066-3.31641h-.07031l-.92676 3.31641h-.91309l-1.24121-4.50293h.90137l.80664 3.436h.06641l.92578-3.436h.85254l.92578 3.436h.07031l.80273-3.436h.88867zm2.28027-4.50293h.85547v.71533h.06641c.2309348-.52667206.7705628-.84884253 1.34375-.80225.4438168-.03336823.8787258.1368899 1.1819307.46270207s.4418023.77182169.3766593 1.21209793v2.915h-.88867v-2.69184c0-.72363-.31445-1.0835-.97168-1.0835-.3010342-.01402088-.5931799.10412257-.7998454.32345678-.2066656.21933422-.3072396.51798423-.2753546.81765322v2.63428h-.88867zm5.24024-1.75782h.88867v6.26074h-.88867zm2.12402 4.00734c-.0771536-.80716775.309924-1.58830064.9989074-2.0158218.6889833-.42752116 1.5607618-.42752116 2.2497452 0s1.0760609 1.20865405.9989074 2.0158218c.078582.80801119-.3081522 1.59061719-.9977295 2.01903324s-1.5625237.42841605-2.2521011 0c-.6895773-.42841605-1.0763114-1.21102205-.9977294-2.01903324zm3.33301 0c0-.97607-.43849-1.54687-1.20801-1.54687-.77246 0-1.207.5708-1.207 1.54688 0 .98389.43457 1.55029 1.207 1.55029.76953 0 1.20801-.57032 1.20801-1.5503zm1.8501.97998c0-.81055.60352-1.27783 1.6748-1.34424l1.21973-.07031v-.38867c0-.47559-.31445-.74414-.92187-.74414-.49609 0-.83984.18213-.93848.50049h-.86035c.09082-.77344.81836-1.26953 1.83984-1.26953 1.12891 0 1.76563.562 1.76563 1.51318v3.07666h-.85547v-.63281h-.07031c-.2905514.46212633-.8072464.73221323-1.35254.707-.3822639.03976181-.7635089-.08403934-1.0494842-.34079756-.2859754-.25675821-.4499898-.62250913-.4514958-1.00683244zm2.89453-.38477v-.37646l-1.09961.07031c-.62012.0415-.90137.25244-.90137.64941 0 .40527.35156.64111.835.64111.286186.02896986.5718763-.05944495.7916703-.24500441s.3548713-.45237453.3743097-.73936559zm2.05273-.59521c0-1.42285.73145-2.32422 1.86914-2.32422.5744767-.02646987 1.1125275.28135287 1.38086.79h.06641v-2.47312h.88867v6.26074h-.85156v-.71143h-.07031c-.2886159.50442698-.8332955.80704648-1.41406.78564-1.14551.00005-1.86915-.90134-1.86915-2.32761zm.918 0c0 .95508.4502 1.52979 1.20313 1.52979.749 0 1.21191-.583 1.21191-1.52588 0-.93848-.46777-1.52979-1.21191-1.52979-.74808 0-1.20316.57861-1.20316 1.52588zm6.96384 0c-.0772129-.80711495.3098036-1.58822807.9987359-2.01574263.6889323-.42751457 1.5606659-.42751457 2.2495981 0 .6889323.42751456 1.0759488 1.20862768.998736 2.01574263.0786819.80798226-.3079814 1.59061038-.9975245 2.0190453s-1.562478.42843492-2.2520211 0-1.0762064-1.21106304-.9975244-2.0190453zm3.333 0c0-.97607-.43848-1.54687-1.208-1.54687-.77246 0-1.207.5708-1.207 1.54688 0 .98389.43457 1.55029 1.207 1.55029.76953 0 1.208-.57032 1.208-1.5503zm2.10645-2.24952h.85547v.71533h.06641c.2309348-.52667206.7705628-.84884253 1.34375-.80225.4438168-.03336823.8787258.1368899 1.1819307.46270207s.4418023.77182169.3766593 1.21209793v2.915h-.88867v-2.69184c0-.72363-.31445-1.0835-.97168-1.0835-.3010342-.01402088-.5931799.10412257-.7998454.32345678-.2066656.21933422-.3072396.51798423-.2753546.81765322v2.63428h-.88867zm8.84571-1.12109v1.1416h.97559v.74854h-.97559v2.31543c0 .47168.19434.67822.63672.67822.1132555-.00036246.2263974-.00721034.33887-.02051v.74023c-.1595905.02855072-.3212844.04374004-.4834.04541-.98828 0-1.38184-.34766-1.38184-1.21582v-2.543h-.71484v-.74854h.71484v-1.14156zm2.18945-.63673h.88086v2.48145h.07031c.2420277-.53128144.7911001-.85386246 1.373-.80664.4412966-.02401272.8703183.14999371 1.1702092.47462385.299891.32463014.4394157.76607179.3805708 1.20408615v2.90723h-.88956v-2.688c0-.71924-.335-1.0835-.96289-1.0835-.3091711-.02535633-.6137709.08704096-.8323677.3071435-.2185968.22010255-.3289004.52546681-.3014223.8344565v2.6299h-.88867zm9.05664 5.04493c-.249193.84937948-1.0711511 1.39817304-1.95117 1.30273-.6004361.0158502-1.1774886-.2330293-1.5780518-.68060484-.4005632-.44757553-.5841418-1.04859922-.5020282-1.64360516-.0799327-.59665952.1029582-1.19864627.5012908-1.65000304.3983326-.45135678.9729112-.70767021 1.5748792-.70253696 1.25293 0 2.00879.856 2.00879 2.27v.31009h-3.17969v.0498c-.028138.33414014.0859807.66464775.3142907.9102407.2283101.24559295.5496271.38348322.8849293.3797593.4347718.05219468.8579925-.16346696 1.07129-.5459zm-3.126-1.45117h2.27441c.0226529-.30559956-.0848016-.60655493-.2958831-.82870091s-.5061594-.34482286-.8125169-.33779909c-.310508-.00390109-.6094321.11776124-.8289637.33738888-.2195316.21962765-.3410632.51860486-.3370263.82911112z"],["d","m14.7973126 11.86368c.021857-1.6964709.9112429-3.26349389 2.35656-4.15206-.9159274-1.30810723-2.395048-2.10774165-3.99116-2.15768-1.67924-.17626-3.30719004 1.00483-4.16290004 1.00483-.87227 0-2.18977-.98733-3.6085-.95814-1.86667874.06030842-3.56474283 1.09589548-4.47292 2.72787-1.934 3.34842-.49141 8.26947 1.3612 10.97608.9269 1.32535 2.01018 2.8058 3.42763 2.7533 1.38706-.05753 1.9051-.88448 3.5794-.88448 1.65876004 0 2.14479004.88448 3.59100004.8511 1.48838-.02416 2.42613-1.33124 3.32051-2.66914.6659761-.9443603 1.1784436-1.9880841 1.51842-3.09251-1.7677435-.7476687-2.9171768-2.4798157-2.91924-4.39917zm-2.73163-8.08979c.8115266-.97420809 1.2113349-2.22638755 1.11452-3.49062-1.2398322.13022049-2.3850898.72277968-3.20758004 1.65961-.81217128.92430903-1.22361537 2.13355268-1.14371 3.36139 1.25645684.01293677 2.44943614-.55111678 3.23677004-1.53038z"]],template:function(e,t){1&e&&(Qo(0,"a",0,1),Zt.lFrame.currentNamespace=Rt,Qo(2,"svg",2,3),Qo(4,"g",4),es(5,"rect",5),Qo(6,"g",6),es(7,"path",7),es(8,"path",8),es(9,"path",9),Ko(),Ko(),Ko(),Ko()),2&e&&ps("app-store--black-hover",t.blackHover)},styles:[".app-store[_ngcontent-%COMP%]{display:inline-block;position:relative}.app-store__img[_ngcontent-%COMP%]{height:3.125rem;width:auto;pointer-events:none}.app-store__bg[_ngcontent-%COMP%]{fill:#fff;transition:.2s ease-in-out}.app-store[_ngcontent-%COMP%]:hover   .app-store__bg[_ngcontent-%COMP%]{fill:#eb3340}.app-store__content[_ngcontent-%COMP%]{fill:#000;transition:.2s ease-in-out}.app-store[_ngcontent-%COMP%]:hover   .app-store__content[_ngcontent-%COMP%]{fill:#fff}.app-store--black-hover[_ngcontent-%COMP%]:hover   .app-store__bg[_ngcontent-%COMP%]{fill:#000}"]}),e})();const aA=["containers"],lA=["elements"];function cA(e,t){if(1&e&&(Qo(0,"li",2),Qo(1,"a",3,4),Qo(3,"div",5,6),es(5,"span",7),Ko(),Ko(),Ko()),2&e){const e=t.$implicit;ir(1),Jo("href",e.link,Ui)("title",e.name),ir(4),Jo("ngClass","icon-"+e.name)}}let uA=(()=>{class e{constructor(){this.color="",this.containers=new ba,this.elements=new ba,this.socialArray=[{name:"facebook",link:"https://www.facebook.com/Presence-100164628403132/"},{name:"instagram",link:"https://www.instagram.com/presence.fit/"}]}ngOnInit(){}ngAfterViewInit(){if(window.innerWidth>560)for(let e=0;e<this.elements.toArray().length;e++){Rv.set(this.elements.toArray()[e].nativeElement,{xPercent:-50,yPercent:-50});let t=this.containers.toArray()[e].nativeElement,n=this.elements.toArray()[e].nativeElement,i={x:t.offsetWidth/2,y:t.offsetHeight/2},r={x:i.x,y:i.y},o=.1,s=Rv.quickSetter(n,"x","px"),a=Rv.quickSetter(n,"y","px");t.addEventListener("mousemove",e=>{r.x=t.offsetWidth/2+(e.offsetX-t.offsetWidth/2)/3,r.y=t.offsetHeight/2+(e.offsetY-t.offsetHeight/2)/3}),t.addEventListener("mouseout",e=>{r.x=t.offsetWidth/2,r.y=t.offsetHeight/2}),Rv.ticker.add(()=>{var e=1-Math.pow(1-o,Rv.ticker.deltaRatio());i.x+=(r.x-i.x)*e,i.y+=(r.y-i.y)*e,s(i.x),a(i.y)}),window.addEventListener("resize",()=>{i={x:t.offsetWidth/2,y:t.offsetHeight/2},r={x:i.x,y:i.y}})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-social-buttons"]],viewQuery:function(e,t){var n;1&e&&(Oa(aA,!0),Oa(lA,!0)),2&e&&(Pa(n=ka())&&(t.containers=n),Pa(n=ka())&&(t.elements=n))},inputs:{color:"color"},decls:2,vars:1,consts:[[1,"social-buttons"],["class","social-buttons__item",4,"ngFor","ngForOf"],[1,"social-buttons__item"],["target","_blank",1,"social-buttons__link",3,"href","title"],["containers",""],[1,"social-buttons__link-block"],["elements",""],[1,"social-buttons__icon",3,"ngClass"]],template:function(e,t){1&e&&(Qo(0,"ul",0),Xo(1,cA,6,3,"li",1),Ko()),2&e&&(ir(1),Jo("ngForOf",t.socialArray))},directives:[ic,tc],styles:[".social-buttons[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0;padding:0}.social-buttons__item[_ngcontent-%COMP%] + .social-buttons__item[_ngcontent-%COMP%]{margin-left:.625rem}.social-buttons__link[_ngcontent-%COMP%]{display:block;position:relative}.social-buttons__link-block[_ngcontent-%COMP%]{width:3.125rem;height:3.125rem;display:flex;align-items:center;justify-content:center;border-radius:44%;font-size:.875rem;color:#fff;background-color:hsla(0,0%,100%,.1);transition:background-color .2s ease-in-out;position:relative;pointer-events:none}.social-buttons__link[_ngcontent-%COMP%]:hover   .social-buttons__link-block[_ngcontent-%COMP%]{background-color:#eb3340}.social-buttons__icon[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);transition:.2s ease-in-out}"]}),e})();const hA=["header"],dA=["point"],pA=["qr_modal"],fA=["qr_close"],mA=["nav_item"];function gA(e,t){if(1&e&&(ts(0),Qo(1,"li",39,40),Qo(3,"a",41),_s(4),Ko(),Ko(),ns()),2&e){const e=t.$implicit,n=t.index,i=ls();ir(3),ps("navigation__link--active",n==i.activeIndex),Jo("routerLink","/")("fragment",e.link),ir(1),bs(e.name)}}function vA(e,t){if(1&e){const e=is();ts(0),Qo(1,"li",25,40),Qo(3,"a",42),os("click",(function(){return Kt(e),ls().closeMenu()})),_s(4),Ko(),Ko(),ns()}if(2&e){const e=t.$implicit,n=t.index,i=ls();ir(3),ps("mobile-menu__link--active",n==i.activeIndex),Jo("routerLink","/")("fragment",e.link),ir(1),bs(e.name)}}const yA=function(){return["/about"]},_A=function(){return["/faqs"]};let bA=(()=>{class e{constructor(e,t,n,i){this.cd=e,this.location=t,this.router=n,this.pagesService=i,this.startAnimation=!1,this.bg=!1,this.activeIndex=null,this.navItems=new ba,this.animationStarted=!1,this.prevActiveIndex=null,this.menuOpened=!1,this.anchors=[{link:"home",name:"Home"},{link:"digital",name:"Digital studio"},{link:"class-types",name:"Class types"},{link:"ai",name:"AI"},{link:"live-coaching",name:"Live Coaching"},{link:"train-anywhere",name:"Train Anywhere"},{link:"unlimited-classes",name:"Unlimited Classes"}],this.qr=!1,this.url=null,this.logoImage="/assets/images/logo.svg"}ngOnInit(){this.url=this.router.url,this.location.onUrlChange(e=>{this.url=e,this.cd.detectChanges()}),window.innerWidth<=560&&this.bg&&(this.logoImage="/assets/images/logo-white.svg")}ngAfterViewInit(){setTimeout(()=>{if(null!==this.activeIndex){let e=this.navItems.toArray()[this.activeIndex].nativeElement.offsetLeft,t=this.navItems.toArray()[this.activeIndex].nativeElement.offsetWidth;Rv.set(this.point.nativeElement,{display:"block",x:e+t/2})}else Rv.set(this.point.nativeElement,{display:"none"})},500),this.modalCursor()}ngOnChanges(e){if(this.startAnimation&&"false"!=sessionStorage.getItem("preloader3")&&!this.animationStarted&&(this.initAnimation(),this.animationStarted=!0,sessionStorage.setItem("preloader3","false")),e.activeIndex&&this.navItems.toArray().length&&this.activeIndex!==this.prevActiveIndex){if(null!==this.activeIndex){let e=this.navItems.toArray()[this.activeIndex].nativeElement.offsetLeft,t=this.navItems.toArray()[this.activeIndex].nativeElement.offsetWidth;Rv.to(this.point.nativeElement,{display:"block",x:e+t/2,duration:.5,ease:"power1.inOut"})}else Rv.set(this.point.nativeElement,{display:"none"});this.prevActiveIndex=this.activeIndex}}modalCursor(){let e=this.qrCloseButton.nativeElement,t={x:window.innerWidth/2,y:window.innerHeight/2},n={x:t.x,y:t.y};Rv.set(e,{xPercent:-50,yPercent:-50});let i=Rv.quickSetter(e,"x","px"),r=Rv.quickSetter(e,"y","px");window.addEventListener("mousemove",e=>{n.x=e.x,n.y=e.y}),Rv.ticker.add(()=>{let e=1-Math.pow(.5,Rv.ticker.deltaRatio());t.x+=(n.x-t.x)*e,t.y+=(n.y-t.y)*e,i(t.x),r(t.y)})}initAnimation(){Rv.from(this.header.nativeElement,{y:window.innerHeight,ease:"power1.inOut",duration:1.5})}qrOpen(){this.qr=!0,this.cd.detectChanges(),document.querySelector("body").style.overflow="hidden"}qrClose(){this.qr=!1,this.cd.detectChanges(),document.querySelector("body").style.overflow="visible"}openMenu(){this.menuOpened=!0,this.cd.detectChanges()}closeMenu(){this.menuOpened=!1,this.cd.detectChanges()}openPage(e){"/about"==this.router.url||"/faqs"==this.router.url?this.pagesService.setLink(e):this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(Yo(wo),Yo(Zl),Yo(Jd),Yo(iA))},e.\u0275cmp=lt({type:e,selectors:[["app-header"]],viewQuery:function(e,t){var n;1&e&&(Oa(hA,!0),Oa(dA,!0),Oa(pA,!0),Oa(fA,!0),Oa(mA,!0)),2&e&&(Pa(n=ka())&&(t.header=n.first),Pa(n=ka())&&(t.point=n.first),Pa(n=ka())&&(t.qrModal=n.first),Pa(n=ka())&&(t.qrCloseButton=n.first),Pa(n=ka())&&(t.navItems=n))},inputs:{startAnimation:"startAnimation",bg:"bg",activeIndex:"activeIndex"},features:[At],decls:53,vars:17,consts:[[1,"header"],["header",""],[1,"header__container"],[1,"header__item","header__item--logo"],["routerLink","/"],["alt","Presence Logo",1,"header__logo",3,"src"],[1,"header__item","header__item--link"],[1,"header__link",3,"click"],[1,"header__item","header__item--navigation"],[1,"navigation"],[4,"ngFor","ngForOf"],[1,"header__point"],["point",""],["href","https://apps.apple.com/app/apple-store/id1494435397?mt=8","target","_blank",1,"header__link"],[1,"header__item","header__item--qr"],[1,"header__qr-link",3,"click"],["src","/assets/images/base/qr.png","alt","QR code",1,"header__qr"],[1,"header__burger-block"],["type","button",1,"header__burger",3,"click"],[1,"mobile-menu"],[1,"mobile-menu__header"],["type","button",1,"mobile-menu__close",3,"click"],[1,"icon-close"],[1,"mobile-menu__main"],[1,"mobile-menu__links"],[1,"mobile-menu__item"],["routerLinkActive","mobile-menu__link--active",1,"mobile-menu__link",3,"routerLink","click"],[1,"mobile-menu__app-store"],[1,"mobile-menu__footer"],[1,"qr",3,"click"],["qr_modal",""],[1,"qr__link"],["src","/assets/images/base/qr.png","alt","QR code",1,"qr__link-img"],[1,"qr__bg"],[1,"qr__image"],["srcset","/assets/images/qr/image@2x.webp","type","image/webp"],["src","/assets/images/qr/image@2x.png","alt",""],[1,"qr__close"],["qr_close",""],[1,"navigation__item"],["nav_item",""],[1,"navigation__link",3,"routerLink","fragment"],[1,"mobile-menu__link",3,"routerLink","fragment","click"]],template:function(e,t){1&e&&(Qo(0,"header",0,1),Qo(2,"div",2),Qo(3,"div",3),Qo(4,"a",4),es(5,"img",5),Ko(),Ko(),Qo(6,"div",6),Qo(7,"a",7),os("click",(function(){return t.openPage("/about")})),_s(8," About "),Ko(),Ko(),Qo(9,"div",6),Qo(10,"a",7),os("click",(function(){return t.openPage("/faqs")})),_s(11," FAQs "),Ko(),Ko(),Qo(12,"div",8),Qo(13,"ul",9),Xo(14,gA,5,5,"ng-container",10),Ko(),es(15,"div",11,12),Ko(),Qo(17,"div",6),Qo(18,"a",13),_s(19," FREE TRIAL "),Ko(),Ko(),Qo(20,"div",14),Qo(21,"a",15),os("click",(function(){return t.qrOpen()})),es(22,"img",16),Ko(),Ko(),Qo(23,"div",17),Qo(24,"button",18),os("click",(function(){return t.openMenu()})),Ko(),Ko(),Ko(),Ko(),Qo(25,"div",19),Qo(26,"div",20),Qo(27,"button",21),os("click",(function(){return t.closeMenu()})),es(28,"div",22),Ko(),Ko(),Qo(29,"div",23),Qo(30,"ul",24),Qo(31,"li",25),Qo(32,"a",26),os("click",(function(){return t.closeMenu()})),_s(33," About "),Ko(),Ko(),Qo(34,"li",25),Qo(35,"a",26),os("click",(function(){return t.closeMenu()})),_s(36," FAQs "),Ko(),Ko(),Xo(37,vA,5,5,"ng-container",10),Ko(),Qo(38,"div",27),es(39,"app-app-store"),Ko(),Qo(40,"div",28),es(41,"app-social-buttons"),Ko(),Ko(),Ko(),Qo(42,"div",29,30),os("click",(function(){return t.qrClose()})),Qo(44,"div",31),es(45,"img",32),Ko(),es(46,"div",33),Qo(47,"picture",34),es(48,"source",35),es(49,"img",36),Ko(),Qo(50,"button",37,38),es(52,"div",22),Ko(),Ko()),2&e&&(ps("header--bg",t.bg),ir(5),Jo("src",t.logoImage,Ui),ir(2),ps("header__link--active","/about"==t.url),ir(3),ps("header__link--active","/faqs"==t.url),ir(4),Jo("ngForOf",t.anchors),ir(11),ps("mobile-menu--active",t.menuOpened),ir(7),Jo("routerLink",va(15,yA)),ir(3),Jo("routerLink",va(16,_A)),ir(2),Jo("ngForOf",t.anchors),ir(5),ps("qr--active",t.qr))},directives:[Qd,ic,ep,sA,uA],styles:['@charset "UTF-8";.navigation__item[_ngcontent-%COMP%] + .navigation__item[_ngcontent-%COMP%]:before{font-family:icomoon!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.header[_ngcontent-%COMP%]{margin:1.25rem 0;position:fixed;left:0;top:0;right:0;z-index:10;border-top:1px solid hsla(0,0%,100%,.1);border-bottom:1px solid hsla(0,0%,100%,.1)}.header--bg[_ngcontent-%COMP%]{background-color:#000}.header__container[_ngcontent-%COMP%]{display:flex;max-width:1920px;margin:0 auto;position:relative}.header__item[_ngcontent-%COMP%]{min-height:3.0625rem;display:flex;align-items:center;justify-content:center;padding:.4375rem 1.875rem}.header__item--link[_ngcontent-%COMP%], .header__item--qr[_ngcontent-%COMP%]{padding:.125rem 0}.header__item[_ngcontent-%COMP%] + .header__item[_ngcontent-%COMP%]{border-left:1px solid hsla(0,0%,100%,.1)}.header__logo[_ngcontent-%COMP%]{width:7.375rem}.header__qr[_ngcontent-%COMP%]{width:1.5625rem;min-width:1.5625rem;height:1.5625rem}.header__link[_ngcontent-%COMP%]{display:block;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;color:#fff;font-size:.625rem;font-weight:700;line-height:1.3;text-transform:uppercase;transition:.2s ease-in-out;width:100%;height:100%;display:flex;align-items:center;padding:.3125rem 1.875rem;border-radius:.125rem;white-space:nowrap;cursor:pointer}.header__link[_ngcontent-%COMP%]:hover{background:#eb3340;color:#fff}.header__link--active[_ngcontent-%COMP%]{background:#eb3340}.header__link--active[_ngcontent-%COMP%]:hover{color:#fff}.header__item--navigation[_ngcontent-%COMP%]{flex:1}.header__qr-link[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;padding:.3125rem 1.875rem;border-radius:.125rem;cursor:pointer;transition:.2s ease-in-out}.header__qr-link[_ngcontent-%COMP%]:hover{background:#eb3340}.header__point[_ngcontent-%COMP%]{position:absolute;width:.5rem;height:.5rem;border-radius:50%;background-color:#eb3340;left:-.25rem;bottom:-.25rem;display:none}.header__burger-block[_ngcontent-%COMP%]{display:none}@media (max-width:1024px){.header[_ngcontent-%COMP%]{border-top:none;border-bottom:none;margin:10px 0}.header__container[_ngcontent-%COMP%]{display:flex;align-items:center}.header--bg[_ngcontent-%COMP%]{background-color:initial}.header__item[_ngcontent-%COMP%]{min-height:40px;padding:7px 20px;display:none}.header__item--logo[_ngcontent-%COMP%]{display:flex}.header__logo[_ngcontent-%COMP%]{width:118px;display:block}.header__burger-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:0 10px;flex:1}.header__burger[_ngcontent-%COMP%]{width:30px;height:30px;border:none;background:transparent;opacity:.58;position:relative}.header__burger[_ngcontent-%COMP%]:after, .header__burger[_ngcontent-%COMP%]:before{content:"";width:16px;height:2px;background:#fff;position:absolute;left:7px}.header__burger[_ngcontent-%COMP%]:before{top:10px}.header__burger[_ngcontent-%COMP%]:after{bottom:11px}}@media (max-width:560px){.header[_ngcontent-%COMP%]{margin:.625rem 0}.header__item[_ngcontent-%COMP%]{min-height:2.5rem;padding:.4375rem 1.25rem}.header__logo[_ngcontent-%COMP%]{width:7.375rem}.header__burger-block[_ngcontent-%COMP%]{padding:0 .625rem}.header__burger[_ngcontent-%COMP%]{width:1.875rem;height:1.875rem}.header__burger[_ngcontent-%COMP%]:after, .header__burger[_ngcontent-%COMP%]:before{width:1rem;height:.125rem;left:.4375rem}.header__burger[_ngcontent-%COMP%]:before{top:.625rem}.header__burger[_ngcontent-%COMP%]:after{bottom:.6875rem}}.navigation[_ngcontent-%COMP%]{display:flex;margin:0;padding:0}.navigation__item[_ngcontent-%COMP%]{list-style:none;margin:0;position:relative;display:flex;align-items:center}.navigation__item[_ngcontent-%COMP%] + .navigation__item[_ngcontent-%COMP%]{margin-left:1.5rem}.navigation__item[_ngcontent-%COMP%] + .navigation__item[_ngcontent-%COMP%]:before{content:"\ue900";display:block;color:#eb3340;width:1.5625rem;height:.375rem;position:absolute;right:100%;top:50%;text-align:center;font-size:.375rem;transform:translateY(-50%)}.navigation__link[_ngcontent-%COMP%]{opacity:.43;color:#fff;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.625rem;font-weight:500;line-height:1rem;text-align:left;text-transform:uppercase;transition:.2s ease-in-out;white-space:nowrap;display:inline-block}.navigation__link[_ngcontent-%COMP%]:hover{color:#eb3340}.navigation__link--active[_ngcontent-%COMP%]{font-weight:700;opacity:1}.mobile-menu[_ngcontent-%COMP%]{display:none}@media (max-width:1024px){.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;background:#000;display:none;flex-direction:column;padding:15px 0 0;z-index:20}.mobile-menu--active[_ngcontent-%COMP%]{display:flex}.mobile-menu__header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 20px 5px}.mobile-menu__close[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:11px;background-color:hsla(0,0%,84.7%,.1);display:flex;justify-content:center;align-items:center;border:none;font-size:13px;color:#9ba2ae}.mobile-menu__main[_ngcontent-%COMP%]{height:calc(100vh - 50px);padding:0 20px;overflow-y:auto;display:flex;flex-direction:column}.mobile-menu__links[_ngcontent-%COMP%]{list-style:none;padding:0 0 20px;margin:0;flex:1}.mobile-menu__item[_ngcontent-%COMP%]{margin-bottom:20px}.mobile-menu__link[_ngcontent-%COMP%]{color:#9ba2ae;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:12px;font-weight:700;line-height:26px;text-align:left;text-transform:uppercase;display:inline-block;position:relative}.mobile-menu__link--active[_ngcontent-%COMP%]{color:#fff}.mobile-menu__link--active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-24px;width:8px;height:8px;top:50%;transform:translateY(-50%);background:#eb3340;border-radius:50%}.mobile-menu__app-store[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:19px 0;border-top:1px solid hsla(0,0%,100%,.1);border-bottom:1px solid hsla(0,0%,100%,.1);margin-bottom:50px}.mobile-menu__footer[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:20px}}@media (max-width:560px){.mobile-menu[_ngcontent-%COMP%]{padding:.9375rem 0 0}.mobile-menu__header[_ngcontent-%COMP%]{padding:0 1.25rem .3125rem}.mobile-menu__close[_ngcontent-%COMP%]{width:1.875rem;height:1.875rem;border-radius:.6875rem;font-size:.8125rem}.mobile-menu__main[_ngcontent-%COMP%]{height:calc(100vh - 2.13vw);padding:0 1.25rem}.mobile-menu__links[_ngcontent-%COMP%]{padding:0 0 1.25rem}.mobile-menu__item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mobile-menu__link[_ngcontent-%COMP%]{font-size:.75rem;line-height:1.625rem}.mobile-menu__link--active[_ngcontent-%COMP%]:after{right:-1.5rem;width:.5rem;height:.5rem}.mobile-menu__app-store[_ngcontent-%COMP%]{padding:1.1875rem 0;border-top:1px solid hsla(0,0%,100%,.1);border-bottom:1px solid hsla(0,0%,100%,.1);margin-bottom:3.125rem}.mobile-menu__footer[_ngcontent-%COMP%]{padding-bottom:1.25rem}}.qr[_ngcontent-%COMP%]{z-index:20;position:fixed;top:-1000%;left:-1000%;width:100%;height:100%;display:flex;justify-content:center;align-items:center;cursor:none;pointer-events:all;transition:1s step-end}.qr--active[_ngcontent-%COMP%]{top:0;left:0;transition:none}.qr__link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.3125rem 1.875rem;height:2.9375rem;right:0;top:1.375rem;z-index:1;opacity:0}.qr__link[_ngcontent-%COMP%], .qr__link[_ngcontent-%COMP%]:before{border-radius:.125rem;position:absolute;transition:.5s ease-out}.qr__link[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;left:0;top:0;background-color:#eb3340;transform:scale(0)}.qr__link-img[_ngcontent-%COMP%]{position:relative;width:1.5625rem;height:1.5625rem}.qr--active[_ngcontent-%COMP%]   .qr__link[_ngcontent-%COMP%]{opacity:1}.qr--active[_ngcontent-%COMP%]   .qr__link[_ngcontent-%COMP%]:before{transform:scale(1)}.qr__bg[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0;background-color:rgba(0,0,0,.88);background-position:50%;background-repeat:no-repeat;background-size:cover;opacity:0;transition:opacity 1s ease-in-out}.qr--active[_ngcontent-%COMP%]   .qr__bg[_ngcontent-%COMP%]{opacity:1}.qr__image[_ngcontent-%COMP%]{position:relative;width:28.4375rem;transform:scale(0) rotate(-1turn);transition:1s ease-in}.qr--active[_ngcontent-%COMP%]   .qr__image[_ngcontent-%COMP%]{transform:scale(1) rotate(0deg);transition:1s ease-out}.qr__close[_ngcontent-%COMP%]{position:absolute;padding:0;background:transparent;border:2px solid #fff;width:3.75rem;height:3.75rem;border-radius:50%;color:#fff;font-size:.75rem;left:0;top:0;z-index:1;opacity:0;transition:opacity .75s ease-in-out;pointer-events:none}.qr--active[_ngcontent-%COMP%]   .qr__close[_ngcontent-%COMP%]{opacity:1;transition:opacity .25s ease-in-out .75s}']}),e})();var wA,xA,SA,MA,EA,TA,CA,AA,PA,OA,IA,kA,RA,NA,LA,DA,FA,UA,zA,HA,BA,jA,VA,WA,GA,qA=1,XA=[],YA=[],ZA=Date.now,JA=ZA(),$A=0,QA=1,KA=function(e){return e},eP=function(){return"undefined"!=typeof window},tP=function(){return wA||eP()&&(wA=window.gsap)&&wA.registerPlugin&&wA},nP=function(e){return!!~CA.indexOf(e)},iP=function(e,t){return~XA.indexOf(e)&&XA[XA.indexOf(e)+1][t]},rP=function(e,t){var n=t.s,i=t.sc,r=YA.indexOf(e),o=i===EP.sc?1:2;return!~r&&(r=YA.push(e)-1),YA[r+o]||(YA[r+o]=iP(e,n)||(nP(e)?i:function(t){return arguments.length?e[n]=t:e[n]}))},oP=function(e){return iP(e,"getBoundingClientRect")||(nP(e)?function(){return cO.width=SA.innerWidth,cO.height=SA.innerHeight,cO}:function(){return AP(e)})},sP=function(e,t){var n,i=t.d2,r=t.d,o=t.a;return(n="scroll"+i)&&(o=iP(e,n))?o()-oP(e)()[r]:nP(e)?Math.max(EA[n],TA[n])-(SA["inner"+i]||EA["client"+i]||TA["client"+i]):e[n]-e["offset"+i]},aP=function(e,t){for(var n=0;n<BA.length;n+=3)(!t||~t.indexOf(BA[n+1]))&&e(BA[n],BA[n+1],BA[n+2])},lP=function(e){return"string"==typeof e},cP=function(e){return"function"==typeof e},uP=function(e){return"number"==typeof e},hP=function(e){return"object"==typeof e},dP=function(e){return cP(e)&&e()},pP=function(e,t){return function(){var n=dP(e),i=dP(t);return function(){dP(n),dP(i)}}},fP=Math.abs,mP="left",gP="right",vP="bottom",yP="width",_P="height",bP="padding",wP="margin",xP="Width",SP="px",MP={s:"scrollLeft",p:mP,p2:"Left",os:gP,os2:"Right",d:yP,d2:xP,a:"x",sc:function(e){return arguments.length?SA.scrollTo(e,EP.sc()):SA.pageXOffset||MA.scrollLeft||EA.scrollLeft||TA.scrollLeft||0}},EP={s:"scrollTop",p:"top",p2:"Top",os:vP,os2:"Bottom",d:_P,d2:"Height",a:"y",op:MP,sc:function(e){return arguments.length?SA.scrollTo(MP.sc(),e):SA.pageYOffset||MA.scrollTop||EA.scrollTop||TA.scrollTop||0}},TP=function(e){return SA.getComputedStyle(e)},CP=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},AP=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==TP(e)[FA]&&wA.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return n&&n.progress(0).kill(),i},PP=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},OP=function(e,t,n,i){return n.split(",").forEach((function(n){return e(t,n,i)}))},IP=function(e,t,n){return e.addEventListener(t,n,{passive:!0})},kP=function(e,t,n){return e.removeEventListener(t,n)},RP={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},NP={toggleActions:"play",anticipatePin:0},LP={top:0,left:0,center:.5,bottom:1,right:1},DP=function(e,t){if(lP(e)){var n=e.indexOf("="),i=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;i&&(e.indexOf("%")>n&&(i*=t/100),e=e.substr(0,n-1)),e=i+(e in LP?LP[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},FP=function(e,t,n,i,r,o,s){var a=r.startColor,l=r.endColor,c=r.fontSize,u=r.indent,h=r.fontWeight,d=MA.createElement("div"),p=nP(n)||"fixed"===iP(n,"pinType"),f=-1!==e.indexOf("scroller"),m=p?TA:n,g=-1!==e.indexOf("start"),v=g?a:l,y="border-color:"+v+";font-size:"+c+";color:"+v+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return y+="position:"+(f&&p?"fixed;":"absolute;"),(f||!p)&&(y+=(i===EP?gP:vP)+":"+(o+parseFloat(u))+"px;"),s&&(y+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),d._isStart=g,d.setAttribute("class","gsap-marker-"+e),d.style.cssText=y,d.innerText=t||0===t?e+"-"+t:e,m.insertBefore(d,m.children[0]),d._offset=d["offset"+i.op.d2],UP(d,0,i,g),d},UP=function(e,t,n,i){var r={display:"block"},o=n[i?"os2":"p2"],s=n[i?"p2":"os2"];e._isFlipped=i,r[n.a+"Percent"]=i?-100:0,r[n.a]=i?1:0,r["border"+o+xP]=1,r["border"+s+xP]=0,r[n.p]=t,wA.set(e,r)},zP=[],HP={},BP=function(){return OA||(OA=PA(nO))},jP=function(){OA||(OA=PA(nO),$A||ZP("scrollStart"),$A=ZA())},VP=function(){return!LA&&AA.restart(!0)},WP={},GP=[],qP=[],XP=function(e){var t,n=wA.ticker.frame,i=[],r=0;if(GA!==n||qA){for(QP();r<qP.length;r+=4)(t=SA.matchMedia(qP[r]).matches)!==qP[r+3]&&(qP[r+3]=t,t?i.push(r):QP(1,qP[r])||cP(qP[r+2])&&qP[r+2]());for($P(),r=0;r<i.length;r++)WA=qP[t=i[r]],qP[t+2]=qP[t+1](e);WA=0,KP(0,1),GA=n,ZP("matchMedia")}},YP=function e(){return kP(fO,"scrollEnd",e)||KP(!0)},ZP=function(e){return WP[e]&&WP[e].map((function(e){return e()}))||GP},JP=[],$P=function(e){for(var t=0;t<JP.length;t+=4)e&&JP[t+3]!==e||(JP[t].style.cssText=JP[t+1],JP[t+2].uncache=1)},QP=function(e,t){var n;for(UA=0;UA<zP.length;UA++)n=zP[UA],t&&n.media!==t||(e?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));$P(t),t||ZP("revert")},KP=function(e,t){if(!$A||e){var n=ZP("refreshInit");for(jA&&fO.sort(),t||QP(),UA=0;UA<zP.length;UA++)zP[UA].refresh();for(n.forEach((function(e){return e&&e.render&&e.render(-1)})),UA=zP.length;UA--;)zP[UA].scroll.rec=0;AA.pause(),ZP("refresh")}else IP(fO,"scrollEnd",YP)},eO=0,tO=1,nO=function(){var e=zP.length,t=ZA(),n=t-JA>=50,i=e&&zP[0].scroll();if(tO=eO>i?-1:1,eO=i,n&&($A&&!DA&&t-$A>200&&($A=0,ZP("scrollEnd")),RA=JA,JA=t),tO<0){for(UA=e;UA--;)zP[UA]&&zP[UA].update(0,n);tO=1}else for(UA=0;UA<e;UA++)zP[UA]&&zP[UA].update(0,n);OA=0},iO=[mP,"top",vP,gP,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float"],rO=iO.concat([yP,_P,"boxSizing","maxWidth","maxHeight","position",wP,bP,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),oO=function(e,t,n,i){if(e.parentNode!==t){for(var r,o=iO.length,s=t.style,a=e.style;o--;)s[r=iO[o]]=n[r];s.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(s.display="inline-block"),a.bottom=a.right="auto",s.overflow="visible",s.boxSizing="border-box",s.width=PP(e,MP)+SP,s.height=PP(e,EP)+SP,s.padding=a.margin=a.top=a.left="0",aO(i),a.width=a.maxWidth=n.width,a.height=a.maxHeight=n.height,a.padding=n.padding,e.parentNode.insertBefore(t,e),t.appendChild(e)}},sO=/([A-Z])/g,aO=function(e){if(e)for(var t,n,i=e.t.style,r=e.length,o=0;o<r;o+=2)t=e[o],(n=e[o+1])?i[t]=n:i[t]&&i.removeProperty(t.replace(sO,"-$1").toLowerCase())},lO=function(e){for(var t=rO.length,n=e.style,i=[],r=0;r<t;r++)i.push(rO[r],n[rO[r]]);return i.t=e,i},cO={left:0,top:0},uO=function(e,t,n,i,r,o,s,a,l,c,u,h){if(cP(e)&&(e=e(a)),lP(e)&&"max"===e.substr(0,3)&&(e=h+("="===e.charAt(4)?DP("0"+e.substr(3),n):0)),uP(e))s&&UP(s,n,i,!0);else{cP(t)&&(t=t(a));var d,p,f,m=IA(t)[0]||TA,g=AP(m)||{},v=e.split(" ");g&&(g.left||g.top)||"none"!==TP(m).display||(f=m.style.display,m.style.display="block",g=AP(m),f?m.style.display=f:m.style.removeProperty("display")),d=DP(v[0],g[i.d]),p=DP(v[1]||"0",n),e=g[i.p]-l[i.p]-c+d+r-p,s&&UP(s,p,i,n-p<20||s._isStart&&p>20),n-=n-p}if(o){var y=e+n,_=o._isStart;h="scroll"+i.d2,UP(o,y,i,_&&y>20||!_&&(u?Math.max(TA[h],EA[h]):o.parentNode[h])<=y+1),u&&(l=AP(s),u&&(o.style[i.op.p]=l[i.op.p]-i.op.m-o._offset+SP))}return Math.round(e)},hO=/(?:webkit|moz|length|cssText)/i,dO=function(e,t,n,i){if(e.parentNode!==t){var r,o,s=e.style;if(t===TA){for(r in e._stOrig=s.cssText,o=TP(e))+r||hO.test(r)||!o[r]||"string"!=typeof s[r]||"0"===r||(s[r]=o[r]);s.top=n,s.left=i}else s.cssText=e._stOrig;wA.core.getCache(e).uncache=1,t.appendChild(e)}},pO=function(e,t){var n,i,r=rP(e,t),o="_scroll"+t.p2;return e[o]=r,function t(s,a,l,c,u){var h=t.tween,d=a.onComplete,p={};return h&&h.kill(),n=Math.round(l),a[o]=s,a.modifiers=p,p[o]=function(e){return(e=Math.round(r()))!==n&&e!==i?(h.kill(),t.tween=0):e=l+c*h.ratio+u*h.ratio*h.ratio,i=n,n=Math.round(e)},a.onComplete=function(){t.tween=0,d&&d.call(h)},h=t.tween=wA.to(e,a)}};MP.op=EP;var fO=function(){function e(t,n){xA||e.register(wA)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=0,this.vars&&this.kill(1),QA){var i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,_,b,w,x,S,M,E,T,C,A,P,O,I,k,R,N,L,D,F,U,z,H,B=(t=CP(lP(t)||uP(t)||t.nodeType?{trigger:t}:t,NP)).horizontal?MP:EP,j=t.onUpdate,V=t.toggleClass,W=t.id,G=t.onToggle,q=t.onRefresh,X=t.scrub,Y=t.trigger,Z=t.pin,J=t.pinSpacing,$=t.invalidateOnRefresh,Q=t.anticipatePin,K=t.onScrubComplete,ee=t.onSnapComplete,te=t.once,ne=t.snap,ie=t.pinReparent,re=!X&&0!==X,oe=IA(t.scroller||SA)[0],se=wA.core.getCache(oe),ae=nP(oe),le="pinType"in t?"fixed"===t.pinType:ae||"fixed"===iP(oe,"pinType"),ce=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],ue=re&&t.toggleActions.split(" "),he="markers"in t?t.markers:NP.markers,de=ae?0:parseFloat(TP(oe)["border"+B.p2+xP])||0,pe=this,fe=t.onRefreshInit&&function(){return t.onRefreshInit(pe)},me=function(e,t,n){var i=n.d,r=n.d2,o=n.a;return(o=iP(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(t?SA["inner"+r]:e["client"+r])||0}}(oe,ae,B),ge=function(e,t){return!t||~XA.indexOf(e)?oP(e):function(){return cO}}(oe,ae);pe.media=WA,Q*=45,zP.push(pe),pe.scroller=oe,pe.scroll=rP(oe,B),a=pe.scroll(),pe.vars=t,n=n||t.animation,"refreshPriority"in t&&(jA=1),se.tweenScroll=se.tweenScroll||{top:pO(oe,EP),left:pO(oe,MP)},pe.tweenTo=i=se.tweenScroll[B.p],n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.render(0,!0,!0),pe.animation=n.pause(),n.scrollTrigger=pe,(N=uP(X)&&X)&&(R=wA.to(n,{ease:"power3",duration:N,onComplete:function(){return K&&K(pe)}})),I=0,W||(W=n.vars.id)),ne&&(hP(ne)||(ne={snapTo:ne}),wA.set(ae?[TA,EA]:oe,{scrollBehavior:"auto"}),o=cP(ne.snapTo)?ne.snapTo:"labels"===ne.snapTo?function(e){return function(t){var n,i=[],r=e.labels,o=e.duration();for(n in r)i.push(r[n]/o);return wA.utils.snap(i,t)}}(n):wA.utils.snap(ne.snapTo),L=hP(L=ne.duration||{min:.1,max:2})?kA(L.min,L.max):kA(L,L),D=wA.delayedCall(ne.delay||N/2||.1,(function(){if(Math.abs(pe.getVelocity())<10&&!DA){var e=n&&!re?n.totalProgress():pe.progress,t=(e-k)/(ZA()-RA)*1e3||0,r=fP(t/2)*t/.185,s=e+r,a=kA(0,1,o(s,pe)),l=pe.scroll(),h=Math.round(c+a*g),d=i.tween;if(l<=u&&l>=c&&h!==l){if(d&&!d._initted&&d.data<=Math.abs(h-l))return;i(h,{duration:L(fP(.185*Math.max(fP(s-e),fP(a-e))/t/.05||0)),ease:ne.ease||"power3",data:Math.abs(h-l),onComplete:function(){I=k=n&&!re?n.totalProgress():pe.progress,ee&&ee(pe)}},l,r*g,h-l-r*g)}}else pe.isActive&&D.restart(!0)})).pause()),W&&(HP[W]=pe),Y=pe.trigger=IA(Y||Z)[0],Z=!0===Z?Y:IA(Z)[0],lP(V)&&(V={targets:Y,className:V}),Z&&(!1===J||J===wP||(J=!(!J&&"flex"===TP(Z.parentNode).display)&&bP),pe.pin=Z,!1!==t.force3D&&wA.set(Z,{force3D:!0}),(r=wA.core.getCache(Z)).spacer?v=r.pinState:(r.spacer=b=MA.createElement("div"),b.setAttribute("class","pin-spacer"+(W?" pin-spacer-"+W:"")),r.pinState=v=lO(Z)),pe.spacer=b=r.spacer,O=TP(Z),T=O[J+B.os2],x=wA.getProperty(Z),S=wA.quickSetter(Z,B.a,SP),oO(Z,b,O),_=lO(Z)),he&&(m=hP(he)?CP(he,RP):RP,p=FP("scroller-start",W,oe,B,m,0),f=FP("scroller-end",W,oe,B,m,0,p),h=FP("start",W,oe,B,m,w=p["offset"+B.op.d2]),d=FP("end",W,oe,B,m,w),le||((H=oe).style.position="absolute"===TP(H).position?"absolute":"relative",wA.set([p,f],{force3D:!0}),A=wA.quickSetter(p,B.a,SP),P=wA.quickSetter(f,B.a,SP))),pe.revert=function(e){var t=!1!==e||!pe.enabled,i=LA;t!==s&&(t&&(U=Math.max(pe.scroll(),pe.scroll.rec||0),F=pe.progress,z=n&&n.progress()),h&&[h,d,p,f].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(LA=1),pe.update(t),LA=i,Z&&(t?function(e,t,n){if(aO(n),e.parentNode===t){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}}(Z,b,v):(!ie||!pe.isActive)&&oO(Z,b,TP(Z),C)),s=t)},pe.refresh=function(i){if(!LA&&pe.enabled)if(Z&&i&&$A)IP(e,"scrollEnd",YP);else{LA=1,R&&R.kill(),$&&n&&n.progress(0).invalidate(),s||pe.revert();for(var r,o,m,w,S,T,A,P,O=me(),I=ge(),k=sP(oe,B),N=0,L=0,D=t.end,H=t.endTrigger||Y,j=t.start||(0===t.start?0:Z||!Y?"0 0":"0 100%"),V=Y&&Math.max(0,zP.indexOf(pe))||0,W=V;W--;)(A=zP[W].pin)&&(A===Y||A===Z)&&zP[W].revert();for(c=uO(j,Y,O,B,pe.scroll(),h,p,pe,I,de,le,k)||(Z?-.001:0),cP(D)&&(D=D(pe)),lP(D)&&!D.indexOf("+=")&&(~D.indexOf(" ")?D=(lP(j)?j.split(" ")[0]:"")+D:(N=DP(D.substr(2),O),D=lP(j)?j:c+N,H=Y)),u=Math.max(c,uO(D||(H?"100% 0":k),H,O,B,pe.scroll()+N,d,f,pe,I,de,le,k))||-.001,g=u-c||(c-=.01)&&.001,N=0,W=V;W--;)(A=(T=zP[W]).pin)&&T.start-T._pinPush<c&&(r=T.end-T.start,A===Y&&(N+=r),A===Z&&(L+=r));if(c+=N,u+=N,pe._pinPush=L,h&&N&&((r={})[B.a]="+="+N,wA.set([h,d],r)),Z)r=TP(Z),w=B===EP,m=pe.scroll(),M=parseFloat(x(B.a))+L,!k&&u>1&&((ae?TA:oe).style["overflow-"+B.a]="scroll"),oO(Z,b,r),_=lO(Z),o=AP(Z,!0),P=le&&rP(oe,w?MP:EP)(),J&&((C=[J+B.os2,g+L+SP]).t=b,(W=J===bP?PP(Z,B)+g+L:0)&&C.push(B.d,W+SP),aO(C),le&&pe.scroll(U)),le&&((S={top:o.top+(w?m-c:P)+SP,left:o.left+(w?P:m-c)+SP,boxSizing:"border-box",position:"fixed"}).width=S.maxWidth=Math.ceil(o.width)+SP,S.height=S.maxHeight=Math.ceil(o.height)+SP,S.margin=S.marginTop=S.marginRight=S.marginBottom=S.marginLeft="0",S.padding=r.padding,S.paddingTop=r.paddingTop,S.paddingRight=r.paddingRight,S.paddingBottom=r.paddingBottom,S.paddingLeft=r.paddingLeft,y=function(e,t,n){for(var i,r=[],o=e.length,s=n?8:0;s<o;s+=2)r.push(i=e[s],i in t?t[i]:e[s+1]);return r.t=e.t,r}(v,S,ie)),n?(n.progress(1,!0),E=x(B.a)-M+g+L,g!==E&&y.splice(y.length-2,2),n.progress(0,!0)):E=g;else if(Y&&pe.scroll())for(o=Y.parentNode;o&&o!==TA;)o._pinOffset&&(c-=o._pinOffset,u-=o._pinOffset),o=o.parentNode;for(W=0;W<V;W++)(T=zP[W].pin)&&(T===Y||T===Z)&&zP[W].revert(!1);pe.start=c,pe.end=u,(a=l=pe.scroll())<U&&pe.scroll(U),pe.revert(!1),LA=0,z&&re&&n.progress(z,!0),F!==pe.progress&&(R&&n.totalProgress(F,!0),pe.progress=F,pe.update()),Z&&J&&(b._pinOffset=Math.round(pe.progress*E)),q&&q(pe)}},pe.getVelocity=function(){return(pe.scroll()-l)/(ZA()-RA)*1e3||0},pe.update=function(e,t){var r,o,s,h,d,f=pe.scroll(),m=e?0:(f-c)/g,v=m<0?0:m>1?1:m||0,w=pe.progress;if(t&&(l=a,a=f,ne&&(k=I,I=n&&!re?n.totalProgress():v)),Q&&!v&&Z&&!LA&&!qA&&$A&&c<f+(f-l)/(ZA()-RA)*Q&&(v=1e-4),v!==w&&pe.enabled){if(h=(d=(r=pe.isActive=!!v&&v<1)!=(!!w&&w<1))||!!v!=!!w,pe.direction=v>w?1:-1,pe.progress=v,re||(!R||LA||qA?n&&n.totalProgress(v,!!LA):(R.vars.totalProgress=v,R.invalidate().restart())),Z)if(e&&J&&(b.style[J+B.os2]=T),le){if(h){if(s=!e&&v>w&&u+1>f&&f+1>=sP(oe,B),ie)if(e||!r&&!s)dO(Z,b);else{var x=AP(Z,!0),C=f-c;dO(Z,TA,x.top+(B===EP?C:0)+SP,x.left+(B===EP?0:C)+SP)}aO(r||s?y:_),E!==g&&v<1&&r||S(M+(1!==v||s?0:E))}}else S(M+E*v);ne&&!i.tween&&!LA&&!qA&&D.restart(!0),V&&(d||te&&v&&(v<1||!VA))&&IA(V.targets).forEach((function(e){return e.classList[r||te?"add":"remove"](V.className)})),j&&!re&&!e&&j(pe),h&&!LA?(o=v&&!w?0:1===v?1:1===w?2:3,re&&(s=!d&&"none"!==ue[o+1]&&ue[o+1]||ue[o],n&&("complete"===s||"reset"===s||s in n)&&("complete"===s?n.pause().totalProgress(1):"reset"===s?n.restart(!0).pause():n[s]()),j&&j(pe)),!d&&VA||(G&&d&&G(pe),ce[o]&&ce[o](pe),te&&(1===v?pe.kill(!1,1):ce[o]=0),d||ce[o=1===v?1:3]&&ce[o](pe))):re&&j&&!LA&&j(pe)}P&&(A(f+(p._isFlipped?1:0)),P(f))},pe.enable=function(){pe.enabled||(pe.enabled=!0,IP(oe,"resize",VP),IP(oe,"scroll",jP),fe&&IP(e,"refreshInit",fe),n&&n.add?wA.delayedCall(.01,(function(){return c||u||pe.refresh()}))&&(g=.01)&&(c=u=0):pe.refresh())},pe.disable=function(t,n){if(pe.enabled&&(!1!==t&&pe.revert(),pe.enabled=pe.isActive=!1,n||R&&R.pause(),U=0,r&&(r.uncache=1),fe&&kP(e,"refreshInit",fe),D&&(D.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!ae)){for(var o=zP.length;o--;)if(zP[o].scroller===oe&&zP[o]!==pe)return;kP(oe,"resize",VP),kP(oe,"scroll",jP)}},pe.kill=function(e,t){pe.disable(e,t),W&&delete HP[W];var i=zP.indexOf(pe);zP.splice(i,1),i===UA&&tO>0&&UA--,n&&(n.scrollTrigger=null,e&&n.render(-1),t||n.kill()),h&&[h,d,p,f].forEach((function(e){return e.parentNode.removeChild(e)})),r&&(r.uncache=1)},pe.enable()}else this.update=this.refresh=this.kill=KA},e.register=function(t){if(!xA&&(wA=t||tP(),eP()&&window.document&&(SA=window,MA=document,EA=MA.documentElement,TA=MA.body),wA&&(IA=wA.utils.toArray,kA=wA.utils.clamp,wA.core.globals("ScrollTrigger",e),TA))){PA=SA.requestAnimationFrame||function(e){return setTimeout(e,16)},IP(SA,"mousewheel",jP),CA=[SA,MA,EA,TA],IP(MA,"scroll",jP);var n,i=TA.style,r=i.borderTop;i.borderTop="1px solid #000",n=AP(TA),EP.m=Math.round(n.top+EP.sc())||0,MP.m=Math.round(n.left+MP.sc())||0,r?i.borderTop=r:i.removeProperty("border-top"),NA=setInterval(BP,200),wA.delayedCall(.5,(function(){return qA=0})),IP(MA,"touchcancel",KA),IP(TA,"touchstart",KA),OP(IP,MA,"pointerdown,touchstart,mousedown",(function(){return DA=1})),OP(IP,MA,"pointerup,touchend,mouseup",(function(){return DA=0})),FA=wA.utils.checkPrefix("transform"),rO.push(FA),xA=ZA(),AA=wA.delayedCall(.2,KP).pause(),BA=[MA,"visibilitychange",function(){var e=SA.innerWidth,t=SA.innerHeight;MA.hidden?(zA=e,HA=t):zA===e&&HA===t||VP()},MA,"DOMContentLoaded",KP,SA,"load",function(){return $A||KP()},SA,"resize",VP],aP(IP)}return xA},e.defaults=function(e){for(var t in e)NP[t]=e[t]},e.kill=function(){QA=0,zP.slice(0).forEach((function(e){return e.kill(1)}))},e.config=function(e){"limitCallbacks"in e&&(VA=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(NA)||(NA=t)&&setInterval(BP,t),"autoRefreshEvents"in e&&(aP(kP)||aP(IP,e.autoRefreshEvents||"none"))},e.scrollerProxy=function(e,t){var n=IA(e)[0];nP(n)?XA.unshift(SA,t,TA,t,EA,t):XA.unshift(n,t)},e.matchMedia=function(e){var t,n,i,r,o;for(n in e)i=qP.indexOf(n),r=e[n],WA=n,"all"===n?r():(t=SA.matchMedia(n))&&(t.matches&&(o=r()),~i?(qP[i+1]=pP(qP[i+1],r),qP[i+2]=pP(qP[i+2],o)):(i=qP.length,qP.push(n,r,o),t.addListener?t.addListener(XP):t.addEventListener("change",XP)),qP[i+3]=t.matches),WA=0;return qP},e.clearMatchMedia=function(e){e||(qP.length=0),(e=qP.indexOf(e))>=0&&qP.splice(e,4)},e}();fO.version="3.5.1",fO.saveStyles=function(e){return e?IA(e).forEach((function(e){var t=JP.indexOf(e);t>=0&&JP.splice(t,4),JP.push(e,e.style.cssText,wA.core.getCache(e),WA)})):JP},fO.revert=function(e,t){return QP(!e,t)},fO.create=function(e,t){return new fO(e,t)},fO.refresh=function(e){return e?VP():KP(!0)},fO.update=nO,fO.maxScroll=function(e,t){return sP(e,t?MP:EP)},fO.getScrollFunc=function(e,t){return rP(IA(e)[0],t?MP:EP)},fO.getById=function(e){return HP[e]},fO.getAll=function(){return zP.slice(0)},fO.isScrolling=function(){return!!$A},fO.addEventListener=function(e,t){var n=WP[e]||(WP[e]=[]);~n.indexOf(t)||n.push(t)},fO.removeEventListener=function(e,t){var n=WP[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},fO.batch=function(e,t){var n,i=[],r={},o=t.interval||.016,s=t.batchMax||1e9,a=function(e,t){var n=[],i=[],r=wA.delayedCall(o,(function(){t(n,i),n=[],i=[]})).pause();return function(e){n.length||r.restart(!0),n.push(e.trigger),i.push(e),s<=n.length&&r.progress(1)}};for(n in t)r[n]="on"===n.substr(0,2)&&cP(t[n])&&"onRefreshInit"!==n?a(0,t[n]):t[n];return cP(s)&&(s=s(),IP(fO,"refresh",(function(){return s=t.batchMax()}))),IA(e).forEach((function(e){var t={};for(n in r)t[n]=r[n];t.trigger=e,i.push(fO.create(t))})),i},fO.sort=function(e){return zP.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},tP()&&wA.registerPlugin(fO);let mO=(()=>{class e{constructor(){this.opened=new Bc(!1)}getOpened(){return this.opened}setOpened(e){this.opened.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const gO=["button"],vO=["container"];function yO(e,t){1&e&&es(0,"span",7),2&e&&Jo("innerHTML",ls().caption,Fi)}let _O=(()=>{class e{constructor(){this.iconName="",this.caption="",this.modificator="",this.showCaptionOnMobile=!0,this.mobile=!1}ngOnInit(){window.innerWidth<=560&&(this.mobile=!0)}ngAfterViewInit(){Rv.set(this.element.nativeElement,{xPercent:-50,yPercent:-50});const e=this.container.nativeElement,t=this.element.nativeElement;let n={x:e.offsetWidth/2,y:e.offsetHeight/2},i={x:n.x,y:n.y},r=Rv.quickSetter(t,"x","px"),o=Rv.quickSetter(t,"y","px");e.addEventListener("mousemove",t=>{i.x=e.offsetWidth/2+(t.offsetX-e.offsetWidth/2)/3,i.y=e.offsetHeight/2+(t.offsetY-e.offsetHeight/2)/3}),e.addEventListener("mouseout",t=>{i.x=e.offsetWidth/2,i.y=e.offsetHeight/2}),Rv.ticker.add(()=>{var e=1-Math.pow(.9,Rv.ticker.deltaRatio());n.x+=(i.x-n.x)*e,n.y+=(i.y-n.y)*e,r(n.x),o(n.y)}),window.addEventListener("resize",()=>{n={x:e.offsetWidth/2,y:e.offsetHeight/2},i={x:n.x,y:n.y}})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-interactive-button"]],viewQuery:function(e,t){var n;1&e&&(Oa(gO,!0),Oa(vO,!0)),2&e&&(Pa(n=ka())&&(t.element=n.first),Pa(n=ka())&&(t.container=n.first))},inputs:{iconName:"iconName",caption:"caption",modificator:"modificator",showCaptionOnMobile:"showCaptionOnMobile"},decls:7,vars:3,consts:[[1,"interactive-button",3,"ngClass"],["container",""],[1,"interactive-button__inner"],["button",""],[1,"interactive-button__icon-block"],[1,"interactive-button__icon",3,"ngClass"],["class","interactive-button__caption",3,"innerHTML",4,"ngIf"],[1,"interactive-button__caption",3,"innerHTML"]],template:function(e,t){1&e&&(Qo(0,"button",0,1),Qo(2,"div",2,3),Qo(4,"span",4),es(5,"span",5),Ko(),Xo(6,yO,1,1,"span",6),Ko(),Ko()),2&e&&(Jo("ngClass",""!==t.modificator?"interactive-button--"+t.modificator:""),ir(5),Jo("ngClass","icon-"+t.iconName),ir(1),Jo("ngIf",!t.mobile||t.showCaptionOnMobile&&t.mobile))},directives:[tc,oc],styles:[".interactive-button[_ngcontent-%COMP%]{display:block;position:relative;pointer-events:all;border:none;background:transparent;padding:0}.interactive-button__inner[_ngcontent-%COMP%]{display:flex;align-items:center;pointer-events:none}.interactive-button__icon-block[_ngcontent-%COMP%]{width:3.125rem;height:3.125rem;display:flex;align-items:center;justify-content:center;border-radius:44%;font-size:1.0625rem;color:#fff;background-color:#eb3340;margin-right:.9375rem;transition:background-color .2s ease-in-out,color .2s ease-in-out}.interactive-button[_ngcontent-%COMP%]:hover   .interactive-button__icon-block[_ngcontent-%COMP%]{background-color:#fff;color:#000}.interactive-button__caption[_ngcontent-%COMP%]{color:#fff;font-size:.875rem;font-weight:700;font-style:normal;letter-spacing:normal;line-height:1.71;text-align:left;white-space:nowrap}.interactive-button__caption[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#eb3340;transition:.2s ease-in-out}.interactive-button[_ngcontent-%COMP%]:hover   .interactive-button__caption[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.interactive-button--uppercase[_ngcontent-%COMP%]   .interactive-button__caption[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase}"]}),e})();const bO=["screen"],wO=["container"],xO=["bg_placeholder"],SO=["subtitle"],MO=["title1"],EO=["title2"],TO=["image"],CO=["button1"],AO=["button2"],PO=["phone"],OO=["decor_sequence"];let IO=(()=>{class e{constructor(e,t){this.videoModalService=e,this.zone=t,this.startAnimation=!1,this.decorSequences=new ba,this.animationStarted=!1}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(e){this.startAnimation&&!this.animationStarted&&(this.zone.runOutsideAngular(()=>{this.initAnimation()}),this.animationStarted=!0)}initAnimation(){let e=window.innerHeight/5;Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,onEnter:()=>this.willChange(),onEnterBack:()=>this.willChange()});const t={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};"false"!=sessionStorage.getItem("preloader2")&&window.innerWidth>560?(Rv.from(this.container.nativeElement,{yPercent:100,ease:"power1.inOut",duration:1.5}).then(()=>{this.sequencesAnimation()}),Rv.from(this.image.nativeElement,{y:window.innerWidth/1536*-30,ease:"power1.inOut",duration:1.5}),sessionStorage.setItem("preloader2","false")):(Rv.from(this.image.nativeElement,{y:window.innerWidth/1536*-100,ease:"power1.inOut",duration:1.5}),this.sequencesAnimation()),Rv.from(this.phone.nativeElement,{scrollTrigger:t,y:window.innerWidth/1536*50,ease:"power1.inOut",duration:1.5}),Rv.to(this.bgPlaceholder.nativeElement,{opacity:0,ease:"linear",duration:1.5}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:t,y:e,ease:"power1.inOut",duration:.87,delay:.5}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:t,opacity:0,ease:"power2.in",duration:.5,delay:.69}),Rv.from(this.title1.nativeElement,{scrollTrigger:t,yPercent:100,rotationX:50,ease:"power1.out",duration:1,delay:.6}),Rv.from(this.title2.nativeElement,{scrollTrigger:t,yPercent:100,rotationX:50,ease:"power1.out",duration:1,delay:.7}),Rv.from(this.button1.nativeElement,{scrollTrigger:t,y:e,ease:"power1.inOut",duration:.87,delay:.8}),Rv.from(this.button1.nativeElement,{scrollTrigger:t,opacity:0,ease:"power2.in",duration:.5,delay:.99}),Rv.from(this.button2.nativeElement,{scrollTrigger:t,y:e,ease:"power1.inOut",duration:.87,delay:.85}),Rv.from(this.button2.nativeElement,{scrollTrigger:t,opacity:0,ease:"power2.in",duration:.5,delay:1.04})}sequencesAnimation(){this.decorSequences.toArray().forEach((e,t)=>{Rv.fromTo(e.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:e.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:1==t?2:1.2,repeat:-1,ease:1==t?"steps(50)":"steps(30)"})})}openVideo(){this.videoModalService.setOpened(!0)}willChange(){Rv.set([this.screen.nativeElement,this.image.nativeElement,this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.button1.nativeElement,this.button2.nativeElement],{willChange:"transform"}),setTimeout(()=>{Rv.set([this.screen.nativeElement,this.image.nativeElement,this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.button1.nativeElement,this.button2.nativeElement],{willChange:"auto"})},2e3)}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(mO),Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-top-section"]],viewQuery:function(e,t){var n;1&e&&(Oa(bO,!0),Oa(wO,!0),Oa(xO,!0),Oa(SO,!0),Oa(MO,!0),Oa(EO,!0),Oa(TO,!0),Oa(CO,!0),Oa(AO,!0),Oa(PO,!0),Oa(OO,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.container=n.first),Pa(n=ka())&&(t.bgPlaceholder=n.first),Pa(n=ka())&&(t.subtitle=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.image=n.first),Pa(n=ka())&&(t.button1=n.first),Pa(n=ka())&&(t.button2=n.first),Pa(n=ka())&&(t.phone=n.first),Pa(n=ka())&&(t.decorSequences=n))},inputs:{startAnimation:"startAnimation"},features:[At],decls:40,vars:4,consts:[[1,"screen","top-section"],["screen",""],[1,"top-section__bg-placeholder"],["bg_placeholder",""],[1,"screen__container"],["container",""],[1,"top-section__img"],["image",""],[1,"top-section__phone"],["phone",""],[1,"top-section__decor","top-section__decor--1"],["decor_sequence",""],[1,"top-section__decor","top-section__decor--2"],[1,"top-section__decor","top-section__decor--3"],[1,"top-section__content"],[1,"ld-subtitle","ld-subtitle--big","top-section__subtitle"],["subtitle",""],[1,"ld-h1","top-section__title"],[1,"top-section__title-string"],["title1",""],["title2",""],[1,"top-section__buttons"],[1,"top-section__buttons-item"],["button1",""],[1,"top-section__buttons-item",3,"click"],["button2",""],[3,"iconName","caption","showCaptionOnMobile"],[1,"top-section__social"],[3,"color"]],template:function(e,t){1&e&&(Qo(0,"section",0,1),es(2,"div",2,3),Qo(4,"div",4,5),es(6,"div",6,7),es(8,"div",8,9),es(10,"div",10,11),es(12,"div",12,11),es(14,"div",13,11),Qo(16,"div",14),Qo(17,"span",15,16),_s(19,"LIVE CLASSES "),Qo(20,"strong"),_s(21,"/ INTENSE ENERGY"),Ko(),Ko(),Qo(22,"h1",17),Qo(23,"span",18),Qo(24,"span",null,19),_s(26,"Daily"),Ko(),Ko(),Qo(27,"span",18),Qo(28,"strong",null,20),_s(30,"Training"),Ko(),Ko(),Ko(),Qo(31,"div",21),Qo(32,"div",22,23),es(34,"app-app-store"),Ko(),Qo(35,"div",24,25),os("click",(function(){return t.openVideo()})),es(37,"app-interactive-button",26),Ko(),Ko(),Ko(),Qo(38,"div",27),es(39,"app-social-buttons",28),Ko(),Ko(),Ko()),2&e&&(ir(37),Jo("iconName","play")("caption","Play Video")("showCaptionOnMobile",!1),ir(2),Jo("color","red"))},directives:[sA,_O,uA],styles:[".top-section[_ngcontent-%COMP%]{position:relative;z-index:1;overflow:visible;background:#0f1218}.top-section__bg-placeholder[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;right:0;background:#000}.top-section__img[_ngcontent-%COMP%]{right:-11.25rem;bottom:-12.5rem;width:63.1875rem;height:66.9375rem;background-position:100% 100%}.top-section__img[_ngcontent-%COMP%], .top-section__phone[_ngcontent-%COMP%]{position:absolute;background-repeat:no-repeat;background-size:contain;pointer-events:none}.top-section__phone[_ngcontent-%COMP%]{top:10rem;right:9.375rem;width:26.625rem;height:60vh;background-position:top;display:none}.top-section__decor[_ngcontent-%COMP%]{position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.top-section__decor--1[_ngcontent-%COMP%]{bottom:50%;left:33%;width:25rem;height:25rem}.top-section__decor--1[_ngcontent-%COMP%], .top-section__decor--2[_ngcontent-%COMP%]{background-position:0 0;background-size:auto 100%;transition:none}.top-section__decor--2[_ngcontent-%COMP%]{right:55%;bottom:-3.125rem;width:18.75rem;height:18.75rem}.top-section__decor--3[_ngcontent-%COMP%]{right:-2.5rem;top:50%;width:25rem;height:25rem;background-position:100% 0;background-size:auto 100%;transition:none;transform:translateY(-50%)}.top-section__content[_ngcontent-%COMP%]{position:relative;margin-left:-.3125rem;width:80%}.top-section__subtitle[_ngcontent-%COMP%]{display:block}.top-section__title[_ngcontent-%COMP%]{line-height:9.375rem;letter-spacing:normal;margin-bottom:1.25rem}.top-section__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 3.125rem;margin:0 -3.125rem}.top-section__title-string[_ngcontent-%COMP%] + .top-section__title-string[_ngcontent-%COMP%]{margin-top:-1.25rem;letter-spacing:-.0625rem}.top-section__title-string[_ngcontent-%COMP%] + .top-section__title-string[_ngcontent-%COMP%]:first-letter{letter-spacing:.03125rem}.top-section__title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .top-section__title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}.top-section__buttons[_ngcontent-%COMP%]{display:flex}.top-section__buttons-item[_ngcontent-%COMP%]{margin-right:1.875rem}.top-section__social[_ngcontent-%COMP%]{position:absolute;right:1.875rem;bottom:1rem}@media (max-width:560px){.top-section__img[_ngcontent-%COMP%]{right:-9.375rem;bottom:-6.25rem;width:32.5rem;height:32.5rem}.top-section__phone[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:-1.8125rem;right:1.5625rem;width:17rem;height:21.125rem;background:url(/assets/images/top-section/phone.png) top no-repeat;background-size:contain;pointer-events:none;display:block}.top-section__decor[_ngcontent-%COMP%]{position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.top-section__decor--1[_ngcontent-%COMP%]{display:none}.top-section__decor--2[_ngcontent-%COMP%]{right:55%;bottom:-1.25rem;width:18.75rem;height:18.75rem;background-image:url(/assets/images/top-section/decor-2-sequence.png);background-position:0 0;background-size:auto 100%;transition:none}.top-section__decor--3[_ngcontent-%COMP%]{display:none}.top-section__content[_ngcontent-%COMP%]{width:auto}.top-section__subtitle[_ngcontent-%COMP%]{display:block}.top-section__title[_ngcontent-%COMP%]{line-height:4.8125rem;letter-spacing:normal;margin-bottom:0}.top-section__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.25rem;margin:0 -1.25rem}.top-section__title-string[_ngcontent-%COMP%] + .top-section__title-string[_ngcontent-%COMP%]{margin-top:-1.25rem;letter-spacing:normal}.top-section__title-string[_ngcontent-%COMP%] + .top-section__title-string[_ngcontent-%COMP%]:first-letter{letter-spacing:normal}.top-section__buttons[_ngcontent-%COMP%]{display:flex}.top-section__buttons-item[_ngcontent-%COMP%]{margin-right:1.25rem}.top-section__social[_ngcontent-%COMP%]{display:none}}"]}),e})();const kO=["screen"],RO=["stand1"],NO=["stand2"],LO=["tv"],DO=["decor"],FO=["subtitle"],UO=["title1"],zO=["title2"],HO=["description"],BO=["columns"],jO=["button"],VO=["phone"];let WO=(()=>{class e{constructor(e){this.zone=e,this.show=!1,this.animArray=[]}ngOnInit(){}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.initAnimation()})}initAnimation(){Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,onEnter:()=>this.willChange(),onEnterBack:()=>this.willChange()});const e={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};let t=window.innerWidth/1536*60;Rv.from(this.decor.nativeElement,{scrollTrigger:e,y:window.innerWidth/1536*-210,duration:1.5,ease:"power1.inOut"}),Rv.from([this.stand1.nativeElement,this.stand2.nativeElement],{scrollTrigger:e,y:window.innerWidth/1536*400,duration:1.5,ease:"power1.inOut"}),Rv.from(this.phone.nativeElement,{scrollTrigger:e,y:window.innerWidth/1536*-100,duration:1.5,ease:"power1.inOut"}),Rv.from(this.tv.nativeElement,{scrollTrigger:e,scale:.1,skewY:-20,opacity:0,duration:1,ease:"power1.out",clearProps:"all"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.5,ease:"power1.inOut"}),Rv.from(this.title1.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,ease:"power1.out",duration:.8,delay:.54}),Rv.from(this.title2.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,ease:"power1.out",duration:.8,delay:.58}),Rv.from(this.description.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.66,ease:"power1.inOut"}),Rv.from(this.columns.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.7,ease:"power1.inOut"}),Rv.from(this.button.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.74,ease:"power1.inOut"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.65,ease:"power1.in"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.81,ease:"power1.in"}),Rv.from(this.columns.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.85,ease:"power1.in"}),Rv.from(this.button.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.89,ease:"power1.in"}),this.decorSequenceAnimation(),this.tvSequenceAnimation()}decorSequenceAnimation(){Rv.fromTo(this.decor.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:this.decor.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:1.5,repeat:-1,ease:"steps(30)"})}tvSequenceAnimation(){Rv.fromTo(this.tv.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:this.tv.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:2,repeat:-1,ease:"steps(40)"})}willChange(){const e=[this.stand1.nativeElement,this.stand2.nativeElement,this.tv.nativeElement,this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.columns.nativeElement,this.button.nativeElement];Rv.set(e,{willChange:"transform, opacity"}),setTimeout(()=>{Rv.set(e,{willChange:"auto"})},1500)}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-digital"]],viewQuery:function(e,t){var n;1&e&&(Oa(kO,!0),Oa(RO,!0),Oa(NO,!0),Oa(LO,!0),Oa(DO,!0),Oa(FO,!0),Oa(UO,!0),Oa(zO,!0),Oa(HO,!0),Oa(BO,!0),Oa(jO,!0),Oa(VO,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.stand1=n.first),Pa(n=ka())&&(t.stand2=n.first),Pa(n=ka())&&(t.tv=n.first),Pa(n=ka())&&(t.decor=n.first),Pa(n=ka())&&(t.subtitle=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.description=n.first),Pa(n=ka())&&(t.columns=n.first),Pa(n=ka())&&(t.button=n.first),Pa(n=ka())&&(t.phone=n.first))},decls:47,vars:3,consts:[[1,"screen","digital"],["screen",""],[1,"screen__container","digital__container"],[1,"digital__stand-1"],["stand1",""],[1,"digital__tv"],["tv",""],[1,"digital__stand-2"],["stand2",""],[1,"digital__phone"],["phone",""],[1,"digital__decor"],["decor",""],[1,"digital__content"],[1,"ld-subtitle","digital__subtitle"],["subtitle",""],[1,"ld-h2","digital__title"],[1,"digital__title-string"],["title1",""],["title2",""],[1,"ld-description","digital__description"],["description",""],[1,"digital__columns"],["columns",""],[1,"digital__columns-item"],[1,"ld-h4"],[1,"ld-description","ld-description--small"],[1,"digital__button"],["button",""],["href","https://apps.apple.com/app/apple-store/id1494435397?mt=8","target","_blank"],[3,"iconName","caption","modificator"]],template:function(e,t){1&e&&(Qo(0,"section",0,1),Qo(2,"div",2),es(3,"div",3,4),es(5,"div",5,6),es(7,"div",7,8),es(9,"div",9,10),es(11,"div",11,12),Qo(13,"div",13),Qo(14,"span",14,15),Qo(16,"strong"),_s(17,"Digital"),Ko(),_s(18," Studio"),Ko(),Qo(19,"h2",16),Qo(20,"span",17),Qo(21,"span",null,18),_s(23,"Enter your new"),Ko(),Ko(),Qo(24,"span",17),Qo(25,"strong",null,19),_s(27,"Digital Studio"),Ko(),Ko(),Ko(),Qo(28,"p",20,21),_s(30,"Train with elite instructors who can see you and coach you in real-time!"),Ko(),Qo(31,"div",22,23),Qo(33,"div",24),Qo(34,"h3",25),_s(35,"Experience new classes every day!"),Ko(),Qo(36,"p",26),_s(37,"Customize your weekly plan and dive in!"),Ko(),Ko(),Qo(38,"div",24),Qo(39,"h3",25),_s(40,"No bulky hardware, no hassle."),Ko(),Qo(41,"p",26),_s(42,"Start today and experience the energy of live training."),Ko(),Ko(),Ko(),Qo(43,"div",27,28),Qo(45,"a",29),es(46,"app-interactive-button",30),Ko(),Ko(),Ko(),Ko(),Ko()),2&e&&(ir(46),Jo("iconName","download")("caption","Try free for <strong>14 days</strong>")("modificator","uppercase"))},directives:[_O],styles:['.digital[_ngcontent-%COMP%]{background:#0f1218}.digital__container[_ngcontent-%COMP%]{justify-content:flex-end;height:55.3125rem}.digital[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;right:0;height:23.875rem;background-image:linear-gradient(180deg,transparent,#000)}.digital__stand-1[_ngcontent-%COMP%]{top:auto;bottom:0;left:2.1875rem;height:19.875rem;width:38.5625rem;background-position:top;background-size:100% auto}.digital__stand-1[_ngcontent-%COMP%], .digital__tv[_ngcontent-%COMP%]{position:absolute;background-repeat:no-repeat}.digital__tv[_ngcontent-%COMP%]{width:49.0625rem;height:45.75rem;left:-5.0625rem;top:0;background-position:0 0;background-size:auto 100%;transition:none}.digital__stand-2[_ngcontent-%COMP%]{top:auto;bottom:0;left:25.625rem;height:8.25rem;width:21.875rem;background-size:100% auto}.digital__phone[_ngcontent-%COMP%], .digital__stand-2[_ngcontent-%COMP%]{position:absolute;background-position:top;background-repeat:no-repeat}.digital__phone[_ngcontent-%COMP%]{bottom:5rem;left:26.875rem;height:24.25rem;width:18.25rem;background-size:contain;z-index:1;display:none}.digital__decor[_ngcontent-%COMP%]{position:absolute;right:0;bottom:-3.75rem;width:25rem;height:25rem;background-position:0 0;background-size:auto 100%;transition:none}.digital__content[_ngcontent-%COMP%]{position:relative;z-index:1;width:41.25rem;margin-right:-5.3125rem}.digital__subtitle[_ngcontent-%COMP%]{display:block}.digital__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.875rem;margin:-.1875rem -1.875rem}.digital__title-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .digital__title-string[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}.digital__description[_ngcontent-%COMP%]{display:block;margin-bottom:2em}.digital__columns[_ngcontent-%COMP%]{display:flex;margin:0 -2.8125rem 1.875rem;padding-right:2.5rem}.digital__columns-item[_ngcontent-%COMP%]{width:50%;padding:0 2.8125rem}@media (max-width:560px){.digital__container[_ngcontent-%COMP%]{justify-content:flex-end;height:auto;padding-bottom:38.75rem}.digital[_ngcontent-%COMP%]:before, .digital__container[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;right:0;height:23.875rem;background-image:linear-gradient(180deg,transparent,#000)}.digital[_ngcontent-%COMP%]:before{z-index:1}.digital__stand-1[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;height:23.125rem;width:21.875rem;top:auto;background:url(/assets/images/digital/stand.png) top no-repeat;background-size:contain;transform:translateX(-50%)}.digital__tv[_ngcontent-%COMP%]{width:23.875rem;height:22.2625rem;bottom:17.5rem;background:url(/assets/images/digital/tv.png) 100% 100% no-repeat;background-position:0 0;background-size:auto 22.2625rem;transition:none;transform:translateX(-51%)}.digital__stand-2[_ngcontent-%COMP%], .digital__tv[_ngcontent-%COMP%]{position:absolute;left:50%;top:auto;z-index:1}.digital__stand-2[_ngcontent-%COMP%]{bottom:0;height:8.125rem;width:22.0625rem;background:url(/assets/images/digital/stand.png) top no-repeat;background-size:100% auto;transform:translateX(-50%)}.digital__phone[_ngcontent-%COMP%]{position:absolute;bottom:5rem;left:1.25rem;height:24.25rem;width:18.25rem;display:block}.digital__decor[_ngcontent-%COMP%]{position:absolute;right:0;bottom:-2.5rem;width:18.75rem;height:18.75rem;background-image:url(/assets/images/digital/decor.png);background-position:0 0;background-size:auto 100%;transition:none;display:none}.digital__content[_ngcontent-%COMP%]{width:auto;margin-right:0}.digital__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.25rem;margin:-.1875rem -1.25rem}.digital__description[_ngcontent-%COMP%]{display:block;margin-bottom:2em;font-size:1.125rem;line-height:1.625rem}.digital__columns[_ngcontent-%COMP%]{display:block;margin:0 0 1.875rem;padding-right:2.5rem}.digital__columns-item[_ngcontent-%COMP%]{width:auto;padding:0;margin-bottom:2rem}.digital__button[_ngcontent-%COMP%]{display:flex;justify-content:center}}']}),e})();function GO(e,t){var n=e.__state.conversionName.toString(),i=Math.round(e.r),r=Math.round(e.g),o=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+o+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+o+","+s+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+",a:"+s+"}":"unknown format"}var qO=Array.prototype.forEach,XO=Array.prototype.slice,YO={BREAK:{},extend:function(e){return this.each(XO.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach((function(n){this.isUndefined(t[n])||(e[n]=t[n])}).bind(this))}),this),e},defaults:function(e){return this.each(XO.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach((function(n){this.isUndefined(e[n])&&(e[n]=t[n])}).bind(this))}),this),e},compose:function(){var e=XO.call(arguments);return function(){for(var t=XO.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(qO&&e.forEach&&e.forEach===qO)e.forEach(t,n);else if(e.length===e.length+0){var i,r=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i=void 0;return function(){var r=this,o=arguments;function s(){i=null,n||e.apply(r,o)}var a=n||!i;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(r,o)}},toArray:function(e){return e.toArray?e.toArray():XO.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},ZO=[{litmus:YO.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:GO},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:GO},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:GO},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:GO}}},{litmus:YO.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:YO.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:YO.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(YO.isNumber(e.r)&&YO.isNumber(e.g)&&YO.isNumber(e.b)&&YO.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(YO.isNumber(e.r)&&YO.isNumber(e.g)&&YO.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(YO.isNumber(e.h)&&YO.isNumber(e.s)&&YO.isNumber(e.v)&&YO.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(YO.isNumber(e.h)&&YO.isNumber(e.s)&&YO.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],JO=void 0,$O=void 0,QO=function(){$O=!1;var e=arguments.length>1?YO.toArray(arguments):arguments[0];return YO.each(ZO,(function(t){if(t.litmus(e))return YO.each(t.conversions,(function(t,n){if(JO=t.read(e),!1===$O&&!1!==JO)return $O=JO,JO.conversionName=n,JO.conversion=t,YO.BREAK})),YO.BREAK})),$O},KO=void 0,eI={hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),o=n*(1-t),s=n*(1-r*t),a=n*(1-(1-r)*t),l=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),o=r-i,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=e===r?(t-n)/o:t===r?2+(n-e)/o:4+(e-t)/o,(s/=6)<0&&(s+=1),{h:360*s,s:o/r,v:r/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),this.hex_with_component(i,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(KO=8*t)|e&~(255<<KO)}},tI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nI=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},iI=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),rI=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},oI=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},sI=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},aI=function(){function e(){if(nI(this,e),this.__state=QO.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return iI(e,[{key:"toString",value:function(){return GO(this)}},{key:"toHexString",value:function(){return GO(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function lI(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||aI.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(aI.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function cI(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||aI.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(aI.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}aI.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=eI.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");YO.extend(e.__state,eI.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},aI.recalculateHSV=function(e){var t=eI.rgb_to_hsv(e.r,e.g,e.b);YO.extend(e.__state,{s:t.s,v:t.v}),YO.isNaN(t.h)?YO.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},aI.COMPONENTS=["r","g","b","h","s","v","hex","a"],lI(aI.prototype,"r",2),lI(aI.prototype,"g",1),lI(aI.prototype,"b",0),cI(aI.prototype,"h"),cI(aI.prototype,"s"),cI(aI.prototype,"v"),Object.defineProperty(aI.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(aI.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=eI.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var uI=function(){function e(t,n){nI(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return iI(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),hI={};YO.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){YO.each(e,(function(e){hI[e]=t}))}));var dI=/(\d+(\.\d+)?)px/;function pI(e){if("0"===e||YO.isUndefined(e))return 0;var t=e.match(dI);return YO.isNull(t)?0:parseFloat(t[1])}var fI={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var i=n,r=t;YO.isUndefined(r)&&(r=!0),YO.isUndefined(i)&&(i=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,i){var r=n||{},o=hI[t];if(!o)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":s.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,r.x||r.clientX||0,r.y||r.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var a=s.initKeyboardEvent||s.initKeyEvent;YO.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||!1,r.cancelable||!0)}YO.defaults(s,i),e.dispatchEvent(s)},bind:function(e,t,n,i){return e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n),fI},unbind:function(e,t,n,i){return e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n),fI},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return fI},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return fI},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return pI(t["border-left-width"])+pI(t["border-right-width"])+pI(t["padding-left"])+pI(t["padding-right"])+pI(t.width)},getHeight:function(e){var t=getComputedStyle(e);return pI(t["border-top-width"])+pI(t["border-bottom-width"])+pI(t["padding-top"])+pI(t["padding-bottom"])+pI(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},mI=function(e){function t(e,n){nI(this,t);var i=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),fI.bind(i.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return oI(t,e),iI(t,[{key:"setValue",value:function(e){var n=rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(uI),gI=function(e){function t(e,n,i){nI(this,t);var r=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i,s=r;if(r.__select=document.createElement("select"),YO.isArray(o)){var a={};YO.each(o,(function(e){a[e]=e})),o=a}return YO.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)})),r.updateDisplay(),fI.bind(r.__select,"change",(function(){s.setValue(this.options[this.selectedIndex].value)})),r.domElement.appendChild(r.__select),r}return oI(t,e),iI(t,[{key:"setValue",value:function(e){var n=rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return fI.isActive(this.__select)?this:(this.__select.value=this.getValue(),rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(uI),vI=function(e){function t(e,n){nI(this,t);var i=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;function o(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),fI.bind(i.__input,"keyup",o),fI.bind(i.__input,"change",o),fI.bind(i.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),fI.bind(i.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return oI(t,e),iI(t,[{key:"updateDisplay",value:function(){return fI.isActive(this.__input)||(this.__input.value=this.getValue()),rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(uI);function yI(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var _I=function(e){function t(e,n,i){nI(this,t);var r=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i||{};return r.__min=o.min,r.__max=o.max,r.__step=o.step,r.__impliedStep=YO.isUndefined(r.__step)?0===r.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__step,r.__precision=yI(r.__impliedStep),r}return oI(t,e),iI(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=yI(e),this}}]),t}(uI),bI=function(e){function t(e,n,i){nI(this,t);var r=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));r.__truncationSuspended=!1;var o=r,s=void 0;function a(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=s-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),s=e.clientY}function c(){fI.unbind(window,"mousemove",l),fI.unbind(window,"mouseup",c),a()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),fI.bind(r.__input,"change",(function(){var e=parseFloat(o.__input.value);YO.isNaN(e)||o.setValue(e)})),fI.bind(r.__input,"blur",(function(){a()})),fI.bind(r.__input,"mousedown",(function(e){fI.bind(window,"mousemove",l),fI.bind(window,"mouseup",c),s=e.clientY})),fI.bind(r.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,a())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return oI(t,e),iI(t,[{key:"updateDisplay",value:function(){var e,n;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=Math.pow(10,this.__precision),Math.round(e*n)/n),rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_I);function wI(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}var xI=function(e){function t(e,n,i,r,o){nI(this,t);var s=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:r,step:o})),a=s;function l(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(wI(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function c(){fI.unbind(window,"mousemove",l),fI.unbind(window,"mouseup",c),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function u(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(wI(t,n.left,n.right,a.__min,a.__max))}function h(){fI.unbind(window,"touchmove",u),fI.unbind(window,"touchend",h),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),fI.bind(s.__background,"mousedown",(function(e){document.activeElement.blur(),fI.bind(window,"mousemove",l),fI.bind(window,"mouseup",c),l(e)})),fI.bind(s.__background,"touchstart",(function(e){1===e.touches.length&&(fI.bind(window,"touchmove",u),fI.bind(window,"touchend",h),u(e))})),fI.addClass(s.__background,"slider"),fI.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return oI(t,e),iI(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",rI(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_I),SI=function(e){function t(e,n,i){nI(this,t);var r=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,fI.bind(r.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),fI.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return oI(t,e),iI(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(uI),MI=function(e){function t(e,n){nI(this,t);var i=sI(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new aI(i.getValue()),i.__temp=new aI(0);var r=i;i.domElement=document.createElement("div"),fI.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",fI.bind(i.__input,"keydown",(function(e){13===e.keyCode&&h.call(this)})),fI.bind(i.__input,"blur",h),fI.bind(i.__selector,"mousedown",(function(){fI.addClass(this,"drag").bind(window,"mouseup",(function(){fI.removeClass(r.__selector,"drag")}))})),fI.bind(i.__selector,"touchstart",(function(){fI.addClass(this,"drag").bind(window,"touchend",(function(){fI.removeClass(r.__selector,"drag")}))}));var o,s=document.createElement("div");function a(e){p(e),fI.bind(window,"mousemove",p),fI.bind(window,"touchmove",p),fI.bind(window,"mouseup",c),fI.bind(window,"touchend",c)}function l(e){f(e),fI.bind(window,"mousemove",f),fI.bind(window,"touchmove",f),fI.bind(window,"mouseup",u),fI.bind(window,"touchend",u)}function c(){fI.unbind(window,"mousemove",p),fI.unbind(window,"touchmove",p),fI.unbind(window,"mouseup",c),fI.unbind(window,"touchend",c),d()}function u(){fI.unbind(window,"mousemove",f),fI.unbind(window,"touchmove",f),fI.unbind(window,"mouseup",u),fI.unbind(window,"touchend",u),d()}function h(){var e=QO(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function d(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,i=(n.clientX-t.left)/(t.right-t.left),o=1-(n.clientY-t.top)/(t.bottom-t.top);return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),r.__color.v=o,r.__color.s=i,r.setValue(r.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return YO.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),YO.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),YO.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),YO.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),YO.extend(s.style,{width:"100%",height:"100%",background:"none"}),TI(s,"top","rgba(0,0,0,0)","#000"),YO.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=i.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",YO.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),fI.bind(i.__saturation_field,"mousedown",a),fI.bind(i.__saturation_field,"touchstart",a),fI.bind(i.__field_knob,"mousedown",a),fI.bind(i.__field_knob,"touchstart",a),fI.bind(i.__hue_field,"mousedown",l),fI.bind(i.__hue_field,"touchstart",l),i.__saturation_field.appendChild(s),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return oI(t,e),iI(t,[{key:"updateDisplay",value:function(){var e=QO(this.getValue());if(!1!==e){var t=!1;YO.each(aI.COMPONENTS,(function(n){if(!YO.isUndefined(e[n])&&!YO.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&YO.extend(this.__color.__state,e)}YO.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;YO.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,TI(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),YO.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),t}(uI),EI=["-moz-","-o-","-webkit-","-ms-",""];function TI(e,t,n,i){e.style.background="",YO.each(EI,(function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "}))}var CI='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',AI=function(e,t){var n=e[t];return YO.isArray(arguments[2])||YO.isObject(arguments[2])?new gI(e,t,arguments[2]):YO.isNumber(n)?YO.isNumber(arguments[2])&&YO.isNumber(arguments[3])?YO.isNumber(arguments[4])?new xI(e,t,arguments[2],arguments[3],arguments[4]):new xI(e,t,arguments[2],arguments[3]):YO.isNumber(arguments[4])?new bI(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new bI(e,t,{min:arguments[2],max:arguments[3]}):YO.isString(n)?new vI(e,t):YO.isFunction(n)?new SI(e,t,""):YO.isBoolean(n)?new mI(e,t):null},PI=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},OI=function(){function e(){nI(this,e),this.backgroundElement=document.createElement("div"),YO.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),fI.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),YO.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;fI.bind(this.backgroundElement,"click",(function(){t.hide()}))}return iI(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),YO.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",fI.unbind(e.domElement,"webkitTransitionEnd",t),fI.unbind(e.domElement,"transitionend",t),fI.unbind(e.domElement,"oTransitionEnd",t)};fI.bind(this.domElement,"webkitTransitionEnd",t),fI.bind(this.domElement,"transitionend",t),fI.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-fI.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-fI.getHeight(this.domElement)/2+"px"}}]),e}();!function(e,t){var n=document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(o){}}(function(e){if("undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var II="Default",kI=function(){try{return!!window.localStorage}catch(e){return!1}}(),RI=void 0,NI=!0,LI=void 0,DI=!1,FI=[],UI=function e(t){var n=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),fI.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=YO.defaults(i,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),i=YO.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),YO.isUndefined(i.load)?i.load={preset:II}:i.preset&&(i.load.preset=i.preset),YO.isUndefined(i.parent)&&i.hideable&&FI.push(this),i.resizable=YO.isUndefined(i.parent)&&i.resizable,i.autoPlace&&YO.isUndefined(i.scrollable)&&(i.scrollable=!0);var r,o=kI&&"true"===localStorage.getItem(WI(0,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(e){n.parent?n.getRoot().preset=e:i.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,ZI(n,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(t){i.closed=t,i.closed?fI.addClass(n.__ul,e.CLASS_CLOSED):fI.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return o},set:function(e){kI&&(o=e,e?fI.bind(window,"unload",s):fI.unbind(window,"unload",s),localStorage.setItem(WI(0,"isLocal"),e))}}}),YO.isUndefined(i.parent)){if(this.closed=i.closed||!1,fI.addClass(this.domElement,e.CLASS_MAIN),fI.makeSelectable(this.domElement,!1),kI&&o){n.useLocalStorage=!0;var l=localStorage.getItem(WI(0,"gui"));l&&(i.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,fI.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),i.closeOnTop?(fI.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(fI.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),fI.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var c=document.createTextNode(i.name);fI.addClass(c,"controller-name"),a=zI(n,c),fI.addClass(this.__ul,e.CLASS_CLOSED),fI.addClass(a,"title"),fI.bind(a,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(YO.isUndefined(i.parent)&&(NI&&(LI=document.createElement("div"),fI.addClass(LI,"dg"),fI.addClass(LI,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(LI),NI=!1),LI.appendChild(this.domElement),fI.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ZI(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},fI.bind(window,"resize",this.__resizeHandler),fI.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),fI.bind(this.__ul,"transitionend",this.__resizeHandler),fI.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&YI(this),this.saveToLocalStorageIfPossible=s=function(){kI&&"true"===localStorage.getItem(WI(0,"isLocal"))&&localStorage.setItem(WI(0,"gui"),JSON.stringify(n.getSaveObject()))},i.parent||((r=n.getRoot()).width+=1,YO.defer((function(){r.width-=1})))};function zI(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,n):e.__ul.appendChild(i),e.onResize(),i}function HI(e){fI.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&fI.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function BI(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function jI(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(n.__rememberedObjectIndecesToControllers[i]=r={}),r[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,s=void 0;if(o[e.preset])s=o[e.preset];else{if(!o.Default)return;s=o.Default}if(s[i]&&void 0!==s[i][t.property]){var a=s[i][t.property];t.initialValue=a,t.setValue(a)}}}}function VI(e,t,n,i){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new MI(t,n);else{var o=[t,n].concat(i.factoryArgs);r=AI.apply(e,o)}i.before instanceof uI&&(i.before=i.before.__li),jI(e,r),fI.addClass(r.domElement,"c");var s=document.createElement("span");fI.addClass(s,"property-name"),s.innerHTML=r.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(r.domElement);var l=zI(e,a,i.before);return fI.addClass(l,UI.CLASS_CONTROLLER_ROW),fI.addClass(l,r instanceof MI?"color":tI(r.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,YO.extend(n,{options:function(t){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),VI(e,n.object,n.property,{before:i,factoryArgs:[YO.toArray(arguments)]})}if(YO.isArray(t)||YO.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),VI(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof xI){var i=new bI(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});YO.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(i,e),t.apply(n,e)}})),fI.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof bI){var r=function(t){if(YO.isNumber(n.__min)&&YO.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=VI(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(i),r&&o.listen(),o}return t};n.min=YO.compose(r,n.min),n.max=YO.compose(r,n.max)}else n instanceof mI?(fI.bind(t,"click",(function(){fI.fakeEvent(n.__checkbox,"click")})),fI.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof SI?(fI.bind(t,"click",(function(){fI.fakeEvent(n.__button,"click")})),fI.bind(t,"mouseover",(function(){fI.addClass(n.__button,"hover")})),fI.bind(t,"mouseout",(function(){fI.removeClass(n.__button,"hover")}))):n instanceof MI&&(fI.addClass(t,"color"),n.updateDisplay=YO.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=YO.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&BI(e.getRoot(),!0),t}),n.setValue)}(e,l,r),e.__controllers.push(r),r}function WI(e,t){return document.location.href+"."+t}function GI(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function qI(e,t){t.style.display=e.useLocalStorage?"block":"none"}function XI(e){var t=e.__save_row=document.createElement("li");fI.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),fI.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",fI.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",fI.addClass(i,"button"),fI.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",fI.addClass(r,"button"),fI.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",fI.addClass(o,"button"),fI.addClass(o,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?YO.each(e.load.remembered,(function(t,n){GI(e,n,n===e.preset)})):GI(e,II,!1),fI.bind(s,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(s),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o),kI){var a=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(WI(0,"isLocal"))&&l.setAttribute("checked","checked"),qI(e,a),fI.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,qI(e,a)}))}var c=document.getElementById("dg-new-constructor");fI.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||RI.hide()})),fI.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),RI.show(),c.focus(),c.select()})),fI.bind(i,"click",(function(){e.save()})),fI.bind(r,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),fI.bind(o,"click",(function(){e.revert()}))}function YI(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){fI.removeClass(e.__closeButton,UI.CLASS_DRAG),fI.unbind(window,"mousemove",n),fI.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),t=r.clientX,fI.addClass(e.__closeButton,UI.CLASS_DRAG),fI.bind(window,"mousemove",n),fI.bind(window,"mouseup",i),!1}e.__resize_handle=document.createElement("div"),YO.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),fI.bind(e.__resize_handle,"mousedown",r),fI.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ZI(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function JI(e,t){var n={};return YO.each(e.__rememberedObjects,(function(i,r){var o={};YO.each(e.__rememberedObjectIndecesToControllers[r],(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[r]=o})),n}UI.toggleHide=function(){DI=!DI,YO.each(FI,(function(e){e.domElement.style.display=DI?"none":""}))},UI.CLASS_AUTO_PLACE="a",UI.CLASS_AUTO_PLACE_CONTAINER="ac",UI.CLASS_MAIN="main",UI.CLASS_CONTROLLER_ROW="cr",UI.CLASS_TOO_TALL="taller-than-window",UI.CLASS_CLOSED="closed",UI.CLASS_CLOSE_BUTTON="close-button",UI.CLASS_CLOSE_TOP="close-top",UI.CLASS_CLOSE_BOTTOM="close-bottom",UI.CLASS_DRAG="drag",UI.DEFAULT_WIDTH=245,UI.TEXT_CLOSED="Close Controls",UI.TEXT_OPEN="Open Controls",UI._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||UI.toggleHide()},fI.bind(window,"keydown",UI._keydownHandler,!1),YO.extend(UI.prototype,{add:function(e,t){return VI(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return VI(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;YO.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&LI.removeChild(this.domElement);var e=this;YO.each(this.__folders,(function(t){e.removeFolder(t)})),fI.unbind(window,"keydown",UI._keydownHandler,!1),HI(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new UI(t);this.__folders[e]=n;var i=zI(this,n.domElement);return fI.addClass(i,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],HI(e);var t=this;YO.each(e.__folders,(function(t){e.removeFolder(t)})),YO.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=fI.getOffset(e.__ul).top,n=0;YO.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=fI.getHeight(t))})),window.innerHeight-t-20<n?(fI.addClass(e.domElement,UI.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(fI.removeClass(e.domElement,UI.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&YO.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:YO.debounce((function(){this.onResize()}),50),remember:function(){if(YO.isUndefined(RI)&&((RI=new OI).domElement.innerHTML=CI),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;YO.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&XI(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ZI(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=JI(this)),e.folders={},YO.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=JI(this),BI(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=JI(this,!0)),this.load.remembered[e]=JI(this),this.preset=e,GI(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){YO.each(this.__controllers,(function(t){this.getRoot().load.remembered?jI(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),YO.each(this.__folders,(function(e){e.revert(e)})),e||BI(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&PI.call(window,(function(){e(t)})),YO.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){YO.each(this.__controllers,(function(e){e.updateDisplay()})),YO.each(this.__folders,(function(e){e.updateDisplay()}))}});var $I=UI;class QI{constructor(e){this.scene=new lS,this.vertex="varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fragment="\n      #define saturate(x) clamp(x, 0., 1.)\n  \n      varying vec2 vUv;\n      \n      uniform vec4 resolution;\n      uniform float progress;\n      uniform float time;\n      uniform sampler2D texture1;\n      uniform sampler2D texture2;\n      uniform sampler2D sortTex1;\n      uniform sampler2D sortTex2;\n      uniform vec2 direction;\n      \n      uniform vec2 mouse;\n      \n      vec2 uvSort(sampler2D sortSampler, vec2 uv) {\n        vec3 sdf = texture2D(sortSampler, uv).rgb;\n        float sortSign = (sdf.b - .5) * 2.;\n        float sortValue = (sdf.r * 255.) / 2048. * sortSign;\n        float displace = sdf.g;\n        return vec2(sortValue, displace);\n      }\n      \n      void main() {\n        vec2 newUV = (vUv - vec2(0.5)) * resolution.zw + vec2(0.5);\n      \n        float vv = dot(direction, newUV);\n        float sortPower = sin(sin(vv * 12. + time * .5)) * sin(vv * 16. + time);\n        sortPower = sortPower * .5 + .5;\n        sortPower = smoothstep(.25, .75, sortPower);\n        sortPower *= smoothstep(.5, 0., length(mouse - newUV)) * .85;\n      \n        vec2 sort0 = uvSort(sortTex1, newUV);\n        vec2 sort1 = uvSort(sortTex2, newUV);\n      \n        float difference = (sort1.x - sort0.x) * (.5 - abs(.5 - progress)) * 10.; //amplified by progress 5 times\n        float slide = smoothstep(difference - .1, difference + .1, progress - .5);\n      \n        float progressFactor0 = smoothstep(0., 1., progress);\n        float progressFactor1 = -smoothstep(1., 0., progress);\n      \n        float sortDisplace0 = saturate(sort0.x * progressFactor0);\n        float sortDisplace1 = saturate(sort1.x * progressFactor1);\n      \n        vec2 displace0 = 1. - sort0.y * progressFactor0 * direction;\n        vec2 displace1 = 1. - sort1.y * progressFactor1 * direction;\n      \n        vec2 uv0 = displace0 * (vUv + sortDisplace0 * direction) + sortPower * sort0.x * direction;\n        vec2 uv1 = displace1 * (vUv + sortDisplace1 * direction) + sortPower * sort1.x * direction;\n    \n        uv0 = (uv0 - vec2(0.5)) * resolution.zw + vec2(0.5);\n        uv1 = (uv1 - vec2(0.5)) * resolution.zw + vec2(0.5);\n      \n        vec4 color0 = texture2D(texture1, uv0);\n        vec4 color1 = texture2D(texture2, uv1);\n      \n        gl_FragColor = mix(color0, color1, slide);\n      }",this.uniforms=e.uniforms,this.renderer=new sS,this.width=window.innerWidth,this.height=window.innerHeight,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.duration=e.duration||1,this.debug=e.debug||!1,this.easing=e.easing||"easeInOut",this.images=e.images,this.pixelSorts=e.pixelSorts,this.sortTextures=[],this.container=e.container,this.addPreloadBg=e.addPreloadBg||!1,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.container.appendChild(this.renderer.domElement),this.destroyed=!1,this.camera=new Gb(70,window.innerWidth/window.innerHeight,.001,1e3),this.camera.position.set(0,0,2),this.time=0,this.current=0,this.textures=[],this.paused=!0,this.initiate(()=>{this.settings(),this.addObjects(),this.resize(),this.play(),this.setupResize()})}initiate(e){this.addPreloadBg&&(this.container.style.backgroundImage='url("'+this.images[0]+'")'),this.renderer.domElement.style.opacity=0;const t=[];let n=this;this.images.forEach((e,i)=>{let r=new Promise(t=>{n.textures[i]=(new IE).load(e,t)});t.push(r)}),this.pixelSorts.forEach((e,i)=>{let r=new Promise(t=>{n.sortTextures[i]=(new IE).load(e,t)});t.push(r)}),Promise.all(t).then(()=>{e()})}settings(){this.debug&&(this.gui=new $I),this.settings={progress:.5},Object.keys(this.uniforms).forEach(e=>{this.settings[e]=this.uniforms[e].value,this.debug&&this.gui.add(this.settings,e,this.uniforms[e].min,this.uniforms[e].max,.01)})}setupResize(){window.addEventListener("resize",this.resize.bind(this))}resize(){if(!this.destroyed){let e=setInterval(()=>{if(this.textures.length&&this.textures[0].image){let t,n;clearInterval(e),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.renderer.domElement.style.opacity=1,this.imageAspect=this.textures[0].image.height/this.textures[0].image.width,this.height/this.width>this.imageAspect?(t=this.width/this.height*this.imageAspect,n=1):(t=1,n=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=t,this.material.uniforms.resolution.value.w=n,this.camera.fov=180/Math.PI*2*Math.atan(1/(2*this.camera.position.z)),this.plane.scale.x=this.camera.aspect,this.plane.scale.y=1,this.camera.updateProjectionMatrix()}},100)}}addObjects(){this.material=new Vb({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:2,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},border:{type:"f",value:0},intensity:{type:"f",value:0},scaleX:{type:"f",value:40},scaleY:{type:"f",value:40},transition:{type:"f",value:40},swipe:{type:"f",value:0},width:{type:"f",value:0},radius:{type:"f",value:0},texture1:{type:"f",value:this.textures[0]},texture2:{type:"f",value:this.textures[1]},mouse:{value:new my(.5,.5)},direction:{value:new my(1,0)},sortTex1:{value:this.sortTextures[0]},sortTex2:{value:this.sortTextures[1]},resolution:{type:"v4",value:new wy}},vertexShader:this.vertex,fragmentShader:this.fragment}),this.geometry=new qM(1,1,2,2),this.plane=new Db(this.geometry,this.material),this.scene.add(this.plane)}stop(){this.paused=!0}play(){this.paused=!1,this.render()}slide(e){this.isRunning=!0;let t=this.textures[e];this.material.uniforms.texture2.value=t;const n=this.sortTextures[e];this.material.uniforms.sortTex2.value=n,Rv.timeline().to(this.material.uniforms.progress,{value:1,duration:this.duration,ease:Tg[this.easing],onComplete:()=>{this.current=e,this.material.uniforms.texture1.value=t,this.material.uniforms.sortTex1.value=n,this.material.uniforms.progress.value=0,this.isRunning=!1}})}render(){this.paused||(this.material&&this.material.uniforms&&(this.time+=.05,this.material.uniforms.time.value=this.time,Object.keys(this.uniforms).forEach(e=>{this.material.uniforms[e].value=this.settings[e]})),requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}destroy(){this.scene=null,this.destroyed=!0}}const KI=["image_slider"],ek=["screen"],tk=["prev_block"],nk=["prev_button"],ik=["next_block"],rk=["next_button"],ok=["navigation_container"],sk=["slider_container"],ak=["subtitle"],lk=["title"],ck=["description"],uk=["progress"];function hk(e,t){if(1&e&&(Qo(0,"div",23),Qo(1,"div",24),Qo(2,"div",25),es(3,"span",26,27),es(5,"h3",28,29),es(7,"p",30,31),Ko(),Ko(),Ko()),2&e){const e=t.$implicit,n=t.index,i=ls();ps("class-types-slider__item--active",n==i.selectedSlide)("class-types-slider__item--prev",n==i.prevSlide),ir(3),Jo("innerHTML",e.subtitle,Fi),ir(2),Jo("innerHTML",e.title,Fi),ir(2),Jo("innerHTML",e.description,Fi)}}function dk(e,t){if(1&e){const e=is();Qo(0,"div",32),Qo(1,"button",33),os("click",(function(){Kt(e);const n=t.index;return ls().selectSlide(n)})),_s(2),Ko(),es(3,"div",34,35),Ko()}if(2&e){const e=t.$implicit,n=t.index,i=ls();ir(1),ps("class-types-navigation__button--active",n==i.selectedSlide),Jo("disabled",n==i.selectedSlide||i.disabled),ir(1),ws(" ",e.name," ")}}let pk=(()=>{class e{constructor(e,t){this.cd=e,this.zone=t,this.subtitles=new ba,this.titles=new ba,this.descriptions=new ba,this.progressBars=new ba,this.slider=[{name:"HIIT",subtitle:"<strong>TRANSFORM</strong> YOURSELF",title:"HIIT Your <strong>Groove</strong>",description:"Build muscle, shred fat, and boost energy in&nbsp;our incredible HIIT classes!",image:"/assets/images/class-types/image-1.jpg",pixelSort:"/assets/images/class-types/pixel-sort-1.jpg"},{name:"Cardio",subtitle:"<strong>TRANSFORM</strong> YOURSELF",title:"Pump <strong>It Up</strong>",description:"Pack on muscle with our targeted strength classes!",image:"/assets/images/class-types/image-2.jpg",pixelSort:"/assets/images/class-types/pixel-sort-2.jpg"},{name:"Strength",subtitle:"<strong>TRANSFORM</strong> YOURSELF",title:"Feel The <strong>Burn</strong>",description:"Shred fat and get toned with our intense cardio classes!",image:"/assets/images/class-types/image-3.jpg",pixelSort:"/assets/images/class-types/pixel-sort-3.jpg"},{name:"Yoga",subtitle:"<strong>TRANSFORM</strong> YOURSELF",title:"Find Your <strong>Zen</strong>",description:"Boost your balance and recovery with energizing yoga classes!",image:"/assets/images/class-types/image-4.jpg",pixelSort:"/assets/images/class-types/pixel-sort-4.jpg"},{name:"Barre",subtitle:"<strong>TRANSFORM</strong> YOURSELF",title:"Raise the <strong>Barre</strong>",description:"Tone your muscles without increasing bulk with barre classes!",image:"/assets/images/class-types/image-5.jpg",pixelSort:"/assets/images/class-types/pixel-sort-5.jpg"}],this.selectedSlide=0,this.prevSlide=0,this.show=!1,this.animArray=[],this.progress=[],this.disabled=!1,this.accessNext=!1,this.sliderReady=!1}ngOnInit(){}ngAfterViewInit(){Rv.registerPlugin(fO),this.zone.runOutsideAngular(()=>{this.initAnimation(),fO.create({trigger:this.screen.nativeElement,onEnter:()=>{this.accessNext=!0,this.sliderReady?(this.initProgress(this.selectedSlide),this.sketch.play()):(this.initSlider(),this.sliderReady=!0,this.animArray.forEach(e=>{e.resume()}))},onEnterBack:()=>{this.accessNext=!0,this.initProgress(this.selectedSlide),this.sketch.play()},onLeave:()=>{this.clearProgress(),this.sketch.stop()},onLeaveBack:()=>{this.clearProgress(),this.sketch.stop()},onUpdate:e=>{Rv.set(this.imageSlider.nativeElement,{y:-300*e.progress})}}),this.navigationButtons()})}navigationButtons(){let e=this.prevButton.nativeElement,t={x:this.prevBlock.nativeElement.clientWidth/2,y:this.prevBlock.nativeElement.clientHeight/2},n={x:t.x,y:t.y};Rv.set(e,{xPercent:-50,yPercent:-50});let i=Rv.quickSetter(e,"x","px"),r=Rv.quickSetter(e,"y","px");this.prevBlock.nativeElement.addEventListener("mousemove",e=>{n.x=e.offsetX,n.y=e.offsetY}),Rv.ticker.add(()=>{var e=1-Math.pow(.9,Rv.ticker.deltaRatio());t.x+=(n.x-t.x)*e,t.y+=(n.y-t.y)*e,i(t.x),r(t.y)});let o=this.nextButton.nativeElement,s={x:this.nextBlock.nativeElement.clientWidth/2,y:this.nextBlock.nativeElement.clientHeight/2},a={x:s.x,y:s.y};Rv.set(o,{xPercent:-50,yPercent:-50});let l=Rv.quickSetter(o,"x","px"),c=Rv.quickSetter(o,"y","px");this.nextBlock.nativeElement.addEventListener("mousemove",e=>{a.x=e.offsetX,a.y=e.offsetY}),Rv.ticker.add(()=>{var e=1-Math.pow(.9,Rv.ticker.deltaRatio());s.x+=(a.x-s.x)*e,s.y+=(a.y-s.y)*e,l(s.x),c(s.y)})}initAnimation(){this.animArray[5]=Rv.fromTo(this.subtitles.toArray()[0].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:1.2,ease:"power1.in"}).pause(),this.animArray[6]=Rv.fromTo(this.titles.toArray()[0].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:1.25,ease:"power1.in"}).pause(),this.animArray[7]=Rv.fromTo(this.descriptions.toArray()[0].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:1.3,ease:"power1.in"}).pause(),this.animArray[8]=Rv.fromTo(this.subtitles.toArray()[0].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:1,ease:"power1.inOut"}).pause(),this.animArray[9]=Rv.fromTo(this.titles.toArray()[0].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:1.05,ease:"power1.inOut"}).pause(),this.animArray[10]=Rv.fromTo(this.descriptions.toArray()[0].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:1.1,ease:"power1.inOut"}).pause()}selectSlide(e){this.disabled=!0,this.prevSlide=this.selectedSlide,this.selectedSlide=e,this.cd.detectChanges(),this.initProgress(e),Rv.fromTo(this.subtitles.toArray()[this.prevSlide].nativeElement,{opacity:1},{opacity:0,duration:.5,delay:.5,ease:"power1.out"}),Rv.fromTo(this.titles.toArray()[this.prevSlide].nativeElement,{opacity:1},{opacity:0,duration:.5,delay:.55,ease:"power1.out"}),Rv.fromTo(this.descriptions.toArray()[this.prevSlide].nativeElement,{opacity:1},{opacity:0,duration:.5,delay:.6,ease:"power1.out"}),Rv.fromTo(this.subtitles.toArray()[e].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:.85,ease:"power1.in"}),Rv.fromTo(this.titles.toArray()[e].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:.9,ease:"power1.in"}),Rv.fromTo(this.descriptions.toArray()[e].nativeElement,{opacity:0},{opacity:1,duration:.5,delay:.95,ease:"power1.in"}),Rv.fromTo(this.subtitles.toArray()[e].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:.65,ease:"power1.inOut"}),Rv.fromTo(this.titles.toArray()[e].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:.7,ease:"power1.inOut"}),Rv.fromTo(this.descriptions.toArray()[e].nativeElement,{y:window.innerWidth/1536*60},{y:0,duration:.8,delay:.75,ease:"power1.inOut"}),setTimeout(()=>{this.disabled=!1,this.cd.detectChanges()},2e3),this.navigationContainer.nativeElement.scrollTo({left:e*(this.navigationContainer.nativeElement.scrollWidth/this.slider.length),behavior:"smooth"}),this.sketch.slide(e)}selectNextSlide(){this.disabled||this.selectSlide((this.selectedSlide+1)%this.slider.length)}selectPrevSlide(){if(!this.disabled){let e=this.selectedSlide-1;e<0&&(e=this.slider.length-1),this.selectSlide(e)}}initProgress(e){this.progressBars.toArray().forEach((e,t)=>{Rv.set(e.nativeElement,{visibility:"hidden"}),this.progress[t]=!1}),Rv.set(this.progressBars.toArray()[e].nativeElement,{visibility:"visible"}),this.progress[e]=!0,Rv.fromTo(this.progressBars.toArray()[e].nativeElement,{xPercent:0},{xPercent:80,duration:5,ease:"linear"}).then(()=>{this.progress[e]&&this.accessNext&&this.selectNextSlide()}),Rv.fromTo(this.progressBars.toArray()[e].nativeElement,{opacity:0},{opacity:1,duration:1,ease:"power1.inOut"}),Rv.fromTo(this.progressBars.toArray()[e].nativeElement,{opacity:1},{opacity:0,duration:1,delay:4,ease:"power1.inOut"})}clearProgress(){this.progressBars.toArray().forEach((e,t)=>{Rv.set(e.nativeElement,{visibility:"hidden"}),this.progress[t]=!1}),this.accessNext=!1}initSlider(){let e=this.slider.map(e=>e.image),t=this.slider.map(e=>e.pixelSort);const n=new my;this.screen.nativeElement.addEventListener("mousemove",e=>{n.x=e.clientX/window.innerWidth,n.y=1-e.clientY/window.innerHeight}),this.sketch=new QI({debug:!1,duration:2,images:e,pixelSorts:t,container:this.sliderContainer.nativeElement,addPreloadBg:!0,uniforms:{intensity:{value:-.3,type:"f",min:0,max:2},direction:{value:new my(1,0)},mouse:{value:n}}}),this.sketch.initiate(()=>{this.initProgress(0),this.show=!0})}ngOnDestroy(){this.sketch&&(this.sketch.stop(),this.sketch.destroy()),fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(wo),Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-class-types"]],viewQuery:function(e,t){var n;1&e&&(Oa(KI,!0),Oa(ek,!0),Oa(tk,!0),Oa(nk,!0),Oa(ik,!0),Oa(rk,!0),Oa(ok,!0),Oa(sk,!0),Oa(ak,!0),Oa(lk,!0),Oa(ck,!0),Oa(uk,!0)),2&e&&(Pa(n=ka())&&(t.imageSlider=n.first),Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.prevBlock=n.first),Pa(n=ka())&&(t.prevButton=n.first),Pa(n=ka())&&(t.nextBlock=n.first),Pa(n=ka())&&(t.nextButton=n.first),Pa(n=ka())&&(t.navigationContainer=n.first),Pa(n=ka())&&(t.sliderContainer=n.first),Pa(n=ka())&&(t.subtitles=n),Pa(n=ka())&&(t.titles=n),Pa(n=ka())&&(t.descriptions=n),Pa(n=ka())&&(t.progressBars=n))},decls:23,vars:6,consts:[[1,"screen","class-types"],["screen",""],[1,"class-types-text-slider"],["class","class-types-slider__item",3,"class-types-slider__item--active","class-types-slider__item--prev",4,"ngFor","ngForOf"],[1,"class-types-image-slider"],["image_slider",""],["id","content",1,"content"],["id","slider",1,"class-types-image-slider__container"],["slider_container",""],[1,"class-types-prev",3,"click"],["prev_block",""],[1,"class-types-prev__button"],["prev_button",""],[1,"icon-arrow-right-2","class-types-prev__button-icon"],[1,"class-types-next",3,"click"],["next_block",""],[1,"class-types-next__button"],["next_button",""],[1,"icon-arrow-right-2","class-types-next__button-icon"],[1,"class-types-navigation"],[1,"class-types-navigation__container"],["navigation_container",""],["class","class-types-navigation__item",4,"ngFor","ngForOf"],[1,"class-types-slider__item"],[1,"screen__container","class-types-text-slider__container"],[1,"class-types-text-slider__content"],[1,"ld-subtitle","class-types-text-slider__subtitle",3,"innerHTML"],["subtitle",""],[1,"ld-h2","class-types-text-slider__title",3,"innerHTML"],["title",""],[1,"ld-description","class-types-text-slider__description",3,"innerHTML"],["description",""],[1,"class-types-navigation__item"],["type","button",1,"class-types-navigation__button",3,"disabled","click"],[1,"class-types-navigation__progress"],["progress",""]],template:function(e,t){1&e&&(Qo(0,"section",0,1),Qo(2,"div",2),Xo(3,hk,9,7,"div",3),Ko(),Qo(4,"div",4,5),Qo(6,"div",6),es(7,"div",7,8),Ko(),Ko(),Qo(9,"div",9,10),os("click",(function(){return t.selectPrevSlide()})),Qo(11,"div",11,12),es(13,"span",13),Ko(),Ko(),Qo(14,"div",14,15),os("click",(function(){return t.selectNextSlide()})),Qo(16,"div",16,17),es(18,"span",18),Ko(),Ko(),Qo(19,"div",19),Qo(20,"div",20,21),Xo(22,dk,5,4,"div",22),Ko(),Ko(),Ko()),2&e&&(ir(3),Jo("ngForOf",t.slider),ir(6),ps("class-types-prev--disabled",t.disabled),ir(5),ps("class-types-next--disabled",t.disabled),ir(8),Jo("ngForOf",t.slider))},directives:[ic],styles:['@charset "UTF-8";.class-types-navigation__button[_ngcontent-%COMP%]:after{font-family:icomoon!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#slider[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{bottom:0;background-size:cover;background-position:50%}#slider[_ngcontent-%COMP%], .class-types-image-slider[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;z-index:1}.class-types-image-slider[_ngcontent-%COMP%]{height:calc(100% + 300px)}.class-types-slider[_ngcontent-%COMP%]{display:none}.class-types-slider__item[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;opacity:0}.class-types-slider__item--prev[_ngcontent-%COMP%]{opacity:1;z-index:1}.class-types-slider__item--active[_ngcontent-%COMP%]{opacity:1;z-index:2}.class-types-slider__bg-container[_ngcontent-%COMP%]{top:0;left:0;width:calc((100vh * .46630765815) + 100%);height:100%;position:absolute;transform:skewX(-25deg);overflow:hidden;transform-origin:0 0}.class-types-slider__bg[_ngcontent-%COMP%]{top:0;left:calc(25vh * -.46630765815);width:calc((25vh * .46630765815) + 100%);height:100%;position:absolute;background-position:top;background-size:cover;transform:skewX(25deg)}.class-types-text-slider[_ngcontent-%COMP%]{position:relative;z-index:3}.class-types-text-slider__item[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;opacity:0}.class-types-text-slider__item--prev[_ngcontent-%COMP%]{opacity:1;z-index:1}.class-types-text-slider__item--active[_ngcontent-%COMP%]{opacity:1;z-index:2}.class-types-text-slider__container[_ngcontent-%COMP%]{padding-top:6.25rem}.class-types-text-slider__content[_ngcontent-%COMP%]{width:26.5625rem}.class-types-text-slider__subtitle[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem}.class-types-text-slider__title[_ngcontent-%COMP%]{margin-bottom:.5rem}.class-types-text-slider__description[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.66)}@media (max-width:560px){.class-types-text-slider__container[_ngcontent-%COMP%]{display:flex;padding-left:.625rem;padding-right:.625rem}.class-types-text-slider__subtitle[_ngcontent-%COMP%]{margin-bottom:0}.class-types-text-slider__description[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.375rem}.class-types-text-slider__content[_ngcontent-%COMP%]{width:auto;text-align:center}.class-types-text-slider__title[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:4.8125rem;line-height:.8}}.class-types__decor-slider-1[_ngcontent-%COMP%]{width:20%}.class-types__decor-slider-1[_ngcontent-%COMP%], .class-types__decor-slider-2[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;z-index:3;overflow:hidden;transform:skewX(-25deg);opacity:0}.class-types__decor-slider-2[_ngcontent-%COMP%]{width:30%}.class-types-slider--2[_ngcontent-%COMP%], .class-types-slider--3[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100vh;width:100vw;filter:blur(5px);transform:skewX(25deg) scale(1.5)}.class-types-slider--3[_ngcontent-%COMP%]{transform:skewX(25deg) scale(1.75)}.class-types-navigation[_ngcontent-%COMP%]{position:absolute;bottom:1.25rem;right:0;left:0;display:flex;justify-content:center;border-top:1px solid hsla(0,0%,100%,.1);border-bottom:1px solid hsla(0,0%,100%,.1);z-index:6}.class-types-navigation__container[_ngcontent-%COMP%]{margin:0 -1px;width:calc(100% + 2px);max-width:1922px;border-left:1px solid hsla(0,0%,100%,.1);border-right:1px solid hsla(0,0%,100%,.1);overflow:hidden;display:flex}.class-types-navigation__item[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;min-width:10.3125rem}.class-types-navigation__item[_ngcontent-%COMP%] + .class-types-navigation__item[_ngcontent-%COMP%]{border-left:1px solid hsla(0,0%,100%,.1)}.class-types-navigation__button[_ngcontent-%COMP%]{width:100%;text-align-last:left;position:relative;border:none;background:transparent;padding:.625rem 1.875rem;min-height:3.0625rem;color:hsla(0,0%,100%,.6);font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.875rem;font-weight:700;line-height:1.29;transition:.2s ease-in-out;display:flex;align-items:center;margin:-1px 0}.class-types-navigation__button[_ngcontent-%COMP%]:hover{color:#fff;background-color:rgba(0,0,0,.5)}.class-types-navigation__button[_ngcontent-%COMP%]:hover:after{color:#fff}.class-types-navigation__button[_ngcontent-%COMP%]:disabled{cursor:default}.class-types-navigation__button[_ngcontent-%COMP%]:disabled:hover{background-color:initial;color:hsla(0,0%,100%,.6)}.class-types-navigation__button[_ngcontent-%COMP%]:disabled:hover:after{color:hsla(0,0%,100%,.4)}.class-types-navigation__button[_ngcontent-%COMP%]:after{content:"\ue900";color:hsla(0,0%,100%,.4);font-size:.5rem;position:absolute;right:1.875rem;top:50%;transform:translateY(-50%);transition:.2s ease-in-out}.class-types-navigation__button--active[_ngcontent-%COMP%], .class-types-navigation__button--active[_ngcontent-%COMP%]:after, .class-types-navigation__button--active[_ngcontent-%COMP%]:disabled:hover, .class-types-navigation__button--active[_ngcontent-%COMP%]:disabled:hover:after{color:#fff}.class-types-navigation__progress[_ngcontent-%COMP%]{width:100%;height:100%;right:100%;position:absolute;top:0;opacity:0;pointer-events:none}.class-types-navigation__progress[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;top:0;width:12.5rem;height:100%;background-image:linear-gradient(270deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))}.class-types-navigation__progress[_ngcontent-%COMP%]:after{content:"";position:absolute;left:100%;top:0;width:2px;height:100%;background:#eb3340;transition:.2s ease-in-out}.class-types-navigation__button[_ngcontent-%COMP%]:hover + .class-types-navigation__progress[_ngcontent-%COMP%]:after{background:#fff}.class-types-navigation__button[_ngcontent-%COMP%]:disabled:hover + .class-types-navigation__progress[_ngcontent-%COMP%]:after{background:#eb3340}@media (max-width:560px){.class-types-navigation[_ngcontent-%COMP%]{bottom:0}.class-types-navigation__container[_ngcontent-%COMP%]{overflow-x:auto}.class-types-navigation__button[_ngcontent-%COMP%]{padding:.625rem 1.25rem}.class-types-navigation__button[_ngcontent-%COMP%]:after{right:1.25rem}}.class-types-next[_ngcontent-%COMP%], .class-types-prev[_ngcontent-%COMP%]{width:20%;height:100%;position:absolute;left:0;z-index:5;cursor:none;opacity:0;transition:.2s ease-in-out}.class-types-next[_ngcontent-%COMP%]:hover, .class-types-prev[_ngcontent-%COMP%]:hover{opacity:1}.class-types-next--disabled[_ngcontent-%COMP%]:hover, .class-types-prev--disabled[_ngcontent-%COMP%]:hover{opacity:0}.class-types-next[_ngcontent-%COMP%]{left:auto;right:0}.class-types-prev__button-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.class-types-next__button[_ngcontent-%COMP%], .class-types-prev__button[_ngcontent-%COMP%]{width:3.125rem;height:3.125rem;display:flex;align-items:center;justify-content:center;border-radius:44%;font-size:1.125rem;color:#fff;background-color:hsla(0,0%,100%,.1);transition:background-color .2s ease-in-out;position:relative;pointer-events:none}']}),e})();const fk=["screen"],mk=["video"],gk=["subtitle"],vk=["title1"],yk=["title2"],_k=["title3"],bk=["title4"],wk=["description"],xk=["decor"];let Sk=(()=>{class e{constructor(e){this.zone=e}ngOnInit(){}ngAfterViewInit(){this.video.nativeElement.muted=!0,this.zone.runOutsideAngular(()=>{this.initAnimation()})}initAnimation(){Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,onEnter:()=>this.willChange(),onEnterBack:()=>this.willChange()});const e={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};let t=window.innerWidth/1536*60;Rv.from(this.video.nativeElement,{scrollTrigger:e,y:window.innerWidth/1536*-250,duration:1.5,ease:"power1.inOut"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.5,ease:"power1.inOut"}),Rv.from(this.title1.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.54,ease:"power1.out"}),Rv.from(this.title2.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.58,ease:"power1.out"}),Rv.from(this.title3.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.62,ease:"power1.out"}),Rv.from(this.title4.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.66,ease:"power1.out"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.7,ease:"power1.inOut"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.65,ease:"power1.in"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.81,ease:"power1.in"}),this.decorSequenceAnimation()}decorSequenceAnimation(){Rv.fromTo(this.decor.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:this.decor.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:2,repeat:-1,ease:"steps(50)"})}willChange(){const e=[this.video.nativeElement,this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.title3.nativeElement,this.title4.nativeElement];Rv.set(e,{willChange:"transform, opacity"}),setTimeout(()=>{Rv.set(e,{willChange:"auto"})},1500)}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-ai"]],viewQuery:function(e,t){var n;1&e&&(Oa(fk,!0),Oa(mk,!0),Oa(gk,!0),Oa(vk,!0),Oa(yk,!0),Oa(_k,!0),Oa(bk,!0),Oa(wk,!0),Oa(xk,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.video=n.first),Pa(n=ka())&&(t.subtitle=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.title3=n.first),Pa(n=ka())&&(t.title4=n.first),Pa(n=ka())&&(t.description=n.first),Pa(n=ka())&&(t.decor=n.first))},decls:36,vars:0,consts:[[1,"screen","ai"],["screen",""],[1,"ai__decor"],["decor",""],[1,"screen__container","ai__container"],["autoplay","","loop","","muted","","playsinline","","src","/assets/videos/workout.mp4","type","video/mp4",1,"ai__video"],["video",""],[1,"ai__content"],[1,"ld-subtitle","ai__subtitle"],["subtitle",""],[1,"ld-h2","ai__title"],[1,"ai__title-string"],["title1",""],["title2",""],["title3",""],["title4",""],[1,"ld-description"],["description",""]],template:function(e,t){1&e&&(Qo(0,"section",0,1),es(2,"div",2,3),Qo(4,"div",4),es(5,"video",5,6),Qo(7,"div",7),Qo(8,"span",8,9),_s(10,"AI-Powered "),Qo(11,"strong"),_s(12,"Analytics"),Ko(),Ko(),Qo(13,"h2",10),Qo(14,"span",11),Qo(15,"span",null,12),_s(17,"Experience"),Ko(),Ko(),Qo(18,"span",11),Qo(19,"strong",null,13),_s(21,"The Most"),Ko(),Ko(),Qo(22,"span",11),Qo(23,"strong",null,14),_s(25,"Advanced"),Ko(),Ko(),Qo(26,"span",11),Qo(27,"strong",null,15),_s(29,"Workout"),Ko(),Ko(),Ko(),Qo(30,"p",16,17),_s(32,"The Presence "),Qo(33,"strong"),_s(34,"AI Engine"),Ko(),_s(35," leverages state-of-the-art multi-sensor tracking to provide the most sophisticated and effective workout."),Ko(),Ko(),Ko(),Ko())},styles:[".ai__container[_ngcontent-%COMP%]{min-height:60rem;justify-content:flex-end}.ai__image[_ngcontent-%COMP%]{position:absolute;left:-5.3125rem;bottom:0;width:54.1875rem;height:56.75rem;background:url(/assets/images/ai/image.png) bottom no-repeat;background-size:contain}.ai__video[_ngcontent-%COMP%]{position:absolute;left:-1.25rem;bottom:-1.25rem;height:60rem}.ai__decor[_ngcontent-%COMP%]{position:absolute;pointer-events:none;right:18.75rem;bottom:0;width:18.75rem;height:18.75rem;background-image:url(/assets/images/ai/decor.png);background-position:0 0;background-size:auto 100%;transition:none}.ai__content[_ngcontent-%COMP%]{width:38.75rem}.ai__subtitle[_ngcontent-%COMP%]{display:block}.ai__title[_ngcontent-%COMP%]{margin-bottom:.625rem}.ai__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.875rem;margin:-.1875rem -1.875rem}.ai__title-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .ai__title-string[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}@media (max-width:560px){.ai__container[_ngcontent-%COMP%]{min-height:40.625rem;align-items:flex-end;display:flex;padding-bottom:0}.ai__video[_ngcontent-%COMP%]{width:100%;left:0;top:0;bottom:auto;height:auto}.ai__decor[_ngcontent-%COMP%]{display:none}.ai__content[_ngcontent-%COMP%]{width:auto}}"]}),e})();const Mk=["screen"],Ek=["bg_container"],Tk=["bg"],Ck=["subtitle"],Ak=["title1"],Pk=["title2"],Ok=["description"],Ik=["avatar"],kk=["coach_name"],Rk=["coach_description"],Nk=["progress_bar"];function Lk(e,t){if(1&e){const e=is();Qo(0,"div",22),os("click",(function(){Kt(e);const n=t.index;return ls().selectCoach(n)})),es(1,"img",23,24),es(3,"canvas",25,26),Ko()}if(2&e){const e=t.$implicit,n=t.index,i=ls();ps("coaches-tabs__avatar--active",n==i.selectedIndex),ir(1),Jo("src",i.webp?e.avatarWebp:e.avatar,Ui)("alt",e.name)}}function Dk(e,t){if(1&e&&(Qo(0,"div",27),Qo(1,"p",28,29),_s(3),Ko(),es(4,"p",30,31),Ko()),2&e){const e=t.$implicit;ps("coaches-tabs__content-item--active",t.index==ls().selectedIndex),ir(3),bs(e.name),ir(1),Jo("innerHTML",e.description,Fi)}}let Fk=(()=>{class e{constructor(e,t){this.cd=e,this.zone=t,this.avatars=new ba,this.coachNames=new ba,this.coachDescriptions=new ba,this.progressBars=new ba,this.show=!1,this.imageReady=!1,this.coaches=[{name:"Alexa Aftias",description:"Alexa has 8 years of experience<br> training in Sports.",avatar:"/assets/images/live-coaching/coaches/avatar-1.jpg",photo:"/assets/images/live-coaching/coaches/photo-1.jpg",avatarWebp:"/assets/images/live-coaching/coaches/avatar-1.webp",photoWebp:"/assets/images/live-coaching/coaches/photo-1.webp"},{name:"Samantha Schulz",description:"Samantha has been an elite instructor<br> in the fitness industry for 8+ years.",avatar:"/assets/images/live-coaching/coaches/avatar-2.jpg",photo:"/assets/images/live-coaching/coaches/photo-2.jpg",avatarWebp:"/assets/images/live-coaching/coaches/avatar-2.webp",photoWebp:"/assets/images/live-coaching/coaches/photo-2.webp"},{name:"Jerry Yudt",description:"Jerry is an ACE Certified<br> Personal Trainer.",avatar:"/assets/images/live-coaching/coaches/avatar-3.jpg",photo:"/assets/images/live-coaching/coaches/photo-3.jpg",avatarWebp:"/assets/images/live-coaching/coaches/avatar-3.webp",photoWebp:"/assets/images/live-coaching/coaches/photo-3.webp"},{name:"Megan Miller",description:"Megan is Certified NESTA Personal Trainer and<br> a CrossFit Level 1 Coach.",avatar:"/assets/images/live-coaching/coaches/avatar-4.jpg",photo:"/assets/images/live-coaching/coaches/photo-4.jpg",avatarWebp:"/assets/images/live-coaching/coaches/avatar-4.webp",photoWebp:"/assets/images/live-coaching/coaches/photo-4.webp"}],this.webp=!1,this.animArray2=[],this.selectedIndex=0}ngOnInit(){document.body.classList.contains("body--webp")&&(this.webp=!0)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.initAnimation()})}initAnimation(){Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,onEnter:()=>{this.screen.nativeElement&&(this.willChange(),setTimeout(()=>{this.initProgressBar(this.selectedIndex)},1300),this.imageReady?this.sketch.play():(this.initImage(),this.imageReady=!0))},onEnterBack:()=>{this.screen.nativeElement&&(this.willChange(),this.sketch.play(),setTimeout(()=>{this.initProgressBar(this.selectedIndex)},1300))},onLeave:()=>{this.clearProgress(),this.sketch.stop()},onLeaveBack:()=>{this.clearProgress(),this.sketch.stop()},onUpdate:e=>{Rv.set(this.bgContainer.nativeElement,{y:-200*e.progress})}});const e={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};let t=window.innerWidth/1536*60;Rv.fromTo(this.bg.nativeElement,{scale:1.5},{scrollTrigger:e,scale:1,duration:2,ease:"power1.inOut",clearProps:"scale"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.5,ease:"power1.inOut"}),Rv.from(this.title1.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.54,ease:"power1.out"}),Rv.from(this.title2.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.58,ease:"power1.out"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.62,ease:"power1.inOut"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.65,ease:"power1.in"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.77,ease:"power1.in"}),this.avatars.toArray().forEach((t,n)=>{Rv.from(t.nativeElement,{scrollTrigger:e,scale:0,duration:.8,delay:.5+.07*n,ease:"power1.inOut",clearProps:"all"})}),Rv.fromTo(this.coachNames.toArray()[0].nativeElement,{y:t/2},{scrollTrigger:e,y:0,duration:.8,delay:.65,ease:"power1.inOut"}),Rv.fromTo(this.coachDescriptions.toArray()[0].nativeElement,{y:t/2},{scrollTrigger:e,y:0,duration:.8,delay:.69,ease:"power1.inOut"}),Rv.fromTo(this.coachNames.toArray()[0].nativeElement,{opacity:0},{scrollTrigger:e,opacity:1,duration:.5,delay:.8,ease:"power1.in"}),Rv.fromTo(this.coachDescriptions.toArray()[0].nativeElement,{opacity:0},{scrollTrigger:e,opacity:1,duration:.5,delay:.84,ease:"power1.in"})}selectCoach(e){let t=window.innerWidth/1536*60;this.selectedIndex=e,this.cd.detectChanges(),Rv.from(this.coachNames.toArray()[e].nativeElement,{y:t/2,duration:1,ease:"power1.inOut",clearProps:"all"}),Rv.from(this.coachDescriptions.toArray()[e].nativeElement,{y:t/2,duration:1,delay:.04,ease:"power1.inOut",clearProps:"all"}),Rv.from(this.coachNames.toArray()[e].nativeElement,{opacity:0,duration:.5,delay:.15,ease:"power1.in"}),Rv.from(this.coachDescriptions.toArray()[e].nativeElement,{opacity:0,duration:.5,delay:.19,ease:"power1.in"}),this.initProgressBar(e)}initProgressBar(e){clearInterval(this.acrInterval),this.progressBars.toArray().forEach(e=>{e.nativeElement.getContext("2d").clearRect(0,0,e.nativeElement.offsetWidth,e.nativeElement.offsetHeight)});const t=this.progressBars.toArray()[e].nativeElement;t.width=t.offsetWidth,t.height=t.offsetHeight;let n=t.width/2,i=t.height/2;const r=t.getContext("2d");let o=0;this.zone.runOutsideAngular(()=>{this.acrInterval=setInterval(()=>{if(r&&(o+=1,r.clearRect(0,0,t.width,t.height),r.beginPath(),r.strokeStyle="#eb3340",r.lineWidth=2,r.arc(n,i,t.width/2-1,Math.PI/180*270,Math.PI/180*(270+o)),r.stroke(),360==o)){clearInterval(this.acrInterval),r.clearRect(0,0,t.width,t.height);let n=e+1;n>=this.coaches.length&&(n=0),this.selectCoach(n)}},14)})}clearProgress(){clearInterval(this.acrInterval),this.selectedIndex=0,this.progressBars.toArray().forEach(e=>{e.nativeElement.getContext("2d").clearRect(0,0,e.nativeElement.offsetWidth,e.nativeElement.offsetHeight)})}initImage(){let e=["/assets/images/live-coaching/image.jpg"];document.body.classList.contains("body--webp")&&(e=["/assets/images/live-coaching/image.webp"]);const t=new my;this.bgContainer.nativeElement.addEventListener("mousemove",e=>{t.x=e.clientX/this.screen.nativeElement.clientWidth,t.y=1-e.clientY/this.screen.nativeElement.clientHeight}),this.sketch=new QI({debug:!1,duration:2,images:e,pixelSorts:["/assets/images/live-coaching/image-pixel-sort.jpg"],container:this.bg.nativeElement,uniforms:{intensity:{value:-.3,type:"f",min:0,max:2},direction:{value:new my(1,0)},mouse:{value:t}},fragment:"\n      #define saturate(x) clamp(x, 0., 1.)\n      \n      varying vec2 vUv;\n      \n      uniform vec4 resolution;\n      uniform float progress;\n      uniform float time;\n      uniform sampler2D texture1;\n      uniform sampler2D texture2;\n      uniform sampler2D sortTex1;\n      uniform sampler2D sortTex2;\n      uniform vec2 direction;\n      \n      uniform vec2 mouse;\n      \n      vec2 uvSort(sampler2D sortSampler, vec2 uv) {\n        vec3 sdf = texture2D(sortSampler, uv).rgb;\n        float sortSign = (sdf.b - .5) * 2.;\n        float flatRes = dot(resolution.xy, direction);\n        float sortValue = (sdf.r * 255.) / flatRes * sortSign;\n        float displace = sdf.g;\n        return vec2(sortValue, displace);\n      }\n      \n      void main() {\n        vec2 newUV = (vUv - vec2(0.5)) * resolution.zw + vec2(0.5);\n      \n        float vv = dot(direction, newUV);\n        float sortPower = sin(sin(vv * 12. + time * .5)) * sin(vv * 16. + time);\n        sortPower = sortPower * .5 + .5;\n        sortPower = smoothstep(.25, .75, sortPower);\n        sortPower *= smoothstep(.5, 0., length(mouse - newUV)) * .85;\n      \n        vec2 sort0 = uvSort(sortTex1, newUV);\n        vec2 sort1 = uvSort(sortTex2, newUV);\n      \n        float difference = (sort1.x - sort0.x) * (.5 - abs(.5 - progress)) * 10.; //amplified by progress 5 times\n        float slide = smoothstep(difference - .1, difference + .1, progress - .5);\n      \n        float progressFactor0 = smoothstep(0., 1., progress);\n        float progressFactor1 = -smoothstep(1., 0., progress);\n      \n        float sortDisplace0 = saturate(sort0.x * progressFactor0);\n        float sortDisplace1 = saturate(sort1.x * progressFactor1);\n      \n        vec2 displace0 = 1. - sort0.y * progressFactor0 * direction;\n        vec2 displace1 = 1. - sort1.y * progressFactor1 * direction;\n      \n        vec2 uv0 = displace0 * (newUV + sortDisplace0 * direction) + sortPower * sort0.x * direction;\n        vec2 uv1 = displace1 * (newUV + sortDisplace1 * direction) + sortPower * sort1.x * direction;\n      \n        vec4 color0 = texture2D(texture1, uv0);\n        vec4 color1 = texture2D(texture2, uv1);\n      \n        gl_FragColor = mix(color0, color1, slide);\n      }\n      "}),this.sketch.initiate(()=>{this.show=!0})}ngOnDestroy(){this.sketch&&(this.sketch.stop(),this.sketch.destroy()),clearInterval(this.acrInterval),fO.getAll().forEach(e=>e.kill())}willChange(){const e=[this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.description.nativeElement];Rv.set(e,{willChange:"transform, opacity"}),setTimeout(()=>{Rv.set(e,{willChange:"auto"})},1500)}}return e.\u0275fac=function(t){return new(t||e)(Yo(wo),Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-live-coaching"]],viewQuery:function(e,t){var n;1&e&&(Oa(Mk,!0),Oa(Ek,!0),Oa(Tk,!0),Oa(Ck,!0),Oa(Ak,!0),Oa(Pk,!0),Oa(Ok,!0),Oa(Ik,!0),Oa(kk,!0),Oa(Rk,!0),Oa(Nk,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.bgContainer=n.first),Pa(n=ka())&&(t.bg=n.first),Pa(n=ka())&&(t.subtitle=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.description=n.first),Pa(n=ka())&&(t.avatars=n),Pa(n=ka())&&(t.coachNames=n),Pa(n=ka())&&(t.coachDescriptions=n),Pa(n=ka())&&(t.progressBars=n))},decls:40,vars:4,consts:[[1,"screen","live-coaching"],["screen",""],[1,"screen__container"],[1,"live-coaching__image"],[1,"live-coaching__bg-container"],["bg_container",""],[1,"live-coaching__bg"],["bg",""],[1,"live-coaching__content"],[1,"ld-subtitle","live-coaching__subtitle"],["subtitle",""],[1,"ld-h2","live-coaching__title"],[1,"live-coaching__title-string"],["title1",""],["title2",""],[1,"ld-description","live-coaching__description"],["description",""],[1,"coaches-tabs"],[1,"coaches-tabs__avatars"],["class","coaches-tabs__avatar",3,"coaches-tabs__avatar--active","click",4,"ngFor","ngForOf"],[1,"coaches-tabs__content"],["class","coaches-tabs__content-item",3,"coaches-tabs__content-item--active",4,"ngFor","ngForOf"],[1,"coaches-tabs__avatar",3,"click"],[1,"coaches-tabs__avatar-img",3,"src","alt"],["avatar",""],[1,"coaches-tabs__progress-bar"],["progress_bar",""],[1,"coaches-tabs__content-item"],[1,"coaches-tabs__name"],["coach_name",""],[1,"coaches-tabs__description",3,"innerHTML"],["coach_description",""]],template:function(e,t){1&e&&(Qo(0,"section",0,1),Qo(2,"div",2),Qo(3,"div",3),Qo(4,"div",4,5),es(6,"div",6,7),Ko(),Ko(),Qo(8,"div",8),Qo(9,"span",9,10),Qo(11,"strong"),_s(12,"Live"),Ko(),_s(13," coaching"),Ko(),Qo(14,"h2",11),Qo(15,"span",12),Qo(16,"span",null,13),_s(18,"Real Coaching,"),Ko(),Ko(),Qo(19,"span",12),Qo(20,"strong",null,14),_s(22,"Real Results"),Ko(),Ko(),Ko(),Qo(23,"p",15,16),_s(25,"Every Presence class features "),Qo(26,"strong"),_s(27,"live trainers"),Ko(),_s(28," who observe, coach, and motivate you in "),Qo(29,"strong"),_s(30,"real-time."),Ko(),_s(31," Experience the energy and results of "),Qo(32,"strong"),_s(33,"real training"),Ko(),_s(34,"."),Ko(),Ko(),Qo(35,"div",17),Qo(36,"div",18),Xo(37,Lk,5,4,"div",19),Ko(),Qo(38,"div",20),Xo(39,Dk,6,4,"div",21),Ko(),Ko(),Ko(),Ko()),2&e&&(ir(6),ps("live-coaching__bg--active",t.show),ir(31),Jo("ngForOf",t.coaches),ir(2),Jo("ngForOf",t.coaches))},directives:[ic],styles:['.live-coaching__image[_ngcontent-%COMP%]{position:absolute;top:0;right:0;height:100%;width:45rem;overflow:hidden}.live-coaching__bg-container[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:calc(100% + 300px);position:absolute;overflow:hidden;transform-origin:0 0}.live-coaching__bg[_ngcontent-%COMP%]{width:100%;height:100%;left:0;top:0;position:absolute;background-position:top;background-repeat:no-repeat;background-size:cover}.live-coaching__photo[_ngcontent-%COMP%]{position:absolute;width:9.9375rem;height:15.75rem;opacity:0;transition:opacity .4s ease-in-out;pointer-events:none;background-size:cover;border-radius:.75rem;z-index:1}.live-coaching__photo--active[_ngcontent-%COMP%]{opacity:1}.live-coaching__photo[_ngcontent-%COMP%]:nth-child(4n+1){top:6.625rem;right:40.4375rem}.live-coaching__photo[_ngcontent-%COMP%]:nth-child(4n+2){top:9.5625rem;left:30rem}.live-coaching__photo[_ngcontent-%COMP%]:nth-child(4n+3){bottom:10rem;right:40rem}.live-coaching__photo[_ngcontent-%COMP%]:nth-child(4n){top:50%;right:4.5rem}.live-coaching__content[_ngcontent-%COMP%]{position:relative;width:39.375rem;padding-bottom:1.25rem;z-index:2}.live-coaching__subtitle[_ngcontent-%COMP%]{display:block}.live-coaching__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.875rem;margin:-.1875rem -1.875rem}.live-coaching__title-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .live-coaching__title-string[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}@media (max-width:560px){.live-coaching__image[_ngcontent-%COMP%]{width:100%}.live-coaching__image[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;right:0;background:rgba(0,0,0,.1);z-index:1}.live-coaching__photo[_ngcontent-%COMP%]{display:none}.live-coaching__content[_ngcontent-%COMP%]{width:auto}.live-coaching__description[_ngcontent-%COMP%]{color:#fff}.live-coaching__title-string[_ngcontent-%COMP%]{padding:0 1.25rem;margin:-.1875rem -1.25rem}}.coaches-tabs[_ngcontent-%COMP%]{position:absolute;bottom:1.6875rem;left:3.75rem;z-index:2}.coaches-tabs__avatars[_ngcontent-%COMP%]{display:flex;margin-bottom:.4375rem}.coaches-tabs__avatar[_ngcontent-%COMP%]{width:4.375rem;height:4.375rem;position:relative;border-radius:50%;cursor:pointer;margin-right:.625rem}.coaches-tabs__avatar-img[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:3.75rem;height:3.75rem;border-radius:50%}.coaches-tabs__progress-bar[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.coaches-tabs__content[_ngcontent-%COMP%]{height:3.75rem;overflow:hidden;position:relative}.coaches-tabs__content-item[_ngcontent-%COMP%]{position:absolute;top:0;left:0;opacity:0}.coaches-tabs__content-item--active[_ngcontent-%COMP%]{opacity:1}.coaches-tabs__name[_ngcontent-%COMP%]{color:#eb3340;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-weight:700;line-height:2;margin:0}.coaches-tabs__description[_ngcontent-%COMP%]{opacity:.61;color:#9ba2ae;font-size:.75rem;font-weight:400;line-height:1.42;margin:0}@media (max-width:560px){.coaches-tabs[_ngcontent-%COMP%]{bottom:1.25rem;left:1.25rem}.coaches-tabs__description[_ngcontent-%COMP%]{opacity:1;color:#fff}}']}),e})();const Uk=["screen"],zk=["image"],Hk=["subtitle"],Bk=["title1"],jk=["title2"],Vk=["title3"],Wk=["description"],Gk=["decor_sequence"];let qk=(()=>{class e{constructor(e){this.zone=e,this.decorSequences=new ba}ngOnInit(){}ngAfterViewInit(){this.image.nativeElement.muted=!0,this.zone.runOutsideAngular(()=>{this.initAnimation()})}initAnimation(){Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,onEnter:()=>{this.willChange(),this.image.nativeElement.play()},onEnterBack:()=>{this.willChange(),this.image.nativeElement.play()},onLeave:()=>{this.image.nativeElement.pause()},onLeaveBack:()=>{this.image.nativeElement.pause()}});const e={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};let t=window.innerWidth/1536*60;Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.5,ease:"power1.inOut"}),Rv.from(this.title1.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.54,ease:"power1.out"}),Rv.from(this.title2.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.58,ease:"power1.out"}),Rv.from(this.title3.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,duration:.8,delay:.62,ease:"power1.out"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.66,ease:"power1.inOut"}),Rv.from(this.subtitle.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.65,ease:"power1.in"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.81,ease:"power1.in"}),Rv.from(this.image.nativeElement,{scrollTrigger:e,y:window.innerWidth/1536*-40,duration:1.5,ease:"power1.inOut"}),this.sequencesAnimation()}sequencesAnimation(){this.decorSequences.toArray().forEach((e,t)=>{Rv.fromTo(e.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:e.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:2,repeat:-1,ease:"steps(50)"})})}willChange(){const e=[this.subtitle.nativeElement,this.title1.nativeElement,this.title2.nativeElement,this.title3.nativeElement,this.description.nativeElement];Rv.set(e,{willChange:"transform, opacity"}),setTimeout(()=>{Rv.set(e,{willChange:"auto"})},1500)}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-train-anywhere"]],viewQuery:function(e,t){var n;1&e&&(Oa(Uk,!0),Oa(zk,!0),Oa(Hk,!0),Oa(Bk,!0),Oa(jk,!0),Oa(Vk,!0),Oa(Wk,!0),Oa(Gk,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.image=n.first),Pa(n=ka())&&(t.subtitle=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.title3=n.first),Pa(n=ka())&&(t.description=n.first),Pa(n=ka())&&(t.decorSequences=n))},decls:35,vars:0,consts:[[1,"screen","train-anywhere"],["screen",""],[1,"train-anywhere__decor"],["decor_sequence",""],[1,"screen__container","train-anywhere__container"],["loop","","muted","","playsinline","","src","/assets/videos/anywhere.mp4","type","video/mp4",1,"train-anywhere__cube"],["image",""],[1,"train-anywhere__content"],[1,"ld-subtitle","train-anywhere__subtitle"],["subtitle",""],[1,"ld-h2","train-anywhere__title"],[1,"train-anywhere__title-string"],["title1",""],["title2",""],["title3",""],[1,"ld-description"],["description",""]],template:function(e,t){1&e&&(Qo(0,"section",0,1),es(2,"div",2,3),Qo(4,"div",4),es(5,"video",5,6),Qo(7,"div",7),Qo(8,"span",8,9),Qo(10,"strong"),_s(11,"Train"),Ko(),_s(12," anywhere"),Ko(),Qo(13,"h2",10),Qo(14,"span",11),Qo(15,"span",null,12),_s(17,"At Home,"),Ko(),Ko(),Qo(18,"span",11),Qo(19,"strong",null,13),_s(21,"At Work, On The"),Ko(),Ko(),Qo(22,"span",11),Qo(23,"strong",null,14),_s(25,"Go"),Ko(),Ko(),Ko(),Qo(26,"p",15,16),_s(28,"Presence brings "),Qo(29,"strong"),_s(30,"daily high-energy training"),Ko(),_s(31,", no matter where you are in the world. Join from your "),Qo(32,"strong"),_s(33,"phone or smart tv"),Ko(),_s(34,", and step into your Presence studio."),Ko(),Ko(),Ko(),Ko())},styles:[".train-anywhere__container[_ngcontent-%COMP%]{min-height:60rem;justify-content:flex-end}.train-anywhere__image[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:0;width:76.125rem;height:60rem;background:url(/assets/images/train-anywhere/image.png) top no-repeat;background-size:contain}.train-anywhere__decor[_ngcontent-%COMP%]{position:absolute;pointer-events:none;right:34.375rem;bottom:0;width:18.75rem;height:18.75rem;background-image:url(/assets/images/train-anywhere/decor-2.png);background-position:0 0;background-size:auto 100%;transition:none}.train-anywhere__cube[_ngcontent-%COMP%]{width:48rem;height:48rem;position:absolute;left:0;top:50%;transform:translateY(-47%)}.train-anywhere__content[_ngcontent-%COMP%]{position:relative;width:40.625rem}.train-anywhere__subtitle[_ngcontent-%COMP%]{display:block}.train-anywhere__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 1.875rem;margin:-.1875rem -1.875rem}.train-anywhere__title-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .train-anywhere__title-string[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}@media (max-width:560px){.train-anywhere__container[_ngcontent-%COMP%]{min-height:39.375rem}.train-anywhere__decor[_ngcontent-%COMP%]{display:none}.train-anywhere__cube[_ngcontent-%COMP%]{width:18.75rem;height:18.75rem;position:absolute;left:50%;top:auto;bottom:0;transform:translateX(-50%)}.train-anywhere__content[_ngcontent-%COMP%]{width:auto}.train-anywhere__title-string[_ngcontent-%COMP%]{padding:0 1.25rem;margin:-.1875rem -1.25rem}}"]}),e})();const Xk=function(){return["/terms-of-service"]};let Yk=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-footer"]],decls:12,vars:2,consts:[[1,"footer"],[1,"footer__left"],[1,"footer__link",3,"routerLink"],[1,"footer__center"],[1,"footer__copyright"],[1,"footer__right"],[1,"footer__design"],["href","https://geex-arts.com/","target","_blank",1,"footer__link"]],template:function(e,t){1&e&&(Qo(0,"footer",0),Qo(1,"div",1),Qo(2,"a",2),_s(3,"Terms of Service"),Ko(),Ko(),Qo(4,"div",3),Qo(5,"p",4),_s(6,"\xa9 2020 NeuralX, Inc. All rights reserved."),Ko(),Ko(),Qo(7,"div",5),Qo(8,"div",6),_s(9," Design by "),Qo(10,"a",7),_s(11,"Geex Arts"),Ko(),Ko(),Ko(),Ko()),2&e&&(ir(2),Jo("routerLink",va(1,Xk)))},directives:[Qd],styles:[".footer[_ngcontent-%COMP%]{position:absolute;z-index:10;bottom:0;right:0;left:0;padding:1.25rem 1.875rem;display:flex;align-items:center}.footer__center[_ngcontent-%COMP%], .footer__left[_ngcontent-%COMP%], .footer__right[_ngcontent-%COMP%]{flex:1}.footer__link[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.6);font-size:.75rem;font-weight:700;line-height:2;text-transform:uppercase;transition:.2s ease-in-out}.footer__link[_ngcontent-%COMP%]:hover{color:#eb3340}.footer__copyright[_ngcontent-%COMP%]{text-align:center}.footer__copyright[_ngcontent-%COMP%], .footer__design[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.6);font-size:.75rem;font-weight:700;line-height:2;margin:0}.footer__right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (max-width:560px){.footer[_ngcontent-%COMP%]{position:absolute;z-index:10;bottom:0;right:0;left:0;padding:.875rem 1.25rem}.footer__left[_ngcontent-%COMP%], .footer__right[_ngcontent-%COMP%]{display:none}.footer__copyright[_ngcontent-%COMP%]{text-align:center;color:hsla(0,0%,100%,.6);font-size:.75rem;font-weight:700;line-height:2;margin:0}}"]}),e})();const Zk=["screen"],Jk=["title1"],$k=["title2"],Qk=["bg_container"],Kk=["bg"],eR=["store"],tR=["description"],nR=["price"],iR=["footer"];let rR=(()=>{class e{constructor(e){this.zone=e,this.show=!1,this.imageReady=!1}ngOnInit(){}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.initAnimation()})}initAnimation(){Rv.registerPlugin(fO),fO.create({trigger:this.screen.nativeElement,end:"bottom bottom =+50px",onEnter:()=>{this.imageReady?this.sketch.play():(this.initImage(),this.imageReady=!0),this.willChange()},onEnterBack:()=>{this.sketch.play(),this.willChange()},onLeave:()=>{this.sketch.stop()},onLeaveBack:()=>{this.sketch.stop()},onUpdate:e=>{Rv.set(this.bgContainer.nativeElement,{y:-200*e.progress})}});const e={trigger:this.screen.nativeElement,toggleActions:"play reset play reset"};let t=window.innerWidth/1536*60;Rv.from(this.bg.nativeElement,{scrollTrigger:e,scale:1.2,duration:2,ease:"power1.inOut",clearProps:"xPercent"}),Rv.from(this.title1.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,ease:"power1.out",duration:1}),Rv.from(this.title2.nativeElement,{scrollTrigger:e,yPercent:100,rotationX:50,ease:"power1.out",duration:1,delay:.4}),Rv.from(this.store.nativeElement,{scrollTrigger:e,scale:0,duration:1,delay:.65,ease:"power1.inOut"}),Rv.from(this.price.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:.95,ease:"power1.in"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:1.15,ease:"power1.in"}),Rv.from(this.price.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:.8,ease:"power1.inOut"}),Rv.from(this.description.nativeElement,{scrollTrigger:e,y:t,duration:.8,delay:1,ease:"power1.inOut"}),Rv.from(this.footer.nativeElement,{scrollTrigger:e,opacity:0,duration:.5,delay:1,ease:"power1.in"})}initImage(){const e=new my;this.screen.nativeElement.addEventListener("mousemove",t=>{e.x=t.clientX/this.screen.nativeElement.clientWidth,e.y=1-t.clientY/this.screen.nativeElement.clientHeight}),this.sketch=new QI({debug:!1,duration:2,images:["/assets/images/unlimited-classes/bg.jpg"],pixelSorts:["/assets/images/unlimited-classes/bg-pixel-sort.jpg"],container:this.bg.nativeElement,uniforms:{intensity:{value:-.3,type:"f",min:0,max:2},direction:{value:new my(0,1)},mouse:{value:e}}}),this.sketch.initiate(()=>{this.show=!0})}willChange(){const e=[this.title1.nativeElement,this.title2.nativeElement,this.description.nativeElement,this.price.nativeElement,this.store.nativeElement,this.footer.nativeElement];Rv.set(e,{willChange:"transform, opacity"}),setTimeout(()=>{Rv.set(e,{willChange:"auto"})},1500)}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-unlimited-classes"]],viewQuery:function(e,t){var n;1&e&&(Oa(Zk,!0),Oa(Jk,!0),Oa($k,!0),Oa(Qk,!0),Oa(Kk,!0),Oa(eR,!0),Oa(tR,!0),Oa(nR,!0),Oa(iR,!0)),2&e&&(Pa(n=ka())&&(t.screen=n.first),Pa(n=ka())&&(t.title1=n.first),Pa(n=ka())&&(t.title2=n.first),Pa(n=ka())&&(t.bgContainer=n.first),Pa(n=ka())&&(t.bg=n.first),Pa(n=ka())&&(t.store=n.first),Pa(n=ka())&&(t.description=n.first),Pa(n=ka())&&(t.price=n.first),Pa(n=ka())&&(t.footer=n.first))},decls:37,vars:2,consts:[[1,"screen","unlimited-classes"],["screen",""],[1,"unlimited-classes__bg-container"],["bg_container",""],[1,"unlimited-classes__bg"],["bg",""],[1,"unlimited-classes__container"],[1,"unlimited-classes__title"],[1,"unlimited-classes__title-string"],["title1",""],["title2",""],[1,"unlimited-classes__app-store"],["store",""],[1,"unlimited-classes__price"],["price",""],[1,"unlimited-classes__price-caption"],[1,"unlimited-classes__price-block"],[1,"unlimited-classes__price-value"],[1,"unlimited-classes__price-sup"],[1,"ld-description","unlimited-classes__description"],["description",""],[1,"unlimited-classes__footer"],["footer",""]],template:function(e,t){1&e&&(Qo(0,"div",0,1),Qo(2,"div",2,3),es(4,"div",4,5),Ko(),Qo(6,"div",6),Qo(7,"h2",7),Qo(8,"span",8),Qo(9,"span",null,9),_s(11,"Unlimited"),Ko(),Ko(),Qo(12,"span",8),Qo(13,"strong",null,10),_s(15,"Classes"),Ko(),Ko(),Ko(),Qo(16,"div",11,12),es(18,"app-app-store"),Ko(),Qo(19,"div",13,14),Qo(21,"div",15),_s(22,"Starting at"),Ko(),Qo(23,"div",16),Qo(24,"span",17),_s(25,"$49.99"),Ko(),Qo(26,"span",18),_s(27,"/mo"),Ko(),Ko(),Ko(),Qo(28,"p",19,20),_s(30," Whether you\u2019re strengthening "),Qo(31,"strong"),_s(32,"your body with our daily HIIT classes"),Ko(),_s(33,", finding your balance with yoga, or trimming down with cardio sessions, Presence membership is your unlimited pass to live sessions that match your intensity level. "),Ko(),Ko(),Ko(),Qo(34,"div",21,22),es(36,"app-footer"),Ko()),2&e&&(ir(4),ps("unlimited-classes__bg--active",t.show))},directives:[sA,Yk],styles:[".unlimited-classes[_ngcontent-%COMP%]{text-align:center;background:#03aeec;position:relative}.unlimited-classes__bg-container[_ngcontent-%COMP%]{width:100%;height:calc(100% + 200px);left:0;top:0;position:absolute}.unlimited-classes__bg[_ngcontent-%COMP%]{width:100%;height:100%;left:0;top:0;position:absolute;background-position:top;background-repeat:no-repeat;background-size:cover}.unlimited-classes__bg-decor-1[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;height:25%;overflow:hidden;transform:skewY(-10deg);opacity:0}.unlimited-classes__container[_ngcontent-%COMP%]{max-width:1920px;margin:0 auto;padding:5.625rem 0 6.25rem;position:relative}.unlimited-classes__title[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;line-height:.8;font-weight:700;margin-bottom:1.875rem}.unlimited-classes__title-string[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;perspective:500px;padding:0 3.125rem;margin:0 -3.125rem;white-space:nowrap}.unlimited-classes__title-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .unlimited-classes__title-string[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;transform-origin:50% 0 0}.unlimited-classes__app-store[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:5rem}.unlimited-classes__price[_ngcontent-%COMP%]{margin-bottom:.625rem}.unlimited-classes__price-caption[_ngcontent-%COMP%]{color:#eb3340;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:500;line-height:1;margin:0}.unlimited-classes__price-block[_ngcontent-%COMP%]{display:flex;justify-content:center}.unlimited-classes__price-value[_ngcontent-%COMP%]{color:#eb3340;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:#eb3340;-webkit-text-fill-color:transparent;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:7.5rem;font-weight:700;line-height:1}.unlimited-classes__price-sup[_ngcontent-%COMP%]{color:#eb3340;font-size:1.75rem;font-weight:400;line-height:2.5;font-weight:700}.unlimited-classes__description[_ngcontent-%COMP%]{color:#fff;width:63.75rem;margin:0 auto}@media (max-width:560px){.unlimited-classes__container[_ngcontent-%COMP%]{padding:4.6875rem 0 3.25rem}.unlimited-classes__title[_ngcontent-%COMP%]{font-size:3.9375rem;margin-bottom:1.25rem}.unlimited-classes__title-string[_ngcontent-%COMP%]{padding:0 1.875rem;margin:0 -1.875rem}.unlimited-classes__app-store[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:6.25rem}.unlimited-classes__price[_ngcontent-%COMP%]{margin-bottom:.625rem}.unlimited-classes__price-caption[_ngcontent-%COMP%]{font-size:1rem}.unlimited-classes__price-value[_ngcontent-%COMP%]{font-size:3rem}.unlimited-classes__price-sup[_ngcontent-%COMP%]{font-size:.875rem}.unlimited-classes__description[_ngcontent-%COMP%]{color:#fff;width:auto;padding:0 1.25rem;margin:0 auto}}"]}),e})();function oR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var sR="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);function aR(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function lR(e){return Boolean(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function cR(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function uR(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function hR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.url,i=t||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(cR(i))return"https://vimeo.com/".concat(i);if(uR(i))return i.replace("http:","https:");if(t)throw new TypeError("\u201c".concat(t,"\u201d is not a valid video id."));throw new TypeError("\u201c".concat(i,"\u201d is not a vimeo.com url."))}var dR="undefined"!=typeof window&&void 0!==window.postMessage;if(!(sR||void 0!==Array.prototype.indexOf&&dR))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var pR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,n=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(n(this,"_id",o("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function r(e,n){if(!i(e)||!t.call(e,"_id"))throw new TypeError(n+" method called on incompatible receiver "+typeof e)}function o(e){return e+"_"+s()+"."+s()}function s(){return Math.random().toString().substring(2)}return n(e.prototype,"delete",(function(e){if(r(this,"delete"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e||(delete e[this._id],0))})),n(e.prototype,"get",(function(e){if(r(this,"get"),i(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}})),n(e.prototype,"has",(function(e){if(r(this,"has"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)})),n(e.prototype,"set",(function(e,t){if(r(this,"set"),!i(e))throw new TypeError("Invalid value used as weak map key");var o=e[this._id];return o&&o[0]===e?(o[1]=t,this):(n(e,this._id,[e,t]),this)})),n(e,"_polyfill",!0),e}()}function i(e){return Object(e)===e}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:pR);var fR=function(e,t){return function(e){var t,n,i;i=function(){var e,t,n,i=Object.prototype.toString,r="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(g){e=function(e,t,n){return e[t]=n,e}}function o(e,i){n.add(e,i),t||(t=r(n.drain))}function s(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function a(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var i,r;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(r=s(i))?r.call(i,n.resolve,n.reject):n.resolve(i)}catch(g){n.reject(g)}}function c(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=s(e))?o((function(){var i=new d(n);try{t.call(e,(function(){c.apply(i,arguments)}),(function(){u.apply(i,arguments)}))}catch(g){u.call(i,g)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(a,n))}catch(g){u.call(new d(n),g)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(a,t))}function h(e,t,n,i){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then((function(e){n(r,e)}),i)}(r)}function d(e){this.def=e,this.triggered=!1}function p(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new p(this);this.then=function(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&o(a,t),i.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){c.call(t,e)}),(function(e){u.call(t,e)}))}catch(g){u.call(t,g)}}n=function(){var e,n,i;function r(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,o){i=new r(t,o),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var m=e({},"constructor",f,!1);return f.prototype=m,e(m,"__NPO__",0,!1),e(f,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(f,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(f,"all",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=e.length,o=Array(r),s=0;h(t,e,(function(e,t){o[e]=t,++s===r&&n(o)}),i)}))})),e(f,"race",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");h(t,e,(function(e,t){n(t)}),i)}))})),f},(n=pR)[t="Promise"]=n[t]||i(),e.exports&&(e.exports=n[t])}(t={exports:{}}),t.exports}(),mR=new WeakMap;function gR(e,t,n){var i=mR.get(e.element)||{};t in i||(i[t]=[]),i[t].push(n),mR.set(e.element,i)}function vR(e,t){return(mR.get(e.element)||{})[t]||[]}function yR(e,t,n){var i=mR.get(e.element)||{};if(!i[t])return!0;if(!n)return i[t]=[],mR.set(e.element,i),!0;var r=i[t].indexOf(n);return-1!==r&&i[t].splice(r,1),mR.set(e.element,i),i[t]&&0===i[t].length}function _R(e,t){var n=mR.get(e);mR.set(t,n),mR.delete(e)}var bR=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function wR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bR.reduce((function(t,n){var i=e.getAttribute("data-vimeo-".concat(n));return(i||""===i)&&(t[n]=""===i?1:i),t}),t)}function xR(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=n,t.appendChild(i.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function SR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,r){if(!uR(e))throw new TypeError("\u201c".concat(e,"\u201d is not a vimeo.com url."));var o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var s in t)t.hasOwnProperty(s)&&(o+="&".concat(s,"=").concat(encodeURIComponent(t[s])));var a="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;a.open("GET",o,!0),a.onload=function(){if(404!==a.status)if(403!==a.status)try{var t=JSON.parse(a.responseText);if(403===t.domain_status_code)return xR(t,n),void r(new Error("\u201c".concat(e,"\u201d is not embeddable.")));i(t)}catch(o){r(o)}else r(new Error("\u201c".concat(e,"\u201d is not embeddable.")));else r(new Error("\u201c".concat(e,"\u201d was not found.")))},a.onerror=function(){var e=a.status?" (".concat(a.status,")"):"";r(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},a.send()}))}function MR(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return console.warn(t),{}}return e}function ER(e,t,n){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var i={method:t};void 0!==n&&(i.value=n);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(i=JSON.stringify(i)),e.element.contentWindow.postMessage(i,e.origin)}}function TR(e,t){var n,i=[];if((t=MR(t)).event)"error"===t.event&&vR(e,t.data.method).forEach((function(n){var i=new Error(t.data.message);i.name=t.data.name,n.reject(i),yR(e,t.data.method,n)})),i=vR(e,"event:".concat(t.event)),n=t.data;else if(t.method){var r=function(e,t){var n=vR(e,t);if(n.length<1)return!1;var i=n.shift();return yR(e,t,i),i}(e,t.method);r&&(i.push(r),n=t.value)}i.forEach((function(t){try{if("function"==typeof t)return void t.call(e,n);t.resolve(n)}catch(i){}}))}var CR=new WeakMap,AR=new WeakMap,PR={},OR=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(oR(this,e),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"undefined"!=typeof document&&"string"==typeof t&&(t=document.getElementById(t)),!lR(t))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==t.nodeName){var r=t.querySelector("iframe");r&&(t=r)}if("IFRAME"===t.nodeName&&!uR(t.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(CR.has(t))return CR.get(t);this._window=t.ownerDocument.defaultView,this.element=t,this.origin="*";var o=new fR((function(e,r){if(n._onMessage=function(t){if(uR(t.origin)&&n.element.contentWindow===t.source){"*"===n.origin&&(n.origin=t.origin);var i=MR(t.data);if(i&&"error"===i.event&&i.data&&"ready"===i.data.method){var o=new Error(i.data.message);return o.name=i.data.name,void r(o)}if(i&&"ready"===i.event||i&&"ping"===i.method)return n.element.setAttribute("data-ready","true"),void e();TR(n,i)}},n._window.addEventListener("message",n._onMessage),"IFRAME"!==n.element.nodeName){var o=wR(t,i);SR(hR(o),o,t).then((function(e){var i=xR(e,t);return n.element=i,n._originalElement=t,_R(t,i),CR.set(n.element,n),e})).catch(r)}}));if(AR.set(this,o),CR.set(this.element,this),"IFRAME"===this.element.nodeName&&ER(this,"ping"),PR.isEnabled){var s=function(){return PR.exit()};PR.on("fullscreenchange",(function(){PR.isFullscreen?gR(n,"event:exitFullscreen",s):yR(n,"event:exitFullscreen",s),n.ready().then((function(){ER(n,"fullscreenchange",PR.isFullscreen)}))}))}return this}var t;return(t=[{key:"callMethod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new fR((function(i,r){return t.ready().then((function(){gR(t,e,{resolve:i,reject:r}),ER(t,e,n)})).catch(r)}))}},{key:"get",value:function(e){var t=this;return new fR((function(n,i){return e=aR(e,"get"),t.ready().then((function(){gR(t,e,{resolve:n,reject:i}),ER(t,e)})).catch(i)}))}},{key:"set",value:function(e,t){var n=this;return new fR((function(i,r){if(e=aR(e,"set"),null==t)throw new TypeError("There must be a value to set.");return n.ready().then((function(){gR(n,e,{resolve:i,reject:r}),ER(n,e,t)})).catch(r)}))}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===vR(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch((function(){})),gR(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");yR(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch((function(e){}))}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=AR.get(this)||new fR((function(e,t){t(new Error("Unknown player. Probably unloaded."))}));return fR.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return PR.isEnabled?PR.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return PR.isEnabled?PR.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return PR.isEnabled?fR.resolve(PR.isFullscreen):this.get("fullscreen")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new fR((function(t){if(AR.delete(e),CR.delete(e.element),e._originalElement&&(CR.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode&&e.element.parentNode.removeChild(e.element),e.element&&"DIV"===e.element.nodeName&&e.element.parentNode){e.element.removeAttribute("data-vimeo-initialized");var n=e.element.querySelector("iframe");n&&n.parentNode&&n.parentNode.removeChild(n)}e._window.removeEventListener("message",e._onMessage),t()}))}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(e){return this.set("cameraProps",e)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(e){return this.set("quality",e)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();sR||(PR=function(){var e=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=t.length,r={};n<i;n++)if((e=t[n])&&e[1]in document){for(n=0;n<e.length;n++)r[t[0][n]]=e[n];return r}return!1}(),t={fullscreenchange:e.fullscreenchange,fullscreenerror:e.fullscreenerror},n={request:function(t){return new Promise((function(i,r){var o=function e(){n.off("fullscreenchange",e),i()};n.on("fullscreenchange",o);var s=(t=t||document.documentElement)[e.requestFullscreen]();s instanceof Promise&&s.then(o).catch(r)}))},exit:function(){return new Promise((function(t,i){if(n.isFullscreen){var r=function e(){n.off("fullscreenchange",e),t()};n.on("fullscreenchange",r);var o=document[e.exitFullscreen]();o instanceof Promise&&o.then(r).catch(i)}else t()}))},on:function(e,n){var i=t[e];i&&document.addEventListener(i,n)},off:function(e,n){var i=t[e];i&&document.removeEventListener(i,n)}};return Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(document[e.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[e.fullscreenEnabled])}}}),n}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};t.forEach((function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=wR(e);SR(hR(t),t,e).then((function(t){return xR(t,e)})).catch(n)}catch(i){n(i)}}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;window.VimeoPlayerResizeEmbeds_||(window.VimeoPlayerResizeEmbeds_=!0,window.addEventListener("message",(function(t){if(uR(t.origin)&&t.data&&"spacechange"===t.data.event)for(var n=e.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===t.source){n[i].parentElement.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}})))}());var IR=OR;const kR=["modal"],RR=["video"],NR=["close"];let LR=(()=>{class e{constructor(e,t){this.cd=e,this.videoModalService=t,this.opened=!1}ngOnInit(){this.videoModalService.getOpened().subscribe(e=>{e&&this.open()})}ngAfterViewInit(){this.player=new IR(this.video.nativeElement,{id:463500249,responsive:!0,controls:window.innerWidth<=1024}),this.player.on("bufferstart",()=>{this.video.nativeElement.querySelector("div").style.transform="translate(-50%, -50%)",this.video.nativeElement.querySelector("div").style.left="50%",this.video.nativeElement.querySelector("div").style.top="50%"}),window.innerWidth>1024&&this.closeCursor()}closeCursor(){var e=this.closeButton.nativeElement,t={x:window.innerWidth/2,y:window.innerHeight/2},n={x:t.x,y:t.y};Rv.set(e,{xPercent:-50,yPercent:-50});var i=Rv.quickSetter(e,"x","px"),r=Rv.quickSetter(e,"y","px");window.addEventListener("mousemove",e=>{n.x=e.x,n.y=e.y}),Rv.ticker.add(()=>{var e=1-Math.pow(.5,Rv.ticker.deltaRatio());t.x+=(n.x-t.x)*e,t.y+=(n.y-t.y)*e,i(t.x),r(t.y)})}open(){this.opened=!0,this.cd.detectChanges(),document.querySelector("body").style.overflow="hidden",Rv.set(this.modal.nativeElement,{display:"block"}),Rv.fromTo(this.video.nativeElement,{scale:.5,opacity:0},{scale:1,opacity:1,duration:.5,ease:"power1.out"}).then(()=>{this.player.play()}),Rv.fromTo(this.closeButton.nativeElement,{scale:0},{scale:1,duration:.75,ease:"power1.inOut"})}closeFunc(){this.opened=!1,this.cd.detectChanges(),this.player.pause(),this.player.setCurrentTime(0),Rv.fromTo(this.video.nativeElement,{scale:1,opacity:1},{scale:.5,opacity:0,duration:.5,ease:"power1.in"}).then(()=>{document.querySelector("body").style.overflow="visible",Rv.set(this.modal.nativeElement,{display:"none"}),this.videoModalService.setOpened(!1)}),Rv.fromTo(this.closeButton.nativeElement,{scale:1},{scale:0,duration:.5,ease:"power1.inOut"})}}return e.\u0275fac=function(t){return new(t||e)(Yo(wo),Yo(mO))},e.\u0275cmp=lt({type:e,selectors:[["app-video-modal"]],viewQuery:function(e,t){var n;1&e&&(Oa(kR,!0),Oa(RR,!0),Oa(NR,!0)),2&e&&(Pa(n=ka())&&(t.modal=n.first),Pa(n=ka())&&(t.video=n.first),Pa(n=ka())&&(t.closeButton=n.first))},decls:8,vars:0,consts:[[1,"video-modal"],["modal",""],[1,"video-modal__video"],["video",""],[1,"video-modal__close"],["close",""],[1,"video-modal__close-icon","icon-close"],[1,"video-modal__close-block",3,"click"]],template:function(e,t){1&e&&(Qo(0,"div",0,1),es(2,"div",2,3),Qo(4,"button",4,5),es(6,"span",6),Ko(),Qo(7,"div",7),os("click",(function(){return t.closeFunc()})),Ko(),Ko())},styles:[".video-modal[_ngcontent-%COMP%]{position:fixed;left:0;top:0;right:0;bottom:0;z-index:100;display:none}.video-modal__video[_ngcontent-%COMP%]{background:#000;position:absolute;left:0;top:0;right:0;bottom:0}.video-modal__video[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.video-modal[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%}.video-modal__close[_ngcontent-%COMP%]{position:absolute;padding:0;background:transparent;border:2px solid #fff;width:3.75rem;height:3.75rem;border-radius:50%;color:#fff;font-size:.75rem}.video-modal__close-block[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;cursor:none}@media (max-width:1024px){.video-modal__close-block[_ngcontent-%COMP%]{position:absolute;left:auto;top:20px;right:20px;bottom:auto;cursor:pointer;width:60px;height:60px}.video-modal__close[_ngcontent-%COMP%]{width:60px;height:60px;font-size:12px;top:20px;right:20px}}"]}),e})();const DR=["text_anim"],FR=["preloader_text"],UR=["logo"],zR=["preloader_sec"],HR=["preloader_first"],BR=["preloader_video_container"],jR=["preloader_video"],VR=["progress"],WR=["container"],GR=["phone"],qR=["name"],XR=["symbol1"],YR=["symbol2"],ZR=["symbol3"],JR=["symbol4"],$R=["screen"];let QR=(()=>{let e=class{constructor(e,t){this.cd=e,this.zone=t,this.names=new ba,this.symbol1=new ba,this.symbol2=new ba,this.symbol3=new ba,this.symbol4=new ba,this.glController=new nA,this.startTime=0,this.nextStartTime=0,this.prevStartTime=0,this.animationStarted=!1,this.nextAnimationStarted=!1,this.prevAnimationStarted=!1,this.startAnimation=!1,this.activeIndex=0,this.phoneReady=!1,this.mousePosition={x:0,y:0},this.animationPlayed=!1,this.imagesLoaded=!1,this.onMouseMove=e=>{this.mousePosition.x=e.clientX,this.mousePosition.y=e.clientY},this.startAnim=e=>{this.animationStarted||(this.startTime=e,this.animationStarted=!0),this.glController.setProgress((e-this.startTime)/2e3),Rv.set(this.preloaderVideoContainer.nativeElement,e-this.startTime<1460?{width:105-83.3*(e-this.startTime)/1460+"%",yPercent:-50-9*(e-this.startTime)/1460}:{opacity:0}),e-this.startTime<4e3&&requestAnimationFrame(this.startAnim)},this.nextAnim=e=>{this.nextAnimationStarted||(this.nextStartTime=e,this.nextAnimationStarted=!0,Rv.to(this.preloaderFirst.nativeElement,{y:this.screen.toArray()[0].screen.nativeElement.clientHeight+this.screen.toArray()[1].screen.nativeElement.clientHeight-this.preloaderFirst.nativeElement.clientHeight,duration:1.5,ease:"power1.inOut"})),this.glController.setProgress(2+(e-this.nextStartTime)/1500),e-this.nextStartTime<1500?requestAnimationFrame(this.nextAnim):this.nextAnimationStarted=!1},this.prevAnim=e=>{this.prevAnimationStarted||(this.prevStartTime=e,this.prevAnimationStarted=!0,Rv.to(this.preloaderFirst.nativeElement,{y:0,duration:1.5,ease:"power1.inOut"})),this.glController.setProgress(3-(e-this.prevStartTime)/1500),e-this.prevStartTime<1500?requestAnimationFrame(this.prevAnim):this.prevAnimationStarted=!1}}ngOnInit(){}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.preloaderVideo.nativeElement.muted=!0,"false"!=sessionStorage.getItem("preloader")&&window.innerWidth>560?(window.scrollTo(0,0),document.querySelector("body").style.overflowY="hidden",Rv.set(this.preloaderSecond.nativeElement,{display:"block"}),Rv.set(this.phoneElement.nativeElement,{opacity:0}),this.preloaderVideo.nativeElement.addEventListener("playing",()=>{this.phoneReady&&this.imagesLoaded&&!this.animationPlayed&&(this.animationPlayed=!0,this.videoDOM.play(),this.initAnimation(),this.phoneEvents(),setTimeout(()=>{requestAnimationFrame(this.startAnim),Rv.to(this.phoneElement.nativeElement,{opacity:1,duration:1})},2e3),setTimeout(()=>{sessionStorage.setItem("preloader","false")},1e3))}),this.loadImages()):(Rv.set(this.preloaderFirst.nativeElement,{background:"transparent"}),Rv.set(this.preloaderText.nativeElement,{opacity:0}),Rv.set(this.preloaderVideoContainer.nativeElement,{display:"none"}),window.innerWidth>560&&this.phoneEvents(),this.startAnimation=!0,this.cd.detectChanges()),window.addEventListener("scroll",()=>{let e=this.activeIndex;this.screen.toArray().forEach((t,n)=>{scrollY>t.screen.nativeElement.offsetTop-window.innerHeight/2&&(e=n)}),e!=this.activeIndex&&(window.innerWidth>560&&(1==e&&0==this.activeIndex&&requestAnimationFrame(this.nextAnim),1==this.activeIndex&&0==e&&requestAnimationFrame(this.prevAnim)),this.activeIndex=e,this.cd.detectChanges())}),window.innerWidth>560&&this.phoneInit()})}phoneEvents(){window.addEventListener("resize",()=>{this.glController.onResize()}),window.addEventListener("mousemove",e=>{this.onMouseMove(e)})}phoneInit(){const e={phoneFBX:"/assets/res/iphone.fbx",videoPath:"/assets/res/textures/video.mp4"};let t=this.phoneElement.nativeElement;this.videoDOM=document.createElement("video");const n=new Promise((e,t)=>{this.videoDOM.addEventListener("canplay",()=>{e()})});this.videoDOM.src=e.videoPath,this.videoDOM.preload="auto",this.videoDOM.muted=!0,this.videoDOM.loop=!0,this.videoDOM.style.visibility="hidden",this.videoDOM.style.position="absolute",this.videoDOM.style.pointerEvents="none",this.videoDOM.style.width="100%",t.appendChild(this.videoDOM),this.glController=new nA,Promise.all([this.glController.load(e),n]).then(()=>{this.glController.create(t,this.videoDOM),this.phoneReady=!0,requestAnimationFrame(i),"false"==sessionStorage.getItem("preloader")&&(this.glController.setProgress(2),this.videoDOM.play())});let i=e=>{this.glController.update(.001*e,this.mousePosition),this.glController.render(),requestAnimationFrame(i)}}initAnimation(){"false"!=sessionStorage.getItem("preloader")&&(Rv.to(this.textAnim.nativeElement,{yPercent:71,duration:2,ease:"back.out(1.4)"}),Rv.to(this.preloaderFirst.nativeElement,{background:"transparent",duration:.5,ease:"power1.in",delay:2}),Rv.to(this.preloaderText.nativeElement,{opacity:0,duration:.5,ease:"power1.in",delay:2}),this.names.toArray().forEach((e,t)=>{Rv.from(e.nativeElement,{yPercent:400,duration:2,delay:2.5+.05*t,ease:"power1.inOut"})}),this.symbol1.toArray().forEach((e,t)=>{Rv.to(e.nativeElement,{opacity:0,duration:.5,delay:2.5,ease:"power1.out"})}),this.symbol2.toArray().forEach((e,t)=>{Rv.to(e.nativeElement,{opacity:0,duration:.5,delay:3,ease:"power1.out"})}),this.symbol3.toArray().forEach((e,t)=>{Rv.to(e.nativeElement,{opacity:0,duration:.5,delay:3.5,ease:"power1.out"})}),this.symbol4.toArray().forEach((e,t)=>{Rv.to(e.nativeElement,{opacity:0,duration:.5,delay:4,ease:"power1.out"}).then(()=>{t||(document.querySelector("body").style.overflowY="visible",this.startAnimation=!0,this.cd.detectChanges())})}),Rv.to(this.preloaderSecond.nativeElement,{yPercent:-100,ease:"power1.inOut",duration:1.5,delay:4.5}))}loadImages(){Promise.all([this.loadImageAsync("/assets/images/top-section/image-2.png"),this.loadImageAsync("/assets/images/top-section/decor-1-sequence.png"),this.loadImageAsync("/assets/images/top-section/decor-2-sequence.png"),this.loadImageAsync("/assets/images/top-section/decor-3-sequence.png")]).then(e=>{this.imagesLoaded=!0})}loadImageAsync(e){return new Promise((t,n)=>{const i=new Image;i.src=e,i.onload=t})}};return e.\u0275fac=function(t){return new(t||e)(Yo(wo),Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-home"]],viewQuery:function(e,t){var n;1&e&&(Oa(DR,!0),Oa(FR,!0),Oa(UR,!0),Oa(zR,!0),Oa(HR,!0),Oa(BR,!0),Oa(jR,!0),Oa(VR,!0),Oa(WR,!0),Oa(GR,!0),Oa(qR,!0),Oa(XR,!0),Oa(YR,!0),Oa(ZR,!0),Oa(JR,!0),Oa($R,!0)),2&e&&(Pa(n=ka())&&(t.textAnim=n.first),Pa(n=ka())&&(t.preloaderText=n.first),Pa(n=ka())&&(t.logo=n.first),Pa(n=ka())&&(t.preloaderSecond=n.first),Pa(n=ka())&&(t.preloaderFirst=n.first),Pa(n=ka())&&(t.preloaderVideoContainer=n.first),Pa(n=ka())&&(t.preloaderVideo=n.first),Pa(n=ka())&&(t.progress=n.first),Pa(n=ka())&&(t.container=n.first),Pa(n=ka())&&(t.phoneElement=n.first),Pa(n=ka())&&(t.names=n),Pa(n=ka())&&(t.symbol1=n),Pa(n=ka())&&(t.symbol2=n),Pa(n=ka())&&(t.symbol3=n),Pa(n=ka())&&(t.symbol4=n),Pa(n=ka())&&(t.screen=n))},decls:95,vars:3,consts:[[3,"startAnimation","activeIndex"],[2,"overflow","hidden"],[1,"preloader__first-block"],["preloader_first",""],[1,"preloader__video-container"],["preloader_video_container",""],["src","/assets/videos/preloader.mp4","autoplay","","muted","","loop","",1,"preloader__video"],["preloader_video",""],[1,"preloader__text"],["preloader_text",""],[1,"preloader__text-e"],[1,"preloader__text-anim"],["text_anim",""],[1,"preloader__text-anim-first"],[1,"fullscreen-container"],["container",""],[1,"fullscreen"],["phone",""],[1,"preloader__second-block"],["preloader_sec",""],[1,"preloader__next"],[1,"preloader__name"],["name",""],["symbol4",""],["symbol3",""],["symbol2",""],["symbol1",""],["id","home",3,"startAnimation"],["screen",""],["id","digital"],["id","class-types"],["id","ai"],["id","live-coaching"],["id","train-anywhere"],["id","unlimited-classes"]],template:function(e,t){1&e&&(es(0,"app-header",0),Qo(1,"div",1),Qo(2,"div",2,3),Qo(4,"div",4,5),es(6,"video",6,7),Ko(),Qo(8,"div",8,9),_s(10," Pr"),Qo(11,"span",10),_s(12,"e"),Qo(13,"span",11,12),_s(15,"e"),es(16,"br"),_s(17," e"),es(18,"br"),_s(19," e"),es(20,"br"),_s(21," e"),es(22,"br"),_s(23," e"),es(24,"br"),Qo(25,"span",13),_s(26,"e"),Ko(),Ko(),Ko(),_s(27,"sence "),Ko(),Qo(28,"div",14,15),es(30,"div",16,17),Ko(),Ko(),Qo(32,"div",18,19),Qo(34,"div",20),Qo(35,"div",21,22),_s(37,"Pres"),Qo(38,"span",null,23),_s(40,"e"),Ko(),Qo(41,"span",null,24),_s(43,"n"),Ko(),Qo(44,"span",null,25),_s(46,"c"),Ko(),Qo(47,"span",null,26),_s(49,"e"),Ko(),Ko(),Qo(50,"div",21,22),_s(52,"Prese"),Qo(53,"span",null,23),_s(55,"n"),Ko(),Qo(56,"span",null,24),_s(58,"c"),Ko(),Qo(59,"span",null,25),_s(61,"e"),Ko(),Ko(),Qo(62,"div",21,22),_s(64,"Presen"),Qo(65,"span",null,23),_s(67,"c"),Ko(),Qo(68,"span",null,24),_s(70,"e"),Ko(),Ko(),Qo(71,"div",21,22),_s(73,"Presenc"),Qo(74,"span",null,23),_s(76,"e"),Ko(),Ko(),Qo(77,"div",21,22),_s(79,"Presence"),Ko(),Ko(),Ko(),es(80,"app-top-section",27,28),es(82,"app-digital",29,28),Ko(),es(84,"app-class-types",30,28),es(86,"app-ai",31,28),es(88,"app-live-coaching",32,28),es(90,"app-train-anywhere",33,28),es(92,"app-unlimited-classes",34,28),es(94,"app-video-modal")),2&e&&(Jo("startAnimation",t.startAnimation)("activeIndex",t.activeIndex),ir(80),Jo("startAnimation",t.startAnimation))},directives:[bA,IO,WO,pk,Sk,Fk,qk,rR,LR],styles:[".preloader__first-block[_ngcontent-%COMP%]{pointer-events:none;display:none;background:#fff;position:absolute;top:0;left:0;right:0;height:100vh;display:flex;flex-direction:column;padding-top:1.875rem;z-index:12;overflow:hidden}.preloader__video-container[_ngcontent-%COMP%]{height:86%;width:100%;z-index:1;overflow:hidden;background:#fff;border-radius:1.875rem}.preloader__video[_ngcontent-%COMP%], .preloader__video-container[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.preloader__video[_ngcontent-%COMP%]{height:100vh;width:auto}.preloader__text[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;color:#000;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.25rem;font-weight:700;font-style:normal;letter-spacing:normal;line-height:normal;text-align:left;white-space:nowrap;line-height:.8;z-index:2}.preloader__text-e[_ngcontent-%COMP%]{display:inline-block;line-height:.55;vertical-align:initial;position:relative;overflow:hidden;color:transparent}.preloader__text-anim[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;bottom:.9375rem;right:0;line-height:.55;color:#eb3340}.preloader__second-block[_ngcontent-%COMP%]{pointer-events:none;background-color:#000;position:absolute;top:0;left:0;right:0;height:100vh;z-index:11;display:none}.preloader__next[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;right:0}.preloader__name[_ngcontent-%COMP%]{color:#eb3340;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.25rem;font-weight:700;font-style:normal;letter-spacing:normal;line-height:normal;text-align:left;white-space:nowrap;line-height:.8}.fullscreen-container[_ngcontent-%COMP%]{left:0;pointer-events:none}.fullscreen[_ngcontent-%COMP%], .fullscreen-container[_ngcontent-%COMP%]{position:absolute;top:0;width:100vw;height:100vh}.fullscreen[_ngcontent-%COMP%]{left:50%;max-width:1920px;transform:translateX(-50%)}"]}),e=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Nv],e),e})();var KR=n("A0Lk"),eN=n.n(KR);const tN=["title"],nN=["title_part"],iN=["slider"],rN=["video_block"],oN=["video_button"],sN=["slide"],aN=["text_slide"],lN=["first_name"],cN=["last_name"],uN=["description"],hN=["number"],dN=["decor_sequence"];function pN(e,t){if(1&e&&es(0,"div",38,39),2&e){const e=t.$implicit;ds("background-image","url("+(ls().webp?e.imageWebp:e.image)+")")}}function fN(e,t){if(1&e&&(Qo(0,"div",40,41),Qo(2,"span",42,43),_s(4),Ko(),Qo(5,"div",44,45),_s(7),Ko(),Qo(8,"div",46,47),_s(10),Ko(),Qo(11,"div",48,49),_s(13),Ko(),Ko()),2&e){const e=t.$implicit,n=t.index;ir(4),bs("0"+(n+1)),ir(3),bs(e.firstName),ir(3),bs(e.lastName),ir(3),bs(e.description)}}let mN=(()=>{class e{constructor(e,t){this.zone=e,this.videoModalService=t,this.slides=new ba,this.textSlides=new ba,this.firstNames=new ba,this.lastNames=new ba,this.descriptions=new ba,this.numbers=new ba,this.decorSequences=new ba,this.coaches=[{firstName:"Alexa",lastName:"Aftias",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-1.jpg",imageWebp:"/assets/images/about/slider/image-1.webp"},{firstName:"Samantha",lastName:"Schulz",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-4.jpg",imageWebp:"/assets/images/about/slider/image-4.webp"},{firstName:"Jerry",lastName:"Yudt",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-2.jpg",imageWebp:"/assets/images/about/slider/image-2.webp"},{firstName:"Megan",lastName:"Miller",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-3.jpg",imageWebp:"/assets/images/about/slider/image-3.webp"},{firstName:"Alexa",lastName:"Aftias",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-1.jpg",imageWebp:"/assets/images/about/slider/image-1.webp"},{firstName:"Samantha",lastName:"Schulz",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-4.jpg",imageWebp:"/assets/images/about/slider/image-4.webp"},{firstName:"Jerry",lastName:"Yudt",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-2.jpg",imageWebp:"/assets/images/about/slider/image-2.webp"},{firstName:"Megan",lastName:"Miller",description:"Alexa has 8 years of experience training in Sports Institutes, working hand in hand with doctors of Chiropractic and Physical Therapy. She has experience working with professional athletes from the NBA and the US Olympic Track Team, as well as actors and TV hosts.",image:"/assets/images/about/slider/image-3.jpg",imageWebp:"/assets/images/about/slider/image-3.webp"}],this.slidesPositions=[{xPercent:21.4,yPercent:7,scale:0,opacity:0,rotation:30,zIndex:2},{xPercent:21.4,yPercent:7,scale:0,opacity:0,rotation:30,zIndex:2},{xPercent:21.4,yPercent:7,scale:.2,opacity:1,rotation:-15,zIndex:2},{xPercent:15,yPercent:1,scale:.29,opacity:1,rotation:30,zIndex:3},{xPercent:-1.8,yPercent:4,scale:.48,opacity:1,rotation:-15,zIndex:4},{xPercent:-44.2,yPercent:0,scale:1,opacity:1,rotation:8,zIndex:5},{xPercent:-220,yPercent:7,scale:1.3,opacity:0,rotation:-30,zIndex:6},{xPercent:-220,yPercent:7,scale:1.3,opacity:0,rotation:-30,zIndex:6}],this.slidesInitPositions=[{xPercent:21.4,yPercent:7,scale:0,opacity:0,rotation:30,zIndex:2},{xPercent:21.4,yPercent:7,scale:0,opacity:0,rotation:30,zIndex:2},{xPercent:23,yPercent:7,scale:.18,opacity:1,rotation:-13,zIndex:2},{xPercent:16,yPercent:1,scale:.27,opacity:1,rotation:28,zIndex:3},{xPercent:-2,yPercent:4,scale:.45,opacity:1,rotation:-13,zIndex:4},{xPercent:-30,yPercent:0,scale:1,opacity:1,rotation:-1,zIndex:5},{xPercent:-220,yPercent:7,scale:1.3,opacity:0,rotation:-30,zIndex:6},{xPercent:-220,yPercent:7,scale:1.3,opacity:0,rotation:-30,zIndex:6}],this.showSlider=!1,this.currentSlide=0,this.prevSlide=0,this.videoPlayed=!1,this.videoReady=!1,this.webp=!1,this.tlTitle=Rv.timeline({repeat:-1,onReverseComplete:()=>{this.tlTitle.progress(1)}})}ngOnInit(){for(let e=0;e<this.slidesPositions.length;e++)this.slidesPositions[e].ease="power1.easeInOut",this.slidesPositions[e].duration=.5;document.body.classList.contains("body--webp")&&(this.webp=!0)}ngAfterViewInit(){Rv.registerPlugin(fO),this.zone.runOutsideAngular(()=>{const e=new IR(this.videoBlock.nativeElement,{id:463500249,responsive:!0,loop:!0,muted:!0,controls:!1});e.on("loaded",()=>{this.videoReady=!0,this.videoBlock.nativeElement.addEventListener("mouseover",()=>{this.videoPlayed||(e.play(),this.videoPlayed=!0)}),this.videoBlock.nativeElement.addEventListener("mouseout",()=>{this.videoPlayed&&setTimeout(()=>{e.pause(),this.videoPlayed=!1},1e3)})})}),this.slidesArray=this.slides.toArray(),this.zone.runOutsideAngular(()=>{new eN.a("Zoom Pro Wide").load().then(()=>{const e=this.titlePart.nativeElement.offsetWidth;this.tlTitle.clear().set(this.title.nativeElement,{x:0}).to(this.title.nativeElement,{duration:5,x:-e,ease:"linear"}).pause(),fO.create({trigger:this.title.nativeElement,onEnter:()=>this.tlTitle.resume(),onEnterBack:()=>this.tlTitle.resume(),onLeave:()=>this.tlTitle.pause(),onLeaveBack:()=>this.tlTitle.pause()})}),this.sequencesAnimation()}),this.videoCursor(),this.initSlider(),window.addEventListener("scroll",()=>{if(scrollY>this.slider.nativeElement.offsetTop-window.innerHeight+150&&!this.showSlider){this.changeSlide();for(let e=0;e<this.slidesPositions.length;e++)this.slidesPositions[e].duration=1.5;this.sliderInterval=setInterval(()=>{this.nextSlide()},5e3),window.addEventListener("blur",()=>{clearInterval(this.sliderInterval)}),window.addEventListener("focus",()=>{this.sliderInterval=setInterval(()=>{this.nextSlide()},3e3)}),this.showSlider=!0}})}sequencesAnimation(){this.decorSequences.toArray().forEach((e,t)=>{Rv.fromTo(e.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:e.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:2==t?1.2:2,repeat:-1,ease:2==t?"steps(30)":"steps(50)"})})}initSlider(){for(let e=0;e<this.slidesArray.length;e++){let t=Math.abs(this.currentSlide+e+2)%this.slidesInitPositions.length;Rv.set(this.slidesArray[this.slidesArray.length-1-e].nativeElement,this.slidesInitPositions[t])}Rv.set(this.textSlides.toArray()[this.currentSlide].nativeElement,{opacity:1}),Rv.set([this.firstNames.toArray()[this.currentSlide].nativeElement,this.lastNames.toArray()[this.currentSlide].nativeElement],{letterSpacing:30})}videoCursor(){let e=this.videoButton.nativeElement,t={x:this.videoBlock.nativeElement.clientWidth/2,y:this.videoBlock.nativeElement.clientHeight/2},n={x:t.x,y:t.y},i=this.videoBlock.nativeElement.clientWidth;Rv.set(e,{xPercent:-50,yPercent:-50});let r=Rv.quickSetter(e,"x","px"),o=Rv.quickSetter(e,"y","px"),s=Rv.quickSetter(e,"rotate","deg");this.videoBlock.nativeElement.addEventListener("mousemove",e=>{n.x=e.offsetX,n.y=e.offsetY}),Rv.ticker.add(()=>{var e=1-Math.pow(.9,Rv.ticker.deltaRatio());t.x+=(n.x-t.x)*e,t.y+=(n.y-t.y)*e,r(t.x),o(t.y),s(50*(t.x/i-.5))})}changeSlide(){for(let e=0;e<this.slidesArray.length;e++){let t=Math.abs(this.currentSlide+e+2)%this.slidesInitPositions.length;Rv.set(this.slidesArray[this.slidesArray.length-1-e].nativeElement,{zIndex:this.slidesPositions[t].zIndex}),this.slidesArray[e].nativeElement.classList.remove("work-page-header__item--animated"),Rv.to(this.slidesArray[this.slidesArray.length-1-e].nativeElement,this.slidesPositions[t])}this.textSlides.toArray().forEach((e,t)=>{Rv.set(e.nativeElement,{opacity:0})}),Rv.to(this.textSlides.toArray()[this.currentSlide%4].nativeElement,{opacity:1,delay:.25,duration:.25,ease:"power1.in"}),Rv.fromTo([this.numbers.toArray()[this.currentSlide%4].nativeElement,this.descriptions.toArray()[this.currentSlide%4].nativeElement],{opacity:0},{opacity:1,delay:.25,duration:1.25,ease:"power1.inOut"}),this.prevSlide=this.currentSlide%4}nextSlide(){this.slider.nativeElement&&(this.currentSlide=(this.currentSlide+1)%this.slidesArray.length,this.changeSlide())}ngOnDestroy(){clearInterval(this.sliderInterval),fO.getAll().forEach(e=>e.kill())}openVideo(){this.videoModalService.setOpened(!0)}}return e.\u0275fac=function(t){return new(t||e)(Yo(il),Yo(mO))},e.\u0275cmp=lt({type:e,selectors:[["app-about"]],viewQuery:function(e,t){var n;1&e&&(Oa(tN,!0),Oa(nN,!0),Oa(iN,!0),Oa(rN,!0),Oa(oN,!0),Oa(sN,!0),Oa(aN,!0),Oa(lN,!0),Oa(cN,!0),Oa(uN,!0),Oa(hN,!0),Oa(dN,!0)),2&e&&(Pa(n=ka())&&(t.title=n.first),Pa(n=ka())&&(t.titlePart=n.first),Pa(n=ka())&&(t.slider=n.first),Pa(n=ka())&&(t.videoBlock=n.first),Pa(n=ka())&&(t.videoButton=n.first),Pa(n=ka())&&(t.slides=n),Pa(n=ka())&&(t.textSlides=n),Pa(n=ka())&&(t.firstNames=n),Pa(n=ka())&&(t.lastNames=n),Pa(n=ka())&&(t.descriptions=n),Pa(n=ka())&&(t.numbers=n),Pa(n=ka())&&(t.decorSequences=n))},decls:82,vars:3,consts:[[1,"about"],[1,"about__decor-2"],["decor_sequence",""],[1,"about__decor-3"],[1,"about__subtitle"],[1,"about__video"],["video_block",""],[1,"about__video-block",3,"click"],[1,"about__video-button"],["video_button",""],[1,"about__video-button-icon","icon-play"],[1,"about__title-block"],[1,"about__title"],["title",""],[1,"about__title-item"],["title_part",""],[1,"about__title__icon","icon-logo"],["src","/assets/images/logo-icon.svg","alt",""],[1,"about__content"],[1,"about__description"],[1,"about__text"],[1,"about-slider"],["slider",""],[1,"about-slider__block-text"],[1,"about-slider__block-text-item"],[1,"about-slider__images"],["class","about-slider__image",3,"backgroundImage",4,"ngFor","ngForOf"],["class","about-slider__text-slide",4,"ngFor","ngForOf"],[1,"about__decor-container"],[1,"about__decor-1"],[1,"about__content","about__content--no-border"],[1,"about__button"],[3,"blackHover"],[1,"about__image-block"],[1,"about__image-block-text"],[1,"about__image-block-text-item"],[1,"about__image-1"],[1,"about__image-2"],[1,"about-slider__image"],["slide",""],[1,"about-slider__text-slide"],["text_slide",""],[1,"about-slider__number"],["number",""],[1,"about-slider__first-name"],["first_name",""],[1,"about-slider__last-name"],["last_name",""],[1,"about-slider__description"],["description",""]],template:function(e,t){1&e&&(Qo(0,"section",0),es(1,"div",1,2),es(3,"div",3,2),Qo(5,"span",4),_s(6,"Experience the energy and results of real training"),Ko(),Qo(7,"div",5,6),Qo(9,"div",7),os("click",(function(){return t.openVideo()})),Qo(10,"div",8,9),es(12,"span",10),Ko(),Ko(),Ko(),Qo(13,"div",11),Qo(14,"div",12,13),Qo(16,"h1",14,15),_s(18,"About\xa0"),Qo(19,"span",16),es(20,"img",17),Ko(),_s(21,"\xa0"),Ko(),Qo(22,"div",14),_s(23,"About\xa0"),Qo(24,"span",16),es(25,"img",17),Ko(),_s(26,"\xa0"),Ko(),Qo(27,"div",14),_s(28,"About\xa0"),Qo(29,"span",16),es(30,"img",17),Ko(),_s(31,"\xa0"),Ko(),Qo(32,"div",14),_s(33,"About\xa0"),Qo(34,"span",16),es(35,"img",17),Ko(),_s(36,"\xa0"),Ko(),Ko(),Ko(),Qo(37,"div",18),Qo(38,"p",19),_s(39,"Founded by leading researchers for an Artificial Intelligence lab at UCLA, Presence combines cutting-edge technology with elite personal training to provide the most advanced workout."),Ko(),Qo(40,"div",20),Qo(41,"p"),_s(42,"As the world\u2019s first true Digital Studio, Presence offers fully live & interactive fitness classes. Presence is founded on the idea that it isn\u2019t the equipment, or the location that makes a fitness experience valuable\u2014it\u2019s the people. Each Presence class features live trainers who observe, coach, and motivate their participants in real-time. With full multi-way video conferencing, Presence classes bring an unprecedented amount of energy to each session."),Ko(),Ko(),Ko(),Qo(43,"div",21,22),Qo(45,"div",23),Qo(46,"div",24),_s(47,"Tra"),Ko(),Qo(48,"div",24),_s(49,"in"),Ko(),Qo(50,"div",24),_s(51,"ers"),Ko(),Ko(),Qo(52,"div",25),Xo(53,pN,2,2,"div",26),Ko(),Xo(54,fN,14,4,"div",27),Ko(),Qo(55,"div",28),es(56,"div",29,2),Ko(),Qo(58,"div",30),Qo(59,"div",20),Qo(60,"h3"),_s(61,"Track your full range."),Ko(),Qo(62,"p"),_s(63,"Every Presence session is built on the back of futuristic computer vision that leverages your phone\u2019s depth sensor and camera to track your full range of motion on each exercise. This tracking facilitates rep counting, and form feedback, among other next-gen analytics. Our incredible tech allows elite trainers to dramatically amplify their abilities, and provide real-time targeted feedback to their entire class."),Ko(),Qo(64,"h3"),_s(65,"Discover the best in yourself."),Ko(),Qo(66,"p"),_s(67,"Push past your limits and unlock the potential inside of yourself. Experience the energy, intensity, and results of real training."),Ko(),Qo(68,"div",31),es(69,"app-app-store",32),Ko(),Ko(),Ko(),Qo(70,"div",33),Qo(71,"div",34),Qo(72,"div",35),_s(73,"eve"),Ko(),Qo(74,"div",35),_s(75,"ry"),Ko(),Qo(76,"div",35),_s(77,"whe"),Ko(),Qo(78,"div",35),_s(79,"RE"),Ko(),Ko(),es(80,"div",36),es(81,"div",37),Ko(),Ko()),2&e&&(ir(53),Jo("ngForOf",t.coaches),ir(1),Jo("ngForOf",t.coaches),ir(15),Jo("blackHover",!0))},directives:[ic,sA],styles:['.about__subtitle[_ngcontent-%COMP%]{width:15rem;display:block;margin:0 auto 1.1875rem;color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-weight:500;line-height:.875rem;text-transform:uppercase;text-align:center}.about__video[_ngcontent-%COMP%]{width:60rem;height:33.75rem;margin:0 auto;display:block;cursor:pointer;position:relative;overflow:hidden}.about__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%}.about__video-block[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;bottom:0;z-index:1;opacity:0;cursor:none;transition:opacity .2s ease-in-out;pointer-events:all}.about__video-block[_ngcontent-%COMP%]:hover{opacity:1}.about__video-button[_ngcontent-%COMP%]{position:absolute;width:3.125rem;height:3.125rem;display:flex;align-items:center;justify-content:center;border-radius:44%;font-size:1.0625rem;color:#fff;background-color:#eb3340;margin-right:.9375rem;transform:rotate(-20deg);pointer-events:none}.about__title-block[_ngcontent-%COMP%]{overflow:hidden;margin-top:-28.0625rem;margin-bottom:3.4375rem;pointer-events:none}.about__title[_ngcontent-%COMP%]{color:#fff;text-align:left;white-space:nowrap;margin:0}.about__title-item[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;font-weight:700;display:inline-block;word-spacing:-.16em}.about__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.3125rem}.about__content[_ngcontent-%COMP%]{margin-left:41.25rem;padding-right:2.8125rem;border-bottom:1px solid rgba(0,0,0,.15);margin-bottom:2.8125rem;padding-bottom:1.875rem;position:relative;z-index:2}.about__content--no-border[_ngcontent-%COMP%]{border-bottom:none}.about__description[_ngcontent-%COMP%]{color:#fff;font-size:2rem;font-weight:500;line-height:2.375rem;margin-bottom:1.2em}.about__description[_ngcontent-%COMP%], .about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-style:normal;letter-spacing:normal;text-align:left}.about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffadb1;font-size:1rem;font-weight:400;line-height:1.625rem;padding:0 1.25rem 0 5.125rem;margin-bottom:1.4em;text-indent:-5.125rem}.about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-line{color:#fff}.about__text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:1.3125rem;font-weight:500;font-style:normal;letter-spacing:normal;line-height:2.375rem;margin-bottom:.7em}.about__button[_ngcontent-%COMP%], .about__text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:5.125rem}.about__image-block[_ngcontent-%COMP%]{height:50rem;position:relative;margin-top:-6.25rem}.about__image-1[_ngcontent-%COMP%]{left:21rem;top:0;width:23.1875rem;height:28.875rem;z-index:2}.about__image-1[_ngcontent-%COMP%], .about__image-2[_ngcontent-%COMP%]{position:absolute;background-position:50%;background-repeat:no-repeat;background-size:contain}.about__image-2[_ngcontent-%COMP%]{z-index:1;left:32.4375rem;top:4.3125rem;width:32.75rem;height:40.75rem}.about__image-block-text[_ngcontent-%COMP%]{color:#d02834;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;font-weight:700;line-height:.7;text-transform:uppercase}.about__image-block-text-item[_ngcontent-%COMP%]{position:relative}.about__image-block-text-item[_ngcontent-%COMP%]:after{z-index:1;content:"";position:absolute;left:0;top:0;bottom:0;right:0;background-image:linear-gradient(180deg,rgba(235,51,64,0),#eb3340)}.about__image-block-text-item[_ngcontent-%COMP%]:nth-child(2){margin-left:-1.25rem;margin-left:12.5625rem}.about__image-block-text-item[_ngcontent-%COMP%]:nth-child(3){margin-left:4.5625rem}.about__image-block-text-item[_ngcontent-%COMP%]:nth-child(4){margin-left:39.9375rem}.about__decor-container[_ngcontent-%COMP%]{position:relative}.about__decor-1[_ngcontent-%COMP%]{position:absolute;pointer-events:none;left:1.875rem;top:-6.25rem;width:25rem;height:25rem;background-image:url(/assets/images/about/decor-1-sequence.png);background-position:0 0;background-size:auto 100%;transition:none}.about__decor-2[_ngcontent-%COMP%]{right:-10.625rem;bottom:38.3125rem;background-image:url(/assets/images/about/decor-sequence.png);z-index:4}.about__decor-2[_ngcontent-%COMP%], .about__decor-3[_ngcontent-%COMP%]{position:absolute;pointer-events:none;width:18.75rem;height:18.75rem;background-position:0 0;background-size:auto 100%;transition:none}.about__decor-3[_ngcontent-%COMP%]{left:3.125rem;bottom:8.9375rem;background-image:url(/assets/images/ai/decor.png)}@media (max-width:560px){.about__video[_ngcontent-%COMP%]{width:20.875rem;height:11.75rem}.about__video-button[_ngcontent-%COMP%]{transform:translate(-50%,-50%);margin:0;left:50%;top:50%;right:0}.about__title-block[_ngcontent-%COMP%]{margin-top:-8.75rem;margin-bottom:5.1875rem}.about__title[_ngcontent-%COMP%]{margin:0}.about__title-item[_ngcontent-%COMP%]{font-size:4.375rem}.about__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:.875rem}.about__content[_ngcontent-%COMP%]{margin-left:1.25rem;padding-right:1.25rem}.about__description[_ngcontent-%COMP%]{font-size:1.3125rem;line-height:1.9375rem}.about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.875rem;line-height:1.5rem;padding:0 1.25rem 0 2.25rem;text-indent:-2.25rem}.about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-line{color:#fff}.about__button[_ngcontent-%COMP%], .about__text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:2.25rem}.about__image-block[_ngcontent-%COMP%]{height:43.125rem;position:relative;margin-top:0}.about__image-1[_ngcontent-%COMP%]{position:absolute;left:-4.6875rem;top:0;width:19.8125rem;height:24.625rem}.about__image-2[_ngcontent-%COMP%]{left:-1.25rem;top:4rem;width:30.4375rem;height:37.875rem}.about__decor-1[_ngcontent-%COMP%], .about__decor-2[_ngcontent-%COMP%], .about__decor-3[_ngcontent-%COMP%], .about__decor-container[_ngcontent-%COMP%], .about__image-block-text[_ngcontent-%COMP%]{display:none}}.about-slider[_ngcontent-%COMP%]{height:45.625rem;position:relative}.about-slider[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;bottom:2.5rem;width:38.875rem;border-bottom:1px solid rgba(0,0,0,.15)}.about-slider__image[_ngcontent-%COMP%]{width:38rem;height:30.375rem;position:absolute;top:31px;left:50%;background-size:cover;background-position:50%;border-radius:.5rem;transform-origin:center;z-index:5}.about-slider__text-slide[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;text-align:center;z-index:5;opacity:0;pointer-events:none}.about-slider__number[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:4.8125rem;margin-left:6.25rem;font-weight:700;line-height:4.1875rem;margin-bottom:2.9375rem}.about-slider__first-name[_ngcontent-%COMP%]{line-height:6.875rem;top:8.1875rem}.about-slider__first-name[_ngcontent-%COMP%], .about-slider__last-name[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:9.6875rem;font-weight:700;text-align:center;position:absolute;left:50%;transform:translate(-50%);letter-spacing:0}.about-slider__last-name[_ngcontent-%COMP%]{line-height:8.125rem;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:#fff;-webkit-text-fill-color:transparent;top:16.125rem}.about-slider__description[_ngcontent-%COMP%]{position:absolute;bottom:2.5rem;right:0;left:0;color:#ffadb1;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-weight:400;font-style:normal;letter-spacing:normal;line-height:1.3125rem;text-align:left;padding:0 4.0625rem 0 46.375rem;margin-bottom:1.4em;text-indent:-5.125rem}.about-slider__description[_ngcontent-%COMP%]:first-line{color:#fff}.about-slider__block-text[_ngcontent-%COMP%]{color:#d02834;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;font-weight:700;line-height:.7;text-transform:uppercase;position:absolute;top:-18.75rem}.about-slider__block-text-item[_ngcontent-%COMP%]{position:relative}.about-slider__block-text-item[_ngcontent-%COMP%]:after{z-index:1;content:"";position:absolute;left:0;top:0;bottom:0;right:0;background-image:linear-gradient(180deg,rgba(235,51,64,0),#eb3340)}.about-slider__block-text-item[_ngcontent-%COMP%]:nth-child(2){margin-left:-1.25rem;margin-left:12.5625rem}.about-slider__block-text-item[_ngcontent-%COMP%]:nth-child(3){margin-left:4.5625rem}@media (max-width:560px){.about-slider[_ngcontent-%COMP%]{height:37.5rem;width:100%;position:relative}.about-slider[_ngcontent-%COMP%]:before{width:22.125rem}.about-slider__image[_ngcontent-%COMP%]{width:19rem;height:15.1875rem;background-size:cover;border-radius:.5rem;position:absolute;top:1.875rem;left:50%;z-index:5}.about-slider__number[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:2.375rem;margin-left:0;line-height:4.1875rem;margin-bottom:5.125rem;margin-top:-6.25rem}.about-slider__first-name[_ngcontent-%COMP%]{font-size:4.8125rem;line-height:3.75rem;top:5rem;transform:translate(-50%);letter-spacing:0}.about-slider__last-name[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Extended,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:4.8125rem;line-height:3.75rem;left:50%;top:10rem}.about-slider__description[_ngcontent-%COMP%]{position:absolute;bottom:2.5rem;font-size:.875rem;line-height:1.3125rem;padding:0 1.25rem 0 3.5rem;text-indent:-2.25rem}.about-slider__block-text[_ngcontent-%COMP%]{display:none}}']}),e})();const gN=["title"],vN=["title_part"],yN=["image"],_N=["decor_sequence"];function bN(e,t){if(1&e&&(Qo(0,"li",23),Qo(1,"span",24),_s(2),Ko(),Qo(3,"h3",25),_s(4),Ko(),es(5,"p",26),Ko()),2&e){const e=t.$implicit,n=t.index;ir(2),bs(n<10?"0"+(n+1):n+1),ir(2),bs(e.caption),ir(1),Jo("innerHTML",e.text,Fi)}}let wN=(()=>{class e{constructor(e){this.zone=e,this.decorSequences=new ba,this.tlTitle=Rv.timeline({repeat:-1,onReverseComplete:()=>{this.tlTitle.progress(1)}}),this.faqsList=[{caption:"How should I set up my phone for live classes?",text:"The best place to position your phone is at ground level, tilted slightly upwards, so your entire body is visible in the camera. If available, we recommend using a phone stand. Each live class will begin with a view of your screen to help you set up your camera\u2014what you see in your camera is what your trainer sees!"},{caption:"What do I need to bring to class? ",text:"Most classes only require a yoga mat, and occasionally dumbbells or a platform. You can view the equipment required for each class by clicking on the class\u2019s title."},{caption:"Can I adjust the music?",text:"The best place to position your phone is at ground level, tilted slightly upwards, so your entire body is visible in the camera. If available, we recommend using a phone stand. Each live class will begin with a view of your screen to help you set up your camera\u2014what you see in your camera is what your trainer sees!"},{caption:"Does the trainer really see me?",text:"Yes! Each live class is run by a Certified Personal Trainer there to motivate you and push you to be your best\u2014even if you\u2019re just getting started!"},{caption:"Can other people in class see me also?",text:"Your classmates will be able to see your profile picture during the live session, but they cannot see your video!"},{caption:"Can I ask the trainer a question during class?",text:"Absolutely! That\u2019s what we\u2019re here for. Once class begins, all participants are automatically muted, but at any time during class you can just tap the screen and hit the \u201cunmute\u201d button to speak to the trainer. Once you\u2019re done you can hit \u201cmute\u201d to mute yourself again."},{caption:"Can other users hear me? ",text:"Everyone can hear each other before and after class, so if you show up early - feel free to say hi! If you ask a question to your trainer during the session, only the trainer will hear."},{caption:"How do I get my Apple Watch to connect to the app?",text:'First, download the <a href="https://apps.apple.com/app/apple-store/id1494435397?mt=8" target="_blank">Presence.fit</a> watch app from the iOS app store. Then simply launch the app before you join a live session, and your heart rate and calories burned will be tracked automatically!'},{caption:"Help, I\u2019m experiencing technical issues!",text:'Please reach out to <a class="link" href="mailto:support@presence.fit">support@presence.fit</a> and we\u2019ll get back to you within 48 hours!'}]}ngOnInit(){}ngAfterViewInit(){Rv.registerPlugin(fO),this.zone.runOutsideAngular(()=>{new eN.a("Zoom Pro Wide").load().then(()=>{const e=this.titlePart.nativeElement.offsetWidth;this.tlTitle.clear().set(this.title.nativeElement,{x:0}).to(this.title.nativeElement,{duration:5,x:-e,ease:"linear"}).pause(),fO.create({trigger:this.title.nativeElement,onEnter:()=>this.tlTitle.resume(),onEnterBack:()=>this.tlTitle.resume(),onLeave:()=>this.tlTitle.pause(),onLeaveBack:()=>this.tlTitle.pause()})}),this.sequencesAnimation(),setTimeout(()=>{this.imageParallax()},500)})}sequencesAnimation(){this.decorSequences.toArray().forEach((e,t)=>{Rv.fromTo(e.nativeElement,{backgroundPosition:"0% top"},{scrollTrigger:{trigger:e.nativeElement,toggleActions:"play pause resume pause"},backgroundPosition:"100% top",duration:2,repeat:-1,ease:"steps(50)"})})}imageParallax(){fO.create({trigger:this.image.nativeElement,start:"top top",end:"bottom top +=200px",onUpdate:e=>{Rv.set(this.image.nativeElement,{y:-200*e.progress})}})}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-faqs"]],viewQuery:function(e,t){var n;1&e&&(Oa(gN,!0),Oa(vN,!0),Oa(yN,!0),Oa(_N,!0)),2&e&&(Pa(n=ka())&&(t.title=n.first),Pa(n=ka())&&(t.titlePart=n.first),Pa(n=ka())&&(t.image=n.first),Pa(n=ka())&&(t.decorSequences=n))},decls:49,vars:1,consts:[[1,"faqs"],[1,"faqs__subtitle"],[1,"faqs__image"],["image",""],["srcset","/assets/images/top-section/image-2.webp","type","image/webp"],["src","/assets/images/top-section/image-2.png","alt",""],[1,"faqs__title-block"],[1,"faqs__title"],["title",""],[1,"faqs__title-item"],["title_part",""],[1,"faqs__title__icon","icon-logo"],["src","/assets/images/logo-icon.svg","alt",""],[1,"faqs__content"],[1,"faqs__description"],[1,"faqs__decor-container"],[1,"faqs__decor-1"],["decor_sequence",""],[1,"faqs__decor-2"],[1,"faqs__decor-3"],[1,"faqs-list"],["class","faqs-list__item",4,"ngFor","ngForOf"],[1,"faqs__decor-4"],[1,"faqs-list__item"],[1,"faqs-list__index"],[1,"faqs-list__caption"],[1,"faqs-list__text",3,"innerHTML"]],template:function(e,t){1&e&&(Qo(0,"section",0),Qo(1,"span",1),_s(2,"Frequently Asked Questions"),Ko(),Qo(3,"picture",2,3),es(5,"source",4),es(6,"img",5),Ko(),Qo(7,"div",6),Qo(8,"div",7,8),Qo(10,"h1",9,10),_s(12,"Faqs\xa0"),Qo(13,"span",11),es(14,"img",12),Ko(),_s(15,"\xa0"),Ko(),Qo(16,"div",9),_s(17,"Faqs\xa0"),Qo(18,"span",11),es(19,"img",12),Ko(),_s(20,"\xa0"),Ko(),Qo(21,"div",9),_s(22,"Faqs\xa0"),Qo(23,"span",11),es(24,"img",12),Ko(),_s(25,"\xa0"),Ko(),Qo(26,"div",9),_s(27,"Faqs\xa0"),Qo(28,"span",11),es(29,"img",12),Ko(),_s(30,"\xa0"),Ko(),Qo(31,"div",9),_s(32,"Faqs\xa0"),Qo(33,"span",11),es(34,"img",12),Ko(),_s(35,"\xa0"),Ko(),Ko(),Ko(),Qo(36,"div",13),Qo(37,"p",14),_s(38,"Experience the future of fitness. Presence combines elite training, full 2-way communication, and advanced artificial intelligence to offer the world\u2019s most advanced workout."),Ko(),Qo(39,"div",15),es(40,"div",16,17),es(42,"div",18,17),es(44,"div",19,17),Ko(),Qo(46,"ol",20),Xo(47,bN,6,3,"li",21),Ko(),es(48,"div",22),Ko(),Ko()),2&e&&(ir(47),Jo("ngForOf",t.faqsList))},directives:[ic],styles:[".faqs__subtitle[_ngcontent-%COMP%]{width:11.9375rem;display:block;margin:0 auto 1.1875rem;color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-weight:500;line-height:.875rem;text-transform:uppercase;text-align:center}.faqs__image[_ngcontent-%COMP%]{position:absolute;width:53.5625rem;height:auto;margin:0 auto;display:block;top:5.375rem;left:14.875rem}.faqs__title-block[_ngcontent-%COMP%]{overflow:hidden;margin-top:6.6875rem;margin-bottom:3.4375rem;z-index:1;position:relative}.faqs__title[_ngcontent-%COMP%]{color:#fff;text-align:left;white-space:nowrap;margin:0}.faqs__title-item[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;font-weight:700;display:inline-block;word-spacing:-.16em}.faqs__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.3125rem}.faqs__content[_ngcontent-%COMP%]{margin-left:41.25rem;padding-right:2.8125rem;margin-bottom:2.8125rem;padding-bottom:1.875rem;position:relative}.faqs__description[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:2rem;font-weight:500;font-style:normal;letter-spacing:normal;line-height:2.375rem;text-align:left;padding-bottom:1.6em;margin:0}.faqs__decor-container[_ngcontent-%COMP%]{position:relative;margin-left:-41.25rem}.faqs__decor-1[_ngcontent-%COMP%]{left:5.875rem;top:-15.625rem;background-image:url(/assets/images/ai/decor.png)}.faqs__decor-1[_ngcontent-%COMP%], .faqs__decor-2[_ngcontent-%COMP%]{position:absolute;pointer-events:none;width:18.75rem;height:18.75rem;background-position:0 0;background-size:auto 100%;animation:sqc 2s steps(51) infinite;transition:none}.faqs__decor-2[_ngcontent-%COMP%]{top:22.5rem;left:-7.5rem;background-image:url(/assets/images/top-section/decor-2-sequence.png);z-index:4}.faqs__decor-3[_ngcontent-%COMP%]{top:65.3125rem;left:15.125rem;background-image:url(/assets/images/live-coaching/decor.png)}.faqs__decor-3[_ngcontent-%COMP%], .faqs__decor-4[_ngcontent-%COMP%]{position:absolute;pointer-events:none;width:18.75rem;height:18.75rem;background-position:0 0;background-size:auto 100%;animation:sqc 2s steps(51) infinite;transition:none}.faqs__decor-4[_ngcontent-%COMP%]{bottom:3.75rem;left:-41.25rem;background-image:url(/assets/images/train-anywhere/decor-2.png)}@media (max-width:560px){.faqs__image[_ngcontent-%COMP%]{position:absolute;width:21.125rem;top:6.875rem;left:1.125rem}.faqs__title-block[_ngcontent-%COMP%]{margin-top:6.6875rem;margin-bottom:3.4375rem}.faqs__title[_ngcontent-%COMP%]{margin:0}.faqs__title-item[_ngcontent-%COMP%]{font-size:4.375rem}.faqs__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:.875rem}.faqs__content[_ngcontent-%COMP%]{margin-left:1.25rem;padding-right:1.25rem}.faqs__description[_ngcontent-%COMP%]{font-size:1.3125rem;line-height:1.9375rem}.faqs__decor-1[_ngcontent-%COMP%], .faqs__decor-2[_ngcontent-%COMP%], .faqs__decor-3[_ngcontent-%COMP%], .faqs__decor-4[_ngcontent-%COMP%], .faqs__decor-container[_ngcontent-%COMP%]{display:none}}.faqs-list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.faqs-list__item[_ngcontent-%COMP%]{padding:1.875rem 0;margin:0;position:relative}.faqs-list__index[_ngcontent-%COMP%]{position:absolute;left:-8.4375rem;top:1.875rem;color:#fff;font-size:1.3125rem;font-weight:500;line-height:1.75rem}.faqs-list__index[_ngcontent-%COMP%], .faqs-list__text[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif}.faqs-list__text[_ngcontent-%COMP%]{color:#ffadb1;font-size:1rem;font-weight:400;font-style:normal;letter-spacing:normal;line-height:1.625rem;text-align:left;padding:0 1.25rem 0 5.125rem;text-indent:-5.125rem;margin-bottom:0}.faqs-list__text[_ngcontent-%COMP%]:first-line{color:#fff}.faqs-list__caption[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:1.3125rem;font-weight:500;font-style:normal;letter-spacing:normal;line-height:1.75rem;margin-bottom:.7em;margin-left:5.125rem}@media (max-width:560px){.faqs-list__index[_ngcontent-%COMP%]{display:none}.faqs-list__text[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;text-align:left;padding:0 0 0 2.25rem;text-indent:-2.25rem}.faqs-list__caption[_ngcontent-%COMP%]{margin-left:2.25rem}}"]}),e})();const xN=["main"],SN=["page1"],MN=["page2"],EN=["button_link1"],TN=["button_close1"],CN=["button_link2"],AN=["button_close2"],PN=["link1"],ON=["link2"],IN=["button_container"];function kN(e,t){1&e&&es(0,"app-about")}function RN(e,t){1&e&&es(0,"app-faqs")}const NN=function(){return["/"]};let LN=(()=>{class e{constructor(e,t,n,i){this.router=e,this.location=t,this.cd=n,this.pagesService=i,this.buttonContainers=new ba,this.page=0}ngOnInit(){"/faqs"==this.router.url&&(this.page=1),this.pagesService.getLink().subscribe(e=>{e&&this.openLink(e)})}ngAfterViewInit(){this.buttons=[this.buttonLink1,this.buttonClose1,this.buttonClose2,this.buttonLink2];let e=document.documentElement.clientWidth/1536*200;if(window.innerWidth>1920&&(e=250),this.page?(Rv.fromTo(this.main.nativeElement,{x:0,opacity:0},{opacity:1,x:e,duration:1.5,ease:"power1.inOut"}),Rv.fromTo(this.link1.nativeElement,{opacity:0},{opacity:1,duration:1.5,ease:"power1.inOut"}),Rv.set(this.link2.nativeElement,{opacity:0,visibility:"hidden"}),Rv.fromTo([this.buttonClose1.nativeElement,this.buttonLink1.nativeElement],{scale:0},{scale:1,duration:.25,delay:1.25,ease:"power1.inOut"}),Rv.set([this.buttonClose2.nativeElement,this.buttonLink2.nativeElement],{scale:0})):(Rv.fromTo(this.main.nativeElement,{x:e,opacity:0},{opacity:1,x:0,duration:1.5,ease:"power1.inOut"}),Rv.fromTo(this.link2.nativeElement,{opacity:0},{opacity:1,duration:1.5,ease:"power1.inOut"}),Rv.set(this.link1.nativeElement,{opacity:0,visibility:"hidden"}),Rv.fromTo([this.buttonClose2.nativeElement,this.buttonLink2.nativeElement],{scale:0},{scale:1,duration:.25,delay:1.25,ease:"power1.inOut"}),Rv.set([this.buttonClose1.nativeElement,this.buttonLink1.nativeElement],{scale:0})),window.innerWidth>560)for(let t=0;t<this.buttons.length;t++){Rv.set(this.buttons[t].nativeElement,{xPercent:-50,yPercent:-50});let e=this.buttonContainers.toArray()[t].nativeElement,n=this.buttons[t].nativeElement,i={x:e.offsetWidth/2,y:e.offsetHeight/2},r={x:i.x,y:i.y},o=.1,s=Rv.quickSetter(n,"x","px"),a=Rv.quickSetter(n,"y","px");e.addEventListener("mousemove",t=>{r.x=e.offsetWidth/2+(t.offsetX-e.offsetWidth/2)/3,r.y=e.offsetHeight/2+(t.offsetY-e.offsetHeight/2)/3}),e.addEventListener("mouseout",t=>{r.x=e.offsetWidth/2,r.y=e.offsetHeight/2}),Rv.ticker.add(()=>{var e=1-Math.pow(1-o,Rv.ticker.deltaRatio());i.x+=(r.x-i.x)*e,i.y+=(r.y-i.y)*e,s(i.x),a(i.y)})}}setLink(e){this.pagesService.setLink(e)}openLink(e){this.location.replaceState(e);let t=window.innerWidth/1536*200;window.innerWidth>1920&&(t=250),"/faqs"==e?(Rv.to(this.main.nativeElement,{x:t,duration:1.5,ease:"power2.inOut"}),Rv.to(this.link2.nativeElement,{opacity:0,duration:1.5,ease:"power1.inOut"}).then(()=>{Rv.set(this.link2.nativeElement,{visibility:"hidden"})}),Rv.set(this.link1.nativeElement,{visibility:"visible"}),Rv.to(this.link1.nativeElement,{opacity:1,duration:1.5,ease:"power1.inOut"}),Rv.to([this.buttonClose2.nativeElement,this.buttonLink2.nativeElement],{scale:0,duration:.25,ease:"power1.inOut"}),Rv.to([this.buttonClose1.nativeElement,this.buttonLink1.nativeElement],{scale:1,duration:.25,delay:1.25,ease:"power1.inOut"}),Rv.to(this.page1.nativeElement,{opacity:0,duration:.75,ease:"power1.inOut"}).then(()=>{this.page=1,this.cd.detectChanges()}),Rv.to(this.page2.nativeElement,{opacity:1,duration:.75,delay:.75,ease:"power1.inOut"})):(Rv.to(this.main.nativeElement,{x:0,duration:1.5,ease:"power2.inOut"}),Rv.set(this.link2.nativeElement,{visibility:"visible"}),Rv.to(this.link2.nativeElement,{opacity:1,duration:1.5,ease:"power1.inOut"}),Rv.to(this.link1.nativeElement,{opacity:0,duration:1.5,ease:"power1.inOut"}).then(()=>{Rv.set(this.link1.nativeElement,{visibility:"hidden"})}),Rv.to([this.buttonClose1.nativeElement,this.buttonLink1.nativeElement],{scale:0,duration:.25,ease:"power1.inOut"}),Rv.to([this.buttonClose2.nativeElement,this.buttonLink2.nativeElement],{scale:1,duration:.25,delay:1.25,ease:"power1.inOut"}),Rv.to(this.page2.nativeElement,{opacity:0,duration:.75,ease:"power1.inOut"}).then(()=>{this.page=0,this.cd.detectChanges()}),Rv.to(this.page1.nativeElement,{opacity:1,duration:.75,delay:.75,ease:"power1.inOut"}))}ngOnDestroy(){this.pagesService.setLink(null)}}return e.\u0275fac=function(t){return new(t||e)(Yo(Jd),Yo(Zl),Yo(wo),Yo(iA))},e.\u0275cmp=lt({type:e,selectors:[["app-pages"]],viewQuery:function(e,t){var n;1&e&&(Oa(xN,!0),Oa(SN,!0),Oa(MN,!0),Oa(EN,!0),Oa(TN,!0),Oa(CN,!0),Oa(AN,!0),Oa(PN,!0),Oa(ON,!0),Oa(IN,!0)),2&e&&(Pa(n=ka())&&(t.main=n.first),Pa(n=ka())&&(t.page1=n.first),Pa(n=ka())&&(t.page2=n.first),Pa(n=ka())&&(t.buttonLink1=n.first),Pa(n=ka())&&(t.buttonClose1=n.first),Pa(n=ka())&&(t.buttonLink2=n.first),Pa(n=ka())&&(t.buttonClose2=n.first),Pa(n=ka())&&(t.link1=n.first),Pa(n=ka())&&(t.link2=n.first),Pa(n=ka())&&(t.buttonContainers=n))},decls:42,vars:9,consts:[[3,"bg"],[1,"pages"],[1,"pages__prev"],[1,"pages__next-link",3,"click"],["link1",""],[1,"pages__prev-buttons"],[1,"pages__buttons-item"],["button_container",""],[1,"pages__button","pages__link-button",3,"click"],["button_link1",""],[1,"pages__link-button-icon","icon-link"],[1,"pages__button","pages__close-button",3,"routerLink"],["button_close1",""],[1,"pages__close-button-icon","icon-close"],[1,"pages__main"],["main",""],[1,"pages__page-1"],["page1",""],[4,"ngIf"],[1,"pages__page-2"],["page2",""],[1,"pages__next"],["link2",""],[1,"pages__next-buttons"],["button_close2",""],["button_link2",""]],template:function(e,t){1&e&&(es(0,"app-header",0),Qo(1,"div",1),Qo(2,"div",2),Qo(3,"a",3,4),os("click",(function(){return t.setLink("/about")})),_s(5,"About"),Ko(),Qo(6,"div",5),Qo(7,"div",6,7),Qo(9,"a",8,9),os("click",(function(){return t.setLink("/about")})),es(11,"div",10),Ko(),Ko(),Qo(12,"div",6,7),Qo(14,"a",11,12),es(16,"div",13),Ko(),Ko(),Ko(),Ko(),Qo(17,"div",14,15),Qo(19,"div",16,17),Xo(21,kN,1,0,"app-about",18),Ko(),Qo(22,"div",19,20),Xo(24,RN,1,0,"app-faqs",18),Ko(),es(25,"app-footer"),Ko(),Qo(26,"div",21),Qo(27,"a",3,22),os("click",(function(){return t.setLink("/faqs")})),_s(29,"Faqs"),Ko(),Qo(30,"div",23),Qo(31,"div",6,7),Qo(33,"a",11,24),es(35,"div",13),Ko(),Ko(),Qo(36,"div",6,7),Qo(38,"a",8,25),os("click",(function(){return t.setLink("/faqs")})),es(40,"div",10),Ko(),Ko(),Ko(),Ko(),Ko(),es(41,"app-video-modal")),2&e&&(Jo("bg",!0),ir(1),ps("pages--2",t.page),ir(13),Jo("routerLink",va(7,NN)),ir(7),Jo("ngIf",!t.page),ir(3),Jo("ngIf",t.page),ir(9),Jo("routerLink",va(8,NN)))},directives:[bA,Qd,oc,Yk,LR,mN,wN],styles:[".pages[_ngcontent-%COMP%]{max-width:1920px;margin:0 auto;position:relative}.pages__next[_ngcontent-%COMP%], .pages__prev[_ngcontent-%COMP%]{position:fixed;z-index:2}.pages__main[_ngcontent-%COMP%]{margin-left:1.25rem;width:84.33%;background:#eb3340;min-height:100vh;padding:6.625rem 0 5.625rem;position:relative;z-index:1}.pages__next[_ngcontent-%COMP%]{top:0;right:1.25rem;width:12.5rem}.pages__prev[_ngcontent-%COMP%]{top:0;left:1.25rem;width:12.5rem}@media (min-width:1920px){.pages__next[_ngcontent-%COMP%]{right:calc(50vw - 960px);width:13.75rem}.pages__prev[_ngcontent-%COMP%]{top:0;left:calc(50vw - 960px);width:13.75rem}}.pages__next-link[_ngcontent-%COMP%], .pages__prev-link[_ngcontent-%COMP%]{padding-left:9.375rem;display:block;transform:rotate(-270deg);color:hsla(0,0%,100%,.22);-webkit-text-stroke-width:1px;-webkit-text-stroke-color:hsla(0,0%,100%,.22);-webkit-text-fill-color:transparent;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:12.5rem;font-weight:700;line-height:1;text-align:center;text-transform:uppercase;cursor:pointer}.pages__prev-buttons[_ngcontent-%COMP%]{right:-1.25rem}.pages__next-buttons[_ngcontent-%COMP%], .pages__prev-buttons[_ngcontent-%COMP%]{position:absolute;top:5.3125rem;display:flex;z-index:2}.pages__next-buttons[_ngcontent-%COMP%]{left:-1.25rem}.pages__button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;padding:0;font-size:.625rem;display:flex;justify-content:center;align-items:center;border-radius:50%}.pages__buttons-item[_ngcontent-%COMP%] + .pages__buttons-item[_ngcontent-%COMP%]{margin-left:.625rem}.pages__link-button[_ngcontent-%COMP%]{border:1px solid #333;background-color:#000;color:#fff;transition:color .2s ease-in-out,background-color .2s ease-in-out,border-color .2s ease-in-out;cursor:pointer}.pages__link-button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000!important;border-color:#fff}.pages__prev-buttons[_ngcontent-%COMP%]   .pages__link-button[_ngcontent-%COMP%]   .pages__link-button-icon[_ngcontent-%COMP%]{transform:scaleX(-1)}.pages__close-button[_ngcontent-%COMP%]{border:1px solid #000;background-color:#eb3340;color:#000;transition:background-color .2s ease-in-out}.pages__close-button[_ngcontent-%COMP%]:hover{background-color:#fff}@media (max-width:560px){.pages__next[_ngcontent-%COMP%], .pages__prev[_ngcontent-%COMP%]{display:none}.pages__main[_ngcontent-%COMP%]{padding:5rem 0 3.75rem;width:auto;margin:0;overflow:hidden;transform:none!important}}"]}),e})();const DN=["title"],FN=["title_part"],UN=function(){return["/"]},zN={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",scrollOffset:[0,0]},HN=[{path:"",component:QR},{path:"about",component:LN},{path:"faqs",component:LN},{path:"terms-of-service",component:(()=>{class e{constructor(e){this.zone=e,this.tlTitle=Rv.timeline({repeat:-1,onReverseComplete:()=>{this.tlTitle.progress(1)}})}ngOnInit(){}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{new eN.a("Zoom Pro Wide").load().then(()=>{const e=this.titlePart.nativeElement.offsetWidth;this.tlTitle.clear().set(this.title.nativeElement,{x:0}).to(this.title.nativeElement,{duration:10,x:-e,ease:"linear"}).pause(),Rv.registerPlugin(fO),fO.create({trigger:this.title.nativeElement,onEnter:()=>this.tlTitle.resume(),onEnterBack:()=>this.tlTitle.resume(),onLeave:()=>this.tlTitle.pause(),onLeaveBack:()=>this.tlTitle.pause()})})})}ngOnDestroy(){fO.getAll().forEach(e=>e.kill())}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-terms-of-service"]],viewQuery:function(e,t){var n;1&e&&(Oa(DN,!0),Oa(FN,!0)),2&e&&(Pa(n=ka())&&(t.title=n.first),Pa(n=ka())&&(t.titlePart=n.first))},decls:740,vars:2,consts:[[1,"page"],[1,"page__close",3,"routerLink"],[1,"icon-close"],[1,"page__decor-1"],[1,"page__decor-2"],[1,"page__subtitle"],[1,"page__title-block"],[1,"page__title"],["title",""],[1,"page__title-item"],["title_part",""],[1,"page__title__icon","icon-logo"],["src","/assets/images/logo-icon.svg","alt",""],[1,"page__content"],[1,"page__description"],[1,"strong"],[1,"title-number"],[1,"title-number-small"],["href","https://www.google.com/policies/privacy/partners/"],["href","http://tools.google.com/dlpage/gaoptout"],["href","https://www.networkadvertising.org/managing/opt_out.asp"],["href","https://www.youronlinechoices.eu/"],["href","https://www.youradchoices.ca/"],["href","https://www.aboutads.info/choices/"],["href","https://chrome.google.com/webstore/detail/google-analytics-opt-out/fllaojicojecljbmefodhfapmkghcbnh?hl=en"],[1,"with-number"]],template:function(e,t){if(1&e){es(0,"app-header"),Qo(1,"div",0),Qo(2,"a",1),es(3,"div",2),Ko(),es(4,"div",3),es(5,"div",4),Qo(6,"div",5),_s(7,"NeuralX, inc"),es(8,"br"),_s(9," May 19, 2020"),Ko(),Qo(10,"div",6),Qo(11,"div",7,8),Qo(13,"h1",9,10),_s(15,"Terms of Service\xa0"),Qo(16,"span",11),es(17,"img",12),Ko(),_s(18,"\xa0\xa0"),Ko(),Qo(19,"div",9),_s(20,"Terms of Service\xa0"),Qo(21,"span",11),es(22,"img",12),Ko(),_s(23,"\xa0\xa0"),Ko(),Ko(),Ko(),Qo(24,"div",13),Qo(25,"div",14),_s(26,"PLEASE READ THIS LEGAL DOCUMENT CAREFULLY."),Ko(),Qo(27,"p"),_s(28,"NeuralX, Inc.together with our affiliates, \u201cNeuralX, inc\u201d, \u201cwe\u201d, or \u201cus\u201d) provides an online fitness community and related products, services, content and features through NeuralX, inc websites, such as those for support, through mobile, desktop, or device applications (including iOS and Android applications (\u201cApps\u201d)) and NeuralX, inc-controlled social media pages (including on Facebook, Instagram, Spotify and Twitter). To make these Terms easier to read, the NeuralX, inc Sites and Apps, along with the NeuralX, inc tablet interfaces and NeuralX, inc-controlled social media pages are collectively called the \u201cNeuralX, inc Service\u201d or \u201cthe Services\u201d. By registering as a member or by visiting, browsing, or using the NeuralX, inc Service in any way, you (as a \u201cuser\u201d) accept and agree to be bound by these Terms of Service (\u201cTerms\u201d), which forms a binding agreement between you and NeuralX, inc."),Ko(),Qo(29,"p",15),_s(30,"PLEASE READ: THESE TERMS CONTAIN A BINDING ARBITRATION PROVISION AND CLASS ACTION WAIVER (SECTION 20). READ CAREFULLY, INCLUDING YOUR RIGHT, IF APPLICABLE, TO OPT OUT OF ARBITRATION. EXCEPT FOR CERTAIN TYPES OF DISPUTES DESCRIBED IN SECTION 20 BELOW, OR WHERE PROHIBITED BY LAW, BY ENTERING INTO THESE TERMS YOU EXPRESSLY AGREE THAT DISPUTES BETWEEN YOU AND NEURALX, INC WILL BE RESOLVED BY BINDING, INDIVIDUAL ARBITRATION, AND YOU HEREBY WAIVE YOUR RIGHT TO PARTICIPATE IN A CLASS ACTION LAWSUIT OR CLASS-\u2060WIDE ARBITRATION."),Ko(),Qo(31,"p"),_s(32,"If you do not wish to be bound by these Terms, you may not access or use the NeuralX, inc Service. Certain elements of the NeuralX, inc Service may be subject to additional terms and conditions specified from time to time; your use of those elements of the NeuralX, inc Service is subject to those additional terms and conditions, which are incorporated into these Terms by this reference."),Ko(),Qo(33,"h2"),Qo(34,"span",16),_s(35,"01."),Ko(),_s(36," Who May Use the NeuralX, inc Service"),Ko(),Qo(37,"p"),_s(38,"Age Requirement. You must be at least 18 years old, or the age of legal majority in your jurisdiction of residence, to register with and use the NeuralX, inc Service. However, minors may participate provided that (a) they are at least 14 years old and (b) their parent/guardian is on site during the minor-participant\u2019s use of NeuralX, inc while exercising at all times."),Ko(),Qo(39,"p"),_s(40,"We may, in our sole discretion, refuse to offer the NeuralX, inc Service to any person or entity and change the eligibility criteria at any time. You are solely responsible for ensuring that these Terms are in compliance with all laws, rules and regulations applicable to you, and the right to access and use the NeuralX, inc Service is revoked where these Terms or use of the NeuralX, inc Service is prohibited or conflicts with any applicable law, rule or regulation. Further, the NeuralX, inc Service is offered only for your personal, non-commercial use, and not for the use or benefit of any third party."),Ko(),Qo(41,"h2"),Qo(42,"span",16),_s(43,"02."),Ko(),_s(44," License to Use the NeuralX, inc Service"),Ko(),Qo(45,"p"),_s(46,"License. Subject to your compliance with these Terms and solely for so long as you are permitted by us to access and use the NeuralX, inc Service, NeuralX, inc grants you a limited, non-transferable, non-exclusive, revocable right and license to access and use the NeuralX, inc Service for your own personal, non-commercial purposes, a right which may not be assigned or sublicensed to anyone. This license includes the right to view Content (defined below) available on the NeuralX, inc Service and the right to download one copy of the application to any single device for your personal, non-commercial home use only, provided you keep intact all copyright and other proprietary notices. This license will remain in effect unless and until you violate these Terms or this license is terminated by you or NeuralX, inc."),Ko(),Qo(47,"p"),_s(48,"Restrictions. Except as expressly permitted in writing by an authorized representative of NeuralX, inc, you will not reproduce, redistribute, sell, transfer, create derivative works from, decompile, reverse engineer, or disassemble the NeuralX, inc Service, nor will you take any measures to interfere with or damage the NeuralX, inc Service. Unless otherwise specified, copying or modifying any Content or using Content for any purpose other than your personal, non-commercial use of the NeuralX, inc Service, including use of any such Content on any other website or networked computer environment, is strictly prohibited. All rights not expressly granted by NeuralX, inc in these Terms are reserved."),Ko(),Qo(49,"h2"),Qo(50,"span",16),_s(51,"03."),Ko(),_s(52," Privacy"),Ko(),Qo(53,"h3"),Qo(54,"span",17),_s(55,"03.1"),Ko(),_s(56," SCOPE"),Ko(),Qo(57,"p"),_s(58,'This Privacy Policy applies to Personal Information that is Processed by NeuralX, inc in the course of our business, including via the NeuralX, inc Site, through our, Apps, forums, social media accounts, blogs, events, and other online or offline offerings (together with any and all future online and offline offerings operated by or on behalf of NeuralX, inc, the "Services"). All individuals whose responsibilities include the Processing of Personal Information on behalf of NeuralX, inc are expected to protect that data by adherence to this Privacy Policy.'),Ko(),Qo(59,"p"),_s(60,"Residents of California should be aware that California law affords them certain rights regarding their Personal Information. Residents of California should review the California Privacy Notice that supplements and forms a part of this Privacy Policy. The California Privacy Notice is available at, www.NeuralX, inc.com/california-privacy-notice."),Ko(),Qo(61,"p"),_s(62,"This Privacy Policy does not apply to Personal Information of NeuralX, inc employees Processed in the employment context, but employees who elect to use the Services will be treated as users in accordance with this Privacy Policy with respect to Personal Information Processed as users of our Service."),Ko(),Qo(63,"h3"),Qo(64,"span",17),_s(65,"03.2"),Ko(),_s(66," TRANSPARENCY/NOTICE\u2014TYPES OF PERSONAL INFORMATION WE COLLECT AND HOW WE USE IT"),Ko(),Qo(67,"p"),_s(68,"The types of Personal Information we may collect (directly from you or from third party sources) and our privacy practices depend on the nature of the relationship you have with NeuralX, inc and the requirements of applicable law. Some of the ways that NeuralX, inc may collect Personal Information include:"),Ko(),Qo(69,"ul"),Qo(70,"li"),_s(71,"You may provide Personal Information directly to NeuralX, inc through interacting with the Services, participating in surveys, during events, or promotions or sweepstakes, and requesting services or information."),Ko(),Qo(72,"li"),_s(73,"As you navigate the Services, certain passive information may also be collected about your visit, including through cookies and similar technologies as described below."),Ko(),Ko(),Qo(74,"p"),_s(75,"It is our goal to collect only that information which is relevant for the purposes of Processing. Below are the ways we collect Personal Information and how we use it."),Ko(),Qo(76,"h4"),Qo(77,"span",17),_s(78,"03.3.1"),Ko(),_s(79," TYPES OF PERSONAL INFORMATION WE COLLECT"),Ko(),Qo(80,"p"),_s(81,'NeuralX, inc collects Personal Information from its current, prospective, and former customers, members, users, visitors, and guests (collectively "Individuals").'),Ko(),Qo(82,"ul"),Qo(83,"li"),_s(84,"Information You Provide Directly to Us. When you use the Services, contact us directly, or engage in certain activities, such as registering for an account with NeuralX, inc, purchasing NeuralX, inc products or Services from us, using our App or participating in a live event, we may ask you to provide some or all of the following types of information"),Ko(),Qo(85,"li"),_s(86,'Purchases. When you choose to purchase NeuralX, inc products or Services from us including fitness equipment and accessories, apparel, live classes or subscription services offered through any device, we may collect information from you including Personal Information, such as your name, email address, mailing address, phone number, payment information, such as a credit card number and/or other related information that may be required from you to complete your purchase (such payment information, "Financial Information"). Unless we tell you otherwise at the time of your purchase or application for financing, your Financial Information is Processed by our third party processors and we do not collect, store or maintain your Financial Information. For more information on how your information is shared in these instances, please see Section 3.3.5 ("Third-Party Payment Processing") below. We will also collect a username and password in connection with any account created via the Services.'),Ko(),Qo(87,"li"),_s(88,"Public User Profiles. When you use NeuralX, inc, you may be given the opportunity to create a \u201cUser Profile\u201d and when you do so we may ask you to provide information about yourself such as a username, email address, weight, height, age, location, birthday, phone number and image or avatar. Only your email address and username are required to set up a User Profile; the rest of the information that you may provide is optional."),Ko(),Ko(),Qo(89,"p"),_s(90,"Once your User Profile is created, anytime you log in to participate in a class via our service, we will collect additional information and add it to your User Profile, such as the total number of classes taken, the dates you took those classes, fitness performance history (including leaderboard rank, achievements earned, total output, speed, distance and calories burned), your followers and who you are following, and, to the extent you have worn a heart rate monitor that you have connected to your fitness equipment, information about your heart rate over the course of the class and any other information that may be available from time to time."),Ko(),Qo(91,"p"),_s(92,"You acknowledge that your User Profile information may be personal to you, and by creating an account and providing such information through the use of our Services, you allow others, including NeuralX, inc, to identify you and therefore you may not be anonymous. Information included in your User Profile, including any achievements, milestones, streaks or badges earned via the Services may be displayed in-app during classes. Other registered NeuralX, inc users may be able to view your User Profile, including your fitness performance history (as described above), and your NeuralX, inc leaderboard name. They may also be able to see your indicated location and age (if you have provided it) and contact or follow you through the Services if you opt-in to those things. You have the option to set your profile to \u201cPrivate,\u201d which means that only members who you approve as followers can see your profile and fitness performance history, and you can remove other users from your followers."),Ko(),Qo(93,"ul"),Qo(94,"li"),_s(95,"Voice and Likeness. We may capture your visual image, likeness and voice recording (e.g., via photographs and/or video) if you participate in a class via our App and/or call our member support or inside sales teams. We may record and store member support and sales calls to train support and sales agents to help resolve member questions, for quality purposes and as required by law. Additionally, NeuralX, inc fitness equipment and the NeuralX, inc App may contain a camera, microphone and voice control features."),Ko(),Qo(96,"li"),_s(97,"Other User Information. NeuralX, inc may also collect other information from you as a result of your use of the Services, such as attendance history, purchase history, fitness and health related information. We may associate this information with other Personal Information that you have provided in order to improve and provide the Services and as otherwise described in this Privacy Policy."),Ko(),Qo(98,"li"),_s(99,"Communications with Us. We may collect Personal Information from you such as your email address, phone number or mailing address, when you choose to request information about our Services, visit a retail location, register to receive NeuralX, inc communications over email or text messaging, participate in promotions, or loyalty programs that we may offer from time to time, request to receive member or technical support or otherwise communicate with us."),Ko(),Qo(100,"li"),_s(101,"Surveys and Reviews. From time to time, we (or third parties acting on our behalf) may contact you to participate in research, surveys or beta testing or to provide reviews and testimonials. If you decide to participate, you may be asked to provide certain information, which may include Personal Information. All information collected from your participation in our research, surveys, reviews or testimonial process, or beta testing is provided by you voluntarily. We may use such information to improve our products, our Site and/or Services, and in any manner consistent with this Privacy Policy."),Ko(),Qo(102,"li"),_s(103,"Posting on the NeuralX, inc or Third Party Services. NeuralX, inc may offer publicly accessible blogs, social media pages, product review pages, private messages, video chat or community forums. You should be aware that, when you disclose information about yourself on NeuralX, inc\u2019s blogs, social media pages, product review pages, private messages, community forums, and within video chat sessions, NeuralX, inc will collect the information you provide in such submissions, including any Personal Information. If you choose to submit content, including reviews, to any public area of the Services or on any public sites operated by third parties, such content will be considered \u201cpublic\u201d and will not be subject to the privacy protections provided in this Privacy Policy."),Ko(),Qo(104,"li"),_s(105,"Registration for Sweepstakes or Contests. Occasionally, NeuralX, inc may run sweepstakes and contests. We ask those who enter sweepstakes or contests to provide contact information (e.g., a phone number or an email address). If you participate in a sweepstakes or contest, your contact information may be used to reach you about the sweepstakes or contest, and, to the extent permitted by law, for other promotional, marketing and business purposes. In compliance with the laws of your jurisdiction, as a participant you may have the opportunity to opt-out of any communications that are not related to awarding prizes."),Ko(),Qo(106,"li"),_s(107,"Location Information. Based on your interaction with the Services, the type of device you use to access the Services, and your device\u2019s connectivity, we may collect location-based information including your Internet protocol (IP) address, GPS location, longitude/latitude, city, county, zip code and region, and your location and your smart device\u2019s proximity to \u201cbeacons,\u201d Bluetooth networks and/or other proximity systems. We may use this type of information to enhance your user experience (such as using location information for the purposes of displaying the geographic distribution of NeuralX, inc workouts on a heat map), to better understand your interaction with our products and services in any retail locations, or to enable you to track your outdoor fitness activities. Unless you provide us with your consent to do otherwise, this information will only be used by us and our third party service providers to provide you with the Services you request or in an aggregated and anonymized format that does not identify you. If you no longer wish to have this location information collected and used by us, you may opt-out by disabling the location and Bluetooth features in the operating system of your device."),Ko(),Qo(108,"li"),_s(109,"Automatic Data Collection. We may collect certain information automatically through our Services or other methods of web analysis, such as your IP address, cookie identifiers, mobile carrier, mobile advertising identifiers, MAC address, IMEI, Advertiser ID, and other device identifiers that are automatically assigned to your computer or device when you access the Internet, browser type and language, geo-location information, hardware type, operating system, Internet service provider, pages that you visit before and after using the Services, the date and time of your visit, the amount of time you spend on each page, information about the links you click and pages you view within the Services, and other actions taken through use of the Services such as preferences. For more information on Automatic Data Collection, please see Section 3.3."),Ko(),Qo(110,"li"),_s(111,"Information Submitted Via Services. You agree that NeuralX, inc is free to use the content of any communications submitted by you via the Services, including any ideas, inventions, concepts, techniques, or know-how disclosed as part of that content, for any purpose including developing, manufacturing and/or marketing goods or Services. NeuralX, inc will not release your name or otherwise publicize the fact that you submitted materials or other information to us unless: (a) you grant us permission to do so; (b) we first send notice to you that the materials or other information you submit to a particular part of the Services will be published or otherwise used with your name on it; or (c) we are required to do so by law."),Ko(),Qo(112,"li"),_s(113,"Information from Other Sources. We may receive information about you from other sources, including through third party services and organizations, to supplement information provided by you. For example, if you access our Services through a third party application, such as the Apple App Store or Google Play App Store (together with any similar applications, \u201cApp Stores\u201d) or social media sites such as Facebook, we may collect information about you from that third party application that you have made public via your privacy settings. Information we collect through App Stores or social media accounts may include your name, your social media site user identification number, your user name, location, gender, birth date, email, profile picture and your social media contacts. This supplemental information allows us to verify information that you have provided to NeuralX, inc and to enhance our ability to provide you with information about our business, products and Services."),Ko(),Ko(),Qo(114,"h4"),Qo(115,"span",17),_s(116,"03.3.2"),Ko(),_s(117," HOW NeuralX, inc USES YOUR INFORMATION"),Ko(),Qo(118,"ul"),Qo(119,"li"),_s(120,"To Provide Products, Services or Information Requested. NeuralX, inc may use information about you to fulfill requests for products, Services or information, including information about potential or future services, including to:"),Ko(),Qo(121,"li"),_s(122,"Generally manage Individual information and accounts;"),Ko(),Qo(123,"li"),_s(124,"Respond to questions, comments, and other requests;"),Ko(),Qo(125,"li"),_s(126,"Provide access to certain areas, functionalities, and features of NeuralX, inc\u2019s Services;"),Ko(),Qo(127,"li"),_s(128,"Assist with monitoring your performance, fitness and health related statistics and usage trends;"),Ko(),Qo(129,"li"),_s(130,"Personalize exercise and activity goals for you based on your settings and your historical exercise or activity data;"),Ko(),Qo(131,"li"),_s(132,"Communicate with you about logistical matters, including product deliveries and product servicing visits;"),Ko(),Qo(133,"li"),_s(134,"Provide services to you;"),Ko(),Qo(135,"li"),_s(136,"Review and contact you to answer requests for member support or technical support; and"),Ko(),Qo(137,"li"),_s(138,"Allow you to register for classes and events."),Ko(),Qo(139,"li"),_s(140,"Administrative Purposes. NeuralX, inc may use Personal Information about you for its administrative purposes, including to:"),Ko(),Qo(141,"li"),_s(142,"Measure interest in NeuralX, inc\u2019s Services;"),Ko(),Qo(143,"li"),_s(144,"Develop new products and Services;"),Ko(),Qo(145,"li"),_s(146,"Ensure quality control;"),Ko(),Qo(147,"li"),_s(148,"Verify Individual identity;"),Ko(),Qo(149,"li"),_s(150,"Communicate about Individual accounts and activities on NeuralX, inc\u2019s Services and systems, and, in NeuralX, inc\u2019s discretion, changes to any NeuralX, inc policy;"),Ko(),Qo(151,"li"),_s(152,"Send emails or text messages to the email address or telephone number you provide to us to verify your account and for informational and operational purposes, such as account management, customer service, delivery updates, or system maintenance;"),Ko(),Qo(153,"li"),_s(154,"Process payment(s) for products or services purchased;"),Ko(),Qo(155,"li"),_s(156,"Process applications and transactions;"),Ko(),Qo(157,"li"),_s(158,"Prevent potentially prohibited or illegal activities;"),Ko(),Qo(159,"li"),_s(160,"Maintain and administer our Services; and"),Ko(),Qo(161,"li"),_s(162,"Enforce our Terms."),Ko(),Qo(163,"li"),_s(164,"Marketing NeuralX, inc Products and Services. NeuralX, inc may use Personal Information to provide you with materials about offers, products and Services that may be of interest, including new content or services. NeuralX, inc may provide you with these materials by phone, postal mail, text or email, as permitted by applicable law. Such uses include:"),Ko(),Qo(165,"li"),_s(166,"To tailor content, advertisements and offers;"),Ko(),Qo(167,"li"),_s(168,"To notify you about offers, products and services that may be of interest to you or about which you have previously expressed an interest;"),Ko(),Qo(169,"li"),_s(170,"To provide Services to you;"),Ko(),Qo(171,"li"),_s(172,"For other purposes disclosed at the time that Individuals provide Personal Information; or"),Ko(),Qo(173,"li"),_s(174,"Otherwise with your consent. You may contact us at any time to opt-out of the use of your Personal Information for marketing purposes, as further described in Section 5 below."),Ko(),Ko(),Qo(175,"p"),_s(176,"You may contact us at any time to opt-out of the use of your Personal Information for marketing purposes, as further described in Section 6 below."),Ko(),Qo(177,"ul"),Qo(178,"li"),_s(179,"Research and Development. NeuralX, inc may use Personal Information to create non-identifiable information that we may use alone or in the aggregate with information obtained from other sources, in order to help us improve our existing products and Services or develop new products and Services. From time to time, NeuralX, inc may perform research (online and offline) via surveys. We may engage third party service providers to conduct such surveys on our behalf. All survey responses are voluntary, and the information collected will be used for research and reporting purposes to help us better serve Individuals by learning more about their needs and the quality of the products and services we provide. The survey responses may be utilized to determine the effectiveness of our Services, various types of communications, advertising campaigns and/or promotional activities. If an Individual participates in a survey, the information given will be used along with that of other study participants. We may share anonymous Individual and aggregate data for research and analysis purposes."),Ko(),Qo(180,"li"),_s(181,"Direct Mail, Email and Outbound Telemarketing. Individuals who provide us with Personal Information, or whose Personal Information we obtain from third parties, may, as permitted by law, receive periodic emails, newsletters, mailings, text messages or phone calls from us with information on NeuralX, inc\u2019s or our business partners\u2019 products and services or upcoming special offers/events that we believe may be of interest. We offer the option to decline these communications at no cost to the Individual by following the instructions in Section 5 below."),Ko(),Qo(182,"li"),_s(183,"Services via Apps and other Devices. From time to time, NeuralX, inc may provide Services that are specifically designed to be compatible and used on third party devices, such as mobile phones, smart TVs, and tablets. NeuralX, inc will collect certain information that your device sends when you use such Services, like a device identifier, user settings, location information, carrier and the operating system of your device. These versions of NeuralX, inc\u2019s Services may require that users log in with an account. In such cases, information about use of these versions of the Services may be associated with accounts. In addition, NeuralX, inc may enable you to download an application, widget or other tool that can be used on mobile, tablet or other devices. Some of these tools may store information on your devices. These tools may transmit Personal Information to NeuralX, inc to enable you to access accounts and to enable NeuralX, inc to track use of these tools. Some of these tools may enable users to export reports and other information from the tool. NeuralX, inc may use personal or non-identifiable information transmitted to NeuralX, inc to enhance these tools, to develop new tools, for quality improvement and as otherwise described in this Privacy Policy or in other notices NeuralX, inc provides."),Ko(),Qo(184,"li"),_s(185,"Anonymous and Aggregated Information Use. NeuralX, inc may use Personal Information and other information about you to create anonymized and aggregated information, such as de-identified demographic information, de-identified location information, information about the computer or device from which you access NeuralX, inc\u2019s Services or other analyses we create. Anonymized and aggregated information is used for a variety of functions, including the measurement of visitors\u2019 interest in and use of various portions or features of the Services. Anonymized or aggregated information is not Personal Information, and NeuralX, inc may use such information in a number of ways, including research, internal analysis, analytics and any other legally permissible purposes. We may share this information within NeuralX, inc and with third parties for our or their purposes in an anonymized or aggregated form that is designed to prevent anyone from identifying you."),Ko(),Qo(186,"li"),_s(187,'Sharing Content with Friends or Colleagues. NeuralX, inc\u2019s Services may offer various tools and functionalities. For example, NeuralX, inc may allow you to provide information about your friends through our referral services, such as "Refer a Friend." Our referral services may allow you to forward or share certain content with a friend or colleague, such as an email inviting your friend to use our Services. Email addresses that you provide for a friend or colleague will be used to send your friend or colleague the content or link you request, but will not be used by NeuralX, inc for any other purpose.'),Ko(),Qo(188,"li"),_s(189,"Other Uses. NeuralX, inc may use Personal Information for which we have a legitimate interest, such as fraud protection or compliance with legal obligations, or any other purpose disclosed to you at the time you provide Personal Information or with your consent."),Ko(),Ko(),Qo(190,"h4"),Qo(191,"span",17),_s(192,"03.3.3"),Ko(),_s(193," COOKIES, PIXEL TAGS/WEB BEACONS, ANALYTICS INFORMATION, AND INTEREST-BASED ADVERTISING"),Ko(),Qo(194,"p"),_s(195,'We, as well as third parties that provide content, advertising or other functionality on our Services, may use cookies, pixel tags, local storage and other technologies ("Technologies") to automatically collect information through the Services. We use Technologies that are essentially small data files placed on your computer, tablet, mobile phone or other devices that allow us to record certain pieces of information whenever you visit or interact with our website, services, applications, messaging and tools, and to recognize you across devices.'),Ko(),Qo(196,"ul"),Qo(197,"li"),_s(198,"Cookies. Cookies are small text files placed in visitors\u2019 computer browsers to store their preferences. Most browsers allow you to block and delete cookies. However, if you do that, the Site may not work properly."),Ko(),Qo(199,"li"),_s(200,"Pixel Tags/Web Beacons. A pixel tag (also known as a web beacon) is a piece of code embedded on the Site that collects information about users\u2019 engagement on that web page. The use of a pixel allows us to record, for example, that a user has visited a particular web page or clicked on a particular advertisement."),Ko(),Qo(201,"li"),_s(202,"Social Media Widgets. The Site includes social media features such as links to Facebook, Instagram, Twitter, YouTube and LinkedIn (that might include widgets, such as, the share this button or other interactive mini-programs). These features may collect your IP address, which page you are visiting on the Site and may set a cookie to enable the feature to function properly. These social media features are either hosted by a third party or hosted directly on the Site. Your interactions with these features are governed by the privacy policy of the company providing it."),Ko(),Qo(203,"li"),_s(204,"Analytics. We may also use Google Analytics and Google Analytics Demographics and Interest Reporting to collect information regarding visitor behavior and visitor demographics on some of our Services and to develop website content. This analytics data is not tied to any Personal Information. For more information about Google Analytics, please visit"),Qo(205,"a",18),_s(206," www.google.com/policies/privacy/partners/"),Ko(),_s(207,". You can opt-out of Google\u2019s collection and Processing of data generated by your use of the Services by going to"),Qo(208,"a",19),_s(209," http://tools.google.com/dlpage/gaoptout"),Ko(),_s(210,"."),Ko(),Ko(),Qo(211,"p"),_s(212,"Our uses of such Technologies fall into the following general categories:"),Ko(),Qo(213,"ul"),Qo(214,"li"),_s(215,"Operationally Necessary. We may use Technologies that are necessary to the operation of our Site, Services, applications, and tools. This includes Technologies that allow you access to our Site, Services, applications, and tools; that are required to identify irregular site behavior, prevent fraudulent activity and improve security; or that allow you to make use of functions such as shopping carts, saved search or similar functions;"),Ko(),Qo(216,"li"),_s(217,"Performance Related. We may use Technologies to assess the performance of our Site, applications, Services and tools, including as part of our analytic practices to help us understand how our visitors use our Site, determine if you have interacted with our messaging, determine whether you have viewed an item or link, or to improve our website content, applications, services or tools;"),Ko(),Qo(218,"li"),_s(219,"Functionality Related. We may use Technologies that allow us to offer you enhanced functionality when accessing or using our Sites, Services, applications or tools. This may include identifying you when you sign into our Sites or keeping track of your specified preferences, interests or past items viewed so that we may enhance the presentation of content on our Sites;"),Ko(),Qo(220,"li"),_s(221,"Advertising or Targeting Related. We may use first-party or third party cookies and web beacons to deliver content, including ads relevant to your interests, on our Sites or on third party sites. This includes using technologies to understand the usefulness to you of the advertisements and content that has been delivered to you, such as whether you have clicked on an advertisement."),Ko(),Ko(),Qo(222,"p"),_s(223,"If you would like to opt-out of the Technologies we employ on our Sites, Services, applications or tools, you may do so by blocking, deleting or disabling them as your browser or device permits. See Section 5 for additional opt-out options. Please note that blocking, deleting, or disabling these Technologies will affect the functionality of our Sites, Services, applications and tools, and may prevent you from being able to access certain features."),Ko(),Qo(224,"h4"),Qo(225,"span",17),_s(226,"03.3.4"),Ko(),_s(227," THIRD-PARTY WEBSITES, SOCIAL MEDIA PLATFORMS, AND SOFTWARE DEVELOPMENT KITS"),Ko(),Qo(228,"p"),_s(229,"The Service may contain links to other websites and other websites may reference or link to the NeuralX, inc Site or other Services. These other domains and websites are not controlled by us, and NeuralX, inc does not endorse or make any representations about third party websites or social media platforms. We encourage you to read the privacy policies of each and every website and application with which you interact. We do not endorse, screen or approve, and are not responsible for the privacy practices or content of such other websites or applications. Visiting other websites or applications is at your own risk."),Ko(),Qo(230,"p"),_s(231,"NeuralX, inc\u2019s Services may include publicly accessible blogs, community forums, message boards, private messaging or video chat features. The Services may also contain links and interactive features with various social media or music platforms (e.g., widgets). If you already use these platforms, their cookies may be set on your device when using the Services. You should be aware that Personal Information that you voluntarily include and transmit online in a publicly accessible blog, video chat session, social media platform or otherwise online, or that you share in an open forum, may be viewed and used by others without any restrictions. We are unable to control such uses of your information when you interact with a third party platform, and by using such services you assume the risk that the Personal Information provided by you may be viewed and used by third parties for any number of purposes."),Ko(),Qo(232,"p"),_s(233,"We use third party software development kits (\u201cSDKs\u201d), such as the Fitbit, Apple HealthKit and Strava SDKs, as part of the functionality of our Services, and NeuralX, inc fitness equipment may contain wireless data transfer capabilities such as near field communication (or NFC) to facilitate pairing to devices using these SDKs and other wearable devices. We may also enable you to link your NeuralX, inc account to certain health-related applications. If you choose to link your NeuralX, inc account with such applications, you can decide to share the health information we collect about you while you use the Services, including but not limited to your heart rate, calories, cycling, walking and running distances, time spent meditating, and the list of your NeuralX, inc workouts taken with such applications. If you decide to do so, you may also be able to transfer other personal information, such as your gender, date of birth, heart rate, height, weight and walking and running distances, from the health related applications to NeuralX, inc. If you make this election, this information may be used by NeuralX, inc to update your NeuralX, inc User Profile and track your metrics in NeuralX, inc classes. You may opt-out of tracking at any time by configuring your privacy settings on such applications. We do not share information that we collect from SDKs or other health-related applications with third parties for their advertising or marketing purposes. Your interactions with SDKs or other health applications are governed by the privacy policy of the company providing the service."),Ko(),Qo(234,"h4"),Qo(235,"span",17),_s(236,"03.3.5"),Ko(),_s(237," THIRD-PARTY PAYMENT PROCESSING"),Ko(),Qo(238,"p"),_s(239,"When you make purchases through the Services, we Process your payments through a third party application, such as an App Store or, in the case of online or in-person purchases via a Third-Party payment processor. In these instances, the third party application may collect certain Financial Information from you to Process a payment on behalf of NeuralX, inc, including your name, email address, address and other billing information in which case the use and storage of your Financial Information is governed by the third party app\u2019s terms, conditions and privacy policies. If you apply for or otherwise take part in a financing offer through one of our financing partners, you will be asked to provide information (which may include Financial Information) to that financing partner, either directly or through the Services. The use of that information by the financing partner will be subject to the financing partner\u2019s terms, conditions and privacy policies. Our treatment of any Financial Information that we may Process on your behalf, or that we receive from our financing partners or payment processors, is subject to this Privacy Policy. For more information on our use of Third-Party payment processors and financing partners, including the name(s) of the entities that we partner with, please email privacy@NeuralX, inc.com."),Ko(),Qo(240,"h3"),Qo(241,"span",17),_s(242,"03.4"),Ko(),_s(243," ONWARD TRANSFER\u2014NeuralX, inc MAY DISCLOSE YOUR INFORMATION"),Ko(),Qo(244,"h4"),Qo(245,"span",17),_s(246,"03.4.1"),Ko(),_s(247," INFORMATION WE SHARE"),Ko(),Qo(248,"p"),_s(249,"We may share your information as described in this Privacy Policy (e.g., with our third party service providers; to comply with legal obligations; to enhance the Services, to protect and defend our rights and property) or with your permission."),Ko(),Qo(250,"ul"),Qo(251,"li"),_s(252,"We Use Vendors and Service Providers. We may share any information we receive with vendors and service providers. The types of service providers to whom we entrust Personal Information include service providers for: (i) provision of IT, analytics and related services; (ii) provision of information and services you have requested; (iii) payment processing; (iv) customer service activities such as deliveries and member support; and (v) in connection with the provision of the Services. NeuralX, inc's policy is to execute appropriate contracts with the service providers that prohibit them from using or sharing Personal Information except as necessary to perform the contracted services on our behalf or to comply with applicable legal requirements, and this Privacy Policy."),Ko(),Qo(253,"li"),_s(254,"Business Partners. NeuralX, inc may share Personal Information with our business partners and affiliates for our and our affiliates\u2019 internal business purposes or to provide you with a product or service that you have requested. NeuralX, inc may also provide Personal Information to business partners with whom we may jointly offer products or services, or whose products or services we believe may be of interest to you. In such cases, our business partner\u2019s name will appear, along with NeuralX, inc."),Ko(),Qo(255,"li"),_s(256,"Displaying to Other Users. The content you post to the Services may be displayed on the Services. Other users of the Services may be able to see some information about you, such as your name if you submit a review or provide a testimonial to our Site. We are not responsible for the privacy practices of the other users who view and use posted information."),Ko(),Qo(257,"li"),_s(258,"Marketing \u2013 Interest-Based Advertising and Third-Party Marketing. NeuralX, inc may allow third party advertising partners to set tracking tools (e.g., cookies) to collect information regarding your activities on our Sites (e.g., your IP address, page(s) visited, time of day). We may also share such de-identified information as well as selected Personal Information (such as demographic information and past purchase history) we have collected with third party advertising partners. These advertising partners may use this information (and similar information collected from other companies) for purposes of delivering targeted advertisements to you when you visit non-NeuralX, inc related websites within their networks. This practice is commonly referred to as \u201cinterest-based advertising\u201d or \u201conline behavioral advertising\u201d. We may allow access to other data collected by the Site to facilitate transmittal of information that may be useful, relevant, valuable or otherwise of interest to you. If you prefer that we do not share your Personal Information with third party advertising partners, you may opt-out of such sharing at no cost by following the instructions in Section 5 below."),Ko(),Qo(259,"li"),_s(260,"Disclosures to Protect Us or Others (e.g., as Required by Law and Similar Disclosures)). We may access, preserve and disclose your Personal Information, other account information and content if we believe doing so is required or appropriate: (i) to comply with law enforcement or national security requests and legal process, such as, a court order or subpoena; (ii) to respond to your requests; (iii) to protect yours, ours or others\u2019 rights, property or safety; (iv) to enforce NeuralX, inc policies or contracts; (v) to collect amounts owed to NeuralX, inc; (vi) to comply with records retention policies; (vii) when we believe access, preservation, or disclosure is necessary or appropriate to prevent physical harm or financial loss or in connection with an investigation or prosecution of suspected or actual illegal activity; or (viii) if we, in good faith, believe that access, preservation, or disclosure is otherwise necessary or advisable."),Ko(),Ko(),Qo(261,"p"),_s(262,"In addition, from time to time, server logs may be reviewed for security purposes \u2013 e.g., to detect unauthorized activity on the Services. In such cases, server log data containing IP addresses may be shared with law enforcement bodies in order to allow them to identify users in connection with their investigation of the unauthorized activities."),Ko(),Qo(263,"ul"),Qo(264,"li"),_s(265,"Merger, Sale, or Other Asset Transfers. If we are involved in a merger, acquisition, financing, reorganization, bankruptcy, receivership, sale of company assets or transition of service to another provider, then your information may be sold or transferred as part of such a transaction as permitted by law and/or contract. In such event, NeuralX, inc will endeavor to direct the transferee to use Personal Information in a manner that is consistent with the Privacy Policy in effect at the time such Personal Information was collected."),Ko(),Ko(),Qo(266,"h4"),Qo(267,"span",17),_s(268,"03.4.2"),Ko(),_s(269," INTERNATIONAL DATA TRANSFERS"),Ko(),Qo(270,"p"),_s(271,"You agree that all Personal Information collected via or by NeuralX, inc may be transferred, Processed and stored anywhere in the world, including but not limited to, the United States, Canada, the European Union, in the cloud, on our servers, on the servers of our affiliates or on the servers of our service providers. Your Personal Information may be accessible to law enforcement or other authorities as described above. By providing information to NeuralX, inc, you explicitly consent to the storage of your Personal Information in these locations."),Ko(),Qo(272,"h3"),Qo(273,"span",17),_s(274,"03.5"),Ko(),_s(275," OPT-OUT (RIGHT TO OBJECT TO PROCESSING)"),Ko(),Qo(276,"h4"),Qo(277,"span",17),_s(278,"03.5.1"),Ko(),_s(279," GENERAL"),Ko(),Qo(280,"p"),_s(281,"You have the right to object to and opt-out of certain uses and disclosures of your Personal Information. Where you have consented to NeuralX, inc\u2019s Processing of your Personal Information or Sensitive Personal Information, you may withdraw that consent at any time and opt-out to further Processing by contacting privacy@NeuralX, inc.com. Even if you opt-out, we may still collect and use non-Personal Information regarding your activities on our Service and/or information from the advertisements on third party websites for non-interest based advertising purposes, such as, to determine the effectiveness of the advertisements."),Ko(),Qo(282,"h4"),Qo(283,"span",17),_s(284,"03.5.2"),Ko(),_s(285," EMAIL, TEXT AND TELEPHONE COMMUNICATIONS"),Ko(),Qo(286,"p"),_s(287,"You can unsubscribe from email, text and phone communications at any time. To stop receiving our promotional emails, follow the unsubscribe instructions in the email messages you receive from us or contact us as described in Section 11. To opt-out of receiving text messages, follow the opt-out instructions in the text messages that you receive from us. We will process your request within a reasonable time after receipt, in accordance with applicable laws. Note that you will continue to receive transaction-related emails regarding products or services you have requested. We may also send you certain non-promotional communications regarding NeuralX, inc and our Services and, to the extent permitted by law, you will not be able to opt-out of those communications (e.g., communications regarding updates to our Terms or this Privacy Policy)."),Ko(),Qo(288,"p"),_s(289,'We maintain "do-not-call" and "do-not-mail" lists as mandated by law. We process requests to be placed on do-not-mail, do-not-phone and do-not-contact lists within 60 days after receipt, or such shorter time as may be required by law.'),Ko(),Qo(290,"h4"),Qo(291,"span",17),_s(292,"03.5.3"),Ko(),_s(293," MOBILE DEVICES"),Ko(),Qo(294,"p"),_s(295,"NeuralX, inc may occasionally send you push notifications through our Apps with updates, achievements and other notices that may be of interest to you. You may at any time opt-out from receiving these types of communications by changing the settings on your device. NeuralX, inc may also collect location-based information if you use our Apps. You may opt-out of this collection by changing the settings on your device."),Ko(),Qo(296,"h4"),Qo(297,"span",17),_s(298,"03.5.4"),Ko(),_s(299,' "DO NOT TRACK"'),Ko(),Qo(300,"p"),_s(301,'Do Not Track ("DNT") is a privacy preference that users can set in certain web browsers. DNT is a way for users to inform websites and services that they do not want certain information about their webpage visits collected over time and across websites or online services. Please note that we do not respond to or honor DNT signals or similar mechanisms transmitted by web browsers.'),Ko(),Qo(302,"h4"),Qo(303,"span",17),_s(304,"03.5.5"),Ko(),_s(305," COOKIES AND INTEREST-BASED ADVERTISING"),Ko(),Qo(306,"p"),_s(307,"As noted above, you may stop or restrict the placement of cookies on your computer or remove them from your browser by adjusting your web browser preferences. Please note that cookie-based opt-outs are not effective on mobile applications. However, on many mobile devices, application users may opt-out of certain mobile advertisements via their device settings."),Ko(),Qo(308,"p"),_s(309,"The online advertising industry also provides websites from which you may opt-out of receiving targeted ads from our data partners and our other advertising partners that participate in self-regulatory programs. You can access these, and also learn more about targeted advertising and consumer choice and privacy, at"),Qo(310,"a",20),_s(311," www.networkadvertising.org/managing/opt_out.asp"),Ko(),_s(312,","),Qo(313,"a",21),_s(314," www.youronlinechoices.eu/"),Ko(),_s(315," or"),Qo(316,"a",22),_s(317," www.youradchoices.ca/"),Ko(),_s(318,", and"),Qo(319,"a",23),_s(320," www.aboutads.info/choices/"),Ko(),_s(321,". You can also choose not to be included in Google Analytics"),Qo(322,"a",24),_s(323," here"),Ko(),_s(324,"."),Ko(),Qo(325,"p"),_s(326,"To be clear, whether you are using our opt-out or an online industry opt-out, these cookie-based opt-outs must be performed on each device and browser that you wish to have opted-out. For example, if you have opted-out on your computer browser, that opt-out will not be effective on your mobile device. You must separately opt-out on each device. Advertisements on third party websites that contain the AdChoices link, and that link to this Privacy Policy, may have been directed to you based on anonymous, non-Personal Information collected by advertising partners over time and across websites. These advertisements provide a mechanism to opt-out of the advertising partners\u2019 use of this information for interest-based advertising purposes."),Ko(),Qo(327,"h3"),Qo(328,"span",17),_s(329,"03.6"),Ko(),_s(330," RIGHTS OF ACCESS, RECTIFICATION, ERASURE, AND RESTRICTION"),Ko(),Qo(331,"p"),_s(332,"Where permitted by applicable law, you may inquire as to whether NeuralX, inc is Processing Personal Information about you, request access to Personal Information, and ask that we correct, amend or delete your Personal Information where it is inaccurate or has been Processed in violation of your rights under data privacy laws that apply in the country where you live. Where otherwise permitted by applicable law, you may send an e-mail to privacy@NeuralX, inc.com or use any of the methods set out in this Privacy Policy to request access to, receive (port), seek rectification, or request erasure of Personal Information held about you by NeuralX, inc. Please include your full name, email address associated with your account and a detailed description of your data request. Such requests will be processed in accordance with local laws."),Ko(),Qo(333,"p"),_s(334,"Although NeuralX, inc makes good faith efforts to provide Individuals with access to their Personal Information, there may be circumstances in which NeuralX, inc is unable to provide access, including but not limited to: where the information contains legal privilege, would compromise others\u2019 privacy or other legitimate rights, where the burden or expense of providing access would be disproportionate to the risks to the Individual\u2019s privacy in the case in question or where it is commercially proprietary. If NeuralX, inc determines that access should be restricted in any particular instance, we will provide you with an explanation of why that determination has been made and a contact point for any further inquiries. To protect your privacy, NeuralX, inc will take commercially reasonable steps to verify your identity before granting access to or making any changes to your Personal Information."),Ko(),Qo(335,"h3"),Qo(336,"span",17),_s(337,"03.7"),Ko(),_s(338," DATA RETENTION"),Ko(),Qo(339,"p"),_s(340,"NeuralX, inc retains the Personal Information we receive as described in this Privacy Policy for as long as you use our Services or as necessary to fulfill the purpose(s) for which it was collected, provide our Services, resolve disputes, establish legal defenses, conduct audits, pursue legitimate business purposes, enforce our agreements and comply with applicable laws. When we are no longer required to retain your Personal Information as described above, we will destroy, erase, or de-identify it in accordance with our data retention policies and applicable law. Legal requirements, however, may require us to retain some or all of the Personal Information we hold for a period of time that is longer than that for which we might otherwise hold it."),Ko(),Qo(341,"h3"),Qo(342,"span",17),_s(343,"03.8."),Ko(),_s(344," SECURITY OF YOUR INFORMATION"),Ko(),Qo(345,"p"),_s(346,"We take steps to ensure that your information is treated securely and in accordance with this Privacy Policy. We maintain commercially reasonable administrative, technical and physical safeguards (which vary depending on the sensitivity of the Personal Information) designed to protect against unauthorized use, disclosure or access of Personal Information. Unfortunately, the Internet cannot be guaranteed to be 100% secure, and we cannot ensure or warrant the security of any information you provide to us. We do not accept liability for unintentional disclosure."),Ko(),Qo(347,"p"),_s(348,"By using the Services or providing Personal Information to us, you agree that we may communicate with you electronically regarding security, privacy and administrative issues relating to your use of the Services. If we learn of a security breach, we may attempt to notify you electronically by posting a notice on the Services or sending an email to you. You may have a legal right to receive this notice in writing."),Ko(),Qo(349,"h3"),Qo(350,"span",17),_s(351,"03.9"),Ko(),_s(352," NON-U.S. USERS"),Ko(),Qo(353,"p"),_s(354,"By using the Services, you consent to NeuralX, inc\u2019s transfer of your data to the United States. By choosing to visit the Site, use the Services, or otherwise provide information to us, you agree that any dispute over privacy or the terms contained in this Privacy Policy will, to the extent permitted by law, be governed by the laws of the State of New York, without regard to principles of conflicts of law. Any disputes arising in connection with this Privacy Policy will be handled in accordance with the dispute resolution provisions in the Terms."),Ko(),Qo(355,"p"),_s(356,"If you are visiting from the European Union or other regions with laws governing data collection and use, please note that you are agreeing to the transfer of your information to the United States and to the Processing of your data globally. By providing your Personal Information, you consent to any transfer and Processing in accordance with this Privacy Policy."),Ko(),Qo(357,"h3"),Qo(358,"span",17),_s(359,"03.10"),Ko(),_s(360," CHILDREN\u2019S PRIVACY"),Ko(),Qo(361,"p"),_s(362,"Our Services are not directed to children under the age of 13. In addition, you are not permitted to use our Services if you do not meet the minimum age requirement applicable to our Services in your jurisdiction. We do not knowingly collect Personal Information from children under the age of 13. If you learn that your child has provided us with Personal Information without your consent, you may alert us at privacy@NeuralX, inc.com. If we learn that we have collected Personal Information of a child under the age of 13 (or under the age of 16 in certain jurisdictions, such as EU member countries) we will take steps to delete such information from our files as soon as possible and terminate the child\u2019s account unless we receive verifiable parental consent."),Ko(),Qo(363,"h3"),Qo(364,"span",17),_s(365,"03.11"),Ko(),_s(366," REDRESS/COMPLIANCE AND ACCOUNTABILITY"),Ko(),Qo(367,"p"),_s(368,"If you have any questions about our privacy practices, this Privacy Policy, or how to submit a complaint with the appropriate authority, please contact NeuralX, inc by email at privacy@NeuralX, inc.com. We will address your concerns and attempt to resolve any privacy issues in a timely manner."),Ko(),Qo(369,"h3"),Qo(370,"span",17),_s(371,"03.12"),Ko(),_s(372," CHANGES TO OUR PRIVACY POLICY AND PRACTICES"),Ko(),Qo(373,"p"),_s(374,"This Privacy Policy may change from time to time. You understand and agree that you will be deemed to have accepted the updated Privacy Policy if you use the Services after the updated Privacy Policy is posted on the Services (as reflected in the above Effective Date). If at any point you do not agree to any portion of the Privacy Policy, you must immediately stop using the Services."),Ko(),Qo(375,"ul"),Qo(376,"li"),_s(377,"Revisions to the Privacy Policy. We may revise this Privacy Policy in our sole discretion, so please review it periodically. If you continue to visit the Site and use the Services after such changes have been made, you thereby provide your consent to the changes."),Ko(),Qo(378,"li"),_s(379,"Posting of Revised Privacy Policy. If there are any material changes to this Privacy Policy, NeuralX, inc will notify you by email or as otherwise required by applicable law. We will post any adjustments to the Privacy Policy on this web page, and the revised version will be effective immediately when it is posted (or upon notice if applicable). If you are concerned about how your information is used, bookmark this page and read this Privacy Policy periodically."),Ko(),Qo(380,"li"),_s(381,"New Uses of Personal Information. Additionally, before we use Personal Information for any new purpose not originally authorized by you, we will endeavor to provide information regarding the new purpose and give you the opportunity to opt-out. Where consent of the Individual for the Processing of Personal Information is required by law or contract, NeuralX, inc will endeavor to comply with the law or contract."),Ko(),Ko(),Qo(382,"h3"),Qo(383,"span",17),_s(384,"0\xad3.13"),Ko(),_s(385," DEFINITIONS"),Ko(),Qo(386,"p"),_s(387,"The following capitalized terms have the meanings set forth below."),Ko(),Qo(388,"ul"),Qo(389,"li"),_s(390,'"Agent" means any Third-Party that Processes Personal Information pursuant to the instructions of, and solely for, NeuralX, inc or to which NeuralX, inc discloses Personal Information for use on its behalf.'),Ko(),Qo(391,"li"),_s(392,'"Employee" refers to any current, temporary, permanent, prospective or former employee, director, contractor, worker, or retiree of NeuralX, inc or its subsidiaries worldwide.'),Ko(),Qo(393,"li"),_s(394,'"Personal Information" is any information relating to an identified or identifiable natural person ("Individual").'),Ko(),Qo(395,"li"),_s(396,'"Process" or "Processing" means any operation which is performed upon Personal Information, whether or not by automatic means, such as collection, recording, organization, structuring, storage, adaptation or alteration, retrieval, consultation, use, disclosure by transmission, dissemination or otherwise making available, alignment or combination, restriction, erasure, or destruction.'),Ko(),Qo(397,"li"),_s(398,'"Sensitive Data" or "Sensitive Personal Information\u201d is a subset of Personal Information which, due to its nature, has been classified by law or by policy as deserving additional privacy and security protections, such as certain financial or medical information, and Personal Information regarding EU residents that is classified as a \u201cSpecial Category of Personal Data\u201d under EU law, such as: (1) race or ethnic origin; (2) political opinions; (3) religious or philosophical beliefs; (4) trade union membership; (5) genetic data; (6) biometric data where Processed to uniquely identify a person; (6) health information; (7) sexual orientation or information about the Individual\u2019s sex life; or (8) information relating to the commission of a criminal offense.'),Ko(),Qo(399,"li"),_s(400,'"Third-Party" is any company, natural or legal person, public authority, agency, or body other than the Individual, NeuralX, inc or NeuralX, inc\u2019s Agents.'),Ko(),Ko(),Qo(401,"h2"),Qo(402,"span",16),_s(403,"04."),Ko(),_s(404," Membership Requirements Registration"),Ko(),Qo(405,"p"),_s(406,"To enjoy full access to the NeuralX, inc Service, you must register as a member of the NeuralX, inc Service. You must provide complete and accurate registration information to NeuralX, inc and notify us if any of your information changes. If you fail to keep your account information up to date, we may have to suspend or terminate your Account."),Ko(),Qo(407,"p"),_s(408,"Profile Information and Picture. You may not use someone else\u2019s name, or any name, location, other public profile information or image that violates any third party rights, is against the law, or that is offensive, obscene or otherwise objectionable (in NeuralX, inc\u2019s sole discretion)."),Ko(),Qo(409,"p"),_s(410,"Account Security. You are responsible for all activity that occurs under your account, including any activity by unauthorized users. You may not allow others to use your account. You must safeguard the confidentiality of your password, and if you are using a device that others have access to, log out of your account after using the NeuralX, inc Service. If you become aware of an unauthorized access to your account, change your password and notify our Support team immediately."),Ko(),Qo(411,"h2"),Qo(412,"span",16),_s(413,"05."),Ko(),_s(414," Membership Structure and Fees"),Ko(),Qo(415,"p"),_s(416,"NeuralX, inc will provide information on its then-current membership requirements on the NeuralX, inc Site and/or by other means through the NeuralX, inc Service. Features and prices are subject to change."),Ko(),Qo(417,"h2"),Qo(418,"span",16),_s(419,"06."),Ko(),_s(420," Sale of Products"),Ko(),Qo(421,"p"),_s(422,"NeuralX, inc accepts orders for equipment, apparel or accessories that we may offer through the NeuralX, inc Site or at retail locations. Unfortunately, availability of products cannot be guaranteed. Please note that product, service and other information provided is subject to corrections and changes without notice. Graphics and diagrams are for illustrative purposes only and may not accurately reflect actual product availability. Colors, styles and other variants depicted are for illustration only and are subject to change. Errors will be corrected where discovered, and we reserve the right to revoke any stated offer and to correct any errors, inaccuracies or omissions."),Ko(),Qo(423,"p"),_s(424,"Unless otherwise specified at the time of purchase, you must pay for products when you place the order. All products ordered will be delivered to the shipping address you provide. We reserve the right to cancel an order placed by you at any time and for any lawful reason prior to our delivery of the product(s) and receipt of payment in full from you, provided that we will refund any fees that you prepaid for those products if we cancel. We may send an acknowledgment of receipt of your order to the email address you provide and/or proof of purchase information through the NeuralX, inc Site or to your email address after your payment has been processed."),Ko(),Qo(425,"h2"),Qo(426,"span",16),_s(427,"07."),Ko(),_s(428," Termination; Account Deletion"),Ko(),Qo(429,"p"),_s(430,"Term. These Terms begin on the date you first use the NeuralX, inc Service and continue as long as you have an account with us and/or continue to use the NeuralX, inc Service."),Ko(),Qo(431,"p"),_s(432,"Termination. NeuralX, inc may, in NeuralX, inc\u2019s sole discretion, suspend, disable, or delete your account (or any part thereof) or block or remove any User Content (defined below) that you submitted, for any lawful reason, including if NeuralX, inc determines that you have violated these Terms or that your conduct or User Content would tend to damage NeuralX, inc\u2019s reputation or goodwill. If NeuralX, inc deletes your account, you may not re-register for or use the NeuralX, inc Service under any other user name or profile. NeuralX, inc may block your access to the NeuralX, inc Service to prevent re-\u2060registration."),Ko(),Qo(433,"p"),_s(434,"Effect of Termination / Account Deletion. Upon termination of these Terms all licenses granted by NeuralX, inc will terminate. The following sections survive termination: Privacy (Section 3), User Content (Section 8), Indemnification (Section 12), No Warranties (Section 15), Limitation of Liability (Section 16), Safety Warnings (Section 17), Intellectual Property (Section 18), Arbitration Requirement & Class Action Waiver (Section 20), Contracting Entities, Governing Law and Jurisdiction (Section 21), and all general provisions. In the event of account deletion for any reason, User Content may no longer be available and NeuralX, inc is not responsible for the deletion or loss of such User Content. For clarity, if you cancel your Account or it is terminated for any reason, you will lose access to all live and on-demand classes and any other Content or features provided through the NeuralX, inc Service. NeuralX, inc, in its sole discretion, may make available a very limited amount of Content or features to non-subscribers from time to time, and any use of that Content is governed by these Terms."),Ko(),Qo(435,"h2"),Qo(436,"span",16),_s(437,"08."),Ko(),_s(438," User Content"),Ko(),Qo(439,"p"),_s(440,"\u201cContent\u201d means text, graphics, images, music, software, audio, video, works of authorship of any kind, and information or other materials that are posted, generated, provided or otherwise made available through the NeuralX, inc Service; and (ii) \u201dUser Content\u201d means any content that users (including you) provide to be made available through the NeuralX, inc Service. Content includes, without limitation, User Content."),Ko(),Qo(441,"p"),_s(442,"Any User Content, whether publicly posted or privately transmitted, is the sole responsibility of the person who originated such User Content. You represent that all User Content submitted by or on behalf of you is accurate, complete, up-to-date, and in compliance with these Terms and with all applicable laws, rules and regulations. You acknowledge that all Content, including User Content, accessed by you using the NeuralX, inc Service is at your own risk and you will be solely responsible for any damage or loss to you or any other party resulting therefrom. To the full extent permitted by law, we make no representations, warranties or guarantees with respect to any Content that you access on or through the NeuralX, inc Service."),Ko(),Qo(443,"p"),_s(444,"As between you and NeuralX, inc, you represent that you own (or have all rights necessary to grant NeuralX, inc the rights below to) all User Content that you submit to the NeuralX, inc Service, and that NeuralX, inc will not need to obtain licenses from any third party or pay royalties to any third party in order to use such User Content. You grant NeuralX, inc a worldwide, perpetual, irrevocable, non-exclusive, sublicensable (through multiple tiers), transferable royalty-free license and right to use, copy, transmit, distribute, publicly perform and display (through all media now known or later created), edit, modify, and make derivative works from your User Content (including, without limitation, translations) for any purpose whatsoever, commercial or otherwise, without compensation to you. In addition, you waive any so-called \u201cmoral rights\u201d or rights of privacy or publicity in your User Content. You further grant all users of the NeuralX, inc Service permission to view your User Content for their personal, non-commercial purposes. If you make suggestions to NeuralX, inc or through the NeuralX, inc Service about improving or adding new features or products to the NeuralX, inc Service or you otherwise provide feedback, product or service reviews or testimonials, you hereby grant to NeuralX, inc a worldwide, perpetual, irrevocable, non-exclusive, sublicensable (through multiple tiers), transferable royalty-free license and right to use, copy, modify, create derivative works based upon and otherwise exploit your suggestions, feedback, reviews and testimonials for any purpose (including for marketing), without any notice, compensation or other obligation to you."),Ko(),Qo(445,"p"),_s(446,"You can remove your User Content by specifically deleting it. However, in certain instances, some of your User Content (such as posts or comments you make) may not be completely removed and copies of your User Content may continue to exist on the NeuralX, inc Service. We are not responsible or liable for the removal or deletion of (or the failure to remove or delete) any of your User Content."),Ko(),Qo(447,"h2"),Qo(448,"span",16),_s(449,"09."),Ko(),_s(450," Rights and Terms for Apps"),Ko(),Qo(451,"p"),_s(452,"Rights in App Granted. Subject to your compliance with these Terms, NeuralX, inc grants to you a limited non-exclusive, non-transferable, revocable license, with no right to sublicense, to download and install a copy of the App on a mobile device or computer that you own or control and to run such copy of the App solely for your own personal non-commercial purposes. You may not copy the App, except for making a reasonable number of copies for backup or archival purposes. Except as expressly permitted in these Terms, you may not: (i) copy, modify or create derivative works based on the App; (ii) distribute, transfer, sublicense, lease, lend or rent the App to any third party; (iii) reverse engineer, decompile or disassemble the App; or (iv) make the functionality of the App available to multiple users through any means. NeuralX, inc reserves all rights in and to the App not expressly granted to you under these Terms."),Ko(),Qo(453,"p"),_s(454,"Accessing App from an App Store. The following terms apply to any App accessed through or downloaded from any app store or distribution platform (like the Apple App Store or Google Play) where the App may now or in the future be made available (each an \u201cApp Provider\u201d). You acknowledge and agree that:"),Ko(),Qo(455,"ul"),Qo(456,"li"),_s(457,"These Terms are between you and NeuralX, inc, and not with the App Provider, and NeuralX, inc (not the App Provider), is solely responsible for the App."),Ko(),Qo(458,"li"),_s(459,"The App Provider has no obligation to furnish any maintenance and support services with respect to the App."),Ko(),Qo(460,"li"),_s(461,"In the event of any failure of the App to conform to any applicable warranty, you may notify the App Provider, and the App Provider will refund the purchase price for the App to you (if applicable) and, to the maximum extent permitted by applicable law, the App Provider will have no other warranty obligation whatsoever with respect to the App. Any other claims, losses, liabilities, damages, costs or expenses attributable to any failure to conform to any warranty will be the sole responsibility of NeuralX, inc."),Ko(),Qo(462,"li"),_s(463,"The App Provider is not responsible for addressing any claims you have or any claims of any third party relating to the App or your possession and use of the App, including, but not limited to: (i) product liability claims; (ii) any claim that the App fails to conform to any applicable legal or regulatory requirement; and (iii) claims arising under consumer protection or similar legislation."),Ko(),Qo(464,"li"),_s(465,"In the event of any third party claim that the App or your possession and use of that App infringes that third party\u2019s intellectual property rights, NeuralX, inc will be solely responsible for the investigation, defense, settlement and discharge of any such intellectual property infringement claim to the extent required by these Terms."),Ko(),Qo(466,"li"),_s(467,"The App Provider and its affiliates are third-party beneficiaries of these Terms as related to your license to the App, and that, upon your acceptance of the Terms, the App Provider will have the right (and will be deemed to have accepted the right) to enforce these Terms as related to your license of the App against you as a third-party beneficiary thereof."),Ko(),Qo(468,"li"),_s(469,"You represent and warrant that (i) you are not located in a country that is subject to a U.S. Government embargo, or that has been designated by the U.S. Government as a terrorist-supporting country; (ii) you are not listed on any U.S. Government list of prohibited or restricted parties; (iii) you are not an individual, or associated with an entity, designated under the UK\u2019s Terrorist Asset-Freezing etc. Act 2010 (TAFA 2010); and (iv) you are not otherwise subject to or affected in any way by any national security or terrorism related rules whether applicable to you personally or to your location or other circumstances."),Ko(),Qo(470,"li"),_s(471,"You must also comply with all applicable third party terms of service when using the App."),Ko(),Ko(),Qo(472,"h2"),Qo(473,"span",16),_s(474,"10."),Ko(),_s(475," General Prohibitions and NeuralX, inc\u2019s Enforcement Rights"),Ko(),Qo(476,"p"),_s(477,"You agree not to do any of the following:"),Ko(),Qo(478,"p",25),Qo(479,"span",17),_s(480,"10.1"),Ko(),_s(481," Post, upload, publish, submit or transmit any User Content that: (i) infringes, misappropriates or violates a third party\u2019s patent, copyright, trademark, trade secret, moral rights or other intellectual property rights, or rights of publicity or privacy; (ii) violates, or encourages any conduct that would violate, any applicable law or regulation or would give rise to civil liability; (iii) is fraudulent, false, misleading or deceptive; (iv) is defamatory, obscene, pornographic, vulgar or offensive; (v) promotes discrimination, bigotry, racism, hatred, harassment or harm against any individual or group; (vi) is violent or threatening or promotes violence or actions that are threatening to any person, animal, or entity; (vii) exploits minors or (viii) promotes illegal or harmful activities or substances;"),Ko(),Qo(482,"p",25),Qo(483,"span",17),_s(484,"10.2"),Ko(),_s(485," Download and/or install any third party software and/or application on any NeuralX, inc hardware (excluding assistive technologies that are necessary for your own use of the NeuralX, inc Service, such as screen-readers) that is not expressly permitted by NeuralX, inc in writing;"),Ko(),Qo(486,"p",25),Qo(487,"span",17),_s(488,"10.3"),Ko(),_s(489," Use, display, mirror or frame the NeuralX, inc Service or any individual element within the NeuralX, inc Service, NeuralX, inc\u2019s name, any NeuralX, inc trademark, logo or other proprietary information, or the layout and design of any page or form contained on a page, without NeuralX, inc\u2019s express written consent;"),Ko(),Qo(490,"p",25),Qo(491,"span",17),_s(492,"10.4"),Ko(),_s(493," Access, tamper with, or use non-public areas of the NeuralX, inc Service, NeuralX, inc\u2019s computer systems, or the technical delivery systems of NeuralX, inc\u2019s providers;"),Ko(),Qo(494,"p",25),Qo(495,"span",17),_s(496,"10.5"),Ko(),_s(497," Attempt to probe, scan or test the vulnerability of any NeuralX, inc system or network or breach any security or authentication measures;"),Ko(),Qo(498,"p",25),Qo(499,"span",17),_s(500,"10.6"),Ko(),_s(501," Avoid, bypass, remove, deactivate, impair, descramble or otherwise circumvent any technological measure implemented by NeuralX, inc or any of NeuralX, inc\u2019s providers or any other third party (including another user) to protect the NeuralX, inc Service or Content;"),Ko(),Qo(502,"p",25),Qo(503,"span",17),_s(504,"10.7"),Ko(),_s(505," Bypass any territorial restrictions, including IP address-based restrictions, that may be applied to the NeuralX, inc Service;"),Ko(),Qo(506,"p",25),Qo(507,"span",17),_s(508,"10.8"),Ko(),_s(509," Attempt to access, scrape or search the NeuralX, inc Service or Content or download Content from the NeuralX, inc Service, including through the use of any engine, software, tool, agent, device or mechanism (including spiders, robots, crawlers, data mining tools, plugins, add-ons or the like), other than the software and/or search agents provided by NeuralX, inc or other generally available third-party web browsers;"),Ko(),Qo(510,"p",25),Qo(511,"span",17),_s(512,"10.9"),Ko(),_s(513," Send any unsolicited or unauthorized advertising, promotional materials, email, junk mail, spam, chain letters or other form of solicitation;"),Ko(),Qo(514,"p",25),Qo(515,"span",17),_s(516,"10.10"),Ko(),_s(517," Use any meta tags or other hidden text or metadata utilizing a NeuralX, inc trademark, logo URL or product name without NeuralX, inc\u2019s express written consent;"),Ko(),Qo(518,"p",25),Qo(519,"span",17),_s(520,"10.11"),Ko(),_s(521," Use the NeuralX, inc Service or Content, or any portion thereof, for any commercial purpose or for the benefit of any third party or in any manner not permitted by these Terms or permitted expressly in writing by NeuralX, inc;"),Ko(),Qo(522,"p",25),Qo(523,"span",17),_s(524,"10.12"),Ko(),_s(525," Forge any TCP/IP packet header or any part of the header information in any email or newsgroup posting, or in any way use the NeuralX, inc Service or Content to send altered, deceptive or false source-identifying information;"),Ko(),Qo(526,"p",25),Qo(527,"span",17),_s(528,"10.13"),Ko(),_s(529," Attempt to decipher, decompile, disassemble or reverse engineer any of the software used to provide the NeuralX, inc Service or Content;"),Ko(),Qo(530,"p",25),Qo(531,"span",17),_s(532,"10.14"),Ko(),_s(533," Interfere with, or attempt to interfere with, the access of any user, host or network, including, without limitation, sending a virus, overloading, flooding, spamming, or mail-bombing the NeuralX, inc Service;"),Ko(),Qo(534,"p",25),Qo(535,"span",17),_s(536,"10.15");Ko(),_s(537," Collect or store any personally identifiable information from the NeuralX, inc Service from other users of the NeuralX, inc Service without their express permission;"),Ko(),Qo(538,"p",25),Qo(539,"span",17),_s(540,"10.16"),Ko(),_s(541," Copy, use, index, disclose or distribute any information or data obtained from the NeuralX, inc Service, whether directly or through third parties (such as search engines), without NeuralX, inc\u2019s express written consent;"),Ko(),Qo(542,"p",25),Qo(543,"span",17),_s(544,"10.17"),Ko(),_s(545," Alter, replicate, store, distribute or create derivatives from the Content available via the NeuralX, inc Service except as expressly permitted in writing by NeuralX, inc;"),Ko(),Qo(546,"p",25),Qo(547,"span",17),_s(548,"10.18"),Ko(),_s(549," Impersonate or misrepresent your affiliation with any person or entity;"),Ko(),Qo(550,"p",25),Qo(551,"span",17),_s(552,"10.19"),Ko(),_s(553," Access, use or exploit the NeuralX, inc Service in any manner (other than as expressly permitted by these Terms), including to build, develop (or commission the development of), replicate, or consult upon any product or service that may compete (directly or indirectly) with NeuralX, inc or the NeuralX, inc Service;"),Ko(),Qo(554,"p",25),Qo(555,"span",17),_s(556,"10.20"),Ko(),_s(557," Violate any applicable law or regulation; or"),Ko(),Qo(558,"p",25),Qo(559,"span",17),_s(560,"10.21"),Ko(),_s(561," Encourage or enable any other individual to do any of the foregoing."),Ko(),Qo(562,"p"),_s(563,"Although we\u2019re not obligated to monitor access to or use of the NeuralX, inc Service or Content or to review or edit any Content, we have the right to do so for the purpose of operating the NeuralX, inc Service, to ensure compliance with these Terms, to comply with applicable law or other legal requirements and to maintain the integrity and reputation of the NeuralX, inc Service and NeuralX, inc\u2019s systems. We reserve the right, but are not obligated, to remove or disable access to any Content, at any time and without notice, including, but not limited to, if we, at our sole discretion, consider any Content to be objectionable or in violation of these Terms. We have the right to investigate violations of these Terms or conduct that affects the NeuralX, inc Service. We may also consult and cooperate with law enforcement authorities to prosecute users who violate the law."),Ko(),Qo(564,"h2"),Qo(565,"span",16),_s(566,"11."),Ko(),_s(567," Member Interactions, Dealings with Third Parties"),Ko(),Qo(568,"p"),_s(569,"When interacting with other NeuralX, inc members, you should exercise caution and common sense to protect your personal safety and property, just as you would when interacting with other people you don\u2019t know. Your participation, correspondence or personal or business dealings with any third party found on or through the NeuralX, inc Service, whether regarding payment or delivery of specific goods and services, donations or fundraisers, and any other terms, conditions, representations or warranties associated with such dealings, are solely between you and such third party. You agree that NeuralX, inc is not responsible or liable for any loss, damage, injury, or other matters of any sort incurred as the result of such dealings."),Ko(),Qo(570,"h2"),Qo(571,"span",16),_s(572,"12."),Ko(),_s(573," Indemnification"),Ko(),Qo(574,"p"),_s(575,"You agree to indemnify, defend, and hold harmless NeuralX, inc and its directors, officers, employees, and agents, from and against all claims, damages, losses and costs that arise from or relate to (i) your activities on the NeuralX, inc Service, (ii) any User Content submitted by or on behalf of you or (iii) your violation of these Terms."),Ko(),Qo(576,"h2"),Qo(577,"span",16),_s(578,"13."),Ko(),_s(579," Third Party Software and Applications"),Ko(),Qo(580,"p"),_s(581,"Downloading and/or installing any third party software and/or applications that are not expressly authorized by NeuralX, inc on any NeuralX, inc hardware constitutes a breach of these Terms; any such downloading or installation is done at your own risk and may void any applicable warranty or support commitments by NeuralX, inc."),Ko(),Qo(582,"h2"),Qo(583,"span",16),_s(584,"14."),Ko(),_s(585," Third Party Links and Content"),Ko(),Qo(586,"p"),_s(587,"There may be links on the NeuralX, inc Service that let you leave the particular NeuralX, inc Service you are accessing in order to access a linked site that is operated by a third party. NeuralX, inc neither controls nor endorses these sites, nor has NeuralX, inc reviewed or approved the content that appears on them. NeuralX, inc is not responsible for the legality, accuracy or inappropriate nature of any content, advertising, products or other materials on or available from any such third party sites. You acknowledge and agree that NeuralX, inc is not responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the access or use of any of the links, content, goods or services available on or through these third party sites."),Ko(),Qo(588,"h2"),Qo(589,"span",16),_s(590,"15."),Ko(),_s(591," No Warranties"),Ko(),Qo(592,"p"),_s(593,"NeuralX, inc reserves the right to modify the NeuralX, inc Service, including, but not limited to updating, adding to, enhancing, modifying, removing or altering any Content or features of the NeuralX, inc Service, at any time, in its sole discretion. You are responsible for providing your own access (e.g., computer, mobile device, Internet connection, etc.) to the NeuralX, inc Service. NeuralX, inc has no obligation to screen or monitor any Content and does not guarantee that any Content available on the NeuralX, inc Service is suitable for all users or that it will continue to be available for any length of time."),Ko(),Qo(594,"p"),_s(595,"NeuralX, inc provides the NeuralX, inc Service on an \u201cAS IS\u201d and \u201cAS AVAILABLE\u201d basis. You therefore use the NeuralX, inc Service at your own risk. Other than as expressly provided in writing by NeuralX, inc in connection with your purchase of a NeuralX, inc product, to the extent permitted by law, NeuralX, inc expressly disclaims any and all warranties of any kind, whether express or implied, including, but not limited to implied warranties of merchantability, fitness for a particular purpose, non-infringement, quiet enjoyment and any other warranty that might arise under any law. Without limiting the foregoing, NeuralX, inc makes no representations or warranties:"),Ko(),Qo(596,"ul"),Qo(597,"li"),_s(598,"That the NeuralX, inc Service is or will be permitted in your jurisdiction;"),Ko(),Qo(599,"li"),_s(600,"That the NeuralX, inc Service will be uninterrupted or error-\u2060free;"),Ko(),Qo(601,"li"),_s(602,"Concerning any Content, including User Content;"),Ko(),Qo(603,"li"),_s(604,"Concerning any third party\u2019s use of User Content that you submit;"),Ko(),Qo(605,"li"),_s(606,"That the NeuralX, inc Service will meet your personal or professional needs;"),Ko(),Qo(607,"li"),_s(608,"That NeuralX, inc will continue to support any particular feature of the NeuralX, inc Service; or"),Ko(),Qo(609,"li"),_s(610,"Concerning sites and resources outside of the NeuralX, inc Service, even if linked to from the NeuralX, inc Service."),Ko(),Ko(),Qo(611,"p"),_s(612,"To the extent that another party may have access to or view Content on your device, you are solely responsible for informing such party of all disclaimers and warnings in these Terms. TO THE EXTENT ANY DISCLAIMER OR LIMITATION OF LIABILITY DOES NOT APPLY, TO THE FULLEST EXTENT PERMITTED BY LAW, ALL APPLICABLE EXPRESS, IMPLIED, AND STATUTORY WARRANTIES WILL BE LIMITED IN DURATION TO A PERIOD OF 30 DAYS AFTER THE DATE ON WHICH YOU FIRST USED THE NeuralX, inc SERVICE, AND NO WARRANTIES SHALL APPLY AFTER SUCH PERIOD."),Ko(),Qo(613,"h2"),Qo(614,"span",16),_s(615,"16."),Ko(),_s(616," Limitation of Liability"),Ko(),Qo(617,"p"),_s(618,"To the fullest extent permitted by law: (i) NeuralX, inc shall not be liable for any indirect, incidental, special, consequential, punitive, or exemplary damages, including but not limited to damages for loss of profits, economic or pure economic losses, goodwill, use, data, service interruption, computer damage, system failure, inability to use the NeuralX, inc Service or Content or other intangible losses, even if a limited remedy set forth herein is found to have failed its essential purpose; and (ii) NeuralX, inc\u2019s total liability to you for all claims, in the aggregate, will not exceed the amount actually paid by you to NeuralX, inc over the 12 months preceding the date your first claim(s) arose. If you live in a jurisdiction that does not allow the exclusion or limitation of liability for consequential or incidental damages, the above limitation does not apply to you. To the extent that one or any aspect of NeuralX, inc\u2019s limitations set out above does not apply, all remaining aspects survive. The exclusions and limitations of damages set forth above are fundamental elements of the basis of the bargain between NeuralX, inc and you."),Ko(),Qo(619,"h2"),Qo(620,"span",16),_s(621,"17."),Ko(),_s(622," Safety Warnings"),Ko(),Qo(623,"p"),_s(624,"THE NeuralX, inc SERVICE OFFERS HEALTH AND FITNESS INFORMATION AND IS DESIGNED FOR EDUCATIONAL AND ENTERTAINMENT PURPOSES ONLY. YOU SHOULD CONSULT YOUR PHYSICIAN OR GENERAL PRACTITIONER BEFORE BEGINNING A NEW FITNESS PROGRAM. YOU SHOULD NOT RELY ON THIS INFORMATION AS A SUBSTITUTE FOR, NOR DOES IT REPLACE, PROFESSIONAL MEDICAL ADVICE, DIAGNOSIS, OR TREATMENT. IF YOU HAVE ANY CONCERNS OR QUESTIONS ABOUT YOUR HEALTH, YOU SHOULD ALWAYS CONSULT WITH A PHYSICIAN, GENERAL PRACTITIONER OR OTHER HEALTH-CARE PROFESSIONAL. DO NOT DISREGARD, AVOID OR DELAY OBTAINING MEDICAL OR HEALTH RELATED ADVICE FROM YOUR HEALTHCARE PROFESSIONAL BECAUSE OF SOMETHING YOU MAY HAVE READ ON THE NeuralX, inc SITE OR HEARD ON THE NeuralX, inc SERVICE. THE USE OF INFORMATION PROVIDED THROUGH THE NeuralX, inc SERVICE IS SOLELY AT YOUR OWN RISK AND IS NOT MEDICAL OR HEALTHCARE ADVICE."),Ko(),Qo(625,"p"),_s(626,"NOTHING STATED OR POSTED ON THE NeuralX, inc SITE OR AVAILABLE THROUGH ANY NeuralX, inc SERVICE IS INTENDED TO BE, AND MUST NOT BE TAKEN TO BE, THE PRACTICE OF MEDICAL OR COUNSELING CARE. FOR PURPOSES OF THESE TERMS, THE PRACTICE OF MEDICINE AND COUNSELING INCLUDES, WITHOUT LIMITATION, PSYCHIATRY, PSYCHOLOGY, PSYCHOTHERAPY, OR PROVIDING HEALTH CARE TREATMENT, INSTRUCTIONS, DIAGNOSIS, PROGNOSIS OR ADVICE. THE NeuralX, inc SERVICE IS CONTINUALLY UNDER DEVELOPMENT AND, TO THE FULL EXTENT PERMITTED BY LAW, NeuralX, inc MAKES NO WARRANTY OF ANY KIND, IMPLIED OR EXPRESS, AS TO ITS ACCURACY, COMPLETENESS OR APPROPRIATENESS FOR ANY PURPOSE. IN THAT REGARD, DEVELOPMENTS IN MEDICAL RESEARCH MAY IMPACT THE HEALTH, FITNESS AND NUTRITIONAL ADVICE THAT APPEARS HERE. NO ASSURANCE CAN BE GIVEN THAT THE ADVICE CONTAINED IN THE NeuralX, inc SERVICE WILL ALWAYS INCLUDE THE MOST RECENT FINDINGS OR DEVELOPMENTS WITH RESPECT TO THE PARTICULAR MATERIAL."),Ko(),Qo(627,"p"),_s(628,"In becoming a user of NeuralX, inc with the intent of using the NeuralX, inc Service, you affirm that either (A) all of the following statements are true: (i) no physician or general practitioner has ever informed you that you have a heart condition or that you should only do physical activities recommended by a physician or general practitioner; (ii) you have never felt chest pain when engaging in physical activity; (iii) you have not experienced chest pain when not engaged in physical activity at any time within the past month; (iv) you have never lost your balance because of dizziness and you have never lost consciousness; (v) you do not have a bone or joint problem that could be made worse by a change in your physical activity; (vi) your physician or general practitioner is not currently prescribing drugs for your blood pressure or heart condition; (vii) you do not have a history of high blood pressure, and no one in your immediate family has a history of high blood pressure or heart problems; and (viii) you do not know of any other reason you should not exercise; or (B) your physician or general practitioner has been specifically consulted by you and approved of your use of the NeuralX, inc Service."),Ko(),Qo(629,"p"),_s(630,"If applicable, you further affirm that (a) you are not pregnant, breastfeeding or lactating; unless (b) your physician or general practitioner has been specifically consulted and approved your use of the NeuralX, inc Service."),Ko(),Qo(631,"p"),_s(632,"NeuralX, inc reserves the right to refuse or cancel your membership if we determine that you have certain medical conditions or that the representations set forth above are untrue in any respect."),Ko(),Qo(633,"h2"),Qo(634,"span",16),_s(635,"18."),Ko(),_s(636," Intellectual Property Acknowledgment"),Ko(),Qo(637,"p"),_s(638,"You acknowledge and agree that your use of the NeuralX, inc Services and any Content contained therein is dependent upon you agreeing to and abiding by the NeuralX, inc Intellectual Property and DMCA Policy at all times. You further acknowledge that the NeuralX, inc Service contains software and other content that is protected by copyrights, patents, trademarks, trade secrets or other proprietary rights, and that these rights are valid and protected in all forms, media and technologies existing now or hereafter developed. All NeuralX, inc-generated content, and content provided to NeuralX, inc by its partners and licensors, is copyrighted individually and/or as a collective work under the U.S. copyright laws and all applicable international copyright (or equivalent) laws in all jurisdictions and protected under other intellectual property laws worldwide; further, as between you and NeuralX, inc, NeuralX, inc own intellectual property rights in the selection, coordination, arrangement and enhancement of all content in the NeuralX, inc Service."),Ko(),Qo(639,"h2"),Qo(640,"span",16),_s(641,"19."),Ko(),_s(642," Intellectual Property Usage and Reporting Infringement"),Ko(),Qo(643,"p"),_s(644,"NeuralX, inc respects the intellectual property of others, and we ask our users to do the same. Each user is responsible for ensuring that their User Content does not infringe any third party\u2019s right or other intellectual property rights. If you believe that the NeuralX, inc Service or any Content contains elements that infringe or misappropriate your copyrights or other intellectual property rights (or the intellectual property rights of others), please go to the NeuralX, inc Intellectual Property and DMCA Policy for directions on how to report it to us."),Ko(),Qo(645,"h2"),Qo(646,"span",16),_s(647,"20."),Ko(),_s(648," ARBITRATION REQUIREMENT & CLASS ACTION WAIVER \u2013 IMPORTANT \u2013 PLEASE REVIEW AS THIS MAY AFFECT YOUR LEGAL RIGHTS. APPLICABLE TO THE FULL EXTENT PERMITTED BY LAW."),Ko(),Qo(649,"p",25),Qo(650,"span",17),_s(651,"20.1"),Ko(),_s(652," Mandatory Arbitration of Disputes. We each agree that any dispute, claim or controversy arising out of or relating to these Terms or the breach, termination, enforcement, interpretation or validity thereof or the use of the Services or Content (collectively, \u201cDisputes\u201d) will be resolved solely by binding, individual arbitration and not in a class, representative or consolidated action or proceeding. You and NeuralX, inc agree that the U.S. Federal Arbitration Act (or equivalent laws in the jurisdiction in which the NeuralX, inc entity that you have contracted with is incorporated) governs the interpretation and enforcement of these Terms and that you and NeuralX, inc are each waiving the right to a trial by jury or to participate in a class action. This arbitration provision shall survive termination of these Terms."),Ko(),Qo(653,"p",25),Qo(654,"span",17),_s(655,"20.2"),Ko(),_s(656," Exceptions and Opt-out. As limited exceptions to Section 20(a) above: (i) you may seek to resolve a Dispute in small claims court if it qualifies; and (ii) we each retain the right to seek injunctive or other equitable relief from a court to prevent (or enjoin) the infringement or misappropriation of our respective intellectual property rights. In addition, you will retain the right to opt out of arbitration entirely and litigate any Dispute if you provide us with written notice of your desire to do so by regular mail sent to the attention of NeuralX, inc\u2019s Legal Department at the NeuralX, inc address set out in Section 24 below within 30 days following the date you first agree to these Terms."),Ko(),Qo(657,"p",25),Qo(658,"span",17),_s(659,"20.3"),Ko(),_s(660," Initial Dispute Resolution and Notification. You agree that before initiating any Dispute or arbitration proceeding, we will attempt to negotiate an informal resolution of any dispute. To begin this process, before initiating any arbitration proceeding, you must send a Notice of Dispute (\u201cNotice\u201d) by certified mail to the attention of NeuralX, inc\u2019s Legal Department at the NeuralX, inc address set out in Section 24 below. In the Notice, you must describe the nature and basis of the Dispute and the relief you are seeking. If we are unable to resolve the Dispute within 45 days after NeuralX, inc\u2019s receipt of the Notice, then you or NeuralX, inc may initiate arbitration proceedings as set out below."),Ko(),Qo(661,"p",25),Qo(662,"span",17),_s(663,"20.4"),Ko(),_s(664," Conducting Arbitration and Arbitration Rules. Any arbitration will be conducted by JAMS pursuant to its Streamlined Arbitration Rules and Procedures (the \u201cJAMS Rules\u201d) then in effect, except as modified by these Terms. The JAMS Rules are available at www.jamsadr.com or by calling 1-800-352-5267. A party who wishes to start arbitration must submit a written Demand for Arbitration to JAMS and give notice to the other party as specified in the JAMS Rules. JAMS provides a form Demand for Arbitration at www.jamsadr.com. JAMS will appoint an arbitrator that is either (1) a retired federal or state court judge, or (2) an attorney who has been licensed to practice law in the state of New York for at least 10 years. The arbitration will be conducted by an in-person hearing, unless we both agree otherwise. If JAMS fails or declines to conduct the arbitration for any reason, we will mutually select a different arbitration administrator. If we cannot agree, a court will appoint a different arbitration administrator."),Ko(),Qo(665,"p"),_s(666,"Any arbitration hearings will take place in the county (or other municipality) where you live, unless we both agree to a different location. The parties agree that the arbitrator shall have exclusive authority to decide all issues relating to the interpretation, applicability, enforceability and scope of this arbitration agreement. During the arbitration, both you and NeuralX, inc may take one deposition of the opposing party, limited to 4 hours. If we cannot agree on a time and location for a deposition, the arbitrator will resolve any scheduling disputes."),Ko(),Qo(667,"p",25),Qo(668,"span",17),_s(669,"20.5"),Ko(),_s(670," Arbitration Costs. Payment of all filing, administration and arbitrator fees will be governed by the JAMS Rules. If you assert a claim against NeuralX, inc, you will be responsible for paying a $250 consumer filing fee. NeuralX, inc will pay for all other filing, administration and arbitrator fees and expenses. If your Dispute is for less than U.S. $10,000 (including attorneys\u2019 fees and costs) and the arbitrator, upon final disposition of the case, finds your Dispute was not frivolous, NeuralX, inc will reimburse your initial filing fee. If we prevail in arbitration, we will pay all of our attorneys\u2019 fees and costs and won\u2019t seek to recover them from you. If you prevail in arbitration you will be entitled to an award of attorneys\u2019 fees and expenses to the extent provided under applicable law."),Ko(),Qo(671,"p",25),Qo(672,"span",17),_s(673,"20.6"),Ko(),_s(674," Class Action Waiver. YOU AND NeuralX, inc AGREE THAT EACH OF US MAY BRING CLAIMS AGAINST THE OTHER ONLY IN AN INDIVIDUAL CAPACITY, AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS OR REPRESENTATIVE PROCEEDING. Further, if the parties\u2019 dispute is resolved through arbitration, neither JAMS nor the arbitrator may not consolidate another person\u2019s claims with your claims or otherwise preside over any form of a representative or class proceeding for any purpose. If this specific provision is found to be unenforceable, then the entirety of this Section 20 shall be null and void."),Ko(),Qo(675,"p",25),Qo(676,"span",17),_s(677,"20.7"),Ko(),_s(678," Effect of Changes on Arbitration. Notwithstanding the provisions of Section 25 \u201cModification\u201d, if NeuralX, inc changes any of the terms of this Section 20 after the date you first accepted these Terms (or accepted any subsequent changes to these Terms), you may reject any such change by sending us written notice within 30 days of the date such change became effective, as indicated in the \u201cLast Updated\u201d date above or the date of NeuralX, inc\u2019s email to you notifying you of such change. By rejecting any change, you are agreeing that you will arbitrate any Dispute between you and NeuralX, inc in accordance with the terms of this Section 20 as of the date you first accepted these Terms (or accepted any subsequent changes to these Terms)."),Ko(),Qo(679,"p",25),Qo(680,"span",17),_s(681,"20.8"),Ko(),_s(682," Severability. With the exception of any of the provisions in Section 20(e) above, if an arbitrator or court of competent jurisdiction decides that any part of these Terms is invalid or unenforceable, the other parts of these Terms will still apply."),Ko(),Qo(683,"h2"),Qo(684,"span",16),_s(685,"21."),Ko(),_s(686," Contracting Entities, Governing Law and Jurisdiction"),Ko(),Qo(687,"p"),_s(688,"Residents of the United Kingdom and Europe are contracting with NeuralX, inc UK Ltd for the NeuralX, inc Service. All other users are contracting with NeuralX, inc, Inc. unless otherwise specified in these Terms."),Ko(),Qo(689,"p"),_s(690,"If your contract for the NeuralX, inc Service is with NeuralX, inc, Inc., these Terms shall be governed by the laws of the State of New York, United States of America, without regard to principles of conflicts of law. If your contract for the NeuralX, inc Service is with another NeuralX, inc entity, these terms shall be governed by the laws of the jurisdiction under which that NeuralX, inc entity is incorporated, without regard to principles of conflicts of law. The Uniform Commercial Code, the Uniform Computer Information Transaction Act, and the United Nations Convention of Controls for International Sale of Goods shall not apply."),Ko(),Qo(691,"p"),_s(692,"Subject to the agreements in Section 20 above, (i) if your contract for the NeuralX, inc Service is with NeuralX, inc, Inc., exclusive jurisdiction for all Disputes that are not required to be arbitrated will be the state and federal courts located in New York, New York, United States of America, and you consent to the jurisdiction of those courts, and (ii) if your contract for the NeuralX, inc Service is with another NeuralX, inc entity, exclusive jurisdiction for all Disputes that are not required to be arbitrated will be the courts located in the jurisdiction under which that NeuralX, inc entity is incorporated, and you consent to the jurisdiction of those courts."),Ko(),Qo(693,"h2"),Qo(694,"span",16),_s(695,"22."),Ko(),_s(696," Interpretation; Severability; Waiver; Remedies"),Ko(),Qo(697,"p"),_s(698,"Headings are for convenience only and shall not be used to construe these Terms. If any term of these Terms is found invalid or unenforceable by any court of competent jurisdiction, that term will be severed from these Terms. No failure or delay by NeuralX, inc in exercising any right hereunder will waive any further exercise of that right. The waiver of any such right or provision will be effective only if in writing and signed by a duly authorized representative of NeuralX, inc. NeuralX, inc\u2019s rights and remedies hereunder are cumulative and not exclusive."),Ko(),Qo(699,"h2"),Qo(700,"span",16),_s(701,"23."),Ko(),_s(702," Successors; Assignment; No Third Party Beneficiaries"),Ko(),Qo(703,"p"),_s(704,"These Terms are binding upon and will inure to the benefit of both parties and their respective successors, heirs, executors, administrators, personal representatives, and permitted assigns. You may not assign or transfer these Terms without NeuralX, inc\u2019s prior written consent. NeuralX, inc may assign its rights, obligations and/or these Terms at any time in its sole discretion without notice to you."),Ko(),Qo(705,"h2"),Qo(706,"span",16),_s(707,"24."),Ko(),_s(708," Notices"),Ko(),Qo(709,"p"),_s(710,"You consent to receive all communications including notices, agreements, disclosures, or other information from NeuralX, inc electronically. NeuralX, inc may communicate by email or by posting to the NeuralX, inc Service. For support-related inquiries, you may email Support."),Ko(),Qo(711,"p"),_s(712,"Nothing in these Terms or otherwise limits NeuralX, inc\u2019s right to object to subpoenas, claims, or other demands."),Ko(),Qo(713,"h2"),Qo(714,"span",16),_s(715,"25."),Ko(),_s(716," Modification"),Ko(),Qo(717,"p"),_s(718,"We may update these Terms at any time, in our sole discretion. If we do so, we\u2019ll let you know by, at a minimum, posting the updated Terms (as indicated by a revised \u201cLast Updated\u201d date at the top of this page) on the NeuralX, inc Site and/or through the NeuralX, inc Service. Modifications will be effective on the date that they are posted to the NeuralX, inc Site. It\u2019s important that you review the Terms whenever we update them before you use the NeuralX, inc Service. If you continue to use the NeuralX, inc Service after we have posted updated Terms, you are agreeing to be bound by the updated Terms. If you don\u2019t agree to be bound by the updated Terms, then, except as otherwise provided in Section 20(f) \u201cEffect of Changes on Arbitration,\u201d you may not use the NeuralX, inc Service anymore. Because the NeuralX, inc Service is evolving over time we may change or discontinue all or any part of the NeuralX, inc Service, at any time and without notice, at our sole discretion."),Ko(),Qo(719,"h2"),Qo(720,"span",16),_s(721,"26."),Ko(),_s(722," Entire Agreement"),Ko(),Qo(723,"p"),_s(724,"These Terms incorporate any other policies or procedures referenced herein that are posted to the NeuralX, inc Site from time to time:"),Ko(),Qo(725,"p"),_s(726,"In the event of a conflict between any policies posted on the NeuralX, inc Service and these Terms, these Terms will control. These Terms represents the entire understanding between NeuralX, inc and you regarding the NeuralX, inc Service or Content and supersede all prior agreements and understandings regarding the same. If any provision of these Terms is held invalid or unenforceable by an arbitrator or a court of competent jurisdiction, that provision will be enforced to the maximum extent permissible and the other provisions of these Terms will remain in full force and effect."),Ko(),Qo(727,"h2"),Qo(728,"span",16),_s(729,"27."),Ko(),_s(730," Force Majeure"),Ko(),Qo(731,"p"),_s(732,"Neither Party shall be liable for any failure or delay in performance under these terms (other than for delay in the payment of money due and payable in accordance with these terms) for causes beyond the party\u2019s reasonable control and not caused by that party\u2019s fault, or negligence, including, but not limited to, \u201cacts of God\u201d, acts of government, flood, fire, civil unrest, acts of terror, strikes or other labor problems, computer attacks or malicious acts, such as attacks on or through the internet, any internet service provider, telecommunications or hosting facility, but in each case, only if and to the extent that the non-performing Party is without fault in causing such failure or delay, and the failure or delay could not have been prevented by reasonable precautions and measures and cannot reasonably be circumvented by the non-conforming Party through the use of alternate sources, workaround plans, disaster recovery, business continuity measures or other means. Dates by which performance obligations are scheduled to be met will be extended for a period of time equal to the time lost due to any delay so caused."),Ko(),Qo(733,"h2"),Qo(734,"span",16),_s(735,"28."),Ko(),_s(736," Disclosures"),Ko(),Qo(737,"p"),_s(738,"There is no affiliation, connection, association or endorsement of the products, goods or services displayed on this page by the copyright owners, featured recording artists and authors of the sound recordings (and the musical works embodied therein) transmitted through the Feed.fm player."),Ko(),Ko(),Ko(),es(739,"app-footer")}2&e&&(ir(2),Jo("routerLink",va(1,UN)))},directives:[bA,Qd,Yk],styles:['.page[_ngcontent-%COMP%]{padding:6.625rem 0 8.75rem;overflow:hidden}.page__decor-1[_ngcontent-%COMP%]{top:26.25rem;left:18.5rem;background-position:50%;background-repeat:no-repeat;background-size:contain;top:12.4375rem;left:46.5625rem}.page__decor-1[_ngcontent-%COMP%], .page__decor-2[_ngcontent-%COMP%]{position:absolute;width:10.625rem;height:11rem}.page__decor-2[_ngcontent-%COMP%]{top:26.25rem;left:18.5rem;background:url(/assets/images/terms-of-service/decor-2.png) 50% no-repeat;background-size:contain;z-index:1}.page__close[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;position:absolute;left:2.125rem;top:6.4375rem;border:1px solid #fff;display:flex;align-items:center;justify-content:center;font-size:.5rem;color:#fff;border-radius:50%}.page__subtitle[_ngcontent-%COMP%]{width:15rem;display:block;margin:0 auto 1.1875rem;color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-weight:500;line-height:.875rem;text-transform:uppercase;text-align:center}.page__title-block[_ngcontent-%COMP%]{overflow:hidden;margin-top:4.6875rem;margin-bottom:6.25rem;pointer-events:none;position:relative}.page__title[_ngcontent-%COMP%]{color:#fff;text-align:left;white-space:nowrap;margin:0}.page__title-item[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16.875rem;font-weight:700;display:inline-block;word-spacing:-.16em}.page__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.3125rem}.page__content[_ngcontent-%COMP%]{margin:0 auto;width:1044px;max-width:100%;padding-left:184px;padding-right:20px}.page__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:16px;font-weight:400;line-height:26px;text-indent:-5.125rem;margin-bottom:1em}.page__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-line{color:#fff}.page__content[_ngcontent-%COMP%]   .with-number[_ngcontent-%COMP%]{position:relative;text-indent:0;font-size:14px;color:#3f3d3d;line-height:21px}.page__content[_ngcontent-%COMP%]   .with-number[_ngcontent-%COMP%]:first-line{color:inherit}.page__content[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%]{line-height:31px;margin-bottom:1em;text-indent:0}.page__content[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%], .page__content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:21px;font-weight:500}.page__content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:38px;position:relative;margin-bottom:.8em;margin-top:1.5em}.page__content[_ngcontent-%COMP%]   .title-number[_ngcontent-%COMP%]{position:absolute;top:0;left:-187px}.page__content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .page__content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;text-transform:uppercase;margin-bottom:1em;margin-top:2em;position:relative}.page__content[_ngcontent-%COMP%]   .title-number-small[_ngcontent-%COMP%], .page__content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .page__content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:18px;font-weight:400;line-height:26px}.page__content[_ngcontent-%COMP%]   .title-number-small[_ngcontent-%COMP%]{color:#666;position:absolute;left:-187px;top:0}.page__content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.page__content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#3f3d3d;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:14px;font-weight:400;line-height:21px;margin-bottom:1.5em;position:relative}.page__content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10px;left:-15px;width:4px;height:4px;background-color:#d8d8d8;border-radius:50%}.page__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eb3340;transition:.2s ease-in-out}.page__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.page__description[_ngcontent-%COMP%]{color:#fff;font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:32px;font-weight:500;line-height:38px;text-transform:uppercase;margin-bottom:1em;margin-left:-103px}@media (max-width:560px){.page__close[_ngcontent-%COMP%], .page__decor-1[_ngcontent-%COMP%], .page__decor-2[_ngcontent-%COMP%]{display:none}.page__title-block[_ngcontent-%COMP%]{margin-top:3.125rem;margin-bottom:3.125rem}.page__title[_ngcontent-%COMP%]{margin:0}.page__title-item[_ngcontent-%COMP%]{font-size:4.375rem}.page__title__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:.875rem}.page__content[_ngcontent-%COMP%]{padding-right:1.25rem;padding-left:3.5rem}.page__description[_ngcontent-%COMP%]{margin-left:-2.25rem;font-size:1.3125rem;line-height:1.9375rem}.page__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:.875rem;line-height:1.5rem;text-indent:-2.25rem}.page__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-line{color:#fff}.page__content[_ngcontent-%COMP%]   .with-number[_ngcontent-%COMP%]{font-size:.75rem;line-height:1.125rem;text-indent:-2.25rem}.page__content[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%]{font-family:Zoom Pro Wide,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,\\ Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.75rem}.page__content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:500;line-height:2.125rem;text-indent:-2.25rem}.page__content[_ngcontent-%COMP%]   .title-number[_ngcontent-%COMP%]{position:relative;top:0;left:0}.page__content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .page__content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;text-indent:-2.25rem}.page__content[_ngcontent-%COMP%]   .title-number-small[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;left:0;position:relative}.page__content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.75rem;line-height:1.125rem}.page__content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;top:.5625rem;left:-.9375rem;width:.25rem;height:.25rem;border-radius:50%}}']}),e})()}];let BN=(()=>{class e{}return e.\u0275mod=dt({type:e}),e.\u0275inj=le({factory:function(t){return new(t||e)},imports:[[hp.forRoot(HN,zN)],hp]}),e})();const jN=["item"];let VN=(()=>{class e{constructor(e){this.zone=e,this.items=new ba}ngOnInit(){}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.items.toArray().forEach((e,t)=>{var n=e.nativeElement,i={x:window.innerWidth/2,y:window.innerHeight/2},r={x:i.x,y:i.y},o=t?.4-.1*t:1;Rv.set(n,{xPercent:-50,yPercent:-50});var s=Rv.quickSetter(n,"x","px"),a=Rv.quickSetter(n,"y","px");window.addEventListener("mousemove",e=>{r.x=e.x,r.y=e.y}),Rv.ticker.add(()=>{var e=1-Math.pow(1-o,Rv.ticker.deltaRatio());i.x+=(r.x-i.x)*e,i.y+=(r.y-i.y)*e,s(i.x),a(i.y)})})})}}return e.\u0275fac=function(t){return new(t||e)(Yo(il))},e.\u0275cmp=lt({type:e,selectors:[["app-cursor"]],viewQuery:function(e,t){var n;1&e&&Oa(jN,!0),2&e&&Pa(n=ka())&&(t.items=n)},decls:9,vars:0,consts:[[1,"cursor"],[1,"cursor__item"],["item",""]],template:function(e,t){1&e&&(Qo(0,"div",0),es(1,"div",1,2),es(3,"div",1,2),es(5,"div",1,2),es(7,"div",1,2),Ko())},styles:[".cursor[_ngcontent-%COMP%]{position:fixed;pointer-events:none;left:0;top:0;right:0;z-index:100}.cursor__item[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;position:absolute;background-color:red}.cursor__item[_ngcontent-%COMP%]:nth-child(2){opacity:.4}.cursor__item[_ngcontent-%COMP%]:nth-child(3){opacity:.2}.cursor__item[_ngcontent-%COMP%]:nth-child(4){opacity:.1}@media (max-width:560px){.cursor[_ngcontent-%COMP%]{display:none}}"]}),e})(),WN=(()=>{class e{constructor(){this.title="Presence"}ngOnInit(){0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")&&document.body.classList.add("body--webp")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(es(0,"router-outlet"),es(1,"app-cursor"))},directives:[tp,VN],encapsulation:2}),e})(),GN=(()=>{class e{}return e.\u0275mod=dt({type:e,bootstrap:[WN]}),e.\u0275inj=le({factory:function(t){return new(t||e)},providers:[],imports:[[zc,BN]]}),e})();(function(){if(di)throw new Error("Cannot enable prod mode after platform setup.");hi=!1})(),Fc().bootstrapModule(GN).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);